<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>报告编写的艺术-10 练习作业</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-10%20%E7%BB%83%E4%B9%A0%E4%BD%9C%E4%B8%9A/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-10%20%E7%BB%83%E4%B9%A0%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="0-作业格式、目标和准备"><a href="#0-作业格式、目标和准备" class="headerlink" title="0-作业格式、目标和准备"></a>0-作业格式、目标和准备</h1><p>是时候利用你所学到的一切来制作一个完整的报告及其发现（你甚至可以尝试将幻灯片放在一起）。</p><p>为此，您将获得虚构评估的结果（以及足够的上下文），以便您撰写调查结果和报告的其余部分。以下是所提供内容的概述：</p><ul><li>对客户端所做操作的业务上下文描述</li><li>审查的系统&#x2F;站点及其作用</li><li>评估范围</li><li>调查结果列表，包括其他背景和证据</li></ul><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>在撰写报告之前，您需要构建一份报告文档来归档您的发现和摘要。“报告内容”一章中的练习之一是构建此模板文档。如果你已经这样做了，那就太好了！</p><p>“报告内容”一章之前涵盖了报告中需要包含的所有关键部分，以及一些可选部分。请随意在这里进行实验，并以任何最明智的方式构建文档。但是，请确保在文档中包含课程中描述的核心部分。</p><p>就文档的格式而言，这取决于您。事实上，如果你不想构建一个“文档”（比如，Microsoft Word文档或类似的东西），你甚至可以有一个标记文件的集合（或一个大文件）。虽然我建议构建完整的文档来练习格式化，并在完成后查看整个文档，但课程中最重要的部分是围绕内容本身——所以如果你不想，不要觉得你需要全力以赴。</p><p>如果您确实想为虚构评估的虚构客户创建一个幻灯片，那就太好了！利用前面的课程创建一个模板幻灯片，供您在完成报告编写后填写。</p><p>接下来，我将介绍一些完成作业的指导。</p><h1 id="1-指导"><a href="#1-指导" class="headerlink" title="1-指导"></a>1-指导</h1><p>我们已经完成了撰写报告所需的一切。因此，为了确保您回顾此作业的关键课程，帮助您撰写报告的核心章节将是：</p><ul><li>写作风格</li><li>报告内容</li><li>查找文章</li><li>评估后客户反馈&#x2F;评估后会议（用于创建幻灯片）</li></ul><p>在开始之前，我建议您查看您在这些章节中所做的任何笔记，或者再次快速阅读它们，以便您的记忆犹新。然后，我将按以下方式处理任务：</p><ul><li>仔细查看业务背景和评估范围</li><li>查看发现的问题并写下每个发现</li><li>一起查看所有调查结果，以告知您需要在执行摘要和战略建议中编写的内容<ul><li>任何发现都可以链接在一起吗？</li><li>是否有任何建议相似或相同？</li></ul></li><li>撰写执行摘要</li><li>写下您的建议</li><li>填写报告内容章节中概述的必填报告部分的其余部分</li></ul><p>这只是关于所采取方法的高级别建议。虽然你可以按照自己的喜好处理这个问题，但我确实认为在完成文档的其余部分之前，首先专注于最大的任务是很重要的。</p><p>说完这些，让我们继续任务。</p><h1 id="作业-简介"><a href="#作业-简介" class="headerlink" title="作业 - 简介"></a>作业 - 简介</h1><p>这项任务将是 FlexFactory 评估的报告撰写，FlexFactory 是一家销售各种健身相关设备和服装的在线商店。</p><p>评估的两个阶段是：</p><ul><li>平台的 Web 应用程序安全审查</li><li>对支持该平台的面向互联网的资产进行外部基础设施扫描</li></ul><p>在下一课中，我们将详细介绍范围以及在整个评估过程中学到的重要背景。</p><p>请注意，与本课程中的所有示例一样，所描述的组织及其漏洞是虚构的，与其他组织的任何相似之处都是巧合。</p><h1 id="分配-范围和背景"><a href="#分配-范围和背景" class="headerlink" title="分配 - 范围和背景"></a>分配 - 范围和背景</h1><p>为了让您使用本课程中提供的所有信息撰写一份详尽的报告，让我们对正在评估的内容进行描述，讨论重要的背景信息，并概述工作范围。</p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>FlexFactory 是一家销售健身器材和服装的在线商店。查看他们的网站，您会发现它包含您对在线商店的所有期望：</p><ul><li>商店本身进行购买</li><li>客户身份验证（因此，大概是以前和当前订单，帐户管理等的一些身份验证页面）</li><li>一个简单的支持表格和常见问题解答区域</li></ul><p>你请求了一个启动电话，以便与客户端一起运行范围，并讨论一些应用程序、它的部署方式以及它是用什么构建的。该调用非常有用，系统将引导您完成解决方案的高级演练。</p><p>提供了下图：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231952048.png" alt="img"></p><p>以下是您在通话中所做的笔记：</p><ul><li>Web 应用程序是使用 Python Django Web 框架编写的</li><li>前端使用典型的 Django 视图来呈现内容</li><li>前端使用较旧的前端技术：jQuery 和 Bootstrap</li><li>生产环境跨越多个主机</li><li>每台主机都是由 Linode 托管的 VPS（虚拟专用服务器），其规格与主机上运行的要求相匹配，并有空间处理大量流量和平台使用（例如，如果正在进行销售）</li><li>Django 应用程序运行在 Nginx Web 服务器后面作为 WSGI 应用程序运行的主机之一上</li><li>该解决方案使用在另一台主机上运行的 Postgres 数据库，该数据库具有更高的存储和 RAM</li><li>Redis 在另一台主机上运行，用作需要处理的订单的队列</li><li>另一个主机从队列中选取项目，并使用一些 Python 脚本处理它们</li><li>您注意到主机具有公共 IP 地址，而这些地址可能不应该</li><li>该解决方案利用了多种第三方服务：<ul><li>SMS 提供商用于向客户更新订单</li><li>电子邮件提供商用于相同的功能，以及营销和帐户管理类型的功能（注册，忘记密码等）</li><li>该解决方案不处理支付卡信息，而是重定向到 WorldPay 以执行付款</li><li>该平台与快递服务进行通信以进行运输</li></ul></li><li>部署完全由 Ansible 管理和编排</li><li>使用共享管理员帐户通过 SSH 执行对主机的访问（尽管 ansible 在每个主机上也有自己的特权用户）</li><li>主机之间的通信不使用传输层加密</li><li>该应用程序有 20,000 名注册用户，每天有 2,500 名访问者，每天有 250 次购买。当促销开始时，每日访客和客户可以增加两倍<ul><li>许多客户以访客身份结账，不创建帐户</li></ul></li><li>解决方案中的主机用于存储 Postgres 数据库的定期备份</li></ul><p>你问客户他们想从评估中得到什么。他们主要关心的是了解攻击者在互联网上可以使用的攻击面，以及执行一般的 Web 应用程序安全评估。</p><p>您还询问了客户他们认为平台最重要的资产是什么，他们回答了他们的用户数据和用户的支付卡数据。他们补充说，他们并不担心支付卡数据，因为他们认为他们目前的实施对WorldPay是安全的。你做了一个笔记，以健全性检查你在测试期间看到的实现。您还私下指出，平台本身的正常运行时间可能也很重要，因为如果解决方案出现故障，他们将无法进行销售。</p><h1 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h1><p>虽然您获得了有关部署和后端配置的大量有用信息，但评估侧重于对面向外部的网络基础设施的黑盒评估和对在线平台的 Web 应用程序评估。</p><p>范围信息如下：</p><p><strong>外部基础设施评估</strong></p><p>少量服务器用作解决方案部署和管理的一部分。下面列出了这些：</p><ul><li>88.xxx.xxx.11</li><li>88.xxx.xxx.22</li><li>88.xxx.xxx.33</li><li>88.xxx.xxx.44</li><li>88.xxx.xxx.55</li></ul><p><strong>Web 应用程序评估</strong></p><p>网站的 Web 应用程序评估 <a href="https://www.flexfactory.fitness.这是生产/">https://www.flexfactory.fitness。这是生产</a> Web 应用程序，但已提供以下测试帐户用于测试：</p><ul><li>test_user1 @flexfactory.健身</li><li>test_user2 @flexfactory.健身</li><li>test_user3 @flexfactory.健身</li><li>test_user4 @flexfactory.健身</li></ul><p>密码已单独传达给您。</p><hr><p>在下一节中，我们将介绍评估期间发现的发现。</p><h1 id="4-作业-调查结果"><a href="#4-作业-调查结果" class="headerlink" title="4-作业 - 调查结果"></a>4-作业 - 调查结果</h1><p>以下信息是在评估过程中观察到和发现的信息。</p><h1 id="外部基础设施评估"><a href="#外部基础设施评估" class="headerlink" title="外部基础设施评估"></a>外部基础设施评估</h1><p>在测试 FlexFactory 外部网络基础架构时，您做了以下注意事项：</p><ul><li>SSH 对范围内的所有服务器都开放</li><li>暴露的端口很少，只有几个问题</li><li>如果利用 Redis 的暴露可能会产生严重后果</li></ul><h2 id="Redis-暴露在互联网上"><a href="#Redis-暴露在互联网上" class="headerlink" title="Redis 暴露在互联网上"></a>Redis 暴露在互联网上</h2><p><strong>观察</strong></p><p>Redis（和 SSH）暴露在互联网上。</p><p><strong>证据</strong></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">Starting</span> <span class="hljs-selector-tag">Nmap</span> <span class="hljs-number">7.80</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org ) at YYYY-MM-DD TIME</span><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">44</span><br>Host is up (<span class="hljs-number">0.080s</span> latency).<br><br><br>PORT     STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp   open  ssh     OpenSSH <span class="hljs-number">8.2</span>p1 Ubuntu <span class="hljs-number">4</span>ubuntu0.<span class="hljs-number">2</span> (Ubuntu Linux; protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:ff (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span> (ED25519)<br><span class="hljs-number">6379</span>/tcp open  redis   Redis key-value store <span class="hljs-number">6.0</span>.<span class="hljs-number">9</span><br>| <span class="hljs-attribute">redis-info</span>: <br>|   <span class="hljs-attribute">redis_version</span>:<span class="hljs-number">6.0</span>.<span class="hljs-number">9</span><br>|   <span class="hljs-attribute">redis_git_sha1</span>:<span class="hljs-number">00000000</span><br>|   <span class="hljs-attribute">redis_git_dirty</span>:<span class="hljs-number">0</span><br>|   <span class="hljs-attribute">redis_build_id</span>:abcdef1234567890<br>|   <span class="hljs-attribute">redis_mode</span>:standalone<br>|   <span class="hljs-attribute">os</span>:Linux <span class="hljs-number">4.15</span>.<span class="hljs-number">0</span>-<span class="hljs-number">54</span>-generic x86_64<br>|   <span class="hljs-attribute">arch_bits</span>:<span class="hljs-number">64</span><br>|   <span class="hljs-attribute">multiplexing_api</span>:epoll<br>|   <span class="hljs-attribute">atomicvar_api</span>:atomic-builtin<br>|   <span class="hljs-attribute">gcc_version</span>:<span class="hljs-number">7.3</span>.<span class="hljs-number">0</span><br>|   <span class="hljs-attribute">process_id</span>:<span class="hljs-number">77</span><br>|   <span class="hljs-attribute">run_id</span>:<span class="hljs-number">1234567890</span>abcdef1234567890abcdef<br>|   <span class="hljs-attribute">tcp_port</span>:<span class="hljs-number">6379</span><br>|   <span class="hljs-attribute">uptime_in_seconds</span>:<span class="hljs-number">8675309</span><br>|   <span class="hljs-attribute">uptime_in_days</span>:<span class="hljs-number">100</span><br>|   <span class="hljs-attribute">hz</span>:<span class="hljs-number">10</span><br>|   <span class="hljs-attribute">configured_hz</span>:<span class="hljs-number">10</span><br>|   <span class="hljs-attribute">lru_clock</span>:<span class="hljs-number">1234567</span><br>|   <span class="hljs-attribute">executable</span>:/usr/local/bin/redis-server<br>|_  <span class="hljs-attribute">config_file</span>:/etc/redis/redis.conf<br>Service <span class="hljs-attribute">Info</span>: <span class="hljs-attribute">OS</span>: Linux; <span class="hljs-attribute">CPE</span>: <span class="hljs-attribute">cpe</span>:/<span class="hljs-attribute">o</span>:<span class="hljs-attribute">linux</span>:linux_kernel<br><br><br>Nmap <span class="hljs-attribute">done</span>: <span class="hljs-number">1</span> IP address (<span class="hljs-number">1</span> host up) scanned in <span class="hljs-number">13.37</span> seconds<br></code></pre></td></tr></table></figure><h2 id="缺少对-Redis-的传输层加密"><a href="#缺少对-Redis-的传输层加密" class="headerlink" title="缺少对 Redis 的传输层加密"></a>缺少对 Redis 的传输层加密</h2><p><strong>观察</strong></p><ul><li>您注意到 Redis 未与常用的 TLS 端口一起使用 - 而是与纯文本版本一起使用</li><li>您可以在不提供任何 TLS 配置（例如 –tls）的情况下与服务进行交互</li></ul><p><strong>证据</strong></p><p>检索到的 Redis 服务器配置：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs dts">$ redis-cli -h <span class="hljs-number">88.</span>xxx.xxx<span class="hljs-number">.44</span> -p <span class="hljs-number">6379</span><br><span class="hljs-number">88.</span>xxx.xxx<span class="hljs-number">.44</span>:<span class="hljs-number">6379</span>&gt; INFO<br><span class="hljs-meta"># Server</span><br><span class="hljs-symbol">redis_version:</span><span class="hljs-number">6.0</span><span class="hljs-number">.9</span><br><span class="hljs-symbol">redis_git_sha1:</span><span class="hljs-number">00000000</span><br><span class="hljs-symbol">redis_git_dirty:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">redis_build_id:</span>abcdef1234567890<br><span class="hljs-symbol">os:</span>Linux <span class="hljs-number">4.15</span><span class="hljs-number">.0</span><span class="hljs-number">-54</span>-generic x86_64<br><span class="hljs-symbol">arch_bits:</span><span class="hljs-number">64</span><br><span class="hljs-symbol">multiplexing_api:</span>epoll<br><span class="hljs-symbol">atomicvar_api:</span>atomic-builtin<br><span class="hljs-symbol">gcc_version:</span><span class="hljs-number">7.3</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">process_id:</span><span class="hljs-number">77</span><br><span class="hljs-symbol">run_id:</span><span class="hljs-number">1234567890</span>abcdef1234567890abcdef<br><span class="hljs-symbol">tcp_port:</span><span class="hljs-number">6379</span><br><span class="hljs-symbol">uptime_in_seconds:</span><span class="hljs-number">8675309</span><br><span class="hljs-symbol">uptime_in_days:</span><span class="hljs-number">100</span><br><span class="hljs-symbol">hz:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">configured_hz:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">lru_clock:</span><span class="hljs-number">1234567</span><br><span class="hljs-symbol">executable:</span><span class="hljs-keyword">/usr/</span>local<span class="hljs-keyword">/bin/</span>redis-server<br><span class="hljs-symbol">config_file:</span><span class="hljs-keyword">/etc/</span>redis/redis.conf<br><br><br><span class="hljs-meta"># Clients</span><br><span class="hljs-symbol">connected_clients:</span><span class="hljs-number">1</span><br><span class="hljs-symbol">client_recent_max_input_buffer:</span><span class="hljs-number">2</span><br><span class="hljs-symbol">client_recent_max_output_buffer:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">blocked_clients:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># Memory</span><br><span class="hljs-symbol">used_memory:</span><span class="hljs-number">1012024</span><br><span class="hljs-symbol">used_memory_human:</span><span class="hljs-number">987.24</span>K<br><span class="hljs-symbol">used_memory_rss:</span><span class="hljs-number">2039488</span><br><span class="hljs-symbol">used_memory_rss_human:</span><span class="hljs-number">1.94</span>M<br><span class="hljs-symbol">used_memory_peak:</span><span class="hljs-number">12121212</span><br><span class="hljs-symbol">used_memory_peak_human:</span><span class="hljs-number">11.56</span>M<br><span class="hljs-symbol">total_system_memory:</span><span class="hljs-number">67423423488</span><br><span class="hljs-symbol">total_system_memory_human:</span><span class="hljs-number">62.78</span>G<br><span class="hljs-symbol">used_memory_lua:</span><span class="hljs-number">37888</span><br><span class="hljs-symbol">used_memory_lua_human:</span><span class="hljs-number">37.00</span>K<br><span class="hljs-symbol">maxmemory:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">maxmemory_human:</span><span class="hljs-number">0</span>B<br><span class="hljs-symbol">maxmemory_policy:</span>noeviction<br><span class="hljs-symbol">mem_fragmentation_ratio:</span><span class="hljs-number">2.01</span><br><span class="hljs-symbol">mem_fragmentation_bytes:</span><span class="hljs-number">1028128</span><br><br><br><span class="hljs-meta"># Persistence</span><br><span class="hljs-symbol">loading:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_changes_since_last_save:</span><span class="hljs-number">104</span><br><span class="hljs-symbol">rdb_bgsave_in_progress:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_last_save_time:</span><span class="hljs-number">1600000000</span><br><span class="hljs-symbol">rdb_last_bgsave_status:</span>ok<br><span class="hljs-symbol">rdb_last_bgsave_time_sec:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_current_bgsave_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">rdb_last_cow_size:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_enabled:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_rewrite_in_progress:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_rewrite_scheduled:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_last_rewrite_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">aof_current_rewrite_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">aof_last_bgrewrite_status:</span>ok<br><span class="hljs-symbol">aof_last_write_status:</span>ok<br><br><br><span class="hljs-meta"># Stats</span><br><span class="hljs-symbol">total_connections_received:</span><span class="hljs-number">42</span><br><span class="hljs-symbol">total_commands_processed:</span><span class="hljs-number">105</span><br><span class="hljs-symbol">instantaneous_ops_per_sec:</span><span class="hljs-number">1</span><br><span class="hljs-symbol">total_net_input_bytes:</span><span class="hljs-number">2048</span><br><span class="hljs-symbol">total_net_output_bytes:</span><span class="hljs-number">1024</span><br><span class="hljs-symbol">instantaneous_input_kbps:</span><span class="hljs-number">0.1</span><br><span class="hljs-symbol">instantaneous_output_kbps:</span><span class="hljs-number">0.05</span><br><span class="hljs-symbol">rejected_connections:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_full:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_partial_ok:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_partial_err:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">expired_keys:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">evicted_keys:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">keyspace_hits:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">keyspace_misses:</span><span class="hljs-number">5</span><br><span class="hljs-symbol">pubsub_channels:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">pubsub_patterns:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">latest_fork_usec:</span><span class="hljs-number">500</span><br><br><br><span class="hljs-meta"># Replication</span><br><span class="hljs-symbol">role:</span>master<br><span class="hljs-symbol">connected_slaves:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># CPU</span><br><span class="hljs-symbol">used_cpu_sys:</span><span class="hljs-number">0.1</span><br><span class="hljs-symbol">used_cpu_user:</span><span class="hljs-number">0.2</span><br><span class="hljs-symbol">used_cpu_sys_children:</span><span class="hljs-number">0.0</span><br><span class="hljs-symbol">used_cpu_user_children:</span><span class="hljs-number">0.0</span><br><br><br><span class="hljs-meta"># Cluster</span><br><span class="hljs-symbol">cluster_enabled:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># Keyspace</span><br><span class="hljs-symbol">db0:</span><span class="hljs-attr">keys</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>,<span class="hljs-attr">expires</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>,avg_<span class="hljs-attr">ttl</span><span class="hljs-operator">=</span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="缺少对-Redis-的身份验证"><a href="#缺少对-Redis-的身份验证" class="headerlink" title="缺少对 Redis 的身份验证"></a>缺少对 Redis 的身份验证</h2><p><strong>观察</strong></p><ul><li>您确认可以使用 Redis CLI 工具查询服务器</li><li>根据您与客户的讨论，您猜测了列表可能使用的内容，并发现“订单”返回了信息</li><li>这些看起来像序列化的 python 对象</li><li>您与客户讨论了这个问题，他们说这不是意料之中的，您将能够使用您发现的访问权限从队列中添加、编辑和删除订单</li></ul><p><strong>证据</strong></p><p>检索到的 Redis 服务器配置：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs dts">$ redis-cli -h <span class="hljs-number">88.</span>xxx.xxx<span class="hljs-number">.44</span> -p <span class="hljs-number">6379</span><br><span class="hljs-number">88.</span>xxx.xxx<span class="hljs-number">.44</span>:<span class="hljs-number">6379</span>&gt; INFO<br><span class="hljs-meta"># Server</span><br><span class="hljs-symbol">redis_version:</span><span class="hljs-number">6.0</span><span class="hljs-number">.9</span><br><span class="hljs-symbol">redis_git_sha1:</span><span class="hljs-number">00000000</span><br><span class="hljs-symbol">redis_git_dirty:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">redis_build_id:</span>abcdef1234567890<br><span class="hljs-symbol">os:</span>Linux <span class="hljs-number">4.15</span><span class="hljs-number">.0</span><span class="hljs-number">-54</span>-generic x86_64<br><span class="hljs-symbol">arch_bits:</span><span class="hljs-number">64</span><br><span class="hljs-symbol">multiplexing_api:</span>epoll<br><span class="hljs-symbol">atomicvar_api:</span>atomic-builtin<br><span class="hljs-symbol">gcc_version:</span><span class="hljs-number">7.3</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">process_id:</span><span class="hljs-number">77</span><br><span class="hljs-symbol">run_id:</span><span class="hljs-number">1234567890</span>abcdef1234567890abcdef<br><span class="hljs-symbol">tcp_port:</span><span class="hljs-number">6379</span><br><span class="hljs-symbol">uptime_in_seconds:</span><span class="hljs-number">8675309</span><br><span class="hljs-symbol">uptime_in_days:</span><span class="hljs-number">100</span><br><span class="hljs-symbol">hz:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">configured_hz:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">lru_clock:</span><span class="hljs-number">1234567</span><br><span class="hljs-symbol">executable:</span><span class="hljs-keyword">/usr/</span>local<span class="hljs-keyword">/bin/</span>redis-server<br><span class="hljs-symbol">config_file:</span><span class="hljs-keyword">/etc/</span>redis/redis.conf<br><br><br><span class="hljs-meta"># Clients</span><br><span class="hljs-symbol">connected_clients:</span><span class="hljs-number">1</span><br><span class="hljs-symbol">client_recent_max_input_buffer:</span><span class="hljs-number">2</span><br><span class="hljs-symbol">client_recent_max_output_buffer:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">blocked_clients:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># Memory</span><br><span class="hljs-symbol">used_memory:</span><span class="hljs-number">1012024</span><br><span class="hljs-symbol">used_memory_human:</span><span class="hljs-number">987.24</span>K<br><span class="hljs-symbol">used_memory_rss:</span><span class="hljs-number">2039488</span><br><span class="hljs-symbol">used_memory_rss_human:</span><span class="hljs-number">1.94</span>M<br><span class="hljs-symbol">used_memory_peak:</span><span class="hljs-number">12121212</span><br><span class="hljs-symbol">used_memory_peak_human:</span><span class="hljs-number">11.56</span>M<br><span class="hljs-symbol">total_system_memory:</span><span class="hljs-number">67423423488</span><br><span class="hljs-symbol">total_system_memory_human:</span><span class="hljs-number">62.78</span>G<br><span class="hljs-symbol">used_memory_lua:</span><span class="hljs-number">37888</span><br><span class="hljs-symbol">used_memory_lua_human:</span><span class="hljs-number">37.00</span>K<br><span class="hljs-symbol">maxmemory:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">maxmemory_human:</span><span class="hljs-number">0</span>B<br><span class="hljs-symbol">maxmemory_policy:</span>noeviction<br><span class="hljs-symbol">mem_fragmentation_ratio:</span><span class="hljs-number">2.01</span><br><span class="hljs-symbol">mem_fragmentation_bytes:</span><span class="hljs-number">1028128</span><br><br><br><span class="hljs-meta"># Persistence</span><br><span class="hljs-symbol">loading:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_changes_since_last_save:</span><span class="hljs-number">104</span><br><span class="hljs-symbol">rdb_bgsave_in_progress:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_last_save_time:</span><span class="hljs-number">1600000000</span><br><span class="hljs-symbol">rdb_last_bgsave_status:</span>ok<br><span class="hljs-symbol">rdb_last_bgsave_time_sec:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">rdb_current_bgsave_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">rdb_last_cow_size:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_enabled:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_rewrite_in_progress:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_rewrite_scheduled:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">aof_last_rewrite_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">aof_current_rewrite_time_sec:</span><span class="hljs-number">-1</span><br><span class="hljs-symbol">aof_last_bgrewrite_status:</span>ok<br><span class="hljs-symbol">aof_last_write_status:</span>ok<br><br><br><span class="hljs-meta"># Stats</span><br><span class="hljs-symbol">total_connections_received:</span><span class="hljs-number">42</span><br><span class="hljs-symbol">total_commands_processed:</span><span class="hljs-number">105</span><br><span class="hljs-symbol">instantaneous_ops_per_sec:</span><span class="hljs-number">1</span><br><span class="hljs-symbol">total_net_input_bytes:</span><span class="hljs-number">2048</span><br><span class="hljs-symbol">total_net_output_bytes:</span><span class="hljs-number">1024</span><br><span class="hljs-symbol">instantaneous_input_kbps:</span><span class="hljs-number">0.1</span><br><span class="hljs-symbol">instantaneous_output_kbps:</span><span class="hljs-number">0.05</span><br><span class="hljs-symbol">rejected_connections:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_full:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_partial_ok:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">sync_partial_err:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">expired_keys:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">evicted_keys:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">keyspace_hits:</span><span class="hljs-number">10</span><br><span class="hljs-symbol">keyspace_misses:</span><span class="hljs-number">5</span><br><span class="hljs-symbol">pubsub_channels:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">pubsub_patterns:</span><span class="hljs-number">0</span><br><span class="hljs-symbol">latest_fork_usec:</span><span class="hljs-number">500</span><br><br><br><span class="hljs-meta"># Replication</span><br><span class="hljs-symbol">role:</span>master<br><span class="hljs-symbol">connected_slaves:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># CPU</span><br><span class="hljs-symbol">used_cpu_sys:</span><span class="hljs-number">0.1</span><br><span class="hljs-symbol">used_cpu_user:</span><span class="hljs-number">0.2</span><br><span class="hljs-symbol">used_cpu_sys_children:</span><span class="hljs-number">0.0</span><br><span class="hljs-symbol">used_cpu_user_children:</span><span class="hljs-number">0.0</span><br><br><br><span class="hljs-meta"># Cluster</span><br><span class="hljs-symbol">cluster_enabled:</span><span class="hljs-number">0</span><br><br><br><span class="hljs-meta"># Keyspace</span><br><span class="hljs-symbol">db0:</span><span class="hljs-attr">keys</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>,<span class="hljs-attr">expires</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>,avg_<span class="hljs-attr">ttl</span><span class="hljs-operator">=</span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>从订单列表中提取的订单的部分副本：</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs wren">$ <span class="hljs-variable">redis</span><span class="hljs-operator">-</span><span class="hljs-variable">cli</span> <span class="hljs-operator">-</span><span class="hljs-variable">h</span> <span class="hljs-number">88.</span><span class="hljs-variable">xxx</span>.<span class="hljs-property">xxx</span><span class="hljs-number">.44</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> <span class="hljs-number">6379</span><br><span class="hljs-number">88.</span><span class="hljs-variable">xxx</span>.<span class="hljs-property">xxx</span><span class="hljs-number">.44</span>:<span class="hljs-number">6379</span><span class="hljs-operator">&gt;</span> <span class="hljs-variable">LRANGE</span> <span class="hljs-variable">orders</span> <span class="hljs-number">0</span> <span class="hljs-number">-1</span><br><span class="hljs-number">1</span>) <span class="hljs-string">&quot;<span class="hljs-char escape_">\x80</span><span class="hljs-char escape_">\x04</span><span class="hljs-char escape_">\x95</span><span class="hljs-char escape_">\x33</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span>&#125;<span class="hljs-char escape_">\x94</span>(\x8c<span class="hljs-char escape_">\x04</span>name<span class="hljs-char escape_">\x94</span>\x8c<span class="hljs-char escape_">\x12</span>John Doe<span class="hljs-char escape_">\x94</span>\x8c<span class="hljs-char escape_">\x06</span>amount<span class="hljs-char escape_">\x94</span>G@\x1c\xcc\xcc\xcc\xcc\xcc\xcd\x8c<span class="hljs-char escape_">\x05</span>email<span class="hljs-char escape_">\x94</span>\x8c\x1fjohn.doe@example.com<span class="hljs-char escape_">\x94</span>u.&quot;</span><br><span class="hljs-number">2</span>) <span class="hljs-string">&quot;<span class="hljs-char escape_">\x80</span><span class="hljs-char escape_">\x04</span><span class="hljs-char escape_">\x95</span><span class="hljs-char escape_">\x33</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span>&#125;<span class="hljs-char escape_">\x94</span>(\x8c<span class="hljs-char escape_">\x04</span>name<span class="hljs-char escape_">\x94</span>\x8c<span class="hljs-char escape_">\x11</span>Jane Smith<span class="hljs-char escape_">\x94</span>\x8c<span class="hljs-char escape_">\x06</span>amount<span class="hljs-char escape_">\x94</span>G@\xd0<span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span><span class="hljs-char escape_">\x00</span>\x8c<span class="hljs-char escape_">\x05</span>email<span class="hljs-char escape_">\x94</span>\x8c\x1ejane.smith@example.com<span class="hljs-char escape_">\x94</span>u.&quot;</span><br><span class="hljs-variable">SNIP</span><br></code></pre></td></tr></table></figure><h2 id="弱-TLS-密码"><a href="#弱-TLS-密码" class="headerlink" title="弱 TLS 密码"></a>弱 TLS 密码</h2><p><strong>观察</strong></p><p>您使用 testssl 工具扫描了 FlexFactory 商店的 HTTPS 服务，发现一些过时且薄弱的密码正在使用中。</p><p><strong>证据</strong></p><p>从 testssl 工具扫描结果：</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs smali">Starting testssl.sh v3.0 against 88.xxx.xxx.11:443 (88.xxx.xxx.11) at (current date)<br><br><br> ==========================================================( testssl.sh )=====<br><br><br> Service detected:        HTTP<br><br><br> Testing protocols via sockets<br><br><br> SSLv2     <span class="hljs-built_in"> not </span>offered (OK)<br> SSLv3     <span class="hljs-built_in"> not </span>offered (OK)<br> TLS 1      offered<br> TLS 1.1    offered<br> TLS 1.2    offered<br> TLS 1.3   <span class="hljs-built_in"> not </span>offered<span class="hljs-built_in"> or </span>not supported<br> DTLSv1.0  <span class="hljs-built_in"> not </span>offered<br> DTLSv1.2  <span class="hljs-built_in"> not </span>offered<br><br><br> Testing cipher categories<br><br><br> NULL ciphers (no encryption)<span class="hljs-built_in"> not </span>offered (OK)<br> Anonymous NULL Ciphers (no authentication)<span class="hljs-built_in"> not </span>offered (OK)<br> Export ciphers (w/o ADH+NULL)<span class="hljs-built_in"> not </span>offered (OK)<br> LOW: 64 Bit + DES, RC[2,4] (w/o export)<span class="hljs-built_in"> not </span>offered (OK)<br> Weak 128 Bit ciphers (SEED, IDEA, RC[2,4] MD5) offered<br> Triple DES Ciphers / IDEA<span class="hljs-built_in"> not </span>offered<br> High encryption ciphers (AES+Camellia, no AEAD) offered<br> Strong encryption ciphers (AES+Camellia+AEAD) offered<br><br><br> Testing individual cipher strengths<br><br><br> Weak 128 Bit Ciphers (SEED, IDEA, RC[2,4] MD5) offered on TLSv1.0, TLSv1.1, TLSv1.2<br>   TLS_RSA_WITH_RC4_128_MD5 (0x4)                 WEAK 112<br>   TLS_RSA_WITH_RC4_128_SHA (0x5)                 WEAK 112<br>   TLS_RSA_WITH_SEED_CBC_SHA (0x96)               WEAK 128<br><br><br> ---------------------------------------------------------------<br><br><br> The server supports weak cipher suites that are deprecated<span class="hljs-built_in"> and </span>considered insecure. This includes support for cipher suites using RC4 128/MD5, RC4 128/SHA,<span class="hljs-built_in"> and </span>SEED CBC/SHA across TLS versions 1.0, 1.1,<span class="hljs-built_in"> and </span>1.2. It is recommended to disable these cipher suites<span class="hljs-built_in"> and </span>upgrade to stronger ciphers.<br><br><br> ========================================================== ( testssl.sh )=====<br></code></pre></td></tr></table></figure><h2 id="已启用-TLS-版本-1-0-和-1-1"><a href="#已启用-TLS-版本-1-0-和-1-1" class="headerlink" title="已启用 TLS 版本 1.0 和 1.1"></a>已启用 TLS 版本 1.0 和 1.1</h2><p><strong>观察</strong></p><p>您使用 testssl 工具扫描了 FlexFactory 商店的 HTTPS 服务，发现启用了一些已弃用的 TLS 协议。</p><p><strong>证据</strong></p><p>从 testssl 工具扫描结果：</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs smali">Starting testssl.sh v3.0 against 88.xxx.xxx.11:443 (88.xxx.xxx.11) at (current date)<br><br><br> ==========================================================( testssl.sh )=====<br><br><br> Service detected:        HTTP<br><br><br> Testing protocols via sockets<br><br><br> SSLv2     <span class="hljs-built_in"> not </span>offered (OK)<br> SSLv3     <span class="hljs-built_in"> not </span>offered (OK)<br> TLS 1      offered<br> TLS 1.1    offered<br> TLS 1.2    offered<br> TLS 1.3   <span class="hljs-built_in"> not </span>offered<span class="hljs-built_in"> or </span>not supported<br> DTLSv1.0  <span class="hljs-built_in"> not </span>offered<br> DTLSv1.2  <span class="hljs-built_in"> not </span>offered<br><br><br> Testing cipher categories<br><br><br> NULL ciphers (no encryption)<span class="hljs-built_in"> not </span>offered (OK)<br> Anonymous NULL Ciphers (no authentication)<span class="hljs-built_in"> not </span>offered (OK)<br> Export ciphers (w/o ADH+NULL)<span class="hljs-built_in"> not </span>offered (OK)<br> LOW: 64 Bit + DES, RC[2,4] (w/o export)<span class="hljs-built_in"> not </span>offered (OK)<br> Weak 128 Bit ciphers (SEED, IDEA, RC[2,4] MD5) offered<br> Triple DES Ciphers / IDEA<span class="hljs-built_in"> not </span>offered<br> High encryption ciphers (AES+Camellia, no AEAD) offered<br> Strong encryption ciphers (AES+Camellia+AEAD) offered<br><br><br> Testing individual cipher strengths<br><br><br> Weak 128 Bit Ciphers (SEED, IDEA, RC[2,4] MD5) offered on TLSv1.0, TLSv1.1, TLSv1.2<br>   TLS_RSA_WITH_RC4_128_MD5 (0x4)                 WEAK 112<br>   TLS_RSA_WITH_RC4_128_SHA (0x5)                 WEAK 112<br>   TLS_RSA_WITH_SEED_CBC_SHA (0x96)               WEAK 128<br><br><br> ---------------------------------------------------------------<br><br><br> The server supports weak cipher suites that are deprecated<span class="hljs-built_in"> and </span>considered insecure. This includes support for cipher suites using RC4 128/MD5, RC4 128/SHA,<span class="hljs-built_in"> and </span>SEED CBC/SHA across TLS versions 1.0, 1.1,<span class="hljs-built_in"> and </span>1.2. It is recommended to disable these cipher suites<span class="hljs-built_in"> and </span>upgrade to stronger ciphers.<br><br><br> ========================================================== ( testssl.sh )=====<br></code></pre></td></tr></table></figure><h2 id="暴露在-Internet-上的-SSH"><a href="#暴露在-Internet-上的-SSH" class="headerlink" title="暴露在 Internet 上的 SSH"></a>暴露在 Internet 上的 SSH</h2><p><strong>观察</strong></p><ul><li>所有扫描的服务器都打开了 SSH</li><li>密码猜测攻击未成功</li><li>使用了最新版本的OpenSSH</li></ul><p><strong>证据</strong></p><p>端口 22 的 Nmap 扫描结果：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">Starting</span> <span class="hljs-selector-tag">Nmap</span> <span class="hljs-number">7.80</span> ( <span class="hljs-attribute">https</span>:<span class="hljs-comment">//nmap.org ) at YYYY-MM-DD TIME</span><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">11</span><br>Host is up (<span class="hljs-number">0.076s</span> latency).<br>PORT   STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp open  ssh     OpenSSH <span class="hljs-number">8.4</span>p1 Debian <span class="hljs-number">10</span>+deb11u1 (protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:ff (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:aa (ED25519)<br><br><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">22</span><br>Host is up (<span class="hljs-number">0.059s</span> latency).<br>PORT   STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp open  ssh     OpenSSH <span class="hljs-number">8.4</span>p1 Debian <span class="hljs-number">10</span>+deb11u1 (protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:ff (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:bb (ED25519)<br><br><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">33</span><br>Host is up (<span class="hljs-number">0.042s</span> latency).<br>PORT   STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp open  ssh     OpenSSH <span class="hljs-number">8.4</span>p1 Debian <span class="hljs-number">10</span>+deb11u1 (protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span> (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span> (ED25519)<br><br><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">44</span><br>Host is up (<span class="hljs-number">0.031s</span> latency).<br>PORT   STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp open  ssh     OpenSSH <span class="hljs-number">8.4</span>p1 Debian <span class="hljs-number">10</span>+deb11u1 (protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span>:<span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span> (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-number">88</span>:<span class="hljs-number">99</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-number">00</span>:<span class="hljs-number">11</span>:<span class="hljs-number">22</span>:<span class="hljs-number">33</span>:<span class="hljs-number">44</span>:<span class="hljs-number">55</span>:<span class="hljs-number">66</span>:<span class="hljs-number">77</span> (ED25519)<br><br><br>Nmap scan report for <span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">55</span><br>Host is up (<span class="hljs-number">0.073s</span> latency).<br>PORT   STATE SERVICE VERSION<br><span class="hljs-number">22</span>/tcp open  ssh     OpenSSH <span class="hljs-number">8.4</span>p1 Debian <span class="hljs-number">10</span>+deb11u1 (protocol <span class="hljs-number">2.0</span>)<br>| <span class="hljs-attribute">ssh-hostkey</span>: <br>|   <span class="hljs-number">3072</span> <span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:ee (RSA)<br>|   <span class="hljs-number">256</span> <span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:<span class="hljs-attribute">cc</span>:<span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span> (ECDSA)<br>|_  <span class="hljs-number">256</span> <span class="hljs-attribute">bb</span>:<span class="hljs-attribute">aa</span>:<span class="hljs-number">99</span>:<span class="hljs-number">88</span>:<span class="hljs-number">77</span>:<span class="hljs-number">66</span>:<span class="hljs-number">55</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33</span>:<span class="hljs-number">22</span>:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-attribute">ff</span>:<span class="hljs-attribute">ee</span>:<span class="hljs-attribute">dd</span>:cc (ED25519)<br><br><br>Nmap <span class="hljs-attribute">done</span>: <span class="hljs-number">5</span> IP addresses (<span class="hljs-number">5</span> hosts up) scanned in <span class="hljs-number">13.37</span> seconds<br></code></pre></td></tr></table></figure><h1 id="Web-应用程序评估"><a href="#Web-应用程序评估" class="headerlink" title="Web 应用程序评估"></a>Web 应用程序评估</h1><p>在测试 FlexFactory 的 Web 应用程序时，您做了一些笔记：</p><ul><li>Web 应用程序感觉相当安全，但发现了许多发现。这些感觉像是规则的例外，因为它们并不广泛传播</li><li>还发现了许多问题，可以解决这些问题以强化应用程序并提高用户帐户安全性</li></ul><h2 id="Django-管理面板公开"><a href="#Django-管理面板公开" class="headerlink" title="Django 管理面板公开"></a>Django 管理面板公开</h2><p><strong>观察</strong></p><ul><li>你发现商店的 Django 应用程序的管理面板暴露了</li><li>使用常见和预期用户名进行密码猜测攻击，但没有成功</li><li>没有看到多因素身份验证，尽管客户在您询问时向您保证它存在</li><li>客户说，这就是他们的客户服务台用户访问客户信息的方式</li></ul><p><strong>证据</strong></p><p>找到以下页面：</p><p><strong><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231953750.png" alt="img"></strong></p><p>这是您询问 MFA 后客户回复的电子邮件：</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">Subject:</span> RE: Quick Q <span class="hljs-keyword">on</span> MFA <span class="hljs-keyword">for</span> our Django Admin Panel<br><span class="hljs-symbol">From:</span> jessica.robinson@flexfactory.fitness<br><span class="hljs-symbol">Date:</span> March <span class="hljs-number">5</span>, <span class="hljs-number">2024</span>, <span class="hljs-number">10</span>:<span class="hljs-number">15</span> AM<br><br>---<br><br>Hey there,<br><br>Thanks <span class="hljs-keyword">for</span> dropping <span class="hljs-keyword">me</span> a line about the MFA setup. Yeah, we<span class="hljs-comment">&#x27;ve got MFA on the Django admin for sure. Rolled it out last year to beef up our security, especially for the team accessing customer details.</span><br><br>So, here<span class="hljs-comment">&#x27;s the thing about the MFA prompt not showing up in your initial tests – it actually kicks in _after_ you successfully log in with a username and password. Kind of a second-step verification deal. If you didn&#x27;t get past the login screen with those test accounts, that’d explain why you didn’t bump into it.</span><br><br>I<span class="hljs-comment">&#x27;m wondering if maybe that&#x27;s why it seemed like there was no MFA? Anyway, I’m gonna double-check our setup to make sure it’s all behaving as it should. Wouldn’t want any sneaky bugs messing with our security.</span><br><br><span class="hljs-keyword">If</span> you need deeper access <span class="hljs-built_in">or</span> any specific details <span class="hljs-keyword">to</span> help <span class="hljs-keyword">with</span> your security review, just shout. Your help<span class="hljs-comment">&#x27;s super valuable to us, and we wanna make sure everything&#x27;s locked down tight.</span><br><br>Thanks a ton!<br><br>Jess<br></code></pre></td></tr></table></figure><h2 id="不提供多重身份验证"><a href="#不提供多重身份验证" class="headerlink" title="不提供多重身份验证"></a>不提供多重身份验证</h2><p><strong>观察</strong></p><p>查看客户帐户设置后，您发现没有提到可以使用双因素身份验证。与客户仔细检查确认这未实现。</p><p><strong>证据</strong></p><p>来自客户的电子邮件回复：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Subject: RE: Inquiry About Customer MFA <span class="hljs-keyword">Options</span><br><span class="hljs-keyword">From</span>: jessica.robinson@flexfactory.fitness<br><span class="hljs-type">Date</span>: March <span class="hljs-number">6</span>, <span class="hljs-number">2024</span>, <span class="hljs-number">13</span>:<span class="hljs-number">18</span> AM<br><span class="hljs-comment">---</span><br><br>Hey again,<br><br>Got your question about whether w<span class="hljs-string">e&#x27;ve got MFA set up for our customer accounts. So, here&#x27;</span>s the scoop: we don’t currently offer MFA <span class="hljs-keyword">for</span> our general customer accounts. It<span class="hljs-string">&#x27;s definitely on our radar as something we want to implement down the line for that extra layer of security, but as of right now, it’s not in place.</span><br><span class="hljs-string"></span><br><span class="hljs-string">I know it&#x27;</span>s <span class="hljs-keyword">not</span> ideal <span class="hljs-keyword">from</span> a <span class="hljs-keyword">security</span> standpoint, <span class="hljs-keyword">and</span> it’s something w<span class="hljs-string">e&#x27;re actively looking to address. We&#x27;</span>re <span class="hljs-keyword">in</span> the process <span class="hljs-keyword">of</span> reviewing our <span class="hljs-keyword">security</span> features <span class="hljs-keyword">and</span> how we can better protect customer accounts, including the potential addition <span class="hljs-keyword">of</span> MFA.<br><br>Really appreciate you bringing this up. It<span class="hljs-string">&#x27;s definitely a reminder that we need to keep pushing forward on our security measures. If there’s anything specific you&#x27;</span>d recommend <span class="hljs-keyword">or</span> <span class="hljs-keyword">any</span> other concerns you have, I’m <span class="hljs-keyword">all</span> ears.<br><br>Thanks <span class="hljs-keyword">for</span> keeping us <span class="hljs-keyword">on</span> our toes!<br><br>Best,<br><br>Jess<br></code></pre></td></tr></table></figure><h2 id="不安全的直接对象引用暴露客户订单"><a href="#不安全的直接对象引用暴露客户订单" class="headerlink" title="不安全的直接对象引用暴露客户订单"></a>不安全的直接对象引用暴露客户订单</h2><p><strong>观察</strong></p><ul><li>测试订单时，您通过电子邮件收到的 URL 会将您带到网站上显示订单摘要的页面</li><li>请注意，您需要经过身份验证才能查看摘要</li><li>该 URL 包含一个整数 - 编辑此内容会导致发现来自其他客户的其他订单摘要</li></ul><p><strong>证据</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">For</span> the URL https://www.flexfactory.fitness/orders/view/<span class="hljs-number">12345</span><br><br><span class="hljs-attribute">GET</span> /orders/view/<span class="hljs-number">12345</span> HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.flexfactory.fitness<br><span class="hljs-attribute">Cookie</span>: sessionid=abc123xyz789; csrftoken=<span class="hljs-number">3</span>f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>-–</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-section">&lt;div class=<span class="hljs-string">&quot;order-details&quot;</span>&gt;</span></span><br><span class="language-apache">    <span class="hljs-section">&lt;h2&gt;</span><span class="hljs-attribute">Order</span> #<span class="hljs-number">12345</span>&lt;/h2&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;strong&gt;</span><span class="hljs-attribute">Customer</span> Name:&lt;/strong&gt; John Doe&lt;/p&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;strong&gt;</span><span class="hljs-attribute">Shipping</span> Address:&lt;/strong&gt; <span class="hljs-number">123</span> Elm Street, Springfield, <span class="hljs-number">49017</span>&lt;/p&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;strong&gt;</span><span class="hljs-attribute">Order</span> Items:&lt;/strong&gt; <span class="hljs-number">1</span>x Weightlifting Belt, <span class="hljs-number">2</span>x Kettlebell (<span class="hljs-number">24</span>kg)&lt;/p&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;p&gt;</span><span class="hljs-section">&lt;strong&gt;</span><span class="hljs-attribute">Total</span>:&lt;/strong&gt; $<span class="hljs-number">150</span>.<span class="hljs-number">00</span>&lt;/p&gt;</span><br><span class="language-apache"><span class="hljs-section">&lt;/div&gt;</span></span><br></code></pre></td></tr></table></figure><p>修改后的 URL：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /orders/view/<span class="hljs-number">12346</span> HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.flexfactory.fitness<br><span class="hljs-attribute">Cookie</span>: sessionid=abc123xyz789; csrftoken=<span class="hljs-number">3</span>f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;order-details&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Order #12346<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Customer Name:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> Alice Johnson<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Shipping Address:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> 456 Maple Avenue, Anytown, 90210<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Order Items:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> 3x Yoga Mat, 1x Resistance Bands Set<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Total:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> $85.00<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="Web服务器标头信息泄露"><a href="#Web服务器标头信息泄露" class="headerlink" title="Web服务器标头信息泄露"></a>Web服务器标头信息泄露</h2><p><strong>观察</strong></p><p>您看到 Nginx 的运行版本在 HTTP 标头中公开。</p><p><strong>证据</strong></p><p>来自服务器的以下命令和响应显示了 Web 服务器设置的标头：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">curl</span> -I http://<span class="hljs-number">88</span>.xxx.xxx.<span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=utf-8<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br></code></pre></td></tr></table></figure><h2 id="更新个人资料页面上的跨站请求伪造"><a href="#更新个人资料页面上的跨站请求伪造" class="headerlink" title="更新个人资料页面上的跨站请求伪造"></a>更新个人资料页面上的跨站请求伪造</h2><p><strong>观察</strong></p><ul><li>该应用程序包含一个表格，用于更新您作为客户的个人信息</li><li>您注意到，请求正文中没有传递跨站点请求伪造令牌。Django 应用程序的其余部分在请求正文的会话令牌中使用了相同的 CSRF 令牌（使用双重提交方法 CSRF 保护）——在这种情况下，它没有被执行</li><li>通过生成托管在您控制的计算机上的概念证明表单，您发现可以从经过身份验证的浏览器会话向站点发布请求并更新目标用户的帐户</li></ul><p><strong>证据</strong></p><p>对 Web 应用程序的 HTTP 请求显示请求的 HTTP 正文中不存在 CSRF 令牌：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">POST</span> /profile/update HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.flexfactory.fitness<br><span class="hljs-attribute">Content</span>-Type: application/x-www-form-urlencoded<br><span class="hljs-attribute">Cookie</span>: sessionid=abc123xyz789; csrftoken=<span class="hljs-number">3</span>f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br><br><br><span class="hljs-attribute">firstname</span>=John&amp;lastname=Doe&amp;email=johndoe@example.com&amp;address=<span class="hljs-number">123</span>%<span class="hljs-number">20</span>Elm%<span class="hljs-number">20</span>Street%<span class="hljs-number">2</span>C%<span class="hljs-number">20</span>Springfield%<span class="hljs-number">2</span>C%<span class="hljs-number">2049017</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-css"></span><br><span class="language-css">&lt;<span class="hljs-selector-tag">p</span>&gt;Your personal <span class="hljs-selector-tag">details</span> have been successfully updated.&lt;/<span class="hljs-selector-tag">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>概念验证：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-property">forms</span>[<span class="hljs-string">&quot;maliciousForm&quot;</span>].<span class="hljs-title function_">submit</span>();</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;maliciousForm&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://www.flexfactory.fitness/profile/update&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;firstname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Evil&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;lastname&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Hacker&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;evilhacker@malicious.com&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Unknown&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在攻击者控制的页面上托管此内容，将用户定向到该页面并让表单自动提交：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/profile/update</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.flexfactory.fitness<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=abc123xyz789; csrftoken=3f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3<br><br><span class="language-dts"></span><br><span class="language-dts"><span class="hljs-attr">firstname</span><span class="hljs-operator">=</span>Evil<span class="hljs-variable">&amp;lastname</span>=Hacker<span class="hljs-variable">&amp;email</span>=evilhacker@malicious.com<span class="hljs-variable">&amp;address</span>=Unknown</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-css"></span><br><span class="language-css">&lt;<span class="hljs-selector-tag">p</span>&gt;Your personal <span class="hljs-selector-tag">details</span> have been successfully updated.&lt;/<span class="hljs-selector-tag">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="Nginx-默认页面存在"><a href="#Nginx-默认页面存在" class="headerlink" title="Nginx 默认页面存在"></a>Nginx 默认页面存在</h2><p><strong>观察</strong></p><ul><li>您发现服务器上存在默认的 Nginx 页面</li><li>当您将 Host 标头设置为 Web 服务器的 IP 地址而不是使用 <a href="http://www.flexfactory.fitness/">www.flexfactory.fitness</a> 域名时，会返回它们</li></ul><p><strong>证据</strong></p><p>请求 Web 服务器的 IP 地址时，服务器会看到以下响应：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231953018.png" alt="img"></p><h2 id="在订单搜索页面上反映跨站点脚本"><a href="#在订单搜索页面上反映跨站点脚本" class="headerlink" title="在订单搜索页面上反映跨站点脚本"></a>在订单搜索页面上反映跨站点脚本</h2><p><strong>观察</strong></p><p>在测试各种形式的应用中的字段时，您会注意到一个字段（通过查询字符串发送）返回 HTTP 响应中发送的内容，从而导致反映的跨站点脚本。</p><p><strong>证据</strong></p><p>对服务器的正常请求和响应：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /orders/search?query=Kettlebell HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.flexfactory.fitness<br><span class="hljs-attribute">Cookie</span>: sessionid=abc123xyz789; csrftoken=<span class="hljs-number">3</span>f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-section">&lt;div class=<span class="hljs-string">&quot;search-results&quot;</span>&gt;</span></span><br><span class="language-apache">    <span class="hljs-section">&lt;p&gt;</span><span class="hljs-attribute">Search</span> results for &#x27;Kettlebell&#x27;:&lt;/p&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;ul&gt;</span></span><br><span class="language-apache">        <span class="hljs-section">&lt;li&gt;</span><span class="hljs-attribute">Order</span> #<span class="hljs-number">12345</span> - <span class="hljs-number">2</span>x Kettlebell (<span class="hljs-number">24</span>kg)&lt;/li&gt;</span><br><span class="language-apache">        <span class="hljs-section">&lt;li&gt;</span><span class="hljs-attribute">Order</span> #<span class="hljs-number">12348</span> - <span class="hljs-number">1</span>x Kettlebell (<span class="hljs-number">16</span>kg)&lt;/li&gt;</span><br><span class="language-apache">    <span class="hljs-section">&lt;/ul&gt;</span></span><br><span class="language-apache"><span class="hljs-section">&lt;/div&gt;</span></span><br></code></pre></td></tr></table></figure><p>恶意请求和服务器的响应：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /orders/search?query=&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt; HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: www.flexfactory.fitness<br><span class="hljs-attribute">Cookie</span>: sessionid=abc123xyz789; csrftoken=<span class="hljs-number">3</span>f6f05b93d5ff146ed4bcca2635739772f6f57f2a68fb7491bc9515ba065d47a<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>nginx/1.18.0<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Mon, 04 Mar 2024 12:00:00 GMT<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br><span class="hljs-attribute">X-Frame-Options</span><span class="hljs-punctuation">: </span>SAMEORIGIN<br><span class="hljs-attribute">X-Content-Type-Options</span><span class="hljs-punctuation">: </span>nosniff<br><span class="hljs-attribute">X-XSS-Protection</span><span class="hljs-punctuation">: </span>1; mode=block<br><span class="hljs-attribute">Strict-Transport-Security</span><span class="hljs-punctuation">: </span>max-age=31536000; includeSubDomains<br><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-results&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Search results for &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;XSS&#x27;</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>&#x27;:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>No results found<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h1 id="5-作业-自我评估任务"><a href="#5-作业-自我评估任务" class="headerlink" title="5-作业 - 自我评估任务"></a>5-作业 - 自我评估任务</h1><p>在继续执行此任务之前，您应该已完成整个报告文档。如果你想制作一个幻灯片来展示给这个虚构的客户，最好也完成它。</p><p>如果您在开始编写报告之前查看了任何笔记或以前的课程，那么您希望已经完成了一份体面的工作。以下是您在写作前应该略读的核心章节和课程：</p><ul><li>写作风格</li><li>报告内容</li><li>查找文章</li><li>评估后客户反馈&#x2F;评估后会议（用于创建幻灯片）</li></ul><p>现在，是时候回顾你的工作，寻找潜在的错误或你可能忽略的领域了。如果你不喜欢，你不必这样做，但如果你这样做，你会从这门课程中得到更多。多次复习材料并分析您的工作将有助于巩固您所学到的知识。当您参与 QA 流程时，这也是很好的做法，可以审查其他人的工作。</p><p>以下是要执行的潜在任务列表。请记住，此时报告应为“客户端就绪”。你想在这里深入多少取决于你。</p><ul><li>查看每个发现：<ul><li>描述是否清晰，不熟悉发现类型的人会理解所写的内容吗？</li><li>描述是否涵盖基本要素？<ul><li>发现是什么？</li><li>为什么不好？</li><li>上下文影响是什么？</li><li>它是否涵盖任何可能影响问题风险评级的可利用性或缓解点？</li></ul></li><li>该建议是否涵盖基本要素？<ul><li>它是否包含建议的修复程序？</li><li>该发现是否需要任何建议来检查该问题是否在其他地方不存在？</li><li>调查结果是否包含任何预防建议？</li></ul></li></ul></li><li>查看执行摘要部分。设身处地为非技术读者着想，以确保他们理解内容。查看该部分时要注意以下几点：<ul><li>它是否包含对评估内容和评估内容的简要介绍？</li><li>它是否包含有关所审查内容的概念风险的任何信息？</li><li>它是否适当地涵盖了风险及其业务影响？是否有任何最坏的情况？</li></ul></li><li>查看建议部分。设身处地为非技术读者着想，以确保他们理解内容。查看该部分时要注意以下几点：<ul><li>根据报告的调查结果，是否提到了任何短期建议来帮助消除直接风险？这些也可以在执行摘要的末尾提及</li><li>是否提出了长期建议，以防止评估中发现的问题再次发生，或确保在出现问题时予以补救？</li><li>有没有提到可以进行的任何进一步评估？</li></ul></li></ul><p>在本课程中，我们介绍了报告中的其他几个部分。考虑结合您所做的任何笔记进行复习，或者浏览适用的课程。确保您已捕获所需的信息并且内容清晰。您可能想要查看的其他部分（应该在报告中）包括：</p><ul><li>调查结果概述</li><li>范围</li><li>警告</li><li>其他页面：<ul><li>扉页</li><li>目录</li><li>变更控制</li></ul></li></ul><p>如果您决定为评估后演示文稿编写幻灯片以供练习，请在复习前浏览适用的课程或检查您的笔记。在所需内容和信息方面需要考虑的一些高级要点：</p><ul><li>幻灯片是否包含：<ul><li>介绍</li><li>评估概况</li><li>调查结果演练</li><li>关键要点和建议</li></ul></li><li>查看内容的呈现方式：<ul><li>内容是否简洁</li><li>技术人员和非技术人员都清楚内容吗<ul><li>尽管注意到内容应该由您通过幻灯片进行讨论来提供</li></ul></li></ul></li></ul><p>希望自我评估任务能突出您在创建报告和查找文章过程中可能忽略的任何差距。记下这些差距有助于防止它们出现在您撰写的后续报告中。当您收到其他人的反馈或提交工作以供审核之前，这是一个很好的过程。</p><p>完成此任务后，任务完成，干得好！</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-9 报告效率</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-9%20%E6%8A%A5%E5%91%8A%E6%95%88%E7%8E%87/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-9%20%E6%8A%A5%E5%91%8A%E6%95%88%E7%8E%87/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（报告效率）介绍"><a href="#0-章节（报告效率）介绍" class="headerlink" title="0-章节（报告效率）介绍"></a>0-章节（报告效率）介绍</h1><p>确保您在撰写报告时保持专注至关重要。如果你有固定的报告时间，而你把它花在拖延上，你更有可能不得不匆忙完成报告。这增加了犯错误的机会，并且您会产生低于标准的东西。但是，如果您大部分时间都专注于，您将能够有效地利用时间，并有更多时间用于改进和完善您所写的内容。</p><p>因此，这个小章节希望分享一些可行的步骤，以帮助避免拖延和懒惰。值得指出的是，有几个项目不是“快速修复”，需要你自己做一些工作。此外，我怀疑我在这里要介绍的一些指导是显而易见的，但奇怪的是，我不认识多少人利用这些理想和实践。我从经验中知道，使用其中一种或多种可以让你更有效地工作，更有效地利用你的时间。</p><p>我在写这门课程时采用了这些策略，在我最好的日子里，我写了大约 6,000 字外加一篇评论。如果你把它与我让自己分心的日子里的2000-3000进行比较，这种变化显然是显着的。</p><p>那么，让我们看看可以做出哪些改变来改善你的心态、生产力和工作环境。</p><h1 id="1-动力与自律"><a href="#1-动力与自律" class="headerlink" title="1-动力与自律"></a>1-动力与自律</h1><p>我们都曾有过缺乏写报告的动力的时候——我不知道有多少人真正喜欢写报告。我曾因缺乏动力而推迟开始或完成报告。我真希望能给每个人发放一瓶动力，我真的愿意，这样当你随时准备好面对任务和问题时，生活就会轻松得多。然而，现实是，如果你想始终保持高效，就不能坐等动力出现——必须依赖自律。</p><p>这个观念说起来容易做起来难，但训练自己不找借口、不分心地着手眼前的任务，将极大地提高你完成工作的能力。</p><p>此外，对自己应该感到满意的标准设定得高一些也很重要。对于报告而言，这往往是客户从你那里收到的唯一交付物。你想留下什么印象？你对自己的成果感到自豪吗？你的同行会对你的报告有何看法？</p><p>拥有自律和高标准将确保你发挥出最佳水平。</p><p>虽然教授自律超出了本课程的范围，但我之所以提到这一点，是因为我认为这是一项不仅有助于提升你的交付物质量，也有助于你应对任何需要你注意力才能完成的任务的重要技能，而且是能够且应当掌握的。</p><h1 id="2-限制干扰"><a href="#2-限制干扰" class="headerlink" title="2-限制干扰"></a>2-限制干扰</h1><p>好的，让我们抛开一些关于心态的理论，直接给出一些可立即付诸实践的建议。</p><p>发现漏洞通常不是问题，作为黑客，我们享受寻找漏洞的快感以及发现很酷的漏洞时的感觉。然而，当报告写作需要开始时，拖延症就出现了，我们经常发现自己分心了。</p><p>帮助我完成工作的一个重要部分是限制所有干扰和干扰，以创造一个我可以长时间工作而不会分心的环境。</p><h1 id="请勿打扰"><a href="#请勿打扰" class="headerlink" title="请勿打扰"></a>请勿打扰</h1><p>我在手机上设置的是“专注模式”，在我平时的工作时间内有效。所有会分散注意力的应用程序都被禁用，因此通知不会通过（信息、社交媒体、其他烦人的应用程序）。启用此功能时，只有紧急联系人可以给我打电话。这限制了手机一直亮起或振动，这会触发您伸出手来检查它。此功能在 Android 和 iOS 设备上均可用。</p><p>另一个好的策略是将手机静音并将其翻转过来或将手机放在某个地方，这样它就看不见&#x2F;够不到了。</p><p>如果您真的在努力远离手机，这两种策略可以结合使用。</p><h1 id="关闭即时通讯工具"><a href="#关闭即时通讯工具" class="headerlink" title="关闭即时通讯工具"></a>关闭即时通讯工具</h1><p>现在，大多数组织似乎已经要求立即联系到某些东西。如果我正忙于撰写报告，那么在完成这项工作时，我可以从繁忙的群聊或其他消息中退后一步。如果你发现自己被日常工作的喋喋不休分散了注意力，我鼓励你也这样做。只需给自己设置一条状态消息，说明您很忙以及何时回来，然后完全关闭它（这应该包括任何可能打开的电子邮件客户端）。</p><p>在重新铺设表面之前扎扎实实地工作几个小时是完全可以接受的，相反听到争论很烦人。在工作时间的紧急情况下，您的工作电话（如果有的话）总是可以响起，因此如果您真的富有成效并且可以处理紧急事务，我认为这种方法没有任何问题。</p><h1 id="关闭所有不必要的应用程序"><a href="#关闭所有不必要的应用程序" class="headerlink" title="关闭所有不必要的应用程序"></a>关闭所有不必要的应用程序</h1><p>与禁用手机上的应用程序一样，关闭工作计算机上不需要打开的所有应用程序即可完成工作。</p><p>这样，当您开始做白日梦时，如果您感到无聊或被与这些应用程序之一相关的事情分散注意力，您就不太可能开始做某事。理想情况下，这包括互联网浏览器。</p><h1 id="为深度工作做好准备"><a href="#为深度工作做好准备" class="headerlink" title="为深度工作做好准备"></a>为深度工作做好准备</h1><p>不要给自己机会找借口，让你从椅子上站起来，逃避你的工作。</p><p>在你开始大量工作之前，我建议：</p><ul><li>清除工作区域中任何可能导致分心的杂物（在干净整洁的环境中工作对我有很大帮助）</li><li>使用洗手间（能排掉就比憋着好）</li><li>制作咖啡或您最喜欢的饮料</li><li>如果你觉得饿了，可以吃点零食</li></ul><p>然后，深吸一口气，不要想，就开始吧。</p><h1 id="再次纪律"><a href="#再次纪律" class="headerlink" title="再次纪律"></a>再次纪律</h1><p>还记得纪律吗？它在本课中提到的所有内容中都起着重要作用。如果你想实施上述任何一项，并发现自己作弊或避免正确地做到这一点，你就没有受到纪律处分。坚持这些策略，并提醒自己，纪律不仅仅是遵守规则，而是为成功做好准备。</p><h1 id="3-将项目划分为段落"><a href="#3-将项目划分为段落" class="headerlink" title="3-将项目划分为段落"></a>3-将项目划分为段落</h1><p>当我面对需要写的文本块时，我通常会写一大堆非正式的要点（通常是为了回答我在本课程其他地方提出的问题）。下一步是把这些变成我正在写的草稿。</p><p>从这里开始，我发现最痛苦的下一步是第一句话。解决这个问题的方法是记住，第一轮写作永远不应该被视为它的最终版本——它应该被视为草稿。这可能是人们在开始时遇到心理障碍的原因，因为他们正在努力在第一次尝试时编写最终版本。基于此，我最初的方法是简单地写任何我能写的开场白，这总是促使我写大量的后续草稿文本（使用我之前概述的要点作为谈话要点）。案文草案一旦完成，就应根据需要进行审查和完善——一旦草案完成，这就容易多了。这可能并不适合所有人，但我确实认为这是刚开始的好策略。</p><p>如果你正在参加这些启动电话会议，并且你正在讨论可能需要在报告中涵盖的主题（例如，如果你需要编写一个架构概述部分），这也是一个非常有用的方法。如果您能够在通话期间打开文档（或您要报告的任何平台），则可以将要点写进去，以便稍后将其转换为散文。</p><p>这是我所描述的一个例子。</p><p>首先，为报告的执行摘要部分需要涵盖的关键领域写一些要点：</p><ul><li>在登录系统中发现了严重的 SQL 注入漏洞。</li><li>在服务器基础结构中发现未修补的软件。</li><li>管理员帐户中的弱密码，容易破解。</li></ul><p>使用此列表作为许多提示，可以编写执行摘要的草稿：</p><blockquote><p>在最近的评估中，发现了几个关键的安全问题，表明应用程序安全的许多方面都存在缺陷。这些发现对系统使用的数据提出了重大风险，攻击者可能会访问和修改这些数据。</p><p>在登录系统中发现一个严重的 SQL 注入漏洞。此漏洞构成严重威胁，因为它允许攻击者访问和操纵应用程序中保存的所有数据。</p><p>除此之外，在解决方案的内部基础结构中还发现了大量未打补丁的软件。鉴于影响众多软件部件的漏洞的严重性和可利用性，任何突破边界的攻击者都将获得完全破坏整个资产的重要途径。</p><p>此外，安全审计还发现在几个管理帐户中使用了弱密码。攻击者可以猜到使用的密码，因此可能会导致关键域管理员帐户的泄露，从而导致整个内部生产域的完全泄露。</p></blockquote><p>草稿写好后，应该对其进行审查和完善，直到它处于可以发布给 QA 或客户的状态（取决于您的流程）。修改任何草稿文本比第一次写出完美的摘要要容易得多（无论如何，根据我的经验）。</p><p>这是我在本课程中的大部分内容中使用的方法，我觉得这种方法使快速入门和完成课程变得更加容易。</p><h1 id="4-本章小结"><a href="#4-本章小结" class="headerlink" title="4-本章小结"></a>4-本章小结</h1><p>好吧，这门课程的心态和倡导纪律绰绰有余。</p><p>如果这是你挣扎的事情，我恳请你在即将到来的练习中尝试其中一些策略，或者当你下次需要花时间在日常工作中极度专注时。</p><p>最近我从一些很棒的书中学到了很多东西。如果你对自我提升、生产力和心态改善感兴趣，这里有三本书可以帮助你入门：</p><ul><li>詹姆斯·克利尔 （James Clear） 的 Atomic Habits</li><li>Cal Newport 的 Deep Work</li><li>Jocko Willink 和 Leif Babin 的 Extreme Ownership</li><li>布莱恩·特雷西 （Brian Tracy） 的 Eat That Frog</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-8 修复验证</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-8%20%E4%BF%AE%E5%A4%8D%E9%AA%8C%E8%AF%81/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-8%20%E4%BF%AE%E5%A4%8D%E9%AA%8C%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（修复验证）介绍"><a href="#0-章节（修复验证）介绍" class="headerlink" title="0-章节（修复验证）介绍"></a>0-章节（修复验证）介绍</h1><p>在整个课程中，我已经多次提到这个术语，但现在是时候将其作为单独的章节来介绍了。</p><p>修正验证通常有另一个名称：“重新测试”。这是客户试图修复（或补救）评估中的一个或多个发现的过程，我们的工作是确保他们正确地完成。</p><p>我一直称其为“补救验证”，因为“重新测试”一词可能会给某些客户带来一些困惑。对于那些熟悉该术语的人来说，很明显，我们的意思是重新测试特定的发现，看看它们现在是否已修复。然而，我见过很多客户认为重新测试实际上是再次执行的整个评估，这通常不是我们的意思。通过使用“修正验证”，可以更清楚地知道，我们谈论的是验证问题是否已修正。我怀疑还有其他名字可以叫这个名字，但这是我近年来使用的名字。</p><p>值得注意的是，如果客户要求“重新测试”，请务必确认他们的意思。他们是否希望再次执行整个评估，或者审查一个或多个发现以查看它们是否已修复？这个简短的问题救了我很多次。</p><p>在下一章中，我们将介绍如何最好地执行修正验证，以及在此过程中应捕获哪些信息并与客户端共享。</p><h1 id="1-修复验证-简介"><a href="#1-修复验证-简介" class="headerlink" title="1-修复验证 - 简介"></a>1-修复验证 - 简介</h1><p>当我们为客户执行修复验证时，我们的工作是评论他们是否适当地解决了一个或多个发现。这还可能包括关闭调查结果（或调整风险评级），如果他们已经实施了适当的缓解措施。除此之外，通常最好评论修正一些发现对先前评估的安全态势的影响。</p><p>鉴于本课的篇幅，我将其分解为以下内容：</p><ul><li>准备：有关如何准备修复验证的建议</li><li>查找状态和关闭结果：结果的关键状态是什么，何时以及如何更改它们</li><li>捕获证据：执行修复验证时需要捕获的内容</li><li>跟踪结果 - 更新报告：如何跟踪结果和更新报告</li><li>跟踪结果 - 其他文档：关于在其他文档中向客户提供结果的其他方式的简短讨论</li><li>课程总结</li></ul><p>为了演示各个部分的更新并显示示例，我将重用课程前面使用的一些材料。</p><p>让我们先来看看我们如何为这项任务做好准备。</p><h1 id="修复问题后从报告中移除-练习"><a href="#修复问题后从报告中移除-练习" class="headerlink" title="修复问题后从报告中移除 - 练习"></a>修复问题后从报告中移除 - 练习</h1><p>在上一课中，我们简要讨论了客户在发现项得到修复后希望你对报告进行更改，使其看起来好像从未发现这些问题的情景。</p><p>以下是一些快速练习（如果它们适用于您）：</p><p><strong>反思练习</strong></p><p>思考一种情况，您被要求从报告中移除已修复的漏洞。您认为这些改动是否会改变与原始文档相比他人对评估结果的理解方式？如果有，具体会如何改变？</p><p>或者，如果您还没有遇到过这种情况：</p><p>查阅一份您编写过或有权访问的安全报告。挑选一些重要的发现，想象客户要求将它们从报告中移除。您认为这些改动是否会改变与原始文档相比他人对评估结果的理解方式？如果有，具体会如何改变？</p><h1 id="11-新发现"><a href="#11-新发现" class="headerlink" title="11-新发现"></a>11-新发现</h1><p>如果已执行了几次修复验证，则可能会看到出现新的发现。这可能是由于实施不当的修复程序造成了新问题，甚至发现了原始测试中没有发现的新内容。我们如何处理这个问题？作为专业人士，如果出现新风险，我们应该始终告知客户。这与报告我们看到的所有发现相同，无论它们是否严重程度较低或看起来不值得客户花时间。当我们看到客户时，我们应该向他们提供风险，以便他们能够就如何进行做出明智的决定。省略新的发现与我们作为安全专业人员试图实现的目标不一致 - 我们应该对我们的客户做正确的事情，让他们知道我们发现了新的东西。</p><h1 id="新发现"><a href="#新发现" class="headerlink" title="新发现"></a>新发现</h1><p>让我们讨论一下在回顾以前的发现时可能会出现新发现的原因。</p><h2 id="行为改变"><a href="#行为改变" class="headerlink" title="行为改变"></a>行为改变</h2><p>通常，新发现是由于先前测试的行为发生变化而产生的，通常是在审查原始发现时被动地接受的。请务必花一些时间了解是否是这种情况，理想情况下，与以前的评估工具输出或日志进行比较。</p><p>在撰写这个新发现时，建议在问题描述中提供一定程度的评论，特别是如果你能够展示行为上的差异，从而说明为什么最初可能没有发现这个发现。注意：你不应该在这里以防御的方式写作，而应该简单地以一种展示以前所看到的和现在所看到的事实的方式写作。</p><h2 id="错过的发现"><a href="#错过的发现" class="headerlink" title="错过的发现"></a>错过的发现</h2><p>如果发现完全被遗漏了，并且您有证据表明它可以在原始评估中被识别出来，您将需要反思最初遗漏的方式和原因，以免再次发生。</p><p>我的建议是在报告中提出调查结果并让客户知道，但是您可能希望与您的团队进行内部讨论，以确定对客户影响的最佳行动方案。</p><h1 id="从实施不力的修复程序中获得的新发现"><a href="#从实施不力的修复程序中获得的新发现" class="headerlink" title="从实施不力的修复程序中获得的新发现"></a>从实施不力的修复程序中获得的新发现</h1><p>我见过几个案例，一个问题的修复会产生新问题。发生这种情况可能有几个原因，最值得注意的是：</p><ul><li>该修复程序实施得很差，结果产生了一种新的发现类型（不相关，足以保证新的发现）</li><li>补救措施结束了调查结果，但所采取的措施并不像应有的那样安全</li></ul><p>如果缺少调查结果的建议部分，则可能导致上述两种情况发生。但是，即使有最好的建议，有时客户也会尝试以自己的方式进行补救，要么忽略提供的指导，要么只使用其中的一部分。</p><p>第一点的一个示例可能是应用修复程序来防止 Web 应用程序中的 SQL 注入漏洞。开发团队成功实现了准备好的语句，以防止 SQL 注入。但是，他们修改了代码，使输出编码不再正确执行。在页面上插入了来自查询的不受信任的用户输入。这导致了一个新的漏洞，特别是跨站点脚本 （XSS）。由于这与原始发现有很大不同，因此最好编写一个新发现，因为对此的描述和建议与 SQL 注入有很大不同。</p><p>对于第二点，我可以举一个例子（我已经看过很多次了）是在哪里找到了服务的明文通信。修复验证通常可以发现连接现在已加密，但是，它没有以最安全的方式实现（自签名证书、启用 SSLv3、弱密码等）。</p><p>如果在关闭一个新问题后添加新问题，则只需将新问题添加到报表中即可。需要在报告的执行摘要更新中讨论出现这些情况的原因。</p><h1 id="如何撰写新发现"><a href="#如何撰写新发现" class="headerlink" title="如何撰写新发现"></a>如何撰写新发现</h1><p>在补救验证过程中发现的结果应以与任何其他发现相同的方式编写。这里唯一的区别可能是区分它们是在评估的单独阶段发现的（在本例中，它将是补救验证阶段）。将这些发现与原始评估区分开来的最简单方法是将它们放在自己的报告部分或测试阶段部分。</p><p>在“报告内容”一章的“发现”一课中，我们介绍了几种评估阶段的风格。下面是一个方法的示例，其中评估被分解为几个独特的测试阶段：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Web 应用程序评估</p><p>2.2.2 外部基础设施评估</p><p>2.2.3 服务器构建审查</p></blockquote><p>这里没有硬性规定，最好保持一致。假设你对工作的所有阶段都进行了修复验证，但在 Web 应用程序评估中发现了一个新问题。我会添加如下内容：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Web 应用程序评估</p><p>2.2.2 外部基础设施评估</p><p>2.2.3 服务器构建审查</p><p>2.2.4 Web 应用程序评估 - 修复验证 2024-03-13</p></blockquote><p>虽然标题很长（我相信你可以缩短），但它清楚地表明，本节中的发现与原始 Web 应用程序评估有关，并且是在给定日期的修复验证评估期间发现的。</p><p>如果原始报告具有单个评估阶段，则可以简单地将具有新结果的新阶段称为“修复验证”：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Web 应用程序评估</p><p>2.2.2 修复验证 2024-03-13</p></blockquote><p>但是，如果您决定创建新部分，请确保明确调查结果与原始工作相关的位置，并且这些调查结果是在修复验证期间发现的。</p><h1 id="更新报告的其他部分"><a href="#更新报告的其他部分" class="headerlink" title="更新报告的其他部分"></a>更新报告的其他部分</h1><p>随着新发现添加到报告中，其他领域可能需要以略有不同的方式进行更新。让我们来谈谈适用的部分。</p><h2 id="调查结果概述"><a href="#调查结果概述" class="headerlink" title="调查结果概述"></a>调查结果概述</h2><h3 id="调查结果概述-1"><a href="#调查结果概述-1" class="headerlink" title="调查结果概述"></a>调查结果概述</h3><p>在本节中，我们详细介绍了每个测试阶段每个风险评级的发现数量。假设我们为修复验证工作添加了一个测试阶段，并将其添加到表中，记录了两个新的低风险问题：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>危急</strong></th><th><strong>高</strong></th><th><strong>中等</strong></th><th><strong>低</strong></th><th><strong>信息</strong></th><th><strong>闭</strong></th><th><strong>总</strong></th></tr></thead><tbody><tr><td>Web 应用程序审查</td><td>0</td><td>0</td><td>5</td><td>5</td><td>0</td><td>4</td><td>14</td></tr><tr><td>AWS 配置审查</td><td>0</td><td>0</td><td>4</td><td>10</td><td>2</td><td>4</td><td>20</td></tr><tr><td>Web 应用程序审核 - 修复验证 2024-03-13</td><td>0</td><td>0</td><td>0</td><td>2</td><td>0</td><td>0</td><td>2</td></tr><tr><td>总</td><td>0</td><td>0</td><td>9</td><td>15</td><td>2</td><td>8</td><td>36</td></tr></tbody></table><p>如您所见，我们只是为测试阶段添加了一个新行，其中包含每个风险评级的发现总数。</p><h3 id="调查结果清单"><a href="#调查结果清单" class="headerlink" title="调查结果清单"></a>调查结果清单</h3><p>结果列表是你所期望的 - 现有和熟悉的表的额外行：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>查找 ID</strong></th><th><strong>风险</strong></th><th><strong>状态</strong></th><th><strong>标题</strong></th></tr></thead><tbody><tr><td>Web 应用程序评估</td><td>CSK</td><td>危急</td><td>Closed</td><td>未经身份验证的 API 端点返回医院配置</td></tr><tr><td>Web 应用程序评估</td><td>ZNB</td><td>危急</td><td>Closed</td><td>为管理员帐户设置的默认密码</td></tr><tr><td>Web 应用程序评估</td><td>JXY</td><td>危急</td><td>Open</td><td>通用管理员帐户</td></tr><tr><td>Web 应用程序评估</td><td>IIB</td><td>高</td><td>Closed</td><td>不安全的直接对象引用</td></tr><tr><td>Web 应用程序评估</td><td>CJZ</td><td>高</td><td>Closed</td><td>SQL 注入患者详细信息更新屏幕</td></tr><tr><td>Web 应用程序评估</td><td>XQJ</td><td>高</td><td>Closed</td><td>无需 MFA 的管理员登录</td></tr><tr><td>Web 应用程序评估</td><td>GLK</td><td>高</td><td>Closed</td><td>可公开访问的管理门户</td></tr><tr><td>Web 应用程序评估</td><td>NAA</td><td>高</td><td>Part Closed</td><td>无需身份验证即可公开访问的医院门户</td></tr><tr><td>Web 应用程序评估</td><td>WOO</td><td>中等</td><td>Open</td><td>租赁执行不力</td></tr><tr><td>Web 应用程序评估</td><td>SAU</td><td>中等</td><td>Open</td><td>可以捕获 EMR 存储的凭证</td></tr><tr><td>Web 应用程序评估</td><td>IUF</td><td>中等</td><td>Open</td><td>无速率限制</td></tr><tr><td>Web 应用程序评估</td><td>LAM</td><td>中等</td><td>Closed</td><td>可猜测的管理员 URL</td></tr><tr><td>AWS 配置审查</td><td>TDL</td><td>高</td><td>Closed</td><td>未对管理员帐户强制执行 MFA</td></tr><tr><td>AWS 配置审查</td><td>DWM</td><td>高</td><td>Closed</td><td>没有强制执行密码复杂性</td></tr><tr><td>AWS 配置审查</td><td>CIV</td><td>高</td><td>Closed</td><td>未启用 Cloudwatch</td></tr><tr><td>AWS 配置审查</td><td>EDE</td><td>高</td><td>Closed</td><td>SSH 服务器公开</td></tr><tr><td>AWS 配置审查</td><td>CTY</td><td>高</td><td>Open</td><td>用于生产的单个 EC2 实例 – DoS 风险</td></tr><tr><td>AWS 配置审查</td><td>FBB</td><td>高</td><td>Open</td><td>无备份</td></tr><tr><td>AWS 配置审查</td><td>PSY</td><td>高</td><td>Closed</td><td>未启用 MFA 删除的数据库</td></tr><tr><td>AWS 配置审查</td><td>ISN</td><td>中等</td><td>Open</td><td>没有 Web 应用程序防火墙</td></tr><tr><td>AWS 配置审查</td><td>DXU</td><td>中等</td><td>Open</td><td>缺少用户组</td></tr><tr><td>Web 应用程序评估 - 修复验证 2024-03-13</td><td>LPI</td><td>低</td><td>Open</td><td>点击劫持</td></tr><tr><td>Web 应用程序评估 - 修复验证 2024-03-13</td><td>BGF</td><td>低</td><td>Open</td><td>启用 TRACE 方法</td></tr></tbody></table><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>你如何将新发现纳入执行摘要更新，实际上取决于你所发现的内容的重要性。如果研究结果严重程度较低且影响有限，则不值得过多地讨论它们。但是，我要提到它们：</p><blockquote><p>在修复验证活动（LPI、BFG）期间发现了两个低风险发现。虽然调查结果确实给申请带来了额外的风险，但这些问题的补救可能只是为了深入辩护的目的。</p></blockquote><p>这承认发现了新的发现，并指出它们应该以与其他低风险问题（可能）相同的方式处理。</p><p>如果发现很重要，则可能需要进行更详细的反思：</p><ul><li>新发现是什么？</li><li>这是否改变了所评估内容的安全态势？如果是这样，如何？</li><li>是否需要对此发现的高级修复步骤发表评论？</li></ul><p>在本节中处理新发现时，请务必确保保持上下文和比较性。仔细考虑意外发现的影响将对您有利，因为客户会感谢让他们快速了解安全态势变化的努力。这比快速说明它们存在，并让客户自己弄清楚这些新问题的后果要好得多。</p><h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><p>仅当新发现需要立即关注或修复可能需要具有战略性质时，建议部分才需要更新。</p><p>编写本节中的任何内容都将遵循“报告内容”一章的“建议”课中给出的相同建议，但也要遵循本章上一课“执行补救验证”中的注意事项。</p><h1 id="直面客户"><a href="#直面客户" class="headerlink" title="直面客户"></a>直面客户</h1><p>让客户知道新问题即将到来是很重要的，一封友好的电子邮件或一个电话来解释这一事实将大大有助于他们接受他们有更多的风险需要管理。许多客户知道，我们无法在每次评估中都找到所有问题;我们永远不应该声称我们将获得 100% 的覆盖率（我们在课程前面提到的）。但是，在没有提醒的情况下向他们发送一份包含几个新问题的新报告可能会让他们感到惊讶。</p><p>如果在原始步骤中完全忽略或遗漏了结果，则此步骤尤为重要。领先于这一点并能够控制叙述的开始（或道歉，如果需要的话）将产生比客户说“这些新问题是什么？为什么在最初的评估中没有发现它们？！</p><p>因此，请向客户发送一封电子邮件，让他们知道将出现新的发现。给他们一些诚实的理由，如果他们想聊聊，给他们打电话。确保您在通话前掌握了所有事实，以便您可以将对话引向最积极的方向。同样，如果您不确定如何进行，或者您觉得您的客户可能会做出不良反应，您应该与您的团队进行内部讨论。</p><h1 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h1><p>我们刚刚经历了几个在执行修复验证时发现新问题的场景。</p><p>我们讨论了发生这种情况的一些原因，以及可能需要在报告中更新哪些内容以添加这些新信息。</p><p>我们还考虑了确保提出这些发现而不是被忽视的重要性，以及让客户知道已经发现了新发现的重要性。</p><p>当新的发现出现时，确保向客户提出这些发现（最好是在报告中）符合每个人的最大利益，并且他们为所审查的内容增加的新风险被理解并清楚地表达给客户。虽然客户可能会感到恼火，但他们现在将知道以前没有影响他们的风险，这总比不知道要好。客户应该欣赏任何新事物的提醒，即使这是由于在最初的参与过程中错误地忽略了发现。</p><h1 id="12-新发现-练习"><a href="#12-新发现-练习" class="headerlink" title="12-新发现 - 练习"></a>12-新发现 - 练习</h1><p>在上一课中，我们讨论了在修复验证评估期间发现新发现时该怎么做。我们还讨论了为什么它们可能会在评估完成后出现。</p><p>以下是一些相关的练习，如果适合您。</p><p><strong>反思练习</strong></p><ul><li>回想一下在修复验证或类似工作阶段发现新发现的时间。考虑一下您如何向客户报告这些发现。您对发现这些新风险有何感受？原始报告是否已更新？根据上一课，您认为可能遗漏了什么吗？客户是如何得知新发现的？</li><li>考虑一下您如何处理客户端实施的修复程序引入新漏洞的情况。您是如何与客户沟通的，他们的反应是什么？您是如何记录这些新发现的？</li></ul><p><strong>一般练习</strong></p><ul><li>查看您编写或有权访问的报告。起草两个可能在补救验证期间发现的另外假设性发现 - 一个之前完全遗漏，另一个可能在修复原始发现时出现，详细说明实施不力的修复。考虑哪些报告部分可能需要更新或添加，以及您可以编写的内容。</li><li>更新用于执行修复验证的清单，以包括发现新发现时要采取的步骤。</li></ul><h1 id="13-本章小结"><a href="#13-本章小结" class="headerlink" title="13-本章小结"></a>13-本章小结</h1><p>在本章中，我们介绍了修复验证，也称为重新测试。我们讨论了：</p><ul><li>我们如何准备补救验证</li><li>审查的结果需要获取哪些证据</li><li>对于审查的结果和报告的其他部分，需要哪些评论</li><li>可以发送给客户端的包含流程结果的可交付结果类型</li><li>如何处理客户请求从报表中删除修复后的调查结果</li><li>在执行修复验证时发现新问题时该怎么办</li></ul><p>以下是一些关键点：</p><ul><li>与任何评估一样，请提前做好准备<ul><li>访问以前的报告并仔细查看调查结果和摘要</li><li>请求您可能需要的任何访问权限，以便有足够的时间处理任何访问问题或缺少的特性&#x2F;功能</li><li>与客户就他们期望收到的可交付成果和结果保持一致</li></ul></li><li>在审查结果时，确保始终收集和保存适当的证据<ul><li>重复以前的命令、请求、工具扫描、屏幕截图等以捕获更改</li><li>确保在必要时进行彻底的测试</li><li>应提供适当的评论和证据，以描述发生了什么变化（如果有的话），以及调查结果的最新状态和原因<ul><li>如果需要，还可以对风险评级变化发表评论</li></ul></li></ul></li><li>如果您要更新原始报告文档<ul><li>将修复验证范围追加到范围部分</li><li>更新包含查找计数的任何列表或表，以指示状态的任何更改</li><li>在执行摘要中附加一个部分，以描述所评估内容的安全状况的任何更改。包括已修复的内容和保持不变的内容的演练</li><li>更新建议部分，以涵盖您需要向客户提供的任何重要方向</li><li>确保报告中的所有更新都清楚地标明了适当的部分名称，最好注明日期和草签</li></ul></li><li>如果该过程的结果存储在原始报告的附录中，请确保本节中的评论清晰明了，并且与原始报告部分进行了适当的交叉引用</li><li>如果客户希望新文档通过要审查的结果，请确保引用了原始文档，并且很明显该评估是出于补救验证目的<ul><li>考虑在本文件的附录中列出原始发现的完整列表以供参考</li></ul></li><li>如果您只是向客户提供一个包含问题列表及其各自元数据的电子表格，请考虑<ul><li>在电子表格中添加注释，以描述结果状态已更改（或未更改）的原因</li><li>具有用于查找状态的列</li><li>对行进行颜色编码，以更清楚地了解哪些问题是什么状态</li><li>保留一个单独的文档，用于存储补救验证的证据，无论客户是否愿意</li></ul></li><li>当客户希望您从原始报告文档中删除已修复的问题，而不是标记已修复和未修复的问题时，请小心 - 这可能会改变对文档的看法。但是，如何处理这个问题取决于您。</li><li>如果在修复验证评估中发现新发现，则应将这些发现添加到报告中。<ul><li>应更新适用的报告章节，尤其是执行摘要</li><li>确保您了解为什么这些发现以前可能没有被识别出来，即使它们只是被忽略了</li><li>向您的客户发送电子邮件或安排电话，以检查报告中可能包含的任何新发现</li><li>如果您觉得客户可能会对此非常不满意，请与您的团队讨论最佳方法</li></ul></li></ul><p>修复验证大多可以是一项简单的练习。但是，正如本章所讨论的，我们可以通过多种方式确保在完成此过程时为客户提供重要价值。在修复结果后，将最初报告的风险与最新风险进行深思熟虑的比较，可以帮助客户了解其安全状况。</p><h1 id="2-修复验证-准备"><a href="#2-修复验证-准备" class="headerlink" title="2-修复验证 - 准备"></a>2-修复验证 - 准备</h1><p>执行修复验证通常有两个核心任务：</p><ul><li>查看适用的调查结果，看看它们是否已得到修复</li><li>更新或创建文档以显示已修复的内容和未修复的内容</li></ul><p>为了在这两项任务中取得成功，应进行适当的准备。</p><p>通常，修复验证的任务仅限于几天。有时这些可以很灵活，但根据我的经验，这些可以放在你的日程安排中，围绕其他工作。为避免影响其他工作，这项工作应及时完成，没有问题，就像任何其他评估一样。在本课程开始时，我们讨论了在准备评估时需要积极主动 - 这也适用于这里。</p><p>“预评估”课程下“客户沟通”一章中概述的过程适用于此处。以下是关键点的摘要：</p><ul><li>请求访问以前的报告文档</li><li>如果需要，与客户就预期的可交付成果保持一致</li><li>请求访问修复验证可能需要的测试环境和凭据<ul><li>确保与客户设定期望，并给他们一个最后期限来准备好这些东西——在评估理想前几天。这样，您将能够在评估开始之前测试和验证事情是否正常工作，并且是否符合预期。如果访问不起作用（这种情况经常发生），则有一个小窗口可以纠正此问题。</li></ul></li><li>请记住，不要只检查凭据是否有效，还要利用以前的报告，查看功能、数据、系统或任何其他需要可用于评估的内容是否存在且可访问。值得让您的客户知道您打算这样做，并在您这样做之前查看他们是否有任何问题。</li></ul><p>上述任务涵盖了开始测试所需的内容，但还需要执行的是熟悉先前的评估。如果你是被分配到上一次评估的人，这应该是直截了当的（取决于这是多久以前），如果你不是，这可能会更痛苦一些，但这是值得的。您需要了解您正在查看的内容，以便能够了解最初报告的整体安全状况的变化。以下是您应该执行的几项任务，要么在评估开始之前（时间允许），要么在评估开始时执行：</p><ul><li>仔细阅读执行摘要和建议部分</li><li>通读您要审查的所有发现</li><li>如果您不是原始报告的作者，请查看谁是 - 如果他们有空，请与他们联系，如有任何问题</li></ul><p>请务必通读这些部分，以便了解影响评估时测试内容的风险。有了这些知识，您可以为客户编写有意义的更新和评论，让他们在修复发现后更好地了解其安全状况。</p><hr><p>接下来，让我们看一下结果的常见状态，以及它们在修复验证期间的变化情况。</p><h1 id="3-修复验证-发现状态与关闭发现"><a href="#3-修复验证-发现状态与关闭发现" class="headerlink" title="3-修复验证 - 发现状态与关闭发现"></a>3-修复验证 - 发现状态与关闭发现</h1><p>进行修复验证时，客户的目标是将发现从“开放”状态转移至“关闭”状态。本质上，他们希望得到你的确认，即在原始评估中发现的风险已不再存在。</p><p>我花了一些时间回顾过去使用和见过的一些状态，“开放”和“关闭”是核心状态。其他一些状态常用于展示客户已采取的方向或以某种方式标记漏洞，但它们大多都是“开放”和“关闭”的变体。如果风险仍处于“开放”状态，通常表示其仍然适用；相反，当风险不再相关时，应将其标记为“关闭”。</p><p>接下来，我们将通过一些修复验证场景探讨一些状态变化。</p><h2 id="方案-1-结果已修复"><a href="#方案-1-结果已修复" class="headerlink" title="方案 1 - 结果已修复"></a>方案 1 - 结果已修复</h2><p>假设我们在网络中发现某主机上暴露了Telnet服务。在修复验证过程中，我们发现该问题已不存在，端口已被关闭。这种情况应视为“关闭”。</p><h2 id="方案-2-并非所有实例都已修复"><a href="#方案-2-并非所有实例都已修复" class="headerlink" title="方案 2 - 并非所有实例都已修复"></a>方案 2 - 并非所有实例都已修复</h2><p>这种情况可能很明显，但应该涵盖以防万一。让我们考虑在网络上发现大约 100 个易受攻击的服务。假设客户端修复了 100 项服务中的 95 项。所有服务都可以相互访问。调查结果是否“已关闭”？</p><p>由于环境中仍然存在易受攻击的服务，因此调查结果应保持“开放”状态。如果其余服务有额外的上下文，可能会减少漏洞利用的影响，那么这将是风险评级的更改，而不是关闭调查结果。</p><h2 id="场景-3-发现更难利用，或者影响发生了变化-1"><a href="#场景-3-发现更难利用，或者影响发生了变化-1" class="headerlink" title="场景 3 - 发现更难利用，或者影响发生了变化 #1"></a>场景 3 - 发现更难利用，或者影响发生了变化 #1</h2><p>让我们考虑对一个发现进行回顾，在原始评估中发现了几个缺失的补丁。供应商的补丁风险评级各不相同，从严重到低不等。假设客户端安装了除低严重性补丁之外的所有补丁。</p><p>让我们假设剩余的补丁：</p><ul><li>现在更难利用，因为您需要本地访问</li><li>或者利用它们不会造成相同程度的影响</li></ul><p>很明显，虽然风险仍然存在，但它可能不像以前那样灾难性。那么，调查结果已经结束了吗？</p><p>在风险仍然存在的情况下，不应将调查结果视为已结束。理想情况下，应更新调查结果的风险评级，以反映调查结果的可利用性或影响变化，并且应在调查结果的补救验证注释中捕获推理。</p><p>我提到在某些情况下可能会使用其他状态，这可能是“部分关闭”的候选者。这里的理由可能是，这一发现在风险和影响方面发生了重大变化，虽然它在技术上是“开放的”，但迄今为止完成的补救措施使其可利用性大大降低，以至于它更接近于“封闭”而不是“开放”。然而，这种推理需要谨慎处理。为了清楚起见，最好简单地调整风险评级，并在提供给客户的评论中解释发生了什么变化，为什么风险发生了变化，以及为什么调查结果仍然是“开放”的。</p><h2 id="场景-4-发现更难利用或影响已更改-2"><a href="#场景-4-发现更难利用或影响已更改-2" class="headerlink" title="场景 4 - 发现更难利用或影响已更改 #2"></a>场景 4 - 发现更难利用或影响已更改 #2</h2><p>让我们考虑在代码审查期间发现的跨站点脚本漏洞。在最初的评估中，我们看到没有执行输入验证或输出编码。在修复验证阶段，我们看到客户端实现了一个复杂的基于正则表达式的输出编码器，而不是使用受信任的库来执行任务（根据修复）。</p><p>在审查过程中，我们无法找到绕过过滤的方法，但由于解决方案的实施方式，我们不能排除该发现仍然可以被利用。在这种情况下，我们该怎么办？</p><p>客户端已经实现了一些可能被认为是可靠的东西，但可能仍然会被不受时间限制的攻击者绕过。这个有点难以确定状态。如果您认为这仍然可以被利用，那么从技术上讲，“开放”会更合适，但是，这可能是“部分封闭”可能更公平的一种情况。如果您找不到利用该错误的方法，并且您认为该解决方案足够强大，则可以将其标记为“已关闭”。这些案件需要仔细判断。在这种情况下，客户端没有实现最佳解决方案，即使用受信任的库来完成此任务。在这种情况下，我的建议是将结果标记为“部分关闭”，概述可能有绕过过滤的途径，但在测试期间我们无法被发现，最理想的解决方案是使用受信任的第三方库来执行输出过滤。</p><h2 id="方案-5-修复改变了发现可被利用的位置"><a href="#方案-5-修复改变了发现可被利用的位置" class="headerlink" title="方案 5 - 修复改变了发现可被利用的位置"></a>方案 5 - <strong>修复改变了发现可被利用的位置</strong></h2><p>假设一个 Web 应用程序没有身份验证，可从 Internet 访问，但预期用途是从受信任的网络使用。客户端没有添加身份验证，而是阻止了对服务的 Internet 访问，并且仅接受来自一组受信任的 IP 地址范围的连接。主要问题是缺少身份验证，那么客户端的补救措施是否解决了问题？</p><p>在此示例中，攻击者所需的网络位置更改了发现的可利用性或可能性，并将更改风险评级。该发现仍应被视为“开放”，但是，这可能是一些团队可能会考虑使用“就地缓解”甚至“部分关闭”的另一种情况。虽然这两种状态都应该意味着仍然存在一些风险，但在这种情况下，我可能倾向于将调查结果保留为“开放”，因为根本问题（缺乏身份验证）尚未解决。</p><h2 id="场景-6-发现为误报"><a href="#场景-6-发现为误报" class="headerlink" title="场景 6 - 发现为误报"></a>场景 6 - <strong>发现为误报</strong></h2><p>在测试期间，网络扫描工具发现了具有不受信任证书的服务器，并报告了该证书。假设客户端希望我们关闭问题，因为服务器已经部署了自己的证书（使用内部证书颁发机构）。这是我见过的很常见的误报，当 SSL&#x2F;TLS 证书报告有问题时，测试人员应该仔细检查工具中的数据。</p><p>如果可以验证客户所述内容，该发现应标记为“关闭”。另一种选择是将发现标记为“误报”。这是因为你在声明风险已不再存在（或者可能从未存在）。与其他场景一样，重要的是在修复验证评论中说明状态为何发生变化。</p><hr><p>接下来，让我们来看看在审查可能补救的结果时应该如何收集证据以及收集哪些证据。</p><h1 id="4-修复验证-捕获证据"><a href="#4-修复验证-捕获证据" class="headerlink" title="4-修复验证 - 捕获证据"></a>4-修复验证 - 捕获证据</h1><p>简而言之，作为补救验证过程的一部分收集的证据应与原始报告中收集的证据完美匹配。因此，如果使用 HTTP 请求和响应来显示 Web 应用程序漏洞，则应执行并捕获重复请求和响应以显示差异（或相似之处）。然后，这些证据应该被保存、使用，并可能包含在客户的任何可交付成果中，作为此过程的一部分（例如更新的报告文件）。</p><p>除了证据之外，记下您当时的观察结果也很重要。存储此评论的最佳位置是与捕获的证据一起。某些修复验证不仅仅是简单的检查，还需要进行彻底的审查。本综述应在这些说明中总结。</p><p>让我们浏览一下 Finding Write-ups 一章中的几个 OmniCorp 示例问题，看看我们应该为各种类型的问题收集什么，并浏览一些示例评论。</p><h1 id="可公开访问的-S3-存储桶"><a href="#可公开访问的-S3-存储桶" class="headerlink" title="可公开访问的 S3 存储桶"></a>可公开访问的 S3 存储桶</h1><p>对于<strong>可公开访问的 S3 存储桶</strong>的发现，证据如下：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p>为此发现执行修复验证时，我们希望重复相同的命令并捕获结果。</p><p>假设他们完全删除了存储桶，这是可能返回的内容：</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">$aws s3 <span class="hljs-keyword">ls</span> s3:<span class="hljs-comment">//omnicorp-private-files</span><br><br>An <span class="hljs-keyword">error</span> occurred (NoSuchBucket) when calling the ListObjectsV2 operation: The specified bucket does not exist<br></code></pre></td></tr></table></figure><p>用如下注释保存证据就足够了：</p><blockquote><p>使用相同的命令尝试列出原始 S3 存储桶中的文件。AWS 返回了一条错误消息，指示存储桶不再存在。由于存储桶不再存在，并且无法再访问敏感文件，因此此发现已标记为已关闭。</p></blockquote><p>请注意，评注如何清楚地说明导致调查结果状态更改为“已结束”的原因。</p><hr><p>有时，运行相同的命令实际上可能根本不会提供任何输出。假设客户端删除了文件，但保留了 S3 存储桶。这是您将返回的输出：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">$ aws <span class="hljs-built_in">s3</span> ls <span class="hljs-built_in">s3</span>:<span class="hljs-comment">//omnicorp-private-files</span><br></code></pre></td></tr></table></figure><p>此处，该命令未返回错误，但由于不存在任何文件，因此未返回任何文件。在这种情况下，对于不熟悉 AWS cli 工具在这种情况下如何工作的读者来说，澄清这一点至关重要 - 一些读者可能会认为您忘记包含一些输出。</p><blockquote><p>使用相同的命令尝试列出原始 S3 存储桶中的文件。命令已成功完成，但未返回任何输出。这表示 S3 存储桶可公开访问，但文件已被删除。由于 S3 存储桶仍然存在并且可公开访问，因此此发现仍处于开放状态。但是，由于敏感文件已被删除，因此风险等级已更改为低。</p></blockquote><p>请注意，在这种情况下，结果的严重性已更改，但仍处于打开状态。原因已在评论中体现出来。</p><hr><p>最后，假设返回相同的响应。有些人可能认为不值得再次捕获相同的证据，但我认为最好保持一致。如果您要对报告中的多个发现执行此过程，则尤其如此。</p><p>以下是命令将返回的内容以及您可能给出的评论。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br><br><br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p>再次运行相同的命令显示文件仍然存在，并且可以在 Internet 上访问。由于 S3 存储桶是可公开访问的，并且敏感文件仍然可用，因此此发现仍处于开放状态。</p><p>在这里，评注明确指出，由于没有变化，问题状态也没有变化。</p><h1 id="在论坛软件上存储跨站点脚本"><a href="#在论坛软件上存储跨站点脚本" class="headerlink" title="在论坛软件上存储跨站点脚本"></a>在论坛软件上存储跨站点脚本</h1><p>让我们看一个 HTTP 请求和响应示例。</p><p>在这里，我们看到服务器返回了未转义的用户提供的 HTML，该 HTML 将在用户的浏览器中呈现：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><br><span class="language-mel">...</span><br><span class="language-mel"></span><br><span class="language-mel">comment=%3Cscript%3Ealert(<span class="hljs-string">&#x27;XSS&#x27;</span>)%3C%2Fscript%3E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><br><span class="language-angelscript">...</span><br><span class="language-angelscript"></span><br><span class="language-angelscript">&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">comment</span>&quot;&gt;<span class="hljs-symbol">User</span> <span class="hljs-symbol">posted: </span>&lt;<span class="hljs-symbol">script</span>&gt;<span class="hljs-symbol">alert</span>(&#x27;<span class="hljs-symbol">XSS</span>&#x27;)&lt;/<span class="hljs-symbol">script</span>&gt;&lt;/<span class="hljs-symbol">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在这种情况下，我们希望执行相同的请求并检查响应，但由于发现的类型，我们应该彻底测试参数，以确保其他有效负载不会导致跨站点脚本。假设该发现已修复。让我们看看服务器可能返回的内容以及我们可能留下的评论：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>session=dn320487ty30232367<br><br><span class="language-mel">comment=%3Cscript%3Ealert(<span class="hljs-string">&#x27;XSS&#x27;</span>)%3C%2Fscript%3E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><br><span class="language-xml">SNIP</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-symbol">&amp;lt;</span>script<span class="hljs-symbol">&amp;gt;</span>alert(<span class="hljs-symbol">&amp;apos;</span>XSS<span class="hljs-symbol">&amp;apos;</span>)<span class="hljs-symbol">&amp;lt;</span>/script<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p>受影响的参数同时受到原始恶意负载和许多其他有效负载的影响。这是为了确保没有恶意 JavaScript 从 Web 应用程序返回并在浏览器中执行的可能性。Web 应用程序对用户提供的内容执行了彻底的输出编码，然后返回并在 Web 应用程序页面中使用它。由于未发现成功的跨站点脚本有效负载，因此此发现标记为已关闭。</p></blockquote><hr><p>现在让我们假设没有修正发现，并且应用程序的开发人员决定简单地拒绝字符串&lt;脚本&gt;或 </script>提交到服务器。通常有几种方法可以解决这种糟糕的输入验证，但假设我们只是更改了脚本标记内容的大小写，从而允许执行漏洞：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>session=dn320487ty30232367<br><br><span class="language-mel"></span><br><span class="language-mel">comment=%3CSCRIPT%3Ealert(<span class="hljs-string">&#x27;XSS&#x27;</span>)%3C%2FSCRIPT%3E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><br><span class="language-angelscript">SNIP</span><br><span class="language-angelscript"></span><br><span class="language-angelscript">&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">comment</span>&quot;&gt;<span class="hljs-symbol">User</span> <span class="hljs-symbol">posted: </span>&lt;<span class="hljs-symbol">SCRIPT</span>&gt;<span class="hljs-symbol">alert</span>(&#x27;<span class="hljs-symbol">XSS</span>&#x27;)&lt;/<span class="hljs-symbol">SCRIPT</span>&gt;&lt;/<span class="hljs-symbol">div</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>受影响的参数已使用大量恶意负载进行测试。来自服务器的响应表明 Web 应用程序正在拒绝包含“<script>”或“</script>”的所有有效负载。只需将调查结果中的有效载荷报告修改为使用“<SCRIPT>”和“</SCRIPT>”即可绕过这一点。由于该参数仍然容易受到跨站点脚本的影响，因此此发现仍未确定。</p></blockquote><p>对于跨站脚本漏洞（或任何可能具有某些视觉结果的漏洞），最好捕获此漏洞以及屏幕截图。</p><h1 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h1><p>如果最初报告的问题中的证据是屏幕截图，则只需尝试捕获相同的屏幕截图即可。这可能是 Web 应用程序页面的屏幕截图、基于 GUI 的工具的结果或文档中页面的结果。无论它是什么，访问或获取屏幕截图的最新来源，并将其作为证据。请记住与原始报告的证据格式保持一致，除非它不清晰。如果是这样，请按照“报告内容”一章的“证据”课程中概述的内容进行捕获。</p><h1 id="保存证据"><a href="#保存证据" class="headerlink" title="保存证据"></a>保存证据</h1><p>如本课程其他地方所述，在整个评估过程中保存证据很重要 - 补救验证活动也是如此。这包括以下内容：</p><ul><li>工具输出</li><li>Web 代理日志</li><li>截图</li></ul><p>这些应该在评估后保留，以便在对调查结果有任何争议时可以参考，或者如果需要向客户传递可能对他们有用的其他信息来重现问题。</p><hr><p>接下来，让我们看看报告文档的其余部分需要更新的内容。</p><h1 id="5-修复验证-跟踪结果-更新报告"><a href="#5-修复验证-跟踪结果-更新报告" class="headerlink" title="5-修复验证 - 跟踪结果 - 更新报告"></a>5-修复验证 - 跟踪结果 - 更新报告</h1><p>将新信息附加到现有报告文档是我查看正在编译的修复验证结果的最常见方式。关键报告部分通常附加有关风险变化的重要信息，并更新调查结果以表明它们已经过审查，并包括其状态发生变化（或未改变）的原因和证据。</p><p>让我们浏览一些熟悉的部分，看看在执行修复验证后如何更新它们。我不再花时间解释这些部分是什么，如果您想提醒自己它们的用途，请参阅“报告内容”一章中的适用课程。</p><h1 id="调查结果概述-2"><a href="#调查结果概述-2" class="headerlink" title="调查结果概述"></a>调查结果概述</h1><p>报表中有几个结果概述部分可能会受到修复验证结果的影响。让我们来看看我们之前在课程中看过的两个。</p><h2 id="调查结果概述-3"><a href="#调查结果概述-3" class="headerlink" title="调查结果概述"></a>调查结果概述</h2><p>首先，显示问题计数的表格。完成修复验证工作后，可以更新表以仅显示仍处于“未结”状态的结果：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>危急</strong></th><th><strong>高</strong></th><th><strong>中等</strong></th><th><strong>低</strong></th><th><strong>信息</strong></th><th><strong>总</strong></th></tr></thead><tbody><tr><td><strong>Web 应用程序审查</strong></td><td>3</td><td>1</td><td>5</td><td>5</td><td>0</td><td>14</td></tr><tr><td><strong>AWS 配置审查</strong></td><td>1</td><td>3</td><td>4</td><td>10</td><td>2</td><td>20</td></tr><tr><td><strong>总</strong></td><td>4</td><td>4</td><td>9</td><td>15</td><td>2</td><td>34</td></tr></tbody></table><p>这并不总是那么清楚，因此最好包含一个可用于捕获已关闭结果的列。假设上表中的所有关键问题和高问题都已关闭，下面可能是这样的：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>危急</strong></th><th><strong>高</strong></th><th><strong>中等</strong></th><th><strong>低</strong></th><th><strong>信息</strong></th><th><strong>闭</strong></th><th><strong>总</strong></th></tr></thead><tbody><tr><td><strong>Web 应用程序审查</strong></td><td>0</td><td>0</td><td>5</td><td>5</td><td>0</td><td>4</td><td>14</td></tr><tr><td><strong>AWS 配置审查</strong></td><td>0</td><td>0</td><td>4</td><td>10</td><td>2</td><td>4</td><td>20</td></tr><tr><td><strong>总</strong></td><td>0</td><td>0</td><td>9</td><td>15</td><td>2</td><td>8</td><td>34</td></tr></tbody></table><p>以视觉方式显示此信息也可以更好一些：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231952887.png" alt="img"></p><h2 id="调查结果清单-1"><a href="#调查结果清单-1" class="headerlink" title="调查结果清单"></a>调查结果清单</h2><p>报告通常有一个调查结果列表作为摘要，其中包含一些关键信息。下面是添加“状态”列后此表的外观：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>查找 ID</strong></th><th><strong>风险</strong></th><th><strong>状态</strong></th><th><strong>标题</strong></th></tr></thead><tbody><tr><td>Web 应用程序评估</td><td>CSK</td><td>危急</td><td>Closed</td><td>未经身份验证的 API 端点返回医院配置</td></tr><tr><td>Web 应用程序评估</td><td>ZNB</td><td>危急</td><td>Closed</td><td>为管理员帐户设置的默认密码</td></tr><tr><td>Web 应用程序评估</td><td>JXY</td><td>危急</td><td>Open</td><td>通用管理员帐户</td></tr><tr><td>Web 应用程序评估</td><td>IIB</td><td>高</td><td>Closed</td><td>不安全的直接对象引用</td></tr><tr><td>Web 应用程序评估</td><td>CJZ</td><td>高</td><td>Closed</td><td>SQL 注入患者详细信息更新屏幕</td></tr><tr><td>Web 应用程序评估</td><td>XQJ</td><td>高</td><td>Closed</td><td>无需 MFA 的管理员登录</td></tr><tr><td>Web 应用程序评估</td><td>GLK</td><td>高</td><td>Closed</td><td>可公开访问的管理门户</td></tr><tr><td>Web 应用程序评估</td><td>NAA</td><td>高</td><td>Part Closed</td><td>无需身份验证即可公开访问的医院门户</td></tr><tr><td>Web 应用程序评估</td><td>WOO</td><td>中等</td><td>Open</td><td>租赁执行不力</td></tr><tr><td>Web 应用程序评估</td><td>SAU</td><td>中等</td><td>Open</td><td>可以捕获 EMR 存储的凭证</td></tr><tr><td>Web 应用程序评估</td><td>IUF</td><td>中等</td><td>Open</td><td>无速率限制</td></tr><tr><td>Web 应用程序评估</td><td>LAM</td><td>中等</td><td>Closed</td><td>可猜测的管理员 URL</td></tr><tr><td>AWS 配置审查</td><td>TDL</td><td>高</td><td>Closed</td><td>未对管理员帐户强制执行 MFA</td></tr><tr><td>AWS 配置审查</td><td>DWM</td><td>高</td><td>Closed</td><td>没有强制执行密码复杂性</td></tr><tr><td>AWS 配置审查</td><td>CIV</td><td>高</td><td>Closed</td><td>未启用 Cloudwatch</td></tr><tr><td>AWS 配置审查</td><td>EDE</td><td>高</td><td>Closed</td><td>SSH 服务器公开</td></tr><tr><td>AWS 配置审查</td><td>CTY</td><td>高</td><td>Open</td><td>用于生产的单个 EC2 实例 – DoS 风险</td></tr><tr><td>AWS 配置审查</td><td>FBB</td><td>高</td><td>Open</td><td>无备份</td></tr><tr><td>AWS 配置审查</td><td>PSY</td><td>高</td><td>Closed</td><td>未启用 MFA 删除的数据库</td></tr><tr><td>AWS 配置审查</td><td>ISN</td><td>中等</td><td>Open</td><td>没有 Web 应用程序防火墙</td></tr><tr><td>AWS 配置审查</td><td>DXU</td><td>中等</td><td>Open</td><td>缺少用户组</td></tr></tbody></table><p>这种格式使读者能够一目了然地知道哪些问题尚未得到修复。</p><h1 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h1><p>我们已经触及了更新的发现中可能捕获的内容 - 新的证据和评论，说明更新的内容。这是整个过程的样子。</p><blockquote><p><strong>在论坛软件上存储跨站点脚本</strong></p><p><strong>风险 - 严重</strong></p><p><strong>描述</strong></p><p>OmniCorp 用于协助客户支持请求的论坛软件容易受到存储的跨站点脚本的影响。此漏洞影响了论坛帖子页面上的评论部分，任何恶意注入的代码都会对访问受影响页面的任何用户运行。攻击者可以利用此漏洞破坏用户论坛会话（包括论坛版主或管理员），甚至提供虚假的登录表单，试图窃取用户的生产凭据。如果获取了用户凭据，则可能导致攻击者获得对敏感用户数据的访问权限。此漏洞的攻击复杂度非常低，因为没有防御性编码，使攻击者更容易利用;唯一的要求是用户访问受影响的论坛帖子。虽然只有该平台的用户可以利用这个问题，但鉴于互联网上的任何人都可以自行注册和使用该平台，这是没有意义的。虽然在托管论坛的 Web 服务器上安装了 Web 应用程序防火墙，但它当前并未运行。但是，即使启用了此问题，它也可能无法阻止所有利用此问题的尝试。</p><p>存储的跨站点脚本是一种漏洞，Web 应用程序未对不受信任的输入执行足够的输入验证或清理，或者未对值执行足够的输出编码。其结果是，应用程序（在数据库、日志或其他系统中）提交并随后存储的恶意信息随后被反映并合并到生成的网页中。在跨站点脚本的情况下，JavaScript 被发送到服务器、存储并返回到用户的浏览器，并执行以执行各种恶意操作。</p><p>利用跨站点脚本漏洞存在一系列可能性，其中一些包括：</p><ul><li>在浏览器会话中运行加密矿工</li><li>尝试窃取经过身份验证的页面上特定于用户的会话令牌或内容</li><li>注入虚假表格供用户填写，以试图窃取信息（例如，用于收集凭据的登录表格）</li><li>在用户不知情的情况下在用户上下文中执行操作（例如，将恶意内容发布到论坛）</li><li>显示恶意内容</li></ul><p>鉴于利用此漏洞的方式多种多样，此问题会严重影响任何处理敏感数据的应用程序，因为它更有可能被盗、修改或删除。</p><p>以下 HTTP 请求和响应显示了 OmniCorp 论坛应用程序软件接受的基本 JavaScript 的注入。</p><p><strong>请求</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">POST</span> /forum/post/<span class="hljs-number">1</span>/comment HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: forum.example.com<br><span class="hljs-attribute">Content</span>-Type: application/x-www-form-urlencoded<br><span class="hljs-attribute">Content</span>-Length: <span class="hljs-number">68</span><br><span class="hljs-attribute">Cookie</span>: sessionid=REDACTED<br> <br><span class="hljs-attribute">postId</span>=<span class="hljs-number">42</span>&amp;comment=%<span class="hljs-number">3</span>Cscript%<span class="hljs-number">3</span>Ealert(&#x27;XSS&#x27;)%<span class="hljs-number">3</span>C%<span class="hljs-number">2</span>Fscript%<span class="hljs-number">3</span>E<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br></code></pre></td></tr></table></figure><p>以下 HTTP 请求和响应显示服务器作为可在用户浏览器会话中运行的可执行 JavaScript 返回的有效负载。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/forum/post/1/comments</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xquery">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>Content-Type: <span class="hljs-type">text</span>/html; charset=UTF-<span class="hljs-number">8</span><br>Content-Length: <span class="hljs-number">256</span><br> <br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"></span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;XSS&#x27;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>下图显示了正在执行的有效负载：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231958163.png" alt="img"></p><p>正在执行的 Omnicorp 存储的跨站点脚本</p><p>创建概念验证 JavaScript 有效负载以生成以下 OmniCorp 登录表单。这将显示在请求的论坛帖子的顶部，以提示输入用户的凭据。提交后，用户的凭据将被发送到攻击者控制的服务器，然后帖子将变得可见。</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231952839.png" alt="img"></p><p>假 OmniCorp 登录屏幕</p><p>可以在附录第 5.2 节中找到虚假登录概念证明 HTML 和 JavaScript 有效负载的完整副本，以及使用的 HTTP 请求和响应。</p><p><strong>修复验证说明 （2024-03-10 LR）</strong></p><p>受影响的参数既受到原始恶意负载的影响，也受到许多其他有效负载的影响。这是为了确保没有恶意 JavaScript 从 Web 应用程序返回并在浏览器中执行的可能性。Web 应用程序对用户提供的内容执行了彻底的输出编码，然后返回并在 Web 应用程序页面中使用它。由于这些原因，此发现已被标记为已关闭。</p><p>来自服务器的以下请求和响应显示了对恶意负载执行 HTML 编码的 Web 应用程序：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>session=dn320487ty30232367<br><br><span class="language-mel"></span><br><span class="language-mel">comment=%3Cscript%3Ealert(<span class="hljs-string">&#x27;XSS&#x27;</span>)%3C%2Fscript%3E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><br><span class="language-xml">SNIP</span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-symbol">&amp;lt;</span>script<span class="hljs-symbol">&amp;gt;</span>alert(<span class="hljs-symbol">&amp;apos;</span>XSS<span class="hljs-symbol">&amp;apos;</span>)<span class="hljs-symbol">&amp;lt;</span>/script<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure></blockquote><hr><p>在这里，我们创建了一个附加到发现之外的部分（尽管它可以放在发现的其他位置，也许在描述的末尾）。该部分的名称反映了其作为原始报告的更新目的，并附有执行更新的日期和一些首字母缩写。提供了为检查结果是否已修复而执行的操作的摘要，并包括显示服务器更新响应的证据。</p><p>除上述内容外，结果本身也可能包含结果的状态（如果它们是关闭的还是打开的等）。此时也应根据特定问题的修复验证结果进行更新。</p><h1 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h1><p>修复验证通常是原始范围之外的一项工作。因此，这意味着应使用有关修复验证的信息更新范围部分。</p><p>原始范围可以附加类似于以下内容的内容：</p><blockquote><p><strong>修复验证 - 2024-03-10 LR</strong></p><p>OmniCorp 已联系 ogSec，以确认本报告文件中的一些发现是否已得到适当补救。OmniCorp要求审查以下调查结果：</p><p><strong>Web 应用程序评估</strong></p><ul><li>CSK - 未经身份验证的 API 端点返回医院配置</li><li>ZNB - 为管理员帐户设置的默认密码</li><li>JXY - 通用管理员帐户</li><li>IIB - 不安全的直接对象引用</li><li>CJZ - SQL 注入患者详细信息更新屏幕</li><li>GLK - 可公开访问的管理门户</li><li>NAA - 无需身份验证即可公开访问的医院门户</li></ul><p><strong>AWS 配置审查</strong></p><ul><li>DWM - 不强制执行密码复杂性</li><li>CIV - 未启用 Cloudwatch</li><li>EDE - SSH 服务器公开</li><li>CTY - 用于生产的单个 EC2 实例 – DoS 风险</li><li>FBB - 无备份</li><li>PSY - 未启用 MFA 删除的数据库</li></ul><p>应该注意的是，与原始评估一样，Web 应用程序评估和 AWS 配置审查都使用了相同的环境：</p><p><strong>Web 应用程序评估</strong></p><p>审查的 Web 应用程序：</p><ul><li><a href="https://pppp.dddddd.dddddd/test">https://pppp.dddddd.dddddd/test</a></li><li><a href="https://cccc.dddddd.dddddd/test">https://cccc.dddddd.dddddd/test</a></li></ul><p><strong>AWS 配置审查</strong></p><p>已审核的 AWS 账户：</p><ul><li>AKIAIOSFODNN7EXAMPLE</li><li>AKIAIOSFODNN7EXAMPLE2</li></ul></blockquote><hr><p>在这里，原始工作范围附加了一个附加部分（适当命名和注明日期），表明执行的补救验证工作。这包括要再次审查的调查结果列表，以及有关在修复验证过程中使用了哪些 Web 应用程序和 AWS 账户的一些说明。捕获这些信息非常重要，以确保明确评估的确切内容;如果您要处理具有许多环境的客户端，或者如果没有此信息，范围可能会令人困惑，这可能很有用。</p><p>在关于作用域的课程中，我们展示了这些信息可以以表格格式捕获。我的建议是，如果你使用这种风格，你只需复制整个部分并将其放在原始部分的下面。以下是这个新版本的样子：</p><p><strong>修复验证 - 2024-03-10 LR</strong></p><table><thead><tr><th><strong>评估开始</strong></th><th>01&#x2F;01&#x2F;2024</th></tr></thead><tbody><tr><td><strong>评估结束</strong></td><td>15&#x2F;01&#x2F;2024</td></tr><tr><td><strong>评估小组</strong></td><td>卢克·罗杰森</td></tr><tr><td><strong>评估名称</strong></td><td>OGPatientBooking 修复验证</td></tr><tr><td><strong>工作阶段</strong></td><td>修复验证（Web 应用程序评估和 AWS 配置审核结果）</td></tr><tr><td><strong>范围</strong></td><td>AWS 账户：AKIAIOSFODNN7EXAMPLE、AKIAIOSFODNN7EXAMPLE2 要审查的结果：  Web 应用程序评估  - CSK - 未经身份验证的 API 终端节点返回医院配置 - ZNB - 为管理员帐户 设置的默认密码 - JXY - 通用管理员帐户 - IIB - 不安全的直接对象参考 - CJZ - SQL 注入患者详细信息更新屏幕 - GLK - 可公开访问的管理门户 - NAA - 无需身份验证  即可公开访问的医院门户 AWS 配置审查  - DWM - 不强制执行 密码复杂性 - CIV - 未启用 Cloudwatch - EDE - SSH 服务器公开 - CTY - 用于生产的单个 EC2 实例 – DoS 风险 - FBB - 无备份 - PSY - 未启用 MFA 删除的数据库</td></tr><tr><td>测试环境</td><td>在生产环境中测试医院帐户 （test-hospital-2）</td></tr></tbody></table><p>这看起来确实有点臃肿，这就是为什么我更喜欢使用散文格式来确定信息范围。我怀疑有可能让它看起来更干净一些，如果他们希望使用这种格式，我会把它留给读者来弄清楚。</p><h1 id="摘要-1"><a href="#摘要-1" class="headerlink" title="摘要"></a>摘要</h1><p>同样，总结评估结果是有意义的，总结修复验证的结果以突出安全态势方面的变化也是有意义的。</p><p>最合乎逻辑的地方是在执行摘要末尾添加一个小节。让我们更新 OGPatientBooking 解决方案评估的执行摘要。</p><p>提醒一下，以下是执行摘要的内容：</p><blockquote><p>OGPatientBooking 解决方案是一个 SaaS（软件即服务）平台，被英国十几家大型医院使用。它的主要目的是作为患者在医院进行自我检查的单一场所，从而降低对接待人员的需求或腾出时间从事其他任务。该平台每天通过放置在医院入口处的终端预订大约 25,000 名独特的患者（每月约 ~750,000 名）。大多数使用该平台的医院也在使用“患者通信”模块，该模块允许患者查看测试结果或医生的消息。由于在英国大型医院的使用以及访问患者数据的能力，该解决方案可能可以访问大约 1000 万人的数据。</p><p>由于该平台在医院运营中至关重要，因此平台的可用性和完整性以及所涉及的患者数据的机密性至关重要。如果这一基本系统不可用，医院可能会受到严重影响。更关键的是，必须不惜一切代价保护从此解决方案使用和访问的数据，因为它包含个人健康信息 （PHI）。从隐私的角度来看，对这些数据的任何泄露或修改都可能意义重大，在最坏的情况下（例如，攻击者已获得对医院 EMR 解决方案的访问权限并更改了患者的药物或剂量），它可能导致生命损失。</p><p>虽然该应用程序展示了安全 Web 应用程序安全实践的领域，以及在面向外部的 Web 应用程序部署方面的许多安全配置，但许多具体发现和架构问题意味着患者数据面临重大泄露风险。</p><p>由于登记过程的工作方式，到达医院的患者需要通过触摸屏验证他们是谁，并遵循多步骤流程使用他们的出生日期来验证自己。尝试使用触摸屏猜测出生日期是可能的，但对于攻击者来说可能是不可行的。然而，在测试过程中，人们注意到所有医院的签到页面都可以通过互联网访问，并且很容易被发现。这意味着可以创建自动化工具，可以请求所有可能的出生日期（过去 100 年）以返回当天预约的患者列表。一旦攻击者处于此位置，他们就能够使用从患者预约中返回的详细信息来访问测试结果、医生的消息或查看或更新他们的个人信息（电子邮件地址、电话号码和医生手术）。发现医院的门户页面只需要猜测一个 URL，这对攻击者来说很容易做到。随后对签到过程的利用也将非常容易，因为有一些工具可以帮助进行此类攻击。</p><p>一旦攻击者处于上述位置，他们将能够利用平台中的其他漏洞，从而访问平台托管的所有医院的所有预约数据。读取、修改或删除这些记录是可能的，并且由于用于托管平台的单个数据库中不同医院数据之间的隔离极其有限。攻击者不仅可以从所有这些患者中提取个人信息，还可以通过删除所有记录来有效地删除所有预约。这些漏洞很容易被经验丰富的攻击者发现，并且假设他们成功获得了对一名患者预约的访问权限，则攻击发生的可能性很大。</p><p>就像医院的签到页面可以公开访问一样，每家医院的管理面板也可以访问。一旦发现医院的签到页面位置，攻击者发现管理页面就很容易了。更糟糕的是，通用管理员帐户的使用正在使用中，对于几家医院来说，它没有从默认值（在公共文档中公开提供）更改。使用此帐户访问此区域将允许攻击者更改许多设置，这些设置可能导致给定医院的系统脱机。</p><p>不仅平台的前端面临重大风险，而且解决方案的部署以及AWS内部缺乏强化意味着攻击者有可能获得对AWS的访问权限。如果攻击者能够猜测或获取 AWS 管理员的用户名和密码，他们将完全控制整个解决方案，并能够访问、修改或删除平台内的所有数据。如果实施了多因素身份验证，这将是可以预防的。</p><p>此外，攻击者还可以访问医院 EMR 系统的凭证材料（安全存储，但所有 AWS 用户都可以访问），从而大大增加攻击者可以访问的数据类型。例如，这可能是大约1000万患者的病史。对这些数据的任何泄露都可能违反《2018年数据保护法》或涵盖个人健康信息的英国《通用数据保护条例》（GDPR）。违反此数据可能会导致对 OGPatientBooking 的严厉处罚。</p><p>虽然架构审查不在此评估范围内，但有人指出，该解决方案在 AWS 中没有足够的高可用性配置，也没有任何有效的备份。如果发生违规，并且应用程序受到拒绝服务条件的影响，这将产生重大影响。例如，如前所述，如果删除了数据库内容，则目前没有已知的恢复数据的方法。此外，如果在单个 EC2 实例上运行的应用程序受到拒绝服务情况的影响，则无法轻松扩展负载。这两个示例都表明，具有足够资源或访问权限的攻击者很容易影响此关键系统的可用性。</p><p>由于代码审查不在此评估范围内，因此无法确定 Web 应用程序本身的日志记录实现，但是，AWS 环境的日志记录和监控配置似乎处于默认状态。这意味着无法查看管理员已对环境进行身份验证并进行更改的 AWS 环境的任何审计。</p><p>根据确定的实施和架构问题，该平台面临潜在漏洞的重大风险，允许攻击者访问敏感的患者数据，并使其容易受到拒绝服务条件的影响。数据泄露和未经授权访问应用程序配置面板的可能性很高，这主要是由于易于获取可公开访问的页面的 URL。攻击者利用该系统所需的后续步骤很少，对应用程序的安全性构成严重威胁。必须立即采取行动，以调查和修复应用程序的入口点，并确认是否发生了任何历史患者数据泄露事件。</p></blockquote><p>假设在修复验证后，这是所有问题的最新状态：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>查找 ID</strong></th><th><strong>风险</strong></th><th><strong>状态</strong></th><th><strong>标题</strong></th><th><strong>笔记</strong></th></tr></thead><tbody><tr><td>Web 应用程序评估</td><td>CSK</td><td>危急</td><td>Closed</td><td>未经身份验证的 API 端点返回医院配置</td><td>返回特定 ID 的管理页面和门户页面 - 链接到 IDOR 错误</td></tr><tr><td>Web 应用程序评估</td><td>ZNB</td><td>危急</td><td>Closed</td><td>为管理员帐户设置的默认密码</td><td>默认密码已更新</td></tr><tr><td>Web 应用程序评估</td><td>JXY</td><td>危急</td><td>Open</td><td>通用管理员帐户</td><td>通用帐户仍然存在</td></tr><tr><td>Web 应用程序评估</td><td>IIB</td><td>高</td><td>Closed</td><td>不安全的直接对象引用</td><td>与攻击者可能在请求中更改整数 ID 以查找其他医院的配置的问题有关。不再可能</td></tr><tr><td>Web 应用程序评估</td><td>CJZ</td><td>高</td><td>Closed</td><td>SQL 注入患者详细信息更新屏幕</td><td>漏洞修复</td></tr><tr><td>Web 应用程序评估</td><td>XQJ</td><td>高</td><td>Closed</td><td>无需 MFA 的管理员登录</td><td>已实施 MFA</td></tr><tr><td>Web 应用程序评估</td><td>GLK</td><td>高</td><td>Closed</td><td>可公开访问的管理门户</td><td>防火墙到医院网络</td></tr><tr><td>Web 应用程序评估</td><td>NAA</td><td>高</td><td>Part Closed</td><td>无需身份验证即可公开访问的医院门户</td><td>防火墙到医院网络</td></tr><tr><td>Web 应用程序评估</td><td>WOO</td><td>中等</td><td>Open</td><td>租赁执行不力</td><td>超出范围</td></tr><tr><td>Web 应用程序评估</td><td>SAU</td><td>中等</td><td>Open</td><td>可以捕获 EMR 存储的凭证</td><td>超出范围</td></tr><tr><td>Web 应用程序评估</td><td>IUF</td><td>中等</td><td>Open</td><td>无速率限制</td><td>超出范围</td></tr><tr><td>Web 应用程序评估</td><td>LAM</td><td>中等</td><td>Open</td><td>可猜测的管理员 URL</td><td>超出范围</td></tr><tr><td>AWS 配置审查</td><td>TDL</td><td>高</td><td>Closed</td><td>未对管理员帐户强制执行 MFA</td><td>启用并适当配置</td></tr><tr><td>AWS 配置审查</td><td>DWM</td><td>高</td><td>Closed</td><td>没有强制执行密码复杂性</td><td>启用并适当配置</td></tr><tr><td>AWS 配置审查</td><td>CIV</td><td>高</td><td>Closed</td><td>未启用 Cloudwatch</td><td>启用并适当配置</td></tr><tr><td>AWS 配置审查</td><td>EDE</td><td>高</td><td>Closed</td><td>SSH 服务器公开</td><td>防火墙到医院网络</td></tr><tr><td>AWS 配置审查</td><td>CTY</td><td>高</td><td>Open</td><td>用于生产的单个 EC2 实例 – DoS 风险</td><td>仍然使用单个实例</td></tr><tr><td>AWS 配置审查</td><td>FBB</td><td>高</td><td>Open</td><td>无备份</td><td>未进行任何备份</td></tr><tr><td>AWS 配置审查</td><td>PSY</td><td>高</td><td>Closed</td><td>未启用 MFA 删除的数据库</td><td>在所有数据库上启用</td></tr><tr><td>AWS 配置审查</td><td>ISN</td><td>中等</td><td>Open</td><td>没有 Web 应用程序防火墙</td><td>超出范围</td></tr><tr><td>AWS 配置审查</td><td>DXU</td><td>中等</td><td>Open</td><td>缺少用户组</td><td>超出范围</td></tr></tbody></table><p>基于上述内容，以下是我们可能附加到执行摘要中的内容：</p><blockquote><p><strong>修复验证 - 2024-03-10 LR</strong></p><p>一些修复和缓解的结果显著降低了 OGPatientBooking 应用程序及其底层基础结构中发现的结果的攻击面和可利用性。应该注意的是，在实施和不实施基于医院的防火墙的情况下，都进行了补救验证工作，以确认新实施的防火墙功能是否有效，同时也审查了只有在网络访问可能的情况下才能访问的结果。</p><p>最初，互联网上的攻击者可以访问所有医院门户登录屏幕（将在医院内显示和使用的门户），但是，由于医院 IP 地址 （NAA） 的防火墙，这些屏幕现在无法访问。这项措施大大减轻了基于互联网的攻击，但门户仍可能受到医院网络的攻击。医院网络内的特定防火墙可能会进一步降低这种风险，但不在原始评估或部分补救验证活动的范围内。这种防火墙也适用于每家医院的管理门户 （GLK），这意味着攻击者在尝试身份验证之前需要访问医院网络。虽然所有医院的通用帐户密码都已更改 （ZNB），但帐户本身仍然存在 （JXY）。还应该注意的是，现在对所有管理员帐户 （XQJ） 强制执行 MFA，这意味着即使攻击者可以尝试对通用帐户进行密码猜测攻击，如果没有 OTP（一次性密码），他们也无法访问它。</p><p>还修复了披露医院配置及其门户页面的其他问题（CSK、IIB）。这限制了攻击者发现医院及其各自管理面板的门户页面的能力，尽管现在只有在这些发现最初被利用并且应用程序中的防火墙配置配置错误的情况下才有可能这样做。</p><p>SQL 注入漏洞已修复，无法再访问所有患者数据 （CJZ）。</p><p>从 AWS 的角度来看，会使 AWS 管理员的账户面临风险的漏洞已得到解决。密码复杂性 （DWM） 和 AWS 账户 （TDL） 缺少 MFA 的问题已得到修复，从而有效地保护了所有账户。此外，提供底层基础设施访问权限的 SSH 服务器现在只能从 OmniCorp 地址 （EDE） 访问。最后，启用并适当配置了 AWS 中的 CloudWatch，这将有助于分析日志以发现针对平台 （CIV） 的攻击。最后，删除解决方案中使用的所有数据库需要删除 OTP（一次性密码）（PSY），这有助于防止恶意和意外删除。</p><p>应该指出的是，虽然原始报告中的所有高危漏洞都是针对补救的，但有几个问题仍然悬而未决。所有医院门户都保留了原始通用管理员账户 （JXY），没有对关键 AWS 基础设施 （FBB） 执行备份，并且所有医院 （CTY） 都使用单个 EC2 实例。虽然现在确实减轻了可能使应用程序不堪重负以导致拒绝服务的攻击的可能性，但缺少备份和使用单个 EC2 实例的重要性构成了重大的操作安全问题。因此，这些发现的风险评级没有改变。</p><p>总而言之，平台的风险已大大降低，不再成为基于互联网的攻击者轻而易举的目标。如前所述，仍然可能存在从医院网络内部攻击门户本身的途径，这就是为什么围绕缺乏对门户的身份验证的问题仅被视为“部分关闭”（NAA）。如果要实施某种形式的身份验证（例如，管理员必须在终端上登录到后端解决方案才能使用），这将消除来自医院网络内部对门户的攻击，因为现在需要身份验证才能使用它。</p><p>有关所有问题的最新状态，请参阅第X.X节“调查结果概述”。</p></blockquote><hr><p>编写上述内容可能有点困难，但如果完成到足够详细的水平，它对客户来说非常有价值。</p><p>让我们分解一下编写本文所涉及的步骤：</p><ol><li>正如本课开头所述，请确保您已仔细阅读并理解原始报告、其调查结果和执行摘要。原始报告越详尽，编写本节就越容易。</li><li>执行修复验证工作。一次解决一个问题，直到完成。</li><li>查看其状态发生变化（例如“打开”&gt;“已关闭”）的调查结果，并分析其状态是否为以下情况：<ol><li>减少&#x2F;更改了攻击面</li><li>预防&#x2F;限制其他发现</li></ol></li><li>按工作阶段、在攻击链中的位置、问题类型或其他可能更容易总结的内容，将发现归类并组合在一起。</li><li>有了这些说明，请按以下格式生成更新：<ol><li>风险、影响和攻击面的主要变化的标题介绍</li><li>浏览分组的笔记（如果可以分组），并提供随时间推移已修复和更改的内容的摘要。<strong>注意</strong>：我认为在不深入研究具体修复内容的情况下编写本节可能非常困难。这与原始摘要略有不同。我认为这是可以的，但是通过提供对特定发现的交叉引用（如您将在上面看到的那样），可以稍微避免过多地了解技术信息。</li></ol></li><li>反思作为修复验证工作一部分的任何剩余未解决的问题。他们的评级是否因为其他问题而改变？您能在这里提供任何额外的背景信息来帮助客户吗？</li><li>总结摘要，并反思在潜在影响、风险和攻击面及其适用问题方面看到的主要变化。反思应该完成哪些工作以消除任何其他重大风险。</li><li>将读者指向“调查结果概述”部分，以查看问题及其状态的最新细分。</li></ol><p>这里要提到的一个警告是，如果自原始评估以来已经有很长一段时间，或者其他功能&#x2F;服务&#x2F;事物已添加到之前测试的内容中，则可能值得一提。显然，任何未经审查的内容都可能存在漏洞，这些漏洞会使本节中执行的任何分析无效。可以将以下内容添加到此部分、范围部分、警告部分或报告的保修通知部分的某个位置：</p><blockquote><p>应该指出的是，对影响系统的风险变化的任何分析都是基于本文件中概述的原始调查结果。随着环境、网络或其他解决方案随时间的变化，可能会引入新的漏洞，而这些漏洞不会出现在本报告中。因此，分析仅考虑以前发现的问题。</p></blockquote><h1 id="建议-1"><a href="#建议-1" class="headerlink" title="建议"></a>建议</h1><p>针对 OGPatientBooking 应用程序的建议分为两部分。一个是紧随执行摘要之后的“下一步”部分，另一个是单独的部分，用于介绍所有战略建议。虽然我认为在执行摘要更新文本中捕获适用的建议注释更为明智，但您也可以提供这些部分之一的更新。如果这样做，请考虑在存在重大未解决的风险或需要根据已修复的内容采取新的修复方向时添加简明的评论。</p><p>如前所述，我们已经在执行摘要中谈到了一些所需的补救措施。这是为了确保最终将某种形式的身份验证添加到门户应用程序中。这将防止任何具有网络级别访问权限的人滥用门户。此外，由于缺乏在 AWS 中配置的备份以及使用单个 EC2 实例来托管平台，之前还提到了有关运营风险的评论。</p><p>让我们围绕这一点写一些话，以附加到战略建议部分。但首先，这里是推荐部分的快速回顾。</p><blockquote><p><strong>立即采取后续步骤</strong></p><p>根据确定的实施和架构问题，该平台面临潜在漏洞的重大风险，允许攻击者访问敏感的患者数据，并使其容易受到拒绝服务条件的影响。数据泄露和未经授权访问应用程序配置面板的可能性很高，这主要是由于易于获取可公开访问的页面的 URL。攻击者利用该系统所需的后续步骤很少，对应用程序的安全性构成严重威胁。必须立即采取行动，以调查和修复应用程序的入口点，并确认是否发生了任何历史患者数据泄露事件。</p><p>建议立即执行以下步骤，以显著减少解决方案的攻击面，并防止对基础结构的重大攻击：</p><ul><li>与医院合作实施防火墙规则，以锁定其签到门户，使其只能从其网络访问。</li><li>管理面板也应执行相同的操作。</li><li>与医院合作，确保更改其管理员密码。</li><li>查看 Web 应用程序和 AWS 日志以确定是否发生了违规行为。</li><li>确保在此过程中识别并纠正日志记录和监视中的任何差距。</li><li>对所有 AWS 用户实施多重验证。</li></ul></blockquote><blockquote><p><strong>战略建议</strong></p><p>OGPatentBooking 应审查此报告的调查结果和摘要，并计划根据漏洞带来的风险和影响进行修复。</p><p>应首先修复显著增加解决方案攻击面的关键漏洞。应防止 Internet 上的任何人同时访问医院门户签到页面和相应的管理页面：只能从他们预期通信的医院网络访问这些页面。</p><p>与医院合作，确保更改默认管理员帐户密码，并鼓励为每个管理者创建用户特定帐户，而不是使用通用帐户。还应制定弃用默认帐户的计划，并在安装过程中创建命名帐户。</p><p>确保对所有 AWS 用户强制实施并启用双因素身份验证，并强化用户的密码复杂性要求。应启用 AWS Config 日志记录并将其馈送到 CloudWatch。来自资产中其他组件的日志记录也应馈送到 CloudWatch。启用所有相关组件的备份。</p><p>查看 Web 应用程序和 AWS 环境的所有可用日志，以确认是否发生了未经授权的数据访问。如果不存在可以显示此证据的日志，请确保将其作为修复本报告中问题的一部分实施。</p><p>请注意，您可以联系 ogSec 以获得任何帮助，以确定与所述漏洞相关的当前或过去的违规行为，以及帮助识别代码级别或 AWS 中可能存在的日志记录和监控差距。</p><p>对登记门户页面实施身份验证（即医院内的触摸屏在使用前需要登录应用程序）。强制实施严格的密码复杂性要求和潜在的多因素身份验证。此外，为管理员用户开发多重身份验证，并在应用程序中强制执行此身份验证的方法。</p><p>请考虑在解决方案的管理面板中实现受信任网络列表，以便管理员能够自行添加防火墙配置。</p><p>查看解决方案中的租赁模型，并可能将医院彼此分开，这比目前使用简单的数据库列键实现的要多。最好的隔离方式可能是将医院分离到自己的 AWS 账户中，并拥有自己的数据库和其他组件。</p><p>同样，查看整个解决方案的架构，看看是否可以利用其他 AWS 服务来使解决方案有效扩展并消除任何单点故障。</p><p>考虑对 AWS 环境执行定期扫描，以发现潜在的错误配置和进一步强化的机会。</p><p>如果尚未执行此操作，请执行静态代码分析，以检查可能存在的常见实现级别安全问题，并确保它们未提交到生产代码中。</p><p>请考虑联系解决方案的代码辅助 Web 应用程序评估，以检查在评估时间内可能无法发现的进一步实现、业务逻辑或配置问题。</p></blockquote><p>鉴于执行摘要修复验证部分中概述的内容，有关向门户页面添加身份验证的其他注释被认为是重复的，但是，假设我们没有在那里介绍它。下面可能是这样的：</p><blockquote><p>虽然平台中的大多数重大风险已通过防火墙进行修复或缓解，但应执行进一步的工作来保护门户页面。应添加身份验证，以确保任何具有网络级别访问权限的人都无法滥用患者身份验证过程，阻止访问属于患者的约会和其他数据。</p><p>仍应考虑删除门户应用程序中的单点故障（就用于平台的单个 EC2 主机而言），以及启用对适用组件的备份。</p></blockquote><p>我在这里的过程是：</p><ul><li>非常简要地回顾一下为降低整体风险而采取的措施</li><li>涵盖在短期内应该执行哪些重要工作以降低平台的主要风险</li></ul><p>就这么简单。任何长期战略建议都应在原来的建议中提及。</p><h1 id="变更控制"><a href="#变更控制" class="headerlink" title="变更控制"></a>变更控制</h1><p>由于这是上一个报告的更新版本，因此请确保更新更改控制部分，以包含草稿、审阅和发布给客户端以进行修复验证过程所需的行。</p><p>下面是这可能是什么样子的：</p><table><thead><tr><th><strong>版本</strong></th><th><strong>日期</strong></th><th><strong>作者</strong></th><th><strong>变更摘要</strong></th></tr></thead><tbody><tr><td>0.1</td><td>14&#x2F;01&#x2F;2024</td><td>卢克·罗杰森</td><td>QA流程的内部草案</td></tr><tr><td>0.2</td><td>15&#x2F;01&#x2F;2024</td><td>丹尼尔·詹宁斯</td><td>内部同行评审</td></tr><tr><td>1.0</td><td>15&#x2F;01&#x2F;2024</td><td>卢克·罗杰森</td><td>发布给客户端</td></tr><tr><td>1.1</td><td>25&#x2F;03&#x2F;2024</td><td>卢克·罗杰森</td><td>QA 流程的内部补救验证草案</td></tr><tr><td>1.2</td><td>26&#x2F;03&#x2F;2024</td><td>丹尼尔·詹宁斯</td><td>内部同行评审</td></tr><tr><td>2.0</td><td>27&#x2F;03&#x2F;2024</td><td>卢克·罗杰森</td><td>发布给客户端</td></tr></tbody></table><h1 id="其他要更新的部分"><a href="#其他要更新的部分" class="headerlink" title="其他要更新的部分"></a>其他要更新的部分</h1><p>作为修复验证过程的一部分，我们介绍了应在报告中更新的核心部分。但是，可能还有其他部分可以更新，要么是因为您的报告结构与我在本课程中概述的内容不同，要么是因为客户特别要求您更新其他部分。没关系。我的建议是，在附加带有补救验证说明（例如，适当注明日期和草签）的部分时，确保应用一致性。</p><hr><p>接下来，让我们看看可以使用哪些其他文档格式来捕获这些结果和更新。</p><h1 id="6-修复验证-跟踪结果-其他文档"><a href="#6-修复验证-跟踪结果-其他文档" class="headerlink" title="6-修复验证 - 跟踪结果 - 其他文档"></a>6-修复验证 - 跟踪结果 - 其他文档</h1><p>除了更新的报告文档之外，还有其他一些方法可以捕获修复验证的结果。</p><p>以下是一些常见示例：</p><ul><li>原始报告文件中的新附录</li><li>包含调查结果列表及其状态的结果电子表格</li><li>包含修复验证结果的单独新文档</li></ul><p>让我们浏览一下这些文档类型，并考虑其中可能包含的内容。</p><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>补救验证的结果可能存储在报告的附录部分，其中记录了所审查的每个结果及其状态、评论和证据。这不是一个可怕的方法，因为它清楚地将原始工作与补救验证工作分开。</p><p>如果你沿着这条路走下去，我建议该部分的结构有点类似于精简的报告结构。下面是可能存在的部分：</p><ul><li>范围<ul><li>涵盖哪些评估阶段</li><li>涵盖哪些环境</li><li>有待审查的调查结果清单</li></ul></li><li>风险更新（之前看到的执行摘要更新）</li><li>建议更新（如果需要，之前看到的建议更新）</li><li>调查结果概述<ul><li>理货表更新</li><li>调查结果清单及其现状</li></ul></li><li>发现<ul><li>每个发现的部分，包括<ul><li>评论</li></ul></li><li>证据</li></ul></li></ul><p>在构建此内容时，请利用对原始部分和发现的交叉引用，以使读者更容易。如果不是很明显，这就是这种方法的缺点。虽然将所有修复验证工作集中在一个地方是件好事，但如果读者需要刷新对原始文档中某些内容的记忆，他们可能会在文档中跳来跳去。如果文档的更新与原始内容内联完成，则问题不大。</p><h1 id="单独的报告文件"><a href="#单独的报告文件" class="headerlink" title="单独的报告文件"></a>单独的报告文件</h1><p>有时，修复验证过程的结果会在单独的文档中提供。不要与结果电子表格混淆（我们稍后会讨论这一点），而是一个独立的报告文档，其唯一要求是显示补救验证的结果。</p><p>当我看到这些文件被使用时，它们通常看起来与特定组织的“正常”报告结构相同。所有部分都按正常方式填写，但提到评估是为了补救验证。</p><p>就我个人而言，我认为标记原始文档比创建单独的新文档要好。对于单独的文档，客户可能需要打开原始文本才能理解结果，如果他们不这样做，则由于缺少通常靠近更新文本的原始文本，可能会发生一些混淆。</p><p>至关重要的是，如果采用这种方法来确保对以前的报告进行适当的反思，并且有一个附录部分来包含以前遇到的发现的列表，无论它们是否在此补救验证阶段进行了审查。这是因为您不希望使用或解释报告为“这就是找到的所有内容，这些是它们的当前状态”。这将具有难以置信的误导性，并且可能无法反映所审查内容的安全性的现实。在评估范围内引用原始文档文件名也是一种很好的做法。</p><p>我建议不要采用这种方法，但这取决于你和你的组织。</p><h1 id="电子表格"><a href="#电子表格" class="headerlink" title="电子表格"></a>电子表格</h1><p>我见过许多案例，客户可能仅仅想要一份包含结果的电子表格（这可能是我们在课程其他部分讨论过的发现电子表格的修改版本）。确保非常清楚地表明每个问题是否已得到修复，例如设置一个明显的列来标注当前状态：</p><ul><li>开放（或未修复）</li><li>部分关闭（或部分修复）</li><li>关闭（或已修复）</li><li>误报</li></ul><p>此外，我发现使用一些淡色调来标注行的当前状态在视觉上有帮助，例如：</p><ul><li>开放 — 红色</li><li>部分关闭 — 橙色</li><li>关闭 — 绿色</li><li>误报 — 绿色</li></ul><p>如果您使用颜色，在颜色中包含键或图例也可能是一个好主意。</p><p>如果您只提供电子表格，则通常没有合适的位置来放置补救验证的证据。<strong>您可以</strong>尝试将屏幕截图、HTTP 响应或命令行输出粘贴到电子表格中，但它看起来并不好。但是，如果客户只想要电子表格，我的建议是在内部为您创建一个文档来捕获证据并将其与此电子表格一起存储。最好在执行工作时将其放在一起，而不是在客户要求的情况下在事后回来将其放在一起。这可以采用与前面提到的附录相同的格式，或者只是一份审查结果、评论和证据的清单。</p><hr><p>让我们用课程摘要来结束补救验证。</p><h1 id="7-修复验证-课程总结"><a href="#7-修复验证-课程总结" class="headerlink" title="7-修复验证 - 课程总结"></a>7-修复验证 - 课程总结</h1><p>在本课中，我们介绍了修复验证过程（也称为重新测试）的核心概念。</p><p>我们谈到了为工作做好适当准备的重要性，既要确保我们拥有能够毫无问题地开始评估所需的一切，也要熟悉以前的报告材料。确保我们为评估做好准备，不仅可以使其更有可能按时完成（并且有更多时间进行测试），而且任何验证审查反馈都将是体贴的，并包含有用的背景信息，说明在结果确定后发生了哪些变化。</p><p>我们介绍了当对调查结果的审查表明开放风险仍然存在时，应如何谨慎行事——当风险仍然存在时，不应关闭它们。如果风险发生了变化，则应进行调整，而不是关闭调查结果。可以使用其他结果状态，但我的建议是谨慎使用它们，并且仅在有意义时才使用它们。要么有风险，要么没有。当发现已修复一半时，风险很可能只是发生了变化，但发现仍然存在。</p><p>我们仔细研究了各种问题类型的证据应该收集的内容，并强调了保留证据的重要性，即使我们的客户对看到它不感兴趣（他们只是想知道调查结果是否得到补救）。证据是发现已关闭或仍处于关闭状态的证据，出于同样的原因，我们应该在评估中记录各种工具的测试输出，补救验证工作也是如此。</p><p>收集到证据后，我们浏览了可以在报告文档中更新的几个关键部分，并查看了这些更新可能是什么样子的一些示例。除了更新的报告文档之外，我们还介绍了向客户提供此过程结果的几种不同方式。虽然我们可以为客户提供简单的“通过&#x2F;失败”结果，但提供结果评论以帮助客户修复问题会更有帮助。此外，对执行摘要等部分提供有用的更新（虽然编写起来可能很痛苦）可以使客户更好地了解其最新的安全状况，并修复许多已知风险，从而对客户有益。</p><h1 id="8-修复验证-练习"><a href="#8-修复验证-练习" class="headerlink" title="8-修复验证 - 练习"></a>8-修复验证 - 练习</h1><p>在上一课中，我们介绍了如何准备补救验证，如何适当地捕获证据，以及如何最好地更新&#x2F;创建文档以向客户展示该过程的结果。</p><p>以下是一些练习，以涵盖您所学的内容：</p><p><strong>反思练习</strong></p><ul><li>反映您执行修复验证的时间。您是否使用了“打开”或“关闭”以外的状态，这些状态可能根据本课程中的信息被误用？<ul><li>相反，确定可能标记为“部分已关闭”（或其他状态）的任何结果，并根据所采取的补救措施考虑这些标签是否更准确。</li></ul></li><li>想一想，当你执行修复验证时，你必须在将结果标记为“打开”或“关闭”之间做出决定。哪些因素影响了你的决定？不同的状态能否更清楚地了解调查结果的状态？</li><li>想一想在修复验证后必须更新报告文档的时间。基于上一课中的信息：<ul><li>您是否向客户提供适当的证据和意见，以便审查结果？如果没有，您认为可能遗漏了什么？</li><li>您是否更新了报告中的任何部分（例如执行摘要、战略建议、范围或类似内容）？如果没有，你现在可以这样做吗？</li></ul></li><li>选择您已撰写或有权访问的报告。从报告中确定一些发现，并模拟修复验证过程。这包括想象您将采取哪些步骤来验证补救措施，然后实际记录如何捕获证据并相应地更新报告。</li></ul><p><strong>一般练习</strong></p><ul><li>使用您有权访问的报表，创建一个假设方案，其中安全发现的风险评级因部分修复工作而发生变化。写一个简短的解释，可以包含在报告中，解释为什么发现的风险发生了变化，但状态没有更改为关闭。</li><li>创建要遵循的修复验证工作的清单。<ul><li>启动修复验证需要哪些常见访问请求？（对于不同的评估类型，这可能看起来不同）</li><li>你和客户之间应该发生什么沟通？您通常需要请求哪些信息？</li><li>在审查调查结果时需要编写或捕获哪些内容？</li><li>审查完所有调查结果后，应更新报告文件中的哪些部分？</li></ul></li><li>创建用于跟踪修复验证结果的结果电子表格模板。此模板应包括结果 ID、说明、原始风险评级、修复后的状态（例如打开、关闭、部分关闭）的列，以及支持状态更新的任何注释或证据。</li></ul><h1 id="9-修复时从报表中删除问题"><a href="#9-修复时从报表中删除问题" class="headerlink" title="9-修复时从报表中删除问题"></a>9-修复时从报表中删除问题</h1><p>我想讨论一下我在上一课的“单独文档”部分中简要提到的内容。</p><p>有时，客户可能希望您修改现有报表以删除修复的结果，并调整任何适用的文本，例如执行摘要。当我们开始删除和重写原始报告时，它会改变人们的看法，让它看起来好像一开始就没有发现任何不好的东西。这与原始报告的发现很少有很大不同。当我们的报告存在漏洞时，它可以突出缺乏流程、程序或专业知识（这些内容经常在报告的战略建议部分得到评论）。当您删除已修复的原始发现以及对它们的任何引用时，您可能会掩盖这种看法或潜在的观察结果。</p><p>为此，如果客户要求您在修复调查结果后删除并重写报告的某些部分，我倾向于附加到上一个报告，而不是重写。已关闭的调查结果应保留原状，状态应更改为“已关闭”），并附上证据，并说明调查结果已关闭的原因。对于已审查但仍处于“开放”状态的调查结果也是如此。这样，任何读者都将能够看到最初发现的内容以及任何给定发现的当前状态。</p><h1 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h1><p>当客户要求对报告进行更改以删除以前的发现时，请小心。在报告中捕获随时间推移的变化是一回事，但删除存在的漏洞并假装它们不存在是另一回事。</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-7 评估后反馈</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-7%20%E8%AF%84%E4%BC%B0%E5%90%8E%E5%8F%8D%E9%A6%88/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-7%20%E8%AF%84%E4%BC%B0%E5%90%8E%E5%8F%8D%E9%A6%88/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（评估反馈）介绍"><a href="#0-章节（评估反馈）介绍" class="headerlink" title="0-章节（评估反馈）介绍"></a>0-章节（评估反馈）介绍</h1><p>当我们发送报告时，评估通常不会真正结束，而是在客户审查我们的工作并提出问题时继续一段时间，这是很常见的。在下一章中，我将就一些即时评估后方案提供一些指导，包括评估后呼叫，以及客户提出的一些有时可能具有挑战性的常见方案。</p><h1 id="1-评估后会议"><a href="#1-评估后会议" class="headerlink" title="1-评估后会议"></a>1-评估后会议</h1><p>在评估结束后，许多客户希望对评估进行演练，以获得亮点并有机会提出问题。奇怪的是，一些客户没有意识到这是一种选择，甚至可能没有询问它。如果这个选项还没有被摆在桌面上，给客户一些时间来检查评估是一个非常好的主意。这将为他们提供一个论坛，他们可以在其中：获得评估的亮点，了解重要发现的概述，讨论建议和关键要点，并有机会提出他们可能遇到的任何问题。</p><p>就时间安排而言，客户最好在会议前至少一两天访问您的报告文件以及随附的演示文稿。这将使他们有时间复习材料，熟悉将要涵盖的内容，并提出一些问题。更不用说，如果您在会议前发送材料，有时客户不会费心阅读材料（这不是渗透测试客户特有的问题，而是一般问题 - “我们只会在会议中获得信息”），但是我们应该让客户做好准备，以增加通过更好的讨论进行更有价值的会议的机会。</p><p>你需要一个演示文稿吗？是的，你有。只是在会议上发言，没有什么可展示的，这将是非常沉闷的。与会者不仅会失去注意力，而且演示文稿可能提供的任何形式的结构都不会出现，这可能会使会议变得有点到处都是。</p><p>让我们首先弄清楚演示文稿中的内容可能是什么样子。</p><h2 id="了解你的受众"><a href="#了解你的受众" class="headerlink" title="了解你的受众"></a>了解你的受众</h2><p>为了使会议对客户有利，您需要以他们能够理解的形式进行演示，并被告知他们关心或需要了解的信息。为了确保你要创建正确的内容，请考虑问客户几个问题，以便你可以为他们定制内容：</p><ul><li>“谁将参加会议，他们的角色是什么？”<ul><li>谁在名字方面，谁在角色方面。如果您知道会议将充满开发人员和工程师，那么您可以更多地使用以技术为中心的幻灯片。如果管理层也要在场，内容和交付应该处于更高的水平，以便客户管理层能够理解。这可能意味着不涉及发现的具体技术细节，而是以一种每个人都能理解的方式解释错误是什么以及为什么它是坏的。</li></ul></li><li>“你有什么关键话题要讲吗？”<ul><li>直接向客户询问他们想听什么可以让你对你需要涵盖的特定领域有所了解。这些对我们来说可能并不明显，并且可能不符合我们稍后将要介绍的基本模板。这完全没问题，而且非常好，因为现在您有机会创建一个对客户来说更好的演示文稿。</li></ul></li><li>“你想从会议中得到什么？”<ul><li>与上述情况略有不同，很高兴知道客户希望能够从会议中得到什么。这个问题旨在梳理出您在创建内容时的总体目标是什么。他们是否想很好地了解整体安全态势？他们是否希望对其安全工具的覆盖范围感到放心？他们想了解自己与类似客户的比较吗？根据此问题的答案了解内容的方向将影响您可能拥有的任何摘要类型幻灯片。答案也可能意味着需要创建特定的幻灯片。</li></ul></li></ul><p>现在，您可能会得到上述问题的零答案，或者非常简单的答案。这很好，这意味着您可以继续使用标准格式向团队展示您的结果。请记住，作为顾问，我们正在努力为客户提供最佳价值，在这种情况下，了解他们想听什么以及谁将参加，使我们能够为他们量身定制我们的输出。</p><h2 id="会议内容"><a href="#会议内容" class="headerlink" title="会议内容"></a>会议内容</h2><p>我怀疑我可以写一整门关于创建演示幻灯片的课程（我不得不为我的许多活动制作它们），由于这不是本课程的确切目标，我不会在这里写大量关于它的内容。我要做的是涵盖大多数评估后会议中将出现的关键领域以及所需的内容和谈话要点。</p><p>在我们进入细节之前，重要的是要记住以下几点：</p><ul><li>幻灯片应该用作高级谈话要点，或者是简单的图像或图表 - 对你来说是谈话要点，对观众来说是快速阅读</li><li>幻灯片不应该充满无休止的文字和复杂的图表，这会分散观众的注意力</li><li>幻灯片不应该是你阅读的脚本</li></ul><p>幻灯片的简洁性是关键，你希望观众在听你说话，而不仅仅是在幻灯片上阅读文字。此外，您不应该只是阅读幻灯片上的单词然后继续前进。这不仅会使演示变得非常沉闷，而且对于那些经验丰富的演示听众来说也不会显得专业。我们将在本课结束时介绍战斗方法，但现在让我们来看看这些演示文稿中的常见内容。</p><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>如果可以的话，你不想在本节上花太多时间，但介绍你的团队是件好事。如果一个人可以为您的团队做介绍，那将帮助您及时完成本节。在这些会议中，通常有很多事情要做，我亲眼目睹人们花了 15 分钟集体分享他们的整个背景和职业历史。有见地是的，会议需要，不太可能。为此，我只在必要时邀请客户进行任何介绍，如果需要，可以考虑请您已经认识的人介绍他们的团队，而不是绕着桌子转，让人们自己做</p><p>作为介绍的一部分，有必要概述会议的结构以及将要讨论的主题（通常由议程幻灯片支持）。这将使观众了解会发生什么以及何时，并可能让他们知道何时最好地提出他们已经考虑过的任何问题。</p><p>在问题和互动方面，我通常会推荐两种方法，并在介绍中提到。也：</p><ul><li>告诉听众，可以随时插话提出问题或澄清。要想充分利用这类会议，应该进行问答和讨论。</li><li>建议人们把他们的问题留到最后，这样如果你的时间非常紧迫，你就可以完成内容。理想情况下，这不应该是一个轻易选择的选项，因为它对客户不太友好。如果您选择此选项，则应在最后留出相当多的时间进行提问，因此时间管理至关重要。</li></ul><p>你当然想在这里选择第一个选项，除非你真的没有太多时间并且有很多话要说。在这一点上使用你最好的判断。还要记住 - 如果您需要更多时间来涵盖内容，请考虑要求延长会议时间。</p><h3 id="评估概览"><a href="#评估概览" class="headerlink" title="评估概览"></a>评估概览</h3><p>在介绍之后，刷新每个人对评估内容的记忆是有意义的。这应该包括：</p><ul><li>评估了什么以及评估的目标是什么</li><li>了解评估的范围以及存在的测试阶段（例如 Web 应用程序审查、代码审查等）</li><li>评估范围内未涵盖的任何内容，以及原因</li></ul><p>幻灯片的深度和内容可能会因具体评估而有很大差异。要记住的一件关键事情是，它应该只是一个回顾，因此如果可能的话，应该花有限的时间。为此，如果范围庞大而复杂，最好用一些高级措辞甚至图表来简化，并在最后的一些附录幻灯片中对范围进行完整细分。</p><p>您可能在概述中包含的其他内容可能是一个表格，其中涵盖了每个测试阶段发现了多少关键、高、中、低结果。在特定类别中发现了多少结果（如果您正在跟踪它们）。或者您可能正在跟踪的任何其他特定于客户端的标记或类别，以及发现了与每个标记或类别相关的结果数量。此信息可以模拟“报告内容”一章中描述的“调查结果概述”内容。</p><p>最后，始终值得提醒客户的是，已经创建了一个报告文档，其中包含比演示文稿中涵盖的更详细的信息。这可能会回答一些客户的一些基本问题，这些问题可以自动勾选，以便您可以进入演示文稿的主要部分。</p><h3 id="结果演练"><a href="#结果演练" class="headerlink" title="结果演练"></a>结果演练</h3><p>与评估结果相关的内容可能会占据演示文稿的大部分内容。</p><p>研究结果可以通过多种方式呈现：</p><ul><li>每个发现的幻灯片 - 如果发现有限，或者您觉得有一些关键发现需要详细讨论，这是一个不错的选择</li><li>每张幻灯片的发现列表 - 如果有很多发现，并且您想一起讨论它们，这是一个不错的选择。考虑按风险&#x2F;严重性、类别或“在哪里”找到它们（例如，代码库的某个区域，取决于您查看的特定 API 服务、您查看的环境等）进行分组。</li><li>将相同或相似的问题组合在一起以节省时间也不是一个糟糕的主意，尤其是在影响可能相同的情况下。</li></ul><p>使用混合策略来呈现发现并不罕见。您可以从构成攻击链一部分的发现列表开始，并向客户端描述端到端攻击。然后，可以跟进特定的幻灯片以突出其他主要发现，或者幻灯片包含剩余发现列表，按对该客户最有意义的内容进行分类。</p><p>重要的是要考虑这里的客户以及您可用于会议的这一通常大部分时间的时间。你有多少时间？你能为会议中的观众提供多少技术（你需要去）吗？您能否以一种在时间上以及客户如何对调查结果采取行动方面更有效的方式对调查结果进行分组。例如，如果不同的团队管理不同的区域，则在读数中将这些区域组合在一起可能更有意义。</p><p>在解释具体发现时，重要的是要回想一下我们是如何编写描述的。我们为构建初始描述段落而回答的问题可以在我们解释发现时在这里使用。这将使每个发现都能够以一种描述对客户的影响以及如果被利用可能发生的进一步后果的方式进行讨论，并以简洁易懂的方式解释发现本身。如果你已经花时间彻底写下了你的文章，那么在会议期间完成这些应该很好，很容易。</p><p>以下是这些问题作为提醒：</p><ul><li>结果是什么？</li><li>为什么不好？</li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？根据系统的了解，可能发生的最糟糕的事情是什么？</li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？</li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？</li></ul><p>就你需要谈论的深度而言，你不应该深入，但你应该解释什么是漏洞以及为什么它是坏的。只有在有问题或帮助讲述有关影响的故事时，才应该深入技术。</p><p>同样值得指出的是，如果任何发现本质上是“系统性的”（它是整个环境、代码库、Web 应用程序等中一个多产的问题），那么对发现的解释应该进行一定程度的修正思考。系统性问题通常需要时间来解决（由于缺乏准备好的语句，整个应用程序中的e.g. SQL注入）。但是，情况可能并非总是如此。例如，Web 应用程序可能容易受到每个 Web 表单上的跨站点请求伪造的攻击，但这归因于配置错误的代码或配置，该代码或配置在所有位置都禁用了跨站点请求伪造保护。这里的解决方法可能很简单。</p><p>请记住，在浏览调查结果时，必须坚持事实，不要在客户面前过于固执己见。他们可能想听听我们的意见，以借鉴我们的行业经验（例如，什么感觉好，什么感觉很糟糕），但是，就覆盖我们自己而言，最好说出发现了哪些问题以及它们可能导致的潜在损害。与类似的解决方案、服务或客户端进行比较（不命名它们）以及该客户端如何与它们进行比较是公平的。但是，在讨论其他客户时，您应该小心，并且在开会之前，您也许应该在内部讨论进行比较。</p><h3 id="建议和关键要点"><a href="#建议和关键要点" class="headerlink" title="建议和关键要点"></a>建议和关键要点</h3><p>一旦讨论了调查结果，就可能需要一张或多张摘要幻灯片。我没有将这些分解为不同的部分，因为我见过在一张幻灯片上提到所有这些主题的情况。在合并的地方，通常是因为评估很小，而没有合并时则分开。</p><p>无论内容放置在哪里，重要的是要确保它涵盖所有关键点。这些是关键幻灯片，应尽可能简洁直接地提供。</p><p><strong>建议</strong></p><p>建议或“后续步骤”信息对于与客户分享至关重要，以便为他们提供某种形式的指导，让他们了解他们应该首先解决哪些发现或一般问题。通常，这可能是为了修正报告中的任何关键或高发现，但这并不总是那么简单。可能需要计划和策略来补救某些问题，并且应根据需要将这种思维水平提炼到幻灯片中。</p><p>本幻灯片的内容可从报告文档的建议部分派生。但是，如果有很多话要说，其中只包括一般性建议，我建议专注于他们需要尽快开始思考和处理的最重要的事情。如果报告中有更多可以涵盖的信息，但对于本节来说不是必需的，请在演示过程中引导他们阅读。</p><p>有时，客户会发现了解修复某些东西所需的努力程度很有帮助，这是我被问过很多次的问题。可悲的是，这通常不是我们总能回答的问题。对于需要复杂修复和大量测试的任何内容尤其如此。在这些情况下，我们可以说我们不可能具体说出修复需要多长时间（或多少钱）。提供一些指导的一种方法是创建小型、中型、大型、超大型存储桶，这些存储桶表示要修复的工作量，并以客户端可读的方式显示它们。您还可以取消存储桶大小，只需将结果放在图表上，以便将它们相互比较以显示工作量。</p><p>值得指出的是，我们不知道这些问题的答案是有充分理由的。我们不应该在会议期间详细讨论其中的一些内容，但本质上是：</p><ul><li>我们不知道开发和工程团队的能力</li><li>我们不知道开发和工程团队目前正在做什么或正在积压什么</li><li>我们不知道客户对所评估区域的预算以及可以用于补救的资金</li><li>我们不知道客户可能有哪些其他计划可能优先于补救措施</li></ul><p>含糊其辞并给出一些粗略的估计是完全可以的，但始终需要注意的是，我们不能完全确定某些事情需要多长时间才能修复。客户总是需要离开并考虑他们计划如何使用他们可用的资源解决给定的问题。</p><p><strong>关键要点</strong></p><p>评估的关键要点或结论应总结所有内容，并提供已涵盖的所有内容的会议结束摘要。这是一张幻灯片，可能会对措辞进行审查，因此请确保您不会变得固执己见。坚持你所看到的事实以及最关键的风险在哪里。只有当它们真的应该在结论幻灯片中占有一席之地时，才说好话 - 理想情况下，客户需要清楚地了解他们需要补救的内容以及如何改善安全态势。我们不应该用不必要的赞美来掩盖客户对此的看法（听起来很可怕）。</p><p>此内容中要包含的内容可能是以下问题的答案：</p><ul><li>发现了哪些主要风险和主题？</li><li>在当前状态下审查的结果的总体影响是什么？</li><li>评估后的下一步是什么（可以从建议内容中得出）</li><li>是否有任何领域需要进一步调查或后续评估？</li></ul><p>根据幻灯片其余部分的内容，您可能需要在此处提出其他要点。</p><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>通常，任何幻灯片中的最后一张幻灯片（撇开我们接下来将要介绍的附录幻灯片）是“问题”幻灯片。它的主要功能是发出演示结束的信号，并邀请与会者提出问题。理想情况下，您应该在至少剩下 5 到 10 分钟的时间进行提问和讨论时完成演示。如果您要求将问题保留到最后，这一点尤其重要。</p><h3 id="附录幻灯片"><a href="#附录幻灯片" class="headerlink" title="附录幻灯片"></a>附录幻灯片</h3><p>如前所述，一个好的演示文稿的很大一部分是简洁，但它也是关于知道需要删除或跳过什么，以便在分配的时间内涵盖关键信息。有时你会觉得自己有很多东西要涵盖，但从幻灯片中删除某些内容感觉不对。一种可能解决此问题的方法是将幻灯片移动到附录部分，并让与会者在自己的时间（或在会议期间，如果可能的话）查看这些幻灯片。</p><p>一个例子可能是，如果你在可用的时间内有太多的发现需要完成。在这种情况下，最好优先考虑您需要讨论的内容，并将核心发现保留在主甲板上，然后将其他发现放在附录中。</p><p>同样，如果客户想阅读有关调查结果的更多详细信息或与评估相关的其他领域，也可以将客户推荐给主要报告文档的各个领域。</p><h3 id="评估或客户特定幻灯片"><a href="#评估或客户特定幻灯片" class="headerlink" title="评估或客户特定幻灯片"></a>评估或客户特定幻灯片</h3><p>无论这是典型的参与，具有不寻常或利基目标的参与，还是具有许多测试阶段的参与，制作一些评估或特定于客户的幻灯片以涵盖某些信息可能会有所帮助。这些看起来会是什么样子，实际上取决于具体的评估，但我不会完全让你不知情，我会试着给你几个例子：</p><ul><li>如果您已经完成了某种形式的评估，其中包括一些监管标准（例如 PCI DSS），并且如果您能够这样做，您可以有一张幻灯片来隔离任何可能导致合规失败的特定发现。</li><li>如果评估包括安全架构和设计评审，那么包含可以演练的图表的幻灯片可能是一个很好的补充，而不是列出一堆发现</li><li>如果您在评估过程中进行了某种形式的威胁建模，那么在运行已识别的主要威胁时，最好使用威胁模型图来显示一些数据流。</li><li>如果评估的目标之一是对给定解决方案的身份验证系统进行彻底审查，那么一两张幻灯片来简要介绍这一点以及围绕它的任何发现可能是一个好主意。</li><li>您的任务是对安全相关产品进行功效测试（功效是 - 它是否按预期工作）。演练对此的测试方案以及它们是否有效可能是个好主意。</li></ul><p>对此做出最佳判断。想想你刚刚执行的评估和你的特定客户。有一两张幻灯片以某种方式提供信息，而本课没有介绍过，这是否有意义？如果是，那就去做吧。你会比我更了解你的客户和他们的要求。</p><h2 id="幻灯片内容审查"><a href="#幻灯片内容审查" class="headerlink" title="幻灯片内容审查"></a>幻灯片内容审查</h2><p>最后，简要说明幻灯片内容。与发送给客户的任何文件一样，它应该被审查，最好是由评估团队中的某个人来审查，以确保你涵盖了你应该涵盖的一切，但也应该由评估团队以外的人来审查。就像有一双外眼有助于审查报告文件一样，幻灯片也是如此。请务必接受任何反馈并根据需要调整甲板。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>虽然许多人会制作一些幻灯片并交付它们，但对于那些经验较少或想为重要会议做好准备的人来说，可以做一些事情来确保您做好适当的准备并在您开会时向客户展示良好效果。</p><p>以下是重要内容的快速概述。</p><h2 id="演示文稿"><a href="#演示文稿" class="headerlink" title="演示文稿"></a>演示文稿</h2><p>幻灯片的编写或插图应使它们成为您与之交谈的话题。但是，会有一些幻灯片，您需要确保涵盖关键信息，但您不想在幻灯片中乱扔您需要谈论的所有要点。请记住 - 您不想阅读幻灯片，但您也不希望内容看起来像清单。在进行评估时，您应该能够自然地谈论幻灯片的主题。虽然在演示文稿中自然发言确实需要一定程度的信心和练习，但对于某些幻灯片，在你旁边放一些纸质笔记也没有什么坏处，以确保你涵盖了关键信息。</p><p>你可能想知道我为什么要提到纸质笔记。就我个人而言，我发现这些稍微容易处理，特别是如果你处于演示模式并且演示笔记由于某种原因没有通过（我已经看到这种情况发生过几次，它让演示者措手不及，并导致他们看起来准备不足的尴尬演示）。</p><p>此外，如果您将演示文稿注释放在幻灯片中并与客户共享，他们也会看到这些注释。这并不是一个大问题，但有时笔记可能会写一些你可能不想向客户透露的内部想法或想法。</p><p>所以，我的建议是手边有一些笔记，你可以看一眼，提示你要说什么。只有你真正需要的幻灯片的注释，并确保它们是谈话要点。不要从纸上读，他们只是在那里帮助你开始谈论你需要谈论的内容。</p><p>如果您担心看起来分心或认为自己会被发现在看笔记，另一种选择是在显示器周围贴上便利贴，上面写着某些幻灯片的关键谈话要点。显然，这只有在您进行在线会议时才会对您有所帮助。</p><h3 id="排演"><a href="#排演" class="headerlink" title="排演"></a>排演</h3><p>我不认为有人喜欢这样做，但为重要会议做准备的最好方法是练习。这样做是有充分理由的：</p><ul><li>只是为了练习你要谈论的内容</li><li>检查您是否在每个部分花费了正确的时间</li><li>此外，在期间和结束时留出时间提问</li><li>确保你知道你需要谈论的一切，并且你的知识没有差距</li><li>在会议前建立一定程度的信心</li></ul><p>如果您过去做过演讲并且采用非常常见的格式，您可能不需要这种做法。但是，如果你这样做了，或者如果会议是为了一个非常重要的评估或客户，请考虑练习以防万一。</p><p>在实际练习方面，自己跑完应该是第一步。确保你知道你需要谈论什么，并且你手头（或在你的脑海中）有答案。如果你觉得你有什么要解释的，但你不能，你需要在会议前去找出方法，然后试着再谈谈。此外，如果你正在练习，你发现你忘记了关键细节，也许这也是你还需要一些笔记的地方。</p><p>如果您已经排练了一两次，并且想要一些额外的反馈，请考虑邀请团队成员聆听您的会议并提供他们的反馈。他们可以假装是客户，也可以记下您可能错过的事情或您可以做出的改进。</p><h2 id="你无法回答的问题"><a href="#你无法回答的问题" class="headerlink" title="你无法回答的问题"></a>你无法回答的问题</h2><p>有时你会在会议期间被问到一个你无法回答的问题。我曾多次担任过这个职位。这不是问题，如果你被问到一些你以前没有考虑过的事情，你不应该感到毫无准备。如果你已经为会议做好了充分的准备，并且对你的评估很透彻，那么在这一点上，你无法回答的任何事情都可能会非常具体。在你无法回答的情况下，完全可以说你不知道这个问题的答案，并且你会做一个笔记，通过电子邮件调查和跟进客户。</p><p>如果客户对你不知道某个问题的答案感到不高兴，那么答案可能是你应该知道的。在这种情况下，我除了以同样的方式说跟进之外，别无他法。</p><h2 id="会后"><a href="#会后" class="headerlink" title="会后"></a>会后</h2><p>会议结束后，如果您还没有与与会者一起安全地分发幻灯片。</p><p>向每个人发送一封电子邮件，感谢他们抽出时间，并检查会议期间指定的人员的任何行动项目。如果您有任何需要去调查的领域（即您在会议期间无法回答的问题），这一点尤其重要。保留此类操作的记录非常重要，这样您和您的客户就可以在一定程度上承担起责任，以便在会议结束后满足任何重要请求。</p><p>最后，还值得一提的是，如果他们有任何其他问题，他们可以随时联系。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>本课概述了评估后会议应涵盖的主题。此外，您现在应该掌握一些关于如何准备和为您的客户定制内容的建议。</p><p>评估后会议是客户直接从评估团队那里获得工作高层次概述的绝佳机会，并为他们提供提问的地方。如果您的组织没有按照标准提供这一点，则可以加强与客户的关系，并可能增加获得额外工作的可能性。</p><h1 id="2-评估后会议-练习"><a href="#2-评估后会议-练习" class="headerlink" title="2-评估后会议 - 练习"></a>2-评估后会议 - 练习</h1><p>在上一课中，我们介绍了评估后会议的目的、可能存在的内容以及如何最好地准备。</p><p>这里有一些练习给你。</p><p><strong>反思练习</strong></p><ul><li>回想一下您最近为安全评估所做的演示。考虑您如何交付内容并吸引受众。在哪些领域，更多信息可以提高清晰度和与客户的互动？在会议之前，你做了哪些准备工作？你能做得更多吗？你的幻灯片是否简明扼要？如果没有，您如何压缩或替换为图像或图表？</li><li>想一想，您必须向非技术受众提供技术信息。你如何确保你的内容清晰易懂？这些技术能否应用于报告演示？</li></ul><p><strong>一般练习</strong></p><ul><li>练习总结您最近撰写或可以访问的报告。使用您从上一课中学到的知识，构建幻灯片来传达结果。给自己 30-60 分钟的会议时间。</li><li>创建一个您可能会要求客户提出的问题列表，以便根据他们的需求定制演示文稿。考虑这些问题如何帮助您集中演示文稿内容。</li></ul><h1 id="3-“我们希望从报告中删除此问题”"><a href="#3-“我们希望从报告中删除此问题”" class="headerlink" title="3-“我们希望从报告中删除此问题”"></a>3-“我们希望从报告中删除此问题”</h1><p>客户可能会要求从报告中删除问题，这并非闻所未闻。可能要求删除调查结果的最常见原因包括：</p><ul><li>您报告了超出范围的内容</li><li>他们不同意这一发现甚至是一个问题</li><li>他们已经知道这一发现</li></ul><p>可能还有其他潜在原因促使客户要求从报告中删除调查结果（他们可能不会告诉您这一点）：</p><ul><li>将特定发现确认为问题可能会导致合规失败</li><li>他们需要来自第三方供应商的干净报告才能赢得客户合同</li><li>如果报告被公开，一个具体的问题可能会对他们产生不良影响</li></ul><p>以上所有要点都不应成为您从报告中删除调查结果的理由。</p><p>从报告中删除结果可能是有风险的，因为报告应反映评估期间观察到的现实情况。我们工作的主要目的不是让客户看起来不错，而是对所审查的内容进行诚实的评估。删除调查结果可能会掩盖可能导致违规、访问客户数据或客户负面新闻的已知问题。如果对报告进行了审查，但缺少这些问题，这可能会对您的团队产生不良影响，即使他们最初在那里。</p><p>所以，对此有一些想法：</p><ul><li>如果您确实发现了技术上超出范围的内容，最好先与您的团队进行内部审查，以讨论是否应该将其删除。从理论上讲，超出测试的商定范围可能会违反法律，但是，如果您顺便发现一些相关的东西并且不需要任何测试来发现它可能仍然相关。</li><li>如果您有明确的证据表明某项发现是有效的，理想情况下，它应该保留在报告中。</li><li>如果客户已经知道这个发现，那就太好了，但你发现它的事实表明它仍然是一个问题，它应该反映在你的报告中。</li></ul><p>一些客户可能会对删除调查结果（甚至改变报告的编写方式）非常好斗。但是，如果您确实认为应该保留一项调查结果，最好坚持保留它，否则它会贬低您的报告文件，因为它将不再反映您在评估期间所看到的现实。</p><p>我的建议是，每当客户想要删除一个问题时，请审查您的工作，看看您是否同意他们的观点，并在回复客户之前与团队的其他成员协商。如果他们在电话中问你这个问题，只需说你需要审查一下，你会回复他们。这种方法提供了时间来仔细考虑请求，无论是单独还是与您的团队一起，远离客户。</p><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这个简短的课程中，我们介绍了客户可能希望从报告中删除结果的原因，以及处理请求时应采取的步骤。</p><p>请记住，虽然您应该将客户的最大利益放在心上，但您不应该通过删除已发现的问题来贬低您的报告并需要代理。</p><p>如果你有一个更初级的职位，你可能会发现自己处于不确定该怎么做的境地。在这种情况下，请向您的团队成员寻求指导和支持，告诉您的客户，在找出最佳行动方案时，您会回复他们。</p><h1 id="4-“我们希望从报告中删除此问题”-练习"><a href="#4-“我们希望从报告中删除此问题”-练习" class="headerlink" title="4-“我们希望从报告中删除此问题” - 练习"></a>4-“我们希望从报告中删除此问题” - 练习</h1><p>在上一课中，我们介绍了客户可能希望从报告文档中删除调查结果的原因，以及应该采取什么方法来处理此类请求。</p><p>以下是一些需要考虑的快速练习：</p><p><strong>反思练习</strong></p><ul><li>反思您撰写或有权访问的报告。有没有你或其他人争论过的发现？最终决定是什么，为什么？</li><li>想想有人质疑报告中调查结果的有效性。你是如何回应的，结果是什么？</li><li>考虑一下您是否曾经在评估过程中发现过技术上超出范围的内容。你是如何处理这种情况的？</li></ul><p><strong>一般练习</strong></p><ul><li>选择您已撰写或有权访问的报告。确定任何可能引起客户争议或争议的调查结果。写下为什么每个发现都应包含在报告中的理由。</li><li>起草一份清单，列出当客户要求从报告中删除调查结果时要采取的步骤。这应该包括审查证据、咨询您的团队以及如何将您的决定传达给客户。</li></ul><h1 id="5-“我们不同意这一发现的风险评级”"><a href="#5-“我们不同意这一发现的风险评级”" class="headerlink" title="5-“我们不同意这一发现的风险评级”"></a>5-“我们不同意这一发现的风险评级”</h1><p>与上一课讨论客户不同意调查结果一样，更常见的情况是客户与报告中调查结果的风险评级不一致。最常见的情况是，客户希望降低发现的严重性;如果有人想增加问题的严重性（只要这有意义），测试团队方面通常不会争论。为此，我们将讨论希望降低发现严重程度的客户。</p><p>出现这种情况的原因可能有几个：</p><ul><li>客户并不完全了解漏洞的发现或潜在后果</li><li>客户端具有有关缓解措施或其他补偿控制措施的其他上下文，这些上下文可能是您在测试期间不知道的</li><li>测试人员没有完全理解客户的自定义风险评级系统</li></ul><p>同样，与上一课一样，客户想要降低风险评级的严重性可能还有其他动机：</p><ul><li>有几个高或关键的发现会导致某种形式的合规失败</li><li>他们需要来自第三方供应商的干净报告才能赢得客户合同</li><li>如果报告被公开，特定问题可能会对风险评分较高的他们产生更差的影响</li></ul><p>这些原因，客户可能实际上没有告诉你，并不是降低发现严重性的理由。与在不应该从报告中删除调查结果一样，歪曲调查结果的风险可能会使已评估的内容比实际情况更安全。此外，由于许多客户将首先修复最重大的风险，因此任何已降低的发现可能不会像应有的那样迅速修复。</p><p>如果客户想降低调查结果的严重性，一个好的步骤是再次查看调查结果，看看你是否根据现有信息对你的评级是公平的。如果客户端提供了可能影响发现的可利用性或影响的其他上下文，请检查这是否需要较低的风险评级（有关该过程的回顾，请参阅严重性和风险评级课程）。由于风险评级的任何变化都会触发对您的工作的另一次审查，因此您应该让某人查看这些更改。请务必更新任何调查结果的措辞，以确保风险评级调整有意义。</p><p>如果客户没有任何理由放弃风险评级，而您已经解释了调查结果及其后果，则没有理由更改它。</p><p>在这些情况下，无论客户的推理如何，最好与团队中的某个人讨论这个问题以获得新的视角。但请记住，您已被邀请作为专家进行评估，您的经验很重要。如果您认为不应更改调查结果的风险评级，那么这样做可能没有意义。</p><p>最后，如果您必须与基于某些标准拥有自己的自定义风险级别的客户合作，您可能会犯错（特别是如果它与业内常见的评级系统完全不同）。在这些情况下，在达成任何调整评级的协议之前，请尽最大努力根据客户的反馈检查您的工作。在另一种情况下，理想情况下，您应该进行一些内部讨论，以确保您的风险评级准确无误，并在评级不应更改的情况下与客户交谈时给您一些信心。</p><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课中，我们介绍了客户可能想要调整报告中发现的风险评级的原因，以及在考虑进行调整时应采取哪些方法。</p><p>当客户提出此请求时，进行内部讨论总是好的。请记住，您作为安全测试人员的直觉也很重要。你不应该让客户说服你，当你有经验和证据可以表明相反的情况时，一个发现并不像看起来那么糟糕。</p><p>与上一课一样，如果您处于更初级的位置，您可能需要一些帮助来调整风险评级。如果是这种情况，请向您的团队成员寻求指导和支持。</p><h1 id="6-“我们不同意这一发现的风险评级”-练习"><a href="#6-“我们不同意这一发现的风险评级”-练习" class="headerlink" title="6-“我们不同意这一发现的风险评级” - 练习"></a>6-“我们不同意这一发现的风险评级” - 练习</h1><p>在上一课中，我们讨论了客户可能想要更改问题风险评级的原因以及满足请求应采取的方法。</p><p>以下是有关此主题的一些练习。</p><p><strong>反思练习</strong></p><ul><li>反思您或您的团队被要求更改调查结果的风险评级的情况。客户的理由是什么，你同意吗？如果是这样，为什么？</li><li>考虑一下，来自客户的额外信息改变了你对发现的看法。这是否改变了风险评级？如果是这样，原因是什么？</li><li>想一想，如果被要求在没有正当理由的情况下更改风险评级，您会有什么感受。您将如何与客户进行对话？</li></ul><p><strong>一般练习</strong></p><ul><li>查看您撰写或有权访问的报告，重点关注分配给每个发现的风险评级。对调查结果的可利用性提出一些假设的缓解措施或更改 - 风险评级会改变吗？</li><li>起草内部指南，以便在收到更多信息或应客户要求时重新评估调查结果的风险评级。这应包括内部审查、讨论和记录所做的任何更改的步骤。</li></ul><h1 id="7-请求反馈"><a href="#7-请求反馈" class="headerlink" title="7-请求反馈"></a>7-请求反馈</h1><p>本课程的一大目标是提高您的工作质量，为此您需要知道哪些方面需要改进。找出哪些领域需要您关注的一种简单方法是要求客户提供反馈。</p><p>有几种方法可以解决这个问题，但我认为其中两种高级方法是：</p><ul><li>联系客户以请求高级反馈（通过电话、聊天或电子邮件）</li><li>发送一份全面的调查问卷供他们填写</li></ul><p>我的建议是选择第一种选择。这主要是因为我认为你更有可能得到回应，你会听到客户最关心的事情。打电话特别好，因为人们更有可能诚实。</p><p>显然，您可以通过几种方式获得反馈，我更喜欢发送一封电子邮件，看看客户是否想打电话，但也包括您希望在电子邮件中获得反馈的要点，以防他们宁愿通过电子邮件提供。</p><p>就要涵盖的内容而言，您可以简单地征求反馈，也可以列出一些您希望获得反馈的领域。以下是一些建议：</p><ul><li>互动：<ul><li>客户对你在评估过程中与他们互动的方式感到满意吗？</li><li>客户是否觉得您的沟通及时而专业？</li><li>当某些事情不清楚时，或者他们在评估后何时&#x2F;是否需要帮助时，您是否支持过？</li></ul></li><li>评估：<ul><li>他们是否从评估中得到了他们想要的一切？</li><li>评估的覆盖面是否足够？</li></ul></li><li>报告：<ul><li>该报告是否向客户提供了足够的详细信息，以确保他们了解发现的漏洞及其影响？</li><li>是否包含可操作的建议？</li></ul></li><li>需要改进的地方：<ul><li>评估过程、报告或互动的哪些方面可以改进？</li></ul></li></ul><p>显然，上面的列表不能只是复制并粘贴到电子邮件中 - 由您决定从客户那里请求您想听到的内容。将上面的列表视为主题的起点。与其列出清单，不如将其作为您想听的几段简短的段落，关键是要让客户尽可能容易地做出回应，并且不会占用他们太多的时间。</p><p>我提到的第二个选项是问卷调查。虽然你可能会从客户那里得到更彻底和更细致的反馈，但我觉得你不太可能得到回应。每个人都很忙，收到一个指向要完成的广泛问卷的链接（这也是可选的）可能不是他们想要填写的内容。也就是说，如果您与客户建立了良好的关系，并且您善意地要求他们填写，您可能会取得一些成功。</p><p>就内容而言，它可以随心所欲地大或小。理想情况下，它将涵盖我已经列出的主题，但也涉及有关评估和报告的更详细的细节。如果正在执行问卷类型的反馈，最好在团队内部集中协调，并让团队的其他成员在评估后也发送问卷。关键是你得到的任何反馈都必须反馈给你，这样你就可以解决任何潜在的缺点，并在下次改进你的工作。</p><p>考虑在客户收到报告后的几天到一周内发送电子邮件或调查问卷。这个时间安排确保客户有足够的时间来审查调查结果和建议，并考虑他们的下一步行动。允许这段时间进行审查会增加收到深思熟虑的反馈的可能性，这些反馈可以为未来的评估提供改进。但是，请注意，延迟太久以请求反馈（或让客户做出回应）可能会导致不太有用的响应，因为客户可能会忘记评估的细节或全神贯注于新的优先事项。</p><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课中，我们讨论了从客户那里获得反馈的重要性，这样我们下次需要写报告时就可以改进我们的工作。我们还讨论了几个选项，以获得高层次的反馈，以及我们可能希望要求客户评论的内容。请记住 - 我们只能通过找出我们可能犯错误、遗漏或没有尽力而为的地方来改进我们的工作。与客户交谈是帮助我们在这方面改进的一种简单方法。</p><h1 id="8-请求反馈-练习"><a href="#8-请求反馈-练习" class="headerlink" title="8-请求反馈 - 练习"></a>8-请求反馈 - 练习</h1><p>在上一课中，我们讨论了向客户请求反馈的主题以及可以采取的方法。</p><p>以下是一些与此主题相关的练习。</p><p><strong>反思练习</strong></p><p>回想一下您最近收到客户反馈的项目。反馈是否有帮助，您是否将其纳入未来的工作中？</p><p><strong>一般练习</strong></p><ul><li>编写一个电子邮件模板，用于请求客户的反馈。采纳上一课中的建议。旨在使其尽可能简洁和专业。</li><li>创建反馈问卷，可以在项目完成后发送给客户。专注于使其引人入胜且易于完成，同时涵盖交互、评估和质量的关键方面。</li></ul><h1 id="9-本章小结"><a href="#9-本章小结" class="headerlink" title="9-本章小结"></a>9-本章小结</h1><p>在这个简短的章节中，我们为客户介绍了许多不同的反馈领域：</p><ul><li>向客户提供评估的概述，并允许他们听取高级概述，然后提出问题</li><li>如何处理客户希望从报告中删除结果或更改其风险评级的情况</li><li>从客户那里获得反馈</li></ul><p>以下是一些关键要点：</p><p><strong>评估后会议</strong></p><ul><li>为客户提供评估后会议，与他们一起讨论评估 - 这将使他们有专门的时间来听取高级评估结果并提出问题</li><li>为您的与会者量身定制任何会议：</li><li>你应该如何技术？</li><li>您需要涵盖哪些内容？</li><li>确保任何幻灯片都简洁易懂。</li><li>不要用无穷无尽的文本和复杂的图像填充幻灯片</li><li>不要将幻灯片用作供您阅读的脚本</li><li>及时浏览任何介绍，并就何时提问（如果需要）制定一些家务管理规则</li><li>回顾评估，以显示范围是什么以及涵盖的内容（如果需要，则不包括）</li><li>以最有效且对客户最有意义的方式浏览报告中的调查结果，例如</li><li>讨论形成攻击链的发现</li><li>将调查结果分类为评估的不同领域</li><li>根据关键性对结果进行分类</li><li>一定要通过描述问题是什么、为什么不好以及影响是什么来清楚地解释调查结果。不要忘记涵盖有关缓解措施和可利用性的任何重要信息</li><li>坚持事实，不要偏离意见——这可能会让人觉得不专业，可能会让客户不满意</li><li>考虑坚持会议的高级建议，专注于客户接下来需要做的直接事情</li><li>不要详细说明修复某些东西需要多长时间（或花费多少）——你不太可能准确。这里含糊其辞是可以的</li><li>T 恤尺码是其中的一种选择（就努力程度而言，S、M、L、XL）</li><li>在会议结束时，最好谈谈关键要点</li><li>发现的主要风险是什么？</li><li>在整个评估过程中是否有任何主题？</li><li>有什么需要进一步调查的吗？</li><li>客户的后续步骤</li><li>确保你给客户时间提出问题 - 如果你不知道某事的答案，做笔记并在会议结束后进行调查</li><li>使用附录幻灯片来存储可以引用但不需要成为主要演示文稿一部分的内容</li><li>利用自定义幻灯片来满足客户的特定要求，或突出评估范围的关键部分</li><li>在演示之前，请务必审查您的会议内容 - 应采用与报告相同的审查级别</li><li>通过做会议记录和排练来准备会议</li><li>会议结束后，向与会者发送一封电子邮件，列出人员的任何操作项</li><li>这包括回答您在会议期间无法回答的问题</li></ul><p><strong>查找有效性&#x2F;风险评级</strong></p><ul><li>如果客户担心某个问题无效或风险评级错误，请仔细听取他们的反馈并审查您的工作</li><li>如果在会议中出现这种情况，请考虑说您将再次审查并与您的团队离线讨论</li><li>不要在没有适当理由的情况下被迫删除或更改调查结果 - 但也不要与客户争吵</li></ul><p><strong>获取客户反馈</strong></p><ul><li>考虑在评估结束后从客户那里获得反馈</li><li>发送电子邮件征求反馈（或安排会议）或发送调查问卷以填写</li><li>确保您采纳反馈意见，并考虑在下一次评估中实施任何建议</li></ul><p>能够让客户有机会提出问题并听取您对评估的分析，确保他们充分利用您的专业知识。如果客户要求对报告进行潜在的更改（尤其是对调查结果的更改），我们必须努力确保我们的报告保持准确并反映现实。此外，始终寻求客户的反馈，以改进您的评估和可交付成果的质量。</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-6 报告交付</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-6%20%E6%8A%A5%E5%91%8A%E4%BA%A4%E4%BB%98/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-6%20%E6%8A%A5%E5%91%8A%E4%BA%A4%E4%BB%98/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（报告交付）介绍"><a href="#0-章节（报告交付）介绍" class="headerlink" title="0-章节（报告交付）介绍"></a>0-章节（报告交付）介绍</h1><p>完成评估后，下一步是将报告发送给客户。如果您已经是一名测试人员，那么您可能已经拥有向客户交付报告的明确方法，并且可能知道这个关键过程的注意事项。如果是这种情况，本章可能只是您的复习。</p><p>让我们开始吧。</p><h1 id="1-安全存储，安全交付"><a href="#1-安全存储，安全交付" class="headerlink" title="1-安全存储，安全交付"></a>1-安全存储，安全交付</h1><p>一旦报告完成，它就是一份高度敏感的文件。其中包含影响客户软件、系统或组织的漏洞列表。因此，无论存放在何处，都必须保护其内容。</p><p>除此之外，您还应该确保文档不能轻易修改，并且能够发现它是否被修改。这是为了确保您创建的内容保持预期，保持评估结果准确且不变。</p><p>让我们来看看保护这些文档的机密性和完整性的基本方法。</p><h1 id="文档完整性"><a href="#文档完整性" class="headerlink" title="文档完整性"></a>文档完整性</h1><h2 id="文档格式"><a href="#文档格式" class="headerlink" title="文档格式"></a>文档格式</h2><p>报告应以不易编辑的格式呈现。这几乎不可能完全避免，但可以采取措施使其更难，并在确实发生时使其可检测到。</p><p>最常用的报告文档格式是 PDF 文件。虽然 PDF 可以修改，但使用付费软件（或不可信的免费在线工具）可能会降低编辑文档的吸引力。它们具有高度的可移植性，使其成为共享报告文档的好方法。我见过使用的其他格式，从Microsoft Word的DOCX格式到简单的文本文件。但是，很明显，PDF文件是业内最受欢迎的。</p><h2 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h2><p>在交付文档之前，生成校验和可能很有用。校验和是一种数学算法，应用于文件或其他数据以产生唯一的哈希值（与密码哈希的工作方式相同）。在将报告发送给客户之前生成报告的校验和（然后与客户共享这些报告）可确保所有各方都有办法检查文档是否已被修改。</p><p>下面是使用某些 Linux 命令行实用程序执行报告文档的 SHA-256 和 SHA-512 校验和的示例（在撰写本文时，这些选项中的任何一个对于文件校验和都是安全的）：</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ sha256sum re<span class="hljs-keyword">port</span>.pdf &gt; report.sha256<br>$ sha512sum re<span class="hljs-keyword">port</span>.pdf &gt; report.sha512<br></code></pre></td></tr></table></figure><p>以下是每个文件中的内容：</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ cat re<span class="hljs-keyword">port</span>.sha256<br><span class="hljs-number">93883</span>c7fb1cdb2fdeaa87962a5bc46d631d2e58e5767a8ee72a2c4d5dee81e09  re<span class="hljs-keyword">port</span>.pdf<br><br>$ cat re<span class="hljs-keyword">port</span>.sha512<br><span class="hljs-title">dd2c4942e21f7bdef2b01097ef6392cfe34306a40f11a36a3d9ccb4aac3433c874d57fa9eb89015595e5f9844c0840d30d518b8711aacf84f606e52c8d89e8c1</span>  re<span class="hljs-keyword">port</span>.pdf<br></code></pre></td></tr></table></figure><p>report.sha256 和 report.sha512 文件（或文件中的哈希值）可用于验证文件是否已更改。您可以使用与以前相同的工具，将创建的文件用作参数来验证文件的校验和（假设它们位于当前工作目录中）：</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elm">$ sha512sum -c re<span class="hljs-keyword">port</span>.sha512<br><span class="hljs-title">report</span>.pdf: <span class="hljs-type">OK</span><br><br><br>$ sha256sum -c re<span class="hljs-keyword">port</span>.sha256<br><span class="hljs-title">report</span>.pdf: <span class="hljs-type">OK</span><br></code></pre></td></tr></table></figure><p>如果我修改报告文件并重新运行校验和，它将失败：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">head</span> /dev/urandom &gt; report.pdf</span>                                                                        <br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">sha256sum</span> -c report.sha256</span>   <br>report.pdf: FAILED<br>sha256sum: WARNING: 1 computed checksum did NOT match<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">sha512sum</span> -c report.sha512</span>   <br>report.pdf: FAILED<br>sha512sum: WARNING: 1 computed checksum did NOT match<br></code></pre></td></tr></table></figure><h2 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h2><p>另一种选择可能是对报告文档进行数字签名。我个人没有这方面的经验，但以加密方式签署 PDF 文件似乎是可能的。这将涵盖完整性，并向客户提供报告的真实性。</p><p>我将留给读者来调查这个过程的可能性，以及它是否对他们来说可行。我自己的想法是，除非报告系统可以在报告文档创建期间嵌入此签名，否则对于大型团队来说，这可能不能很好地扩展。</p><h2 id="文档加密"><a href="#文档加密" class="headerlink" title="文档加密"></a>文档加密</h2><p>现在，许多文档格式都可以使用密码轻松加密，从而提供了额外的安全层。如果发生未经授权的访问，入侵者将需要密码才能打开文档。但是，为了增强安全性，建议避免对文档使用共享密码;相反，每个报告都应具有唯一的密码。密码必须很强，因为通过破解工具恢复密码是可行的。此外，必须使用安全方法进行密码传递。为确保密码不被泄露，不应通过电子邮件发送密码，而应通过带外方法（如短信）发送密码，但应注意，短信并非完全安全且容易受到某些攻击。如果客户端正在使用 Signal，则可以将其用作发送密码的安全方法。</p><p>与数字签名一样，在大型团队中扩展这种方法可能会带来挑战，尤其是在文档存储方面。</p><h1 id="文档安全"><a href="#文档安全" class="headerlink" title="文档安全"></a>文档安全</h1><p>文档安全方面的主要目标是保护文档不被破坏系统的攻击者访问，并限制他们在破坏特定测试仪时可能获得的访问爆炸半径。</p><p>鉴于存储和交付可能发生的多种方式，我只能与某些特定领域交谈。你很可能会有一个过程，其中包含我将要经历的一个或多个领域。</p><h2 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h2><p>生成报告后，您可能希望在评估后将其存储一段时间。这样，如果客户端请求它，它可以再次分发，或者它可以与修正验证或未来的工作结合使用。</p><p>在存储方面，以下是您在保护文档时可能需要考虑的一些事项：</p><ul><li>将文档存储在控制访问的内部系统上<ul><li>只有测试团队中的员工才能访问</li><li>对文件的访问应在一段时间后受到限制，并且只有在有人需要进一步访问时才解锁</li><li>在评估小组之外或在文件被锁定后访问文件必须出于特定原因提出请求，并且必须得到适当的经理或指定机构的授权</li><li>所有访问，包括解锁请求（成功和失败），都应跟踪并存储在中央系统中</li></ul></li><li>如果创建了文档的任何校验和，则这些校验和应与报告一起存储</li><li>确保底层存储系统已启用加密<ul><li>磁盘和文件系统级别</li></ul></li><li>可以考虑加密存储的文件，尽管如前所述，以安全的方式在大型团队中扩展它可能存在问题</li></ul><p>这种类型的方法提供了一个强大的解决方案，该解决方案：</p><ul><li>限制有权访问文档的人数</li><li>仅在有限的时间内提供对报告文档的访问权限</li><li>对其他人的额外访问权限或在锁定后需要签字</li><li>生成可用于检测可疑活动的日志</li></ul><p>请注意，这些只是建议，上述任何一项的实施都取决于您进行测试和适当的安全。</p><p>值得注意的是，在现阶段，除报告外产生的任何测试抵押品也应保留。这不应包括客户的知识产权（例如源代码、内部文档等），而是来自工具的详细输出，如果客户发生争议，这些工具可以作为证据，或帮助补救验证。</p><p>一些例子是：</p><ul><li>来自漏洞扫描程序的完整报告</li><li>端口扫描仪的完整输出</li><li>云扫描工具的完整输出或报告</li><li>来自代码审查工具的静态分析结果（假设批量代码未缓存在结果中）</li><li>Burp Suite（或您用于代理流量的任何工具）日志</li></ul><p>这些内容通常被压缩并与报告一起上传。</p><h2 id="交付"><a href="#交付" class="headerlink" title="交付"></a>交付</h2><p>一旦文件最终确定，就需要考虑如何安全地到达客户手中。客户可以规定他们希望如何获取或接收文件，如果这不安全，我们必须引导他们朝着正确的方向前进并解释原因。</p><p>报告不应通过电子邮件发送。如果用户的帐户（或基础邮件服务器）遭到入侵，攻击者将有权访问该文档。任何敏感文档都是如此，因此，我们不应该允许电子邮件服务器成为存储系统。</p><p>这里的替代方案是使用 PGP（Pretty Good Privacy）&#x2F; GPG（GNU Privacy Guard）或在报告文档上设置强密码并将密码带外发送给客户端（通过非电子邮件、Signal 或短信（如果不可用）的媒介发送）。但是，PGP&#x2F;GPG 似乎并不常被大多数客户使用，并且有比通过电子邮件发送密码加密报告更安全的共享文档的方法。</p><p>更好的做法是使用一个系统，在该系统中，客户端已获得一组特定于评估的凭据，其中包含报告，并且可通过加密连接下载。</p><p>与报表存储一样，有一些注意事项：</p><ul><li>理想情况下，只邀请需要访问的客户端人员</li><li>评估小组也是如此</li><li>如果客户端本身受到威胁，使用密码加密报告文档可以增加深度防御</li><li>只有团队中的指定人员才能添加用户</li><li>审核此系统中的所有操作：<ul><li>文档上传、下载、删除</li><li>登录尝试（成功和不成功）</li><li>访问控制的任何更改</li></ul></li><li>如果可能，请使用多重身份验证 （MFA）</li><li>对特定于评估的文件的访问应有时间限制</li></ul><p>同样，这种方法有一些关键的好处</p><ul><li>限制有权访问文档的人数</li><li>仅在有限的时间内提供对报告文档的访问权限</li><li>只有您具有访问控制权限</li><li>生成可用于检测可疑活动的日志</li></ul><p>同样，这些都是建议，上述任何一项的实施都取决于您，以确保其适当安全。</p><h2 id="评估后清理"><a href="#评估后清理" class="headerlink" title="评估后清理"></a>评估后清理</h2><p>如上所述，在评估结束时清除不再需要的任何客户数据非常重要。一般来说，这仅限于为了完成评估而可能与您共享的知识产权，例如源代码或内部文档。</p><p>值得注意的是，如果您预见到将进行修正验证，从而有利于使用原始源代码或文档进行比较，则可以获得客户端的保留许可。如果他们不希望您这样做，您可以指示客户代表您保留这些文件和文档。</p><p>在评估期间可能需要清理的其他事项包括从客户端系统中删除已创建的文件、帐户或其他数据。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这里，我们介绍了在我们自己的系统上保护报告文档的重要性，以及确保客户有安全方式获取其文档的原因。安全处理报告文档是测试生命周期的关键部分，我们有责任通过保护详细说明其漏洞的文档来保护客户的系统。</p><h1 id="2-安全存储，安全交付-练习"><a href="#2-安全存储，安全交付-练习" class="headerlink" title="2-安全存储，安全交付 - 练习"></a>2-安全存储，安全交付 - 练习</h1><p>在上一课中，我们讨论了如何防止和实施防止文档修改的保护措施，以及如何安全地存储文档并将其传输给客户。正如本课中提到的，您可能在这里有自己的流程，但希望其中一些流程很有趣，或者提供了更安全地执行文档存储或交付的想法。</p><p>这里有几个练习。</p><p><strong>反思练习</strong></p><p>反思您当前在报告处理方面的做法。在文档安全性和完整性方面，是否有任何可以改进的地方？</p><p><strong>一般练习</strong></p><ul><li>如果您以前没有这样做过，请在 Linux 中测试 sha256 或 sha512 校验和工具。还有哪些其他选择？您可以将这些作为报告交付过程的一部分吗？</li><li>探索对报告文档进行数字签名的选项。你能利用这一点吗，对你更广泛的团队来说是否可行？<ul><li>为此要警惕第三方工具！不要将您的报告上传到一些随机的第三方让他们签名！</li></ul></li></ul><h1 id="3-查找电子表格"><a href="#3-查找电子表格" class="headerlink" title="3-查找电子表格"></a>3-查找电子表格</h1><p>在本课程中，我已经提到过几次，但对客户来说，以电子表格样式格式获得报告结果的副本会非常有帮助。</p><p>将问题放入电子表格中可以更轻松地对问题进行排序、过滤和跟踪。除此之外，它们还可以以允许它们导入其他系统的方式进一步导出。我见过很多系统会以 CSV 或 XLSX 格式（例如 JIRA）摄取数据。</p><p>这让人想起我先前的讨论，即需要确保问题的可移植性，并且每个问题都可以孤立地理解，与报告的其他部分分开。如前所述，这是通过在问题中放置足够的上下文描述、影响和建议来实现的。</p><p>让我们快速浏览一下要在文档中捕获的关键数据。</p><h1 id="电子表格字段"><a href="#电子表格字段" class="headerlink" title="电子表格字段"></a>电子表格字段</h1><p>理想情况下，你希望捕获给定问题中的所有信息，并可能在电子表格中包含一些评估元数据。下面是如果对本课程中解释的发现使用类似结构（以及明显的描述）时可能拥有的列列表：</p><ul><li><strong>查找 ID</strong> - 评估查找结果的唯一代码或编号。</li><li><strong>风险评级</strong> - 对调查结果的评级。例如，严重、高、中或低。</li><li><strong>标题</strong> - 结果的标题。</li><li><strong>描述</strong> - 对发现的描述，其中应包括有关错误是什么、为什么不好及其潜在影响的所有信息。还应包括可利用性和存在的任何缓解措施。<ul><li><strong>影响</strong> - 如果在结果的单独部分中跟踪影响，您可能希望将其导出为单独的列。</li></ul></li><li><strong>建议</strong> - 有关如何修复结果以及在何处搜索其他实例的信息。还应提出预防性建议。</li><li><strong>位置或区域</strong> - 有关发现结果的位置的信息。</li><li><strong>参考文献</strong> - 与调查结果或建议相关的 URL 或其他阅读材料的任何引用。</li><li><strong>其他问题元数据</strong> - 如果您有一个报告系统来跟踪结果的不同类型的元数据，则导出中应存在这些元数据。这些可以是不同类型发现的自定义类别、用于描述高级别影响或可利用性的陈述，或者可能是 CVSS 评分信息。</li><li><strong>评估元数据</strong> - 使用特定列通过其自己的唯一标识符或名称来表示评估可能会有所帮助。如果客户端将多个评估导入到单独的系统中，或者正在跟踪主数据表中的所有测试，这将很有帮助。</li></ul><p>电子表格的目标实际上是将所有查找信息捕获到一张工作表中。但是，您可能还希望将评估中的其他数据导出或创建到单独的工作表（例如执行摘要和评估建议）中，或者创建图表和图形以补充结果。</p><h1 id="生成、审查和交付"><a href="#生成、审查和交付" class="headerlink" title="生成、审查和交付"></a>生成、审查和交付</h1><p>当您从典型文档中获取信息并尝试将其放入电子表格的单元格中时，很可能会丢失一些格式和图像。无论您是能够自动生成电子表格还是必须手动生成电子表格，最好在插入后整理文本。请记住，这是给客户的可交付成果。这意味着它应该以与你的报告可交付成果相同的专业水平和审查来对待。这意味着格式应正确，从主要报告文件导出的文本的任何重新措辞都应经过审查，然后进行同行评审，并且应安全地存储和交付文件。请记住，鉴于其内容，与主报告文档的安全性和存储规则相同。</p><h1 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h1><p>这是一个关于调查结果的关键信息的简单教训，应该提取这些信息并将其放入查找电子表格中，以便在需要时交付给客户。我们还讨论了审查任何创建或生成的电子表格的重要性，以确保它们与我们的主要报告具有同等的审查水平，并确保它们被安全地存储和交付给客户。</p><h1 id="4-查找电子表格-练习"><a href="#4-查找电子表格-练习" class="headerlink" title="4-查找电子表格 - 练习"></a>4-查找电子表格 - 练习</h1><p>上一课是查找电子表格的快速概述，这是许多客户要求的。</p><p>以下是一些涵盖此主题的练习。</p><p><strong>反思练习</strong></p><p>查看您过去为客户创建的电子表格，其中包含安全检测结果列表。</p><ul><li>导出了哪些字段，电子表格的格式如何？你觉得缺少任何信息吗？如果是这样，什么？</li><li>审查调查结果和文本 - 没有报告，这些问题有意义吗？如果没有，还缺少什么？</li></ul><p><strong>一般练习</strong></p><p>使用前几章中编写的问题，根据上一课中提到的字段创建电子表格。确保捕获问题中存在的所有关键信息。</p><p><strong>超越练习</strong></p><p>如果您没有适当的工具，请探索可以使用哪些工具或脚本来自动从报告文档生成电子表格。如果可以，请尝试创建一个基本脚本，用于从报表模板中提取数据并填充电子表格。</p><h1 id="5-本章小结"><a href="#5-本章小结" class="headerlink" title="5-本章小结"></a>5-本章小结</h1><p>这是一个非常简短的章节，介绍了安全处理报告的方法，并简要提到了查找电子表格。</p><p>以下是一些关键要点：</p><ul><li>应采取措施确保报告文件不能轻易修改。这可以通过使用防止琐碎编辑和最终文档校验和的文件类型来完成。<ul><li>还可以在此处采取其他可能有帮助的步骤，例如签署文档或加密文档。</li></ul></li><li>报告文件应安全存储，并且只能由直接测试团队访问文件，并且只能在评估后的设定时间内访问。应将适当的审核和日志记录应用于存储文档的系统。还应执行静态加密。</li><li>查找电子表格通常是从客户那里请求的，可用于轻松排序、过滤和操作查找数据。<ul><li>它们还可用于更轻松地将数据导入其他系统。</li></ul></li><li>查找电子表格在质量方面应与报告对应物进行相同级别的审查，并在存储和交付过程中安全处理。</li></ul><p>始终确保对为客户生成的文档进行格外小心的处理。此外，任何辅助文档（例如查找电子表格）都应以相同的安全级别对待，并以与主要报告文档相同的审查级别进行审查。</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-5 Q&amp;A流程</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-5%20Q&amp;A%E6%B5%81%E7%A8%8B/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-5%20Q&amp;A%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节-QA流程-介绍"><a href="#0-章节-QA流程-介绍" class="headerlink" title="0-章节(QA流程)介绍"></a>0-章节(QA流程)介绍</h1><p>在本章中，我们将介绍QA流程 - 所有为客户制作报告材料的组织都应该具备的流程。我们将介绍流程是什么，目标是什么，以及作为顾问如何为此做好准备，以使流程尽可能顺利。</p><p>我们走吧！</p><h1 id="1-QA流程"><a href="#1-QA流程" class="headerlink" title="1-QA流程"></a>1-QA流程</h1><p>QA（或质量保证）流程对于任何准备发送给客户的文件的组织来说都是至关重要的。它存在有几个不同的原因，包括：</p><ul><li>确保报告没有格式、拼写和语法错误</li><li>确保生成的报告是一致的，并与内部报告准则保持一致</li><li>确保文件在技术上准确无误</li></ul><p>涵盖和执行上述所有要点的方式因组织而异。有些团队只会让一个人阅读整个报告作为审查，有些团队可能有多个阶段，首先执行简单的格式、拼写和语法相关检查，然后再传递给更多的技术团队成员进行审查。</p><p>无论执行此操作的顺序或方式如何，该过程对于确保客户收到高质量且没有错误的报告至关重要。</p><h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><p>QA的过程可能类似于以下内容：</p><ol><li>测试人员完成工作并生成报告</li><li>报告已发送以供内部审查</li><li>报告由同事（通常是未分配给评估的另一名测试人员）审核</li><li>报告被发送回测试人员，并附上反馈以解决</li><li>测试人员处理反馈</li><li>测试人员将报告交付给客户</li></ol><p>如前所述，对于不同的组织，该过程可能有所不同，但这可能是最简单的过程形式。</p><h1 id="如何进行质量保证？"><a href="#如何进行质量保证？" class="headerlink" title="如何进行质量保证？"></a>如何进行质量保证？</h1><p>在我从事网络安全的职业生涯中，我一直从事“QA职责”，我可以就如何处理调查结果和报告的审查提供一些建议。</p><p>就任何给定部分的预期而言 - 我们已经在课程中介绍了这些信息。我不会再经历这一切了。我要说的是，手头有一个小的清单，用于每个部分或发现中预期的各种项目，这很方便。</p><p>在审查他人作品时，您可以牢记以下几点。现在让我们来看看它们。</p><h2 id="旁观者"><a href="#旁观者" class="headerlink" title="旁观者"></a>旁观者</h2><p>最明显的一点是，仅仅在评估之外进行观察，你就有可能看到执行工作的团队没有考虑过的差距，或者只是考虑因素。对任何事情的评论都是这种情况——我们都是人，有自己的观点和其他看待事物的方式。让别人来审查工作总是会带来新的视角，这在这里也行得通。</p><p>这可能就像不理解某些文本一样简单 - 如果你不能，客户将如何？但它也可能像讨论复杂的补救措施或潜在的攻击路径一样具有技术性。每个人都有自己的经验和背景，可以用来改进报告和扩展领域。</p><p>不要害怕与你的团队分享你的意见，只要它们是建设性的。</p><h2 id="设身处地为客户着想"><a href="#设身处地为客户着想" class="headerlink" title="设身处地为客户着想"></a>设身处地为客户着想</h2><p>您应该考虑解释报告及其调查结果的另一种方法是像阅读客户一样阅读内容。您应该考虑的事项是：</p><ul><li>他们是否能够根据他们的描述理解报告中的调查结果？<ul><li>如果没有，它们是否需要改进和&#x2F;或是否应该提供良好的参考？</li></ul></li><li>他们能理解建议中对他们的要求吗？<ul><li>这些建议是否可操作且针对他们？</li></ul></li></ul><h2 id="假设你什么都不知道"><a href="#假设你什么都不知道" class="headerlink" title="假设你什么都不知道"></a>假设你什么都不知道</h2><p>这与前两点有关。当您阅读报告和调查结果时，假设您对主题领域一无所知。这样做应该梳理出描述或解释中可能缺少的任何关键部分。当然，读者应该具备基本的知识和背景。这里的目标是找到重大差距，这些差距可能会回答客户阅读报告后可能提出的问题。这又回到了本课程的前面几点，即现在投入额外的工作，以使自己免于将来的工作。在这种情况下——不要给客户找问题的理由，如果你知道他们可能会被提出问题，现在就报道他们！</p><h1 id="对团队的反馈"><a href="#对团队的反馈" class="headerlink" title="对团队的反馈"></a>对团队的反馈</h1><p>当面对一个小团队审查许多发现和报告时，我认为我在反馈方面有两个选择：</p><ul><li>修复团队犯的所有错误，加快交付速度，以及团队没有从错误中吸取教训</li><li>花更多时间在文档中插入注释，以显示所犯的错误并让团队纠正它们，然后再回来找我进行最终审查</li></ul><p>考虑到我与同一小群人一起工作了好几年，我投入更多的时间让团队纠正他们的错误并从中吸取教训是有意义的。我从经验中发现，如果你自己做所有的修复，人们通常不会采取措施将这些反馈落实到未来的写作中。</p><p>这可能被认为是“强硬的爱”方法（也许是这样），但正是这个过程将团队中经验有限的初级成员（与经验丰富的同行相比，生成较弱的文章和报告）变成了团队的核心成员，拥有一些我读过的最好的文章。重要的是要记住，这里的目标不是羞辱别人，目标是帮助他人进步。确保提供的任何反馈都是专业和建设性的。如果你觉得同事在报告的许多方面表现不佳，尽管有反复的反馈，最好联系他们，询问他们是否还好，或者他们是否需要一些额外的指导来把事情做好——我们都有糟糕的日子，或者需要进一步的帮助才能把事情做好。</p><p>你可以选择任何你喜欢的道路，但我的投票是选择更痛苦的道路来帮助你的团队成长。在短期内，你需要更多的工作，但如果你的建议被采纳，从长远来看，你和你的团队将来需要纠正的就更少了。</p><h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><p>在本课程中，我已经介绍了许多让测试人员在报告写作方面绊倒的方面。我认为快速概述我在评论中看到的常见问题以及如何在未来避免这些问题会很有帮助。</p><p><strong>格式</strong></p><ul><li>没有介绍的证据<ul><li>问题：直接从段落跳转到屏幕截图、代码片段或其他形式的证据，而不告诉读者正在呈现什么会影响文本的流畅性。</li><li>解决方案：始终介绍您向读者展示的内容。例如，“以下代码片段显示了密码生成例程中不安全随机性的用法：”</li></ul></li><li>没有图形的图像<ul><li>问题：报告文档中没有数字的图像可能看起来有点不专业。</li><li>解决方案：为所有图像提供简洁的标题。“显示跨站点脚本有效负载执行的屏幕截图”</li></ul></li><li>单个项目符号列表<ul><li>问题：许多测试人员习惯于在介绍性段落之后使用单个项目符号。这没有意义，因为列表实际上应该不止一个项目。</li><li>解决方案：即使这可能看起来更好，但将单个项目符号列表替换为句子或段落更有意义。</li></ul></li><li>日期格式<ul><li>问题：我经常看到日期格式不正确，或者在一个文档中使用了多种日期格式。这是不一致的，可能会让人觉得很草率。</li><li>解决方案：应规范文档中使用的日期格式。请在此处与您自己的内部指南保持一致，了解要使用的日期格式。考虑采用符合 ISO 标准的日期格式，以便于在区域格式（如果适用）之间进行翻译。</li></ul></li><li>章节和页面之间的间距<ul><li>问题：从半页开始的部分，或者段落覆盖两页的部分可能看起来很凌乱，并影响文档的流畅性和可读性。</li><li>解决方案：考虑在各节之间或段落开始流向另一页的位置插入分页符。</li></ul></li></ul><p><strong>内容</strong></p><ul><li>知识假设<ul><li>问题：不要以为读者会知道一些事情。如果在没有提供足够基本信息的情况下解释一个复杂的主题，客户可能无法理解。</li><li>解决方案：花时间解释一个概念，特别是在对调查结果的描述中（在第一段之后）。此外，为客户阅读提供良好的参考。记住，当你审查工作时，要设身处地为客户着想——他们有可能理解你写的东西吗？</li></ul></li><li>缩写<ul><li>问题：我们的行业充满了首字母缩略词，我们不可能全部知道，我们的客户也是如此。文档中的首字母缩略词而不给出其扩展名称可能会导致混淆。</li><li>解决方案：如果您使用首字母缩略词，请在之后提供其定义。例如“SNMP（简单网络管理协议）”。然后，您可以在查找的其余部分或您可能要编写的任何部分中“按原样”使用 SNMP。如果首字母缩略词很大（例如，每个部分），您也可以在整个报告中重新定义首字母缩略词。</li></ul></li><li>问题底部的重要缓解措施或上下文<ul><li>问题：想要快速了解报告问题的客户通常会阅读问题的开头，而不是所有问题。如果我们在描述的底部放置重要的上下文或原因，说明我们提出的问题可能会得到缓解，那么它可能会被遗漏。</li><li>解决方案：通过确保此上下文位于描述的开头，避免潜在客户的困惑和跟进。理想情况下，在开头段落的末尾。</li></ul></li></ul><p><strong>写作风格 - 缺乏简洁性</strong></p><ul><li>问题：测试人员经常描述或解释事物，而不是直接和切中要害，经常将本来简单的几句话变成一个大段落。我看到的最常见的措辞是“被发现”、“确定”、“建议”等。</li><li>解决方案：这并不是您在 QA 过程中可能发现的最大问题。理想情况下，我们应该以更简洁、更直接的方式写作，让读者更清晰。以下是一些示例：<ul><li>“发现受影响服务器的 RPD 服务暴露在 Internet 上。” -&gt; “RDP 服务已暴露给 Internet。”</li><li>“已确定 Web 应用程序服务器设置的标头未设置为帮助缓解跨站点脚本攻击。” -&gt; “Web 服务器未设置标头来缓解跨站点脚本攻击。”</li><li>“建议为所有 S3 存储桶启用传输层加密。” -&gt; “为所有 S3 存储桶启用传输层加密。”</li></ul></li></ul><h1 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h1><p>QA 流程对于确保将质量报告交付给您的客户至关重要。但不仅如此，这也是向团队提供反馈并帮助他们改进的重要过程。在这里，改进可以采取多种形式：改掉坏习惯，更多地了解您不熟悉的学科领域，或者只是普遍提高您交付的工作质量的标准。制定此流程并根据同行的反馈采取行动将促使您随着时间的推移编写更好的报告。你接受反馈的速度越快，你的进步就越快。另一方面，您给团队的反馈越好，他们就越有可能提高自己的报告质量。</p><h1 id="2-QA-流程-练习"><a href="#2-QA-流程-练习" class="headerlink" title="2-QA 流程 - 练习"></a>2-QA 流程 - 练习</h1><p>在上一课中，我简要概述了 QA 流程及其使用原因，以及有关如何执行评审的一些高级指导。我们还介绍了一些反馈方法，其中一种是推动团队前进和提高未来质量的方法。</p><p>让我们对这些主题进行一些反思和其他一些练习。</p><p><strong>反思练习</strong></p><ul><li>想想你自己组织中的QA流程。您是否参与过任何报告的 QA 活动？如果是这样，他们是什么样子的？你发现它们的效果如何？在QA过程中，您遇到过什么挑战吗？</li><li>反思自己接收反馈的经历。您通常如何回应反馈？过去曾向您指出过的错误类型或需要改进的领域是否有任何模式？你有没有把这些融入到你未来的工作中？</li><li>反思您最近撰写或有权访问的报告。您能否根据课程中涵盖的内容或改变您看待文档的方式（例如，假设对主题领域一无所知，或设身处地为客户着想）查看文档并提供任何建议？</li></ul><p><strong>一般练习</strong></p><p>还记得我几节课前完全完成的“示例问题”吗？回顾一下我的工作，以及我们到目前为止所涵盖的所有内容。你能发现我的问题有任何问题，或者你可能给我任何建设性的观点吗？</p><p><strong>超越练习</strong></p><p>调查用于报告 QA 的 QA 流程。你能把任何东西纳入你自己的QA流程吗？有什么可以自动化的吗？</p><h1 id="3-准备-QA"><a href="#3-准备-QA" class="headerlink" title="3-准备 QA"></a>3-准备 QA</h1><p>我想花一点时间介绍一些经常被发送作品进行审查的人遗漏的要点。这主要来自刚进入这个行业的人，但我确实看到了一些我将要介绍的项目，有些人忘记了反复做。</p><p>其中一些是显而易见的，希望这只是一个提醒。如果其中任何一个适用于您，您就知道您需要做什么。现在让我们来看看它们。</p><h1 id="通读你的作品"><a href="#通读你的作品" class="headerlink" title="通读你的作品"></a>通读你的作品</h1><p>对我来说，没有什么比坐下来查看许多安全发现更糟糕的了，却发现它们充满了语法和拼写错误，以及没有意义或不符合格式准则的句子。与其生气，不如开始工作，开始用需要解决的问题和指示来标记调查结果。我很清楚，这些发现在写完之后通常没有经过作者的审查。</p><p>我当然对这种做法感到内疚，在我职业生涯的早期，我花了几年时间才摆脱它。通常，人们会写下一个发现，而忘记从头到尾通读整个发现（或任何其他报告部分）。我认为发生这种情况的方式是，当你在大脑中形成单词并立即将它们提交到 Word 或你正在写的任何东西中时，你不会意识到在这个过程中发生了微妙的（有时是重大的）错误。我当然认为我最初写的句子在我写完后就很好。只有经过反思，我才发现犯了错误。其中一些是由于打字不当造成的，另一些是神秘的“大脑到键盘”错误，我认为没有正确输入，甚至还有一些是我即时编辑单词并在没有意识到的情况下破坏了句子的语法或可读性。</p><p>不管你是否犯了错误，这都是整节课中最重要的提醒——当你认为自己已经“完成”时，一定要阅读你所写的内容。如果你遵循这个简单的做法，你会发现你的工作反馈或“红笔”要少得多。你可能会觉得这占用了宝贵的时间，但这是值得花费的时间。我问你 - 当你收到一份有很多更改需要你做的报告，或者如果你看到审查的人不得不做出很多改变时，你会有什么感觉？拯救自己和他人未来的工作。</p><p>将来考虑这个问题的一种方式是，当你的报告从你这边完成并准备好进行审查时，它应该是“客户准备就绪”的。这意味着您应该对报告感到满意，并将其交给您的客户。我并不是说你应该交出它，但我要说的是，你应该觉得你已经尽了一切努力来确保它的质量尽可能高，并且没有错误。如果你把这种想法应用到你所有的报告中（或你写的任何内容），你收到的反馈将是最小的。而且，如果您在下一份报告中采纳了这些反馈，那么随着时间的推移，您将获得的金额将减少。</p><p>因此，总而言之 - 在发送以供审查之前，请仔细阅读您的作品！我倾向于在一个小节或段落完成后回顾我的工作，并通读整个部分或找到文章完成。</p><h1 id="拼写和语法检查"><a href="#拼写和语法检查" class="headerlink" title="拼写和语法检查"></a>拼写和语法检查</h1><p>好了，是时候做一些更基本的事情了。通读完所有工作后，请记住运行拼写检查。希望这只会选择不在字典中的单词，因为它们是小众网络单词（可能会将它们添加到您的拼写检查词典中），理想情况下，语法发现会很小，因为您已经阅读了您的工作。这应该是对基本错误的快速健全性检查。</p><h1 id="检查格式"><a href="#检查格式" class="headerlink" title="检查格式"></a>检查格式</h1><p>报告抵押品的外观将取决于其生成方式。请务必仔细检查文档，以确保格式一致且呈现正确。在我的时间里，我使用了多个系统进行报告，这仍然是一个症结所在，主要是从一致性的角度来看。</p><p>如果您符合格式指南，请确保所有内容都与它保持一致。如果您在整个文档中呈现相同类型的信息，请确保它们始终如一地呈现（如果您拥有的格式指南在这方面提供了一定程度的灵活性）。</p><p>同样，确保所有图像、图表或其他视觉对象在最终文档中都可读一次。我经常看到视觉效果中的文本比最初预期的要小，需要一些调整。</p><h1 id="更新目录和参考资料"><a href="#更新目录和参考资料" class="headerlink" title="更新目录和参考资料"></a>更新目录和参考资料</h1><p>这是我总是忘记做的事情，所以我会在这里分享它，并希望我并不孤单。</p><p>这可能特定于 Microsoft Word（或其他一些开源变体）。报告完成后，您可能需要确保更新参考文献，以便它们链接到正确的页面，并确保目录中的各部分具有正确的页码。</p><p>如果目录与文档其余部分的页码不匹配，则不希望发送报告。这可能会给客户带来一些混乱的时间。</p><h1 id="最终健全性检查"><a href="#最终健全性检查" class="headerlink" title="最终健全性检查"></a>最终健全性检查</h1><p>最后，最好对文档进行最后一次扫描。到目前为止，与其说是深入的审查，不如说是一目了然，但请确保您需要填写的所有关键部分和元数据都在那里。在进行时留意格式错误，或您认为可能需要分页符的区域。另外，请注意文档中留下的任何注释。这些通常会在另存为 PDF 时呈现，这看起来并不专业。</p><p>如果您所做的更改修改了文档中的内容，请记住再次更新目录。</p><h1 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h1><p>在这里，我们介绍了您应该做的核心事情，以便为 QA 做好准备。这里最重要的一课是确保你在完成工作后通读你的工作，并将你的工作交付给 QA，就好像它已经准备好迎接客户一样。</p><p>值得注意的是，在实际交付给客户端之前，应执行以下步骤：</p><ul><li>更新目录和参考文献</li><li>检查格式</li><li>另一个拼写和语法检查</li><li>最终健全性检查</li></ul><h1 id="4-准备-QA-练习"><a href="#4-准备-QA-练习" class="headerlink" title="4-准备 QA - 练习"></a>4-准备 QA - 练习</h1><p>最后一课涵盖了一些关于如何为 QA 流程准备工作的基本但重要的要点。这个想法是，你的自我审查越彻底，当你从同行那里收到文件时，你就越不可能被要求进行更改。</p><p>只是本课的一个反思练习。</p><p><strong>反思性练习</strong></p><p>在将作品送交审查之前，请反思自己的习惯。你通常会花时间仔细阅读你的作品吗？您是否遇到过在提交后发现错误的情况，而这些错误本可以通过更彻底的审核流程来避免？您能为未来做些什么？</p><h1 id="5-处理-QA-反馈"><a href="#5-处理-QA-反馈" class="headerlink" title="5-处理 QA 反馈"></a>5-处理 QA 反馈</h1><p>没有什么比从审查中获取报告更糟糕的了，在将报告发送给客户之前，该报告需要大量工作。最重要的是审查您收到的反馈，并将其纳入将来的文档中。</p><p>当您收到报告时，无论它处于何种状态（要么是无休止的评论，表明需要进行较大的更改，要么是一些小的更改），请花时间查看它们并记下正在提出的任何建议，您可以在下一份报告中采纳这些建议。这可能需要您下次进行更仔细的审查，或者记住以某种方式设置某些内容的样式。请记住，当您将报告发送给 QA 时，报告的质量越好，报告发布后需要执行的工作量就越少。</p><p>如果您不同意任何反馈或不理解某些反馈，请与我们联系并与审查您工作的人聊天。在许多情况下，两端都可能缺少一些上下文，这可能会使反馈更有意义。</p><p>在这一点上，剩下的就是解决工作。</p><p>如果您的报告返回时始终需要进行大量更改，则可能是您在将工作发送给 QA 之前没有花时间审查您的工作，或者您在内容和质量方面没有达到组织的正确阈值。如果您认为是这种情况，请采取行动。彻底审查您的工作，接受反馈，并考虑向可信赖的同事寻求指导。</p><h1 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h1><p>在这个非常简短的课程中，没有什么可说的，只是记得回顾一下作为 QA 过程的一部分反馈给您的评论，并记得下次再把它们带上。请记住，反馈通常是善意的和善意的，不应被视为对您的个人批评 - 始终将反馈视为改进的一种方式。</p><h1 id="6-本章小结"><a href="#6-本章小结" class="headerlink" title="6-本章小结"></a>6-本章小结</h1><p>在这个小而重要的章节中，我们回顾了 QA 流程以及如何处理它。既是审稿人，也是作者。</p><p>以下是一些关键要点：</p><ul><li>QA流程旨在确保客户收到高质量的报告<ul><li>没有常见错误，技术准确</li></ul></li><li>作为评审者，您可以通过为评估带来新的观点和经验来发现测试团队可能不明显的差距</li><li>通过设身处地为客户着想来审查文档，或者假设缺乏该主题领域的知识，将使任何缺失的关键信息浮出水面</li><li>向团队提供反馈以确保他们纠正错误（而不是自己纠正错误）应该引导他们将来不再犯同样的错误</li><li>作为作者，请确保您花时间通读您的作品以发现错误</li><li>在将报告发送给 QA 之前：<ul><li>执行拼写和语法检查</li><li>查看文档中的所有格式，确保其符合内部准则并呈现正常</li><li>更新目录和其他参考文献，使链接和页码正确无误</li><li>对报表执行最终的健全性检查</li></ul></li><li>记下您在 QA 过程中获得的任何反馈，并从中学习以备下次使用</li><li>如果您有任何疑问或不同意任何反馈，请记得与审稿人讨论以进行澄清</li></ul><p>这是另一个领域，投入时间制作高质量的工作（通过执行仔细审查）将导致返回的文档包含更少的项目供您采取行动。当他们不必纠正可以通过简单审查发现的简单错误时，您也会拥有一个更快乐的团队。最后，如果你是一份文件的审稿人，这不仅会改善你自己的工作，而且还会迫使你有意识地考虑和判断质量标准，在这个过程中提高你的写作水平。</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-4 查找文章</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-4%20%E6%9F%A5%E6%89%BE%E6%96%87%E7%AB%A0/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-4%20%E6%9F%A5%E6%89%BE%E6%96%87%E7%AB%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（查找文章）介绍"><a href="#0-章节（查找文章）介绍" class="headerlink" title="0-章节（查找文章）介绍"></a>0-章节（查找文章）介绍</h1><p>好了，你们一直在等待的这一章。在这里，我们将把一篇发现文章分解为关键部分，并研究如何以最佳方式编写每个部分。</p><p>我对本章各领域的建议对某些人来说可能是新的。主要区别可能在于我建议将各个调查结果本身放入的深度水平，而不是依赖报告的执行摘要或建议部分。</p><p>以这种方式编写问题有充分的理由。首先，人们越来越有可能孤立地看待问题，而远离报告文件的其余部分。这正在成为新常态，因为我们看到客户将报告中的问题加载到 JIRA 和其他类似系统中，但忘记了执行摘要和战略建议中涵盖的内容。这增加了在补救过程中不考虑建议的可能性，这些建议将提高调查结果的整体安全性和上下文影响。其次，我在调查结果文章中观察到的一个常见模式不仅包括缺乏关于为什么调查结果很重要的信息，而且还缺乏关于剥削<strong>对客户</strong>的实际影响和潜在后果的细节。</p><p>我们将密切关注我们在课程开始时一直花费的时间来讨论的背景，以及我们如何利用这些知识为我们的客户撰写准确和有影响力的发现。我们还将更加深思熟虑地考虑我们在调查结果中放置的补救措施，以确保我们不仅涵盖快速修复，还涵盖预防性建议。</p><p>这可能是课程中最重要的一章。这当然是你将来在制作报告时大部分文字都会写的地方，所以请不要急于阅读本节。花时间完成每节课并完成练习。</p><p>我希望你们能看到我在这里宣讲的好处，以及我们可以为我们的报告增加多少质量和价值。</p><p>我们走吧！</p><h1 id="1-章节（报告内容）介绍-练习"><a href="#1-章节（报告内容）介绍-练习" class="headerlink" title="1-章节（报告内容）介绍 - 练习"></a>1-章节（报告内容）介绍 - 练习</h1><p>对于本章，不仅每节课后会有通常的练习，而且通常会有一两个练习，要求你为下面的每个问题写一个部分。在本章结束时，您应该已经为每个问题创建了完整的文章。</p><p>课程中将涵盖的调查结果的主要部分是：</p><ul><li>风险评级</li><li>其他查找元数据</li><li>标题</li><li>描述和影响</li><li>证据</li><li>建议</li><li>受影响的位置</li><li>引用</li></ul><p>因此，请复制以下评估上下文、范围和问题证据，以免您不断返回此页面。我建议你打开一个Word文档或类似文件，这样你就可以边走边写这些问题。在每节课中，我们还将研究另一个发现列表，展示我将在几节课中介绍的示例。</p><hr><h2 id="评估背景"><a href="#评估背景" class="headerlink" title="评估背景"></a>评估背景</h2><p>这些示例问题是在对一家名为 OmniCorp 的组织进行多阶段评估时发现的。OmniCorp 是一家技术公司，提供多种存储解决方案，可满足多种类型的组织数据需求。其中包括基于文件的存储、医院成像托管和任意数据的常规日志记录存储。正因为如此，OmniCorp 拥有广泛的客户。</p><h2 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h2><p>以下列表显示了评估的范围，以及有关评估期间或从客户那里了解到的上下文的一些附加信息：</p><ul><li>AWS 配置审核（所有账户）<ul><li>OmniCorp 面向公众的所有网站都存储在 AWS 上。</li><li>一些开发人员和其他员工可以在 AWS 中建立基础设施。</li><li>有一条从 AWS 到本地环境的路由，该路由是存储所有数据的地方。</li></ul></li><li>内部和外部漏洞扫描<ul><li>外部：所有 AWS 资产和 OmniCorp 的 DMZ 都来自其本地托管生产网络。</li><li>内部：扫描其本地托管生产网络。这是存储所有用户数据的地方。</li></ul></li><li>Windows Server 内部版本评审<ul><li>Windows Server 2022 的黄金构建映像。</li></ul></li><li>Linux 服务器构建审查<ul><li>Ubuntu Server 的黄金构建映像的配置审查。</li><li>OmniCorp 对 Linux 的主要用途是运行 Ceph 进行存储，以支持其为客户存储数据的主要应用程序。</li><li><a href="https://ceph.io/en/">https://ceph.io/en/</a></li></ul></li><li>论坛软件 Web 应用程序评估<ul><li>内部论坛软件解决方案的 Web 应用程序评估。</li><li>仅用于客户支持。</li><li>解决方案后端是用 Java 编写的，具有简单的 jQuery 和 Bootstrap 前端。</li></ul></li><li>API 评估<ul><li>API 审查 API，该 API 支持与移动应用程序之间的通信。</li><li>该 API 用于从本地环境中检索数据，并托管在 AWS 中。</li></ul></li><li>移动应用程序评估<ul><li>该移动应用程序仅适用于 Android，并且是用 Java 编写的。</li><li>它为移动设备上的 API 提供前端。</li></ul></li></ul><p><strong>注意</strong>：对其主网站的 Web 应用程序评估不在本次审查的范围内。</p><h2 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h2><h3 id="论坛应用程序中的不安全反序列化"><a href="#论坛应用程序中的不安全反序列化" class="headerlink" title="论坛应用程序中的不安全反序列化"></a>论坛应用程序中的不安全反序列化</h3><p><strong>观察到什么</strong></p><p>Web 论坛包含一种公开的反序列化方法，可用于反序列化任意对象。这可能会被滥用，以便在主机上获得远程执行。结果是托管论坛软件的内部服务器上出现 bash 提示符。这与生产网络位于同一网络中。</p><p><strong>证据</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/app/Deserialize</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>app.omnicorp.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-java-serialized-object<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>128<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-attribute">ac</span> ed <span class="hljs-number">00</span> <span class="hljs-number">05</span> <span class="hljs-number">73</span> <span class="hljs-number">72</span> <span class="hljs-number">00</span> <span class="hljs-number">12</span> <span class="hljs-number">6</span>a <span class="hljs-number">61</span> <span class="hljs-number">76</span> <span class="hljs-number">61</span> <span class="hljs-number">2</span>e <span class="hljs-number">75</span> <span class="hljs-number">74</span> <span class="hljs-number">69</span> <span class="hljs-number">6</span>c <span class="hljs-number">2</span>e...</span><br><span class="language-apache"></span><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">202</span> Accepted</span><br></code></pre></td></tr></table></figure><p>侦听器设置：</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pf">$ nc -lvp <span class="hljs-number">4444</span><br><br><br>Listener Received Connection:<br>Listening <span class="hljs-keyword">on</span> [<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>] (family <span class="hljs-number">0</span>, <span class="hljs-keyword">port</span> <span class="hljs-number">4444</span>)<br>Connection <span class="hljs-keyword">from</span> [<span class="hljs-number">192.168</span>.<span class="hljs-number">1.10</span>] <span class="hljs-keyword">port</span> <span class="hljs-number">4444</span> [tcp/*] accepted (family <span class="hljs-number">2</span>, sport <span class="hljs-number">51768</span>)<br>bash-<span class="hljs-number">4.2</span>$ <br></code></pre></td></tr></table></figure><h3 id="论坛软件中的-SQL-注入"><a href="#论坛软件中的-SQL-注入" class="headerlink" title="论坛软件中的 SQL 注入"></a>论坛软件中的 SQL 注入</h3><p><strong>观察到什么</strong></p><p>搜索功能容易受到SQL注入的影响，并且可以获取用户哈希值。从经过哈希处理的对应物中恢复了许多密码。论坛的用户似乎在生产应用程序上使用相同的用户名和密码组合。</p><p><strong>证据</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/app/search?q=&#x27;</span> <span class="hljs-keyword">UNION</span> <span class="hljs-string">SELECT</span> username, <span class="hljs-string">password_hash</span> <span class="hljs-keyword">FROM</span> <span class="hljs-string">users</span> -- <span class="hljs-string">HTTP/1.1</span><br><span class="hljs-string">Host:</span> app.omnicorp.com<br><br><span class="language-http"></span><br><span class="language-http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK</span><br><span class="language-http"><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html</span><br><span class="language-http"></span><br><span class="language-http"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Password Hash<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>5f4dcc3b5aa765d61d8327deb882cf99<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>johndoe<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>202cb962ac59075b964b07152d234b70<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http">...</span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span></span><br></code></pre></td></tr></table></figure><h3 id="移动应用程序中不安全的直接对象引用"><a href="#移动应用程序中不安全的直接对象引用" class="headerlink" title="移动应用程序中不安全的直接对象引用"></a>移动应用程序中不安全的直接对象引用</h3><p><strong>观察到什么</strong></p><p>对用户对象的直接引用是不安全实现的，允许未经授权访问其他用户的数据。返回的唯一数据仅限于电子邮件和用户 ID。这可用于针对系统的其他攻击。</p><p><strong>证据</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/user/123/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>mobile.omnicorp.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer [Token]<br><br><span class="language-http"></span><br><span class="language-http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK</span><br><span class="language-http"><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/json</span><br><span class="language-http"></span><br><span class="language-http"><span class="language-perl"></span></span><br><span class="language-perl"><span class="language-http">&#123;<span class="hljs-string">&quot;profile&quot;</span>: &#123;<span class="hljs-string">&quot;userId&quot;</span>: <span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;user123@example.com&quot;</span>&#125;&#125;</span></span><br></code></pre></td></tr></table></figure><h3 id="移动应用程序中的不安全通信"><a href="#移动应用程序中的不安全通信" class="headerlink" title="移动应用程序中的不安全通信"></a>移动应用程序中的不安全通信</h3><p><strong>观察到什么</strong></p><p>通过 HTTP 传输的敏感数据，公开登录凭据和会话令牌等信息。</p><p><strong>证据</strong></p><p>使用Wireshark捕获：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">tshark -i eth0 -Y &#x27;http.request.method == <span class="hljs-string">&quot;<span class="hljs-keyword">POST</span>&quot;</span> and http.request.uri contains <span class="hljs-string">&quot;/api/login&quot;</span>&#x27;<br> <br>  <span class="hljs-number">1</span> <span class="hljs-number">0</span>.<span class="hljs-number">000000000</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span> → <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">10</span> HTTP <span class="hljs-number">150</span> POST /api/login HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> (text/plain)<br>  ...<br>  HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br>  ...<br>  username=user&amp;password=pass123<br></code></pre></td></tr></table></figure><h3 id="Telnet-暴露在-Internet-上"><a href="#Telnet-暴露在-Internet-上" class="headerlink" title="Telnet 暴露在 Internet 上"></a>Telnet 暴露在 Internet 上</h3><p><strong>观察到什么</strong></p><p>Telnet服务无需加密即可通过互联网访问。针对该服务的密码猜测尝试未成功。这些设备似乎是外围防火墙。</p><p><strong>证据</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Trying</span> <span class="hljs-number">203.0.113.5</span>...<br><span class="hljs-attribute">Connected</span> to <span class="hljs-number">203.0.113.5</span>.<br><span class="hljs-attribute">OmniCorp_Telnet_Server</span> v1.<span class="hljs-number">2</span><br><span class="hljs-attribute">login</span>: <br></code></pre></td></tr></table></figure><p><strong>其他受影响的主机</strong></p><ul><li>203.0.113.6</li><li>203.0.113.7</li></ul><h3 id="公开的管理界面"><a href="#公开的管理界面" class="headerlink" title="公开的管理界面"></a>公开的管理界面</h3><p><strong>观察到什么</strong></p><p>可以访问管理界面的未受保护的登录页面。此管理页面用于外围防火墙。</p><p><strong>证据</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/admin-login</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>app.omnicorp.com<br><br><span class="language-http"></span><br><span class="language-http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK</span><br><span class="language-http"><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html</span><br><span class="language-http"></span><br><span class="language-http"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Admin Login<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/admin-login&quot;</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http">    Username: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http">    Password: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Login&quot;</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-http"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></span><br></code></pre></td></tr></table></figure><h3 id="网络设备中的默认凭据"><a href="#网络设备中的默认凭据" class="headerlink" title="网络设备中的默认凭据"></a>网络设备中的默认凭据</h3><p><strong>观察到什么</strong></p><p>可以使用默认凭据访问网络设备。这影响了内部网络上的交换机。连接到交换机的服务器包含生产环境的很大一部分，交换机的功能允许一定程度的流量操作。</p><p><strong>证据</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">$ ssh <span class="hljs-keyword">admin</span>@<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span><br><span class="hljs-keyword">Password</span>: <span class="hljs-keyword">admin</span><br>Welcome <span class="hljs-keyword">to</span> OmniCorpRouter. <span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;help&#x27;</span> <span class="hljs-keyword">for</span> a list <span class="hljs-keyword">of</span> commands.<br><br><br>OmniCorpRouter&gt;<br></code></pre></td></tr></table></figure><p><strong>其他受影响的主机</strong></p><ul><li>192.168.1.105，端口 22</li><li>192.168.1.107，端口 2222</li></ul><h3 id="通过错误消息披露信息"><a href="#通过错误消息披露信息" class="headerlink" title="通过错误消息披露信息"></a>通过错误消息披露信息</h3><p><strong>观察到什么</strong></p><p>详细的错误消息暴露了 Spring 框架的使用。</p><p><strong>证据</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/app/trigger-error</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>app.omnicorp.com<br><br><span class="language-stylus">...</span><br><span class="language-stylus"></span><br><span class="language-stylus">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">500</span> Internal Server Error</span><br><span class="language-stylus">Content-Type: text/<span class="hljs-selector-tag">html</span></span><br><span class="language-stylus"></span><br><span class="language-stylus"></span><br><span class="language-stylus">Exception <span class="hljs-keyword">in</span> thread <span class="hljs-string">&quot;main&quot;</span> java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.NullPointerException</span></span><br><span class="language-stylus">    at com<span class="hljs-selector-class">.omnicorp</span><span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.MainClass</span><span class="hljs-selector-class">.doSomething</span>(MainClass<span class="hljs-selector-class">.java</span>:<span class="hljs-number">45</span>)</span><br><span class="language-stylus">    at com<span class="hljs-selector-class">.omnicorp</span><span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.WebHandler</span><span class="hljs-selector-class">.handleRequest</span>(WebHandler<span class="hljs-selector-class">.java</span>:<span class="hljs-number">58</span>)</span><br><span class="language-stylus">    at org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.servlet</span><span class="hljs-selector-class">.FrameworkServlet</span><span class="hljs-selector-class">.processRequest</span>(FrameworkServlet<span class="hljs-selector-class">.java</span>:<span class="hljs-number">982</span>)</span><br><span class="language-stylus">    at org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.servlet</span><span class="hljs-selector-class">.FrameworkServlet</span><span class="hljs-selector-class">.doGet</span>(FrameworkServlet<span class="hljs-selector-class">.java</span>:<span class="hljs-number">861</span>)</span><br><span class="language-stylus">    at javax<span class="hljs-selector-class">.servlet</span><span class="hljs-selector-class">.http</span><span class="hljs-selector-class">.HttpServlet</span><span class="hljs-selector-class">.service</span>(HttpServlet<span class="hljs-selector-class">.java</span>:<span class="hljs-number">634</span>)</span><br><span class="language-stylus">    at org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.servlet</span><span class="hljs-selector-class">.FrameworkServlet</span><span class="hljs-selector-class">.service</span>(FrameworkServlet<span class="hljs-selector-class">.java</span>:<span class="hljs-number">846</span>)</span><br><span class="language-stylus">    at javax<span class="hljs-selector-class">.servlet</span><span class="hljs-selector-class">.http</span><span class="hljs-selector-class">.HttpServlet</span><span class="hljs-selector-class">.service</span>(HttpServlet<span class="hljs-selector-class">.java</span>:<span class="hljs-number">741</span>)</span><br><span class="language-stylus">    ...</span><br></code></pre></td></tr></table></figure><p><strong>其他受影响的网页</strong></p><ul><li>&#x2F;app&#x2F;enable_flow</li><li>&#x2F;应用&#x2F;disable_flow</li></ul><h1 id="10-影响和背景"><a href="#10-影响和背景" class="headerlink" title="10-影响和背景"></a>10-影响和背景</h1><p>我编写这门课程的主要驱动力之一是教育测试人员了解我们应该给客户带来的上下文影响的重要性。一份好的报告和一份好的报告之间的区别通常取决于评估团队对客户所做的事情和对他们来说重要的程度，然后确保任何重大问题都与这些信息在安全风险方面联系在一起。</p><p>还记得我们曾经报道过与客户进行启动电话会议并提出问题吗？在这次电话会议中获得的信息应反映在调查结果中，当提出调查结果时。这允许以一种超越基本意义上的“为什么问题很糟糕”的方式编写调查结果，并有助于回答“这将对我们的用户、数据、服务或基础设施产生什么影响？”的问题。</p><p>现在，执行摘要很可能触及了这些事情，（它应该这样做），但考虑一份包含数十项调查结果的大型报告。通常没有简单的方法来总结所有问题及其各自的影响。此外，请考虑可能会从报告中删除问题并添加到错误跟踪器中，而不会影响手头的执行摘要中的上下文影响。</p><p>由于这两个原因，调查结果应包含更多关于如果问题被利用可能发生的后果的进一步后果的信息。调查结果应包括攻击者的下一步可能是什么，或者他们现在处于什么位置来追求客户最关心的事情。这样一来，孤立地阅读问题的人就不需要回到执行摘要中的参考后果，因为所有内容都包含在问题中。</p><p>强调这一点的最常见方法是将问题的描述分为两部分：</p><ul><li>影响</li><li>描述</li></ul><p>在此结构中，影响可以包含潜在的攻击和上下文影响。而描述坚持问题所在，并包含更详细的解释。</p><p>如果使用这种方法，则可能会有影响和描述可能有一些重复的措辞。虽然最好避免这种情况，但如果可能的话，为了能够从报告中抽出部分内容并单独理解，一定程度的重复可能是有益的。</p><p>我见过一些供应商使用两个单独的部分来表示影响和描述，虽然很常见，但我想说的是，影响信息总是非常笼统，对更广泛的影响没有太多讨论（稍后会详细介绍）。</p><p>我首选的方法是确保描述的第一段包含客户了解安全问题是什么、为什么不好以及对其更广泛的资产、数据和用户的影响所需的所有内容。我怀疑这种方法并不适合所有人，因为你最终可能会有一些更大的初始段落，但是，我实际上并没有看到这种方法被客户自己推翻。这种方式的好处是，如果你从每个发现中提取第一段，你应该能够让非技术读者充分了解问题是什么和影响（随着发现的技术部分稍后出现，我们将在后面的课程中介绍这个结构）。</p><p>无论上述两种方法如何，或者即使您采用不同的格式来捕获此信息，确保您在报告中捕获了此信息，都会大大提高其价值，因为您可以以大多数测试人员忽略的方式与客户的特定资产和资产交谈。</p><h2 id="影响更广"><a href="#影响更广" class="headerlink" title="影响更广"></a>影响更广</h2><p>当我们查看安全发现的描述时，我们通常会看到以下几点：</p><ul><li>问题是什么？</li><li>为什么不好？</li><li>攻击者可以做什么？</li></ul><p>最后一点通常是笼统的，没有探讨它们在开发后可能造成的进一步后果和损害。正因为如此，它变成了一种更温和的影响，而不是探索攻击者可能产生的更广泛的影响，而攻击者可能处于进一步利用的新位置。我们应该努力在执行摘要中阐明，最好是在调查结果本身中阐明，如果攻击者利用漏洞，对客户来说最糟糕的情况是什么。</p><p>让我们考虑一下 OmniCorp 评估的结果之一。</p><p>以下是对上下文和问题的提醒：</p><p><strong>评估内容</strong></p><blockquote><p>OmniCorp 是一家技术公司，提供多种存储解决方案，可满足多种类型的组织数据需求。其中包括基于文件的存储、医院成像托管和任意数据的常规日志记录存储。正因为如此，OmniCorp 拥有广泛的客户。</p></blockquote><p><strong>AWS 范围</strong></p><blockquote><ul><li>AWS 配置审核（所有账户）<ul><li>OmniCorp 面向公众的所有网站都存储在 AWS 上。</li><li>一些开发人员和其他员工可以在 AWS 中建立基础设施。</li><li>有一条从 AWS 到本地环境的路由，该路由是存储所有数据的地方。</li></ul></li></ul></blockquote><p><strong>结果：可公开访问的 S3 存储桶</strong></p><blockquote><p>在 AWS 配置审查期间为 OmniCorp 发现了一个 S3 存储桶。无需互联网上任何人的身份验证即可访问存储桶。它包含一份关于最近发生的违规行为的机密报告以及所有员工的工资信息。违规报告显示未修补的外部漏洞，这些漏洞将允许攻击者进入网络。</p></blockquote><p><strong>证据</strong></p><blockquote><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure></blockquote><p>以下是我通常看到的格式对这一发现的潜在描述：</p><blockquote><p>发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。</p></blockquote><p>这个描述并不可怕，但可以更好。当测试人员读到这一发现时，我们自然会想到可能发生的最坏情况，并假设报告的读者会分享我们的思维过程。我们不应该假设这一点。相反，我们应该对接下来可能发生的事情提出合理和现实的建议。</p><p>如果我们再次回顾一下 OmniCorp 的背景，我们就会了解他们应该关心保护的关键事项：</p><blockquote><p>OmniCorp 是一家技术公司，提供多种存储解决方案，可满足多种类型的组织数据需求。其中包括基于文件的存储、医院成像托管和任意数据的常规日志记录存储。正因为如此，OmniCorp 拥有广泛的客户。</p></blockquote><p>回顾这个漏洞以及我们从中获得的信息，我们可以利用什么来对客户进行进一步的攻击？</p><ul><li>利用未修补的外部漏洞访问可能存储敏感客户数据的内部网络。</li><li>使用员工信息对外部基础设施执行密码猜测攻击或网络钓鱼攻击，以期进入生产网络。</li></ul><p>让我们在描述中考虑这些背景和其他影响，并触及进一步的风险可能是什么：</p><blockquote><p>发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。利用这些信息，攻击者可以尝试通过利用上述外部漏洞或根据工资单信息的内容对用户进行网络钓鱼和密码猜测攻击来访问互联网。如果攻击者得逞，无论是获得对生产网络的访问权限还是破坏用户的访问权限，内部网络上的敏感客户信息都可能面临泄露的风险。</p></blockquote><p>在这里，我们添加了有关攻击者下一步可能采取的措施的信息，即利用漏洞的结果（在本例中，访问包含有用信息的敏感文件），然后将其联系起来，以显示 OmniCorp 敏感数据可能面临的风险。</p><p>如果没有这些信息，客户有时会说“那又怎样？”，因为他们的心态与黑客不同。这不是他们的错。作为安全专业人员，我们应该运用我们的知识和经验来了解我们可以从单个漏洞中利用什么，以及如何利用它来进一步破坏更多的资产。</p><p>值得注意的是，如果您确实有一些信息（但不足以自信地写作）来表明<strong>可能会</strong>发生某些事情，您有几个选择：</p><ul><li>与客户确认您的理解。</li><li>注意报告中的措辞。</li><li>从报表中删除建议。</li></ul><p>在这里，第一个选项始终是首选，而不是冒着增加描述文本并带有警告或完全删除重要上下文的风险。</p><h2 id="但是我对我的客户一无所知？"><a href="#但是我对我的客户一无所知？" class="headerlink" title="但是我对我的客户一无所知？"></a>但是我对我的客户一无所知？</h2><p>为了让自己能够深入了解攻击者可能采取的潜在攻击路径，您需要了解您的客户。如果您不知道客户除了您正在审查的东西的安全性之外还关心什么，那么您可能无法为他们提供最佳价值。如果是这种情况，您可能无法谈论这些要点。</p><p>这就是为什么与客户进行启动电话会议如此重要的原因，这不仅仅是基本的项目管理步骤，而是要就您正在评估的内容和更广泛的环境进行体面的对话（这里有一个复习）：</p><ul><li>你在审查什么，它有什么作用？</li><li>解决方案处理或有权访问哪些类型的数据？</li><li>解决方案部署在哪里？（例如本地&#x2F;云供应商和区域）</li><li>解决方案由哪些组件组成？（服务、软件、其他）</li><li>有多少用户和哪些类型的用户使用该平台？</li><li>如果您正在查看更广泛系统的一小部分，请向更广泛的系统提出这些问题。</li></ul><p>此问题列表可用于帮助您入门，不应将其视为详尽无遗。你知道的越多，你的问题就会越好，你甚至可以提出可能影响你的客户的问题，如果不先进行这种类型的对话，你就不会想到这些问题。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>在撰写调查结果时，我们应该努力使它们尽可能针对客户。这应该从背景和影响两个方面来完成。由于客户没有知识来了解如果漏洞被利用可能会发生什么坏事，我们应该花时间解释这一点。解释应具体到攻击者可能对我们正在评估的客户端执行的操作。他们能否接触到他们认为敏感或想要保护的东西？他们现在是否能够利用其应用程序、服务或环境的其他部分？调查结果中的这些附加信息极大地提升了它们对客户的价值，并使其更清楚地了解其环境中漏洞的后果。</p><h1 id="11-影响和背景-练习"><a href="#11-影响和背景-练习" class="headerlink" title="11-影响和背景 - 练习"></a>11-影响和背景 - 练习</h1><p>在上一课中，我们介绍了如何通过反思我们对给定客户端的了解来增强潜在影响，从而提高安全发现的质量。</p><p>以下是一些需要考虑的练习（请注意，我们将把 OmniCorp 调查结果的任何影响信息的写作保存到下一课之后）。</p><p><strong>反思练习</strong></p><ul><li>反思您撰写或有权访问的报告。在回顾调查结果时，您认为上下文影响可以改进吗？</li><li>反思最近的一次参与。你是否觉得你对一个客户有足够的了解，以至于你可以扩大调查结果的影响？</li></ul><p><strong>超越练习</strong></p><ul><li>调查最近备受瞩目的安全漏洞。从对公司及其客户的更广泛影响的角度分析违规行为。这怎么能在报告中传达出来？</li></ul><h1 id="12-描述"><a href="#12-描述" class="headerlink" title="12-描述"></a>12-描述</h1><p>这是整个课程中最重要的课程之一。我们将介绍如何掌握报告中安全发现的描述：</p><ul><li>以一种易于记忆的方式</li><li>允许不同的受众解释调查结果</li><li>在某种程度上，该描述可以作为其开头段落中发现的惊人总结</li></ul><p>在所有问题写作领域中，我认为这是在彻底性或质量方面有最大改进空间的地方。</p><p>本课将分为三个主要方面：</p><ul><li>描述的开头段落</li><li>描述的更多细节</li><li>例子</li></ul><p>描述的两个部分都很重要，最好分开解决，以尽可能清楚地说明这两个部分需要什么。</p><h2 id="首段"><a href="#首段" class="headerlink" title="首段"></a>首段</h2><p>给定问题的开头段落对于正确处理很重要。它们是首先要阅读的内容，如果操作正确，读者可以选择是否需要阅读其余的发现细节或转到另一个问题。</p><p>正如我在本课程中所说，有不同的方式来呈现相同的信息，这很好。出于本课程的目的，我将以两种方式介绍描述部分：</p><ul><li>仅限“说明”</li><li>“影响”和“描述”分为各自的部分</li></ul><p>这些是我在报告中看到的发现的初始部分最常见的格式。虽然“影响”可以被认为是与“描述”分开的，但我认为保持它们密切相关很重要，因为它们所包含的信息可以很好地互补。</p><p>首先，让我们研究一下这两种方法的这些初始段落应该是什么样子。</p><h3 id="仅说明部分"><a href="#仅说明部分" class="headerlink" title="仅说明部分"></a>仅说明部分</h3><p>要构建草稿的开头段落，最容易通过回答几个问题来实现。完成后，可以合并和优化答案以创建单个段落。在完成这一段之后，我们可以对调查结果进行更详细的分析，并包括任何证据。</p><p>以下是以下问题：</p><ul><li>结果是什么？</li><li>为什么不好？</li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？根据系统的了解，可能发生的最糟糕的事情是什么？</li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？</li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？</li></ul><p>让我们回顾一下评估上下文中的一个示例，以回答这些问题：</p><p><strong>评估背景</strong></p><p>这些示例问题是在对一家名为 OmniCorp 的组织进行多阶段评估时发现的。OmniCorp 是一家技术公司，提供多种存储解决方案，可满足多种类型的组织数据需求。其中包括基于文件的存储、医院成像托管和任意数据的常规日志记录存储。正因为如此，OmniCorp 拥有广泛的客户。</p><p><strong>评估范围</strong></p><p>以下列表显示了评估的范围，以及有关评估期间或从客户那里了解到的上下文的一些附加信息：</p><ul><li>AWS 配置审核（所有账户）<ul><li>OmniCorp 面向公众的所有网站都存储在 AWS 上。</li><li>一些开发人员和其他员工可以在 AWS 中建立基础设施。</li><li>有一条从 AWS 到本地环境的路由，该路由是存储所有数据的地方。</li></ul></li><li>内部和外部漏洞扫描<ul><li>外部：所有 AWS 资产和 OmniCorp 的 DMZ 都来自其本地托管生产网络。</li><li>内部：扫描其本地托管生产网络。这是存储所有用户数据的地方。</li></ul></li><li>Windows Server 内部版本评审<ul><li>Windows Server 2022 的黄金构建映像。</li></ul></li><li>Linux 服务器构建审查<ul><li>Ubuntu Server 的黄金构建映像的配置审查。</li><li>OmniCorp 对 Linux 的主要用途是运行 Ceph 进行存储，以支持其为客户存储数据的主要应用程序。<ul><li><a href="https://ceph.io/en/">https://ceph.io/en/</a></li></ul></li></ul></li><li>论坛软件 Web 应用程序评估<ul><li>内部论坛软件解决方案的 Web 应用程序评估。</li><li>仅用于客户支持。</li><li>解决方案后端是用 Java 编写的，具有简单的 jQuery 和 Bootstrap 前端。</li></ul></li><li>API 评估<ul><li>API 审查 API，该 API 支持与移动应用程序之间的通信。</li><li>该 API 用于从本地环境中检索数据，并托管在 AWS 中。</li></ul></li><li>移动应用程序评估<ul><li>该移动应用程序仅适用于 Android，并且是用 Java 编写的。</li><li>它为移动设备上的 API 提供前端。</li></ul></li></ul><p>注意：对其主网站的 Web 应用程序评估不在本次审查的范围内。</p><p><strong>发现-</strong> Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</p><p><strong>观察</strong></p><p>对 OmniCorp 网络中的 Windows Server 进行的 Nessus 扫描显示，缺少许多关键的缺失安全补丁，包括修复 MS17-010 的补丁。这表明服务器没有及时更新必要的安全更新。主机是生产环境的域控制器。进一步的测试表明，该服务器可以利用此漏洞。</p><p><strong>证据</strong></p><p>Nessus：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Nessus Scan Report:</span><br><span class="hljs-attr">Host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span><br><span class="hljs-attr">OS:</span> <span class="hljs-string">Windows</span> <span class="hljs-string">Server</span> <span class="hljs-number">2019</span><br><span class="hljs-attr">Vulnerability:</span> <span class="hljs-string">MS17-010</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Critical</span><br><span class="hljs-attr">Description:</span> <span class="hljs-string">Security</span> <span class="hljs-string">Update</span> <span class="hljs-string">for</span> <span class="hljs-string">Microsoft</span> <span class="hljs-string">Windows</span> <span class="hljs-string">SMB</span> <span class="hljs-string">Server</span> <span class="hljs-string">(4013389)</span><br><span class="hljs-attr">Severity:</span> <span class="hljs-string">Critical</span><br></code></pre></td></tr></table></figure><p>Metasploit：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Scanning</span> for vulnerabilities...<br>[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Host</span> is likely <span class="hljs-symbol">VULNERABLE</span> to <span class="hljs-symbol">MS17</span><span class="hljs-number">-010</span>! - <span class="hljs-symbol">Windows</span> <span class="hljs-number">7</span> <span class="hljs-symbol">Professional</span> <span class="hljs-number">7601</span> <span class="hljs-symbol">Service</span> <span class="hljs-symbol">Pack</span> <span class="hljs-number">1</span> (<span class="hljs-number">64</span>-bit)<br>[*] <span class="hljs-symbol">Scanned</span> <span class="hljs-number">1</span> of <span class="hljs-number">1</span> hosts (<span class="hljs-number">100</span><span class="hljs-comment">% complete)</span><br>[*] <span class="hljs-symbol">Auxiliary</span> module execution completed<br></code></pre></td></tr></table></figure><p>根据以上信息，我们来回答一下相关问题：</p><ul><li>结果是什么？<ul><li>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。</li></ul></li><li>为什么不好？<ul><li>如果攻击者利用此发现，他们将控制域控制器。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。这将包括保存客户数据的后端数据存储。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>由于公开可用的工具的可用性，利用此漏洞是微不足道的，但攻击者需要在内部网络上。</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施可以防止攻击者利用此问题。</li></ul></li></ul><p>如果我们把所有的答案合并在一起，稍微整理一下，我们会得到一个不错的第一段：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。利用此发现将导致对服务器的完全控制。由于服务器向环境中的所有主机提供身份验证，因此攻击者可能会破坏整个网络和所有客户数据。内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p></blockquote><p>本段：</p><ul><li>清楚地显示了问题所在</li><li>解释为什么它不好</li><li>解释了此特定漏洞对 OmniCorp 及其数据的应用方式的影响</li><li>记下攻击者利用此问题所必须处于的位置，以及该问题的可利用性</li></ul><p>鉴于该段落概括了所有这些要点，因此它为那些没有技术背景的人提供了清晰度，并提供了足够的细节，可以作为工程师或开发人员的介绍性概述。这一段给出了对问题的全面理解——单独阅读这种风格的段落就足以理解整个问题。</p><p>接下来，让我们介绍一下当我们有“影响”和“描述”部分时如何解决所有这些问题。</p><h3 id="“影响”和“描述”部分"><a href="#“影响”和“描述”部分" class="headerlink" title="“影响”和“描述”部分"></a>“影响”和“描述”部分</h3><p>如前所述，某些格式的报告有自己的影响部分，而不仅仅是使用描述（尽管有些报告甚至不考虑影响）。值得庆幸的是，大部分艰苦的工作已经在上一节中完成，这主要是回顾一下。</p><p>在回答问题方面，同样的方法也可以在这里应用。与其他报告中可能看到的不同之处在于，“影响”部分看起来相当大。这是因为我建议在本节中包括更广泛的影响之外，将更多关于调查结果的信息放在上面。这是为了使本节变得“可移植”，并以与“描述”部分的上一段相同的方式单独理解。</p><p>在许多报告中，我看到了一个很小的“影响”部分——通常是一个断章取义的句子。这总是放在发现的开头，这本身意义不大，因为尚未提供发现的背景。从可读性的角度来看，这随后使问题的流程变得更糟。</p><p>让我们以这种格式考虑前面的示例：</p><blockquote><p><strong>严重 - 由于多个缺失修补程序（包括严重 MS17-010）导致的 Windows Server 漏洞</strong></p><p><strong>影响</strong></p><p>利用受影响主机上的 MS17-010 漏洞的攻击者将能够破坏底层主机，从而获得系统级权限和对系统的完全控制。</p></blockquote><p>这个初始部分有几个缺点：</p><ul><li>它没有涵盖缺失补丁的更广泛点</li><li>没有提到现在攻击者处于这个位置可能发生的更广泛的影响</li></ul><p>我们克服这些缺点的方法是将影响作为调查结果的引言，这意味着它应该包括更多关于调查结果的信息，然后讨论如果这个问题被利用的更广泛的后果。</p><p>让我们看一下构建“影响”部分和“描述”的新开头段落的方法。请注意，在这种格式中，“影响”应该是一个段落（因为调查结果的任何其他细节都将在“描述”部分中。</p><p>以下是每个部分的问题：</p><p><strong>影响</strong></p><ul><li>结果是什么？</li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？根据系统的了解，可能发生的最糟糕的事情是什么？</li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？</li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？</li></ul><p><strong>描述</strong></p><ul><li>结果是什么？</li><li>为什么不好？</li></ul><p>以下是这些部分中先前回答的问题：</p><p><strong>影响</strong></p><ul><li>结果是什么？<ul><li>OmniCorp 网络上的 Windows 域控制器容易受到严重且可利用的 MS17-010 安全漏洞的攻击。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。这将包括保存客户数据的后端数据存储。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>由于公开可用的工具的可用性，利用此漏洞是微不足道的，但攻击者需要在内部网络上。</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施。</li></ul></li></ul><p><strong>描述</strong></p><ul><li>结果是什么？<ul><li>OmniCorp 网络上的 Windows 域控制器容易受到严重且可利用的 MS17-010 安全漏洞的攻击。</li></ul></li><li>为什么不好？<ul><li>如果攻击者利用此发现，他们将控制域控制器。</li></ul></li></ul><p>以下是这两个部分分开编写后的样子：</p><blockquote><p><strong>影响</strong></p><p>如果攻击者利用主机缺乏修补并利用 MS17-010 漏洞，他们将能够破坏服务器和整个域。鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用此域控制器，攻击者将能够访问环境中的所有主机。这可能包括保存敏感客户数据的后端数据存储。虽然攻击者需要在内部网络上才能利用此漏洞，但由于公开可用的工具，利用此漏洞是多么微不足道，不应低估。</p><p><strong>描述</strong></p><p>环境中的 Windows 域控制器有许多缺失的修补程序，其中许多与严重漏洞有关。其中最糟糕的是 EternalBlue 漏洞：MS17-010。利用此漏洞的攻击者将能够以 SYSTEM 级权限获得对服务器的完全访问权限。</p><p>…</p></blockquote><p>有几个关键的区别需要解决。</p><p>虽然我在“影响”中提到了“为什么不好”，但它并没有被直接指出。这略微缩短了原来的“描述”部分。除了这个小的区别之外，它基本上是相同的，只是我们直接讨论如果攻击者利用该漏洞会发生什么。</p><p>“描述”部分现在的规模显然要小得多，因为之前涵盖的大部分内容都在“影响部分”中。在这里，我们说明问题是什么以及为什么它不好，并提供更多技术信息（谈论系统级权限）。</p><p>正如你所看到的，这里有一点重复。如果你愿意，你可以努力避免这种重复，但是如前所述，如果你这样做，从上到下阅读时，结果可能不会那么流畅。</p><p>是否要将问题分解为单独的部分取决于您。在本课程的其余部分，我将只关注“描述”部分，因为这是我的偏好。</p><h2 id="发现说明的其余部分"><a href="#发现说明的其余部分" class="headerlink" title="发现说明的其余部分"></a>发现说明的其余部分</h2><p>一旦写完了最初的段落，就需要完成其余的调查结果。通过一个小清单，可以以类似的方式处理本节。由于某些类型的发现需要不同数量的解释或证据，或者需要以不同的方式呈现内容，因此这里的差异越来越大。</p><p>以下是发现描述的良好结构（使用描述方法中的单个段落）：</p><ul><li>查找说明（前面介绍过）</li><li>如果<ul><li>仅从开头的段落来看，问题并不明显</li><li>查找需要详细演练查找的工作原理</li><li>发现是多个问题的组合，需要全部指出</li></ul></li><li>引入证据</li><li>插入证据</li><li>解释证据</li></ul><p>您需要使用自己的判断来决定是否需要进一步的解释。然而，思考这个问题的一个好方法是把自己放在客户的位置上——他们是否足够了解问题，仅凭最初的描述和证据来重现和修复？如果没有，您应该考虑提供更多详细信息。</p><p>在某些情况下，从证据开始，然后进行进一步的解释是有意义的。我们将在本课后面的示例中看到这种情况。</p><p>为发现捕获证据的方式也很重要——我们将在几节课中介绍这一点。这里要强调的主要内容是记住引入证据，以便客户知道我们在说什么，然后在需要时充分解释。我们不能假设一个孤立的代码片段或屏幕截图会在没有对某些客户端的解释的情况下被理解。</p><p>对于我们一直在研究的示例，上述方法如下所示（跳过开头的段落）：</p><blockquote><p>MS17-010 漏洞会影响 Windows Server 消息块协议（1.0 版），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。但是，由于这会影响 Windows 域控制器，因此可以访问所有用户的所有凭据材料（以哈希或加密格式）。</p><p>由于这是整个环境的域控制器，并且是环境中通过 LDAP 提供身份验证的主要服务，因此入侵将影响生产域中所有连接的服务器和服务。</p></blockquote><p>“描述”部分的后续段落将详细介绍漏洞的背景，并提供更多技术背景，说明为什么破坏此主机会导致整个环境的破坏。此外，Nessus 的扫描结果与 Metasploit 的证据一起提供，以显示测试结果，以查看服务是否可能易受攻击。</p><p>这样就完成了问题的描述部分，显示了足够的证据来支持提出这个问题，并为客户提供了足够的信息来调查调查结果。</p><h2 id="更多示例"><a href="#更多示例" class="headerlink" title="更多示例"></a>更多示例</h2><p>为了结束本课，我将介绍 OmniCorp 的其余示例结果并构建描述。我还将回答前面提到的问题，以展示将重要的第一段再做几次的方法。</p><p>我将包括对这些问题的一些反思，其中包括对描述部分中提供的更多信息的一些评论（如果需要）。</p><h3 id="Linux-服务器上的弱密码策略"><a href="#Linux-服务器上的弱密码策略" class="headerlink" title="Linux 服务器上的弱密码策略"></a>Linux 服务器上的弱密码策略</h3><p><strong>观察</strong></p><p>使用 SSH 登录 OmniCorp 网络中的 Linux 服务器的尝试成功，使用非常基本的密码“password”。这表示服务器上的密码策略较弱，可能会影响多个帐户。根据一些额外的分析和与客户端的通信，主机似乎没有处于活动状态，也不包含任何敏感数据。未找到具有此用户名和密码组合的其他主机。服务器本身运行的是 Ubuntu 22.04。</p><p><strong>证据</strong></p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vbscript">$ ssh john@example-<span class="hljs-built_in">server</span>.com<br>john@example-<span class="hljs-built_in">server</span>.com<span class="hljs-comment">&#x27;s password: password</span><br>Welcome <span class="hljs-keyword">to</span> example-<span class="hljs-built_in">server</span>.com!<br>Last login: Sun Jan <span class="hljs-number">29</span> <span class="hljs-number">09</span>:<span class="hljs-number">00</span>:<span class="hljs-number">01</span> <span class="hljs-number">2024</span> from <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><p><strong>第一段问题</strong></p><ul><li>结果是什么？<ul><li>环境中的 Linux 服务器配置了可猜测用户名的弱密码。</li></ul></li><li>为什么不好？<ul><li>攻击者可能会在针对服务器的密码猜测攻击中猜测用户名和密码组合。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？根据系统的了解，可能发生的最糟糕的事情是什么？<ul><li>对环境的影响有限，因为与客户的讨论表明主机未使用。环境中没有其他主机受到相同的弱用户名和密码组合的影响。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>内部网络上的攻击者将能够快速猜出此用户名和密码组合</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施。</li></ul></li></ul><blockquote><p><strong>描述</strong></p><p>环境中 Linux 服务器上的帐户配置了通用用户名和密码组合。内部网络上的攻击者可能会使用基本的用户名和密码猜测攻击来获得访问权限。虽然受影响的用户是管理员，这将导致主机完全受损，但主机未被使用，并且不包含对攻击者有用的数据或凭据材料。环境中没有其他主机受此问题的影响。</p><p>成功登录受影响的 Linux 服务器如下所示：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">$ ssh admin@<span class="hljs-number">192.168.1.122</span>.com<br>admin@<span class="hljs-number">192.168.1.122</span>.com&#x27;s password: password<br>Welcome to <span class="hljs-number">192.168.1.122</span>.com!<br>Last login: Sun Jan <span class="hljs-number">29 09:00:01</span> <span class="hljs-number">2024</span> from <span class="hljs-number">192.168.1.122</span><br>admin@<span class="hljs-number">192.168.1.122</span>:~$<br></code></pre></td></tr></table></figure></blockquote><p>这是能够在内部网络上成功猜测用户密码的一个非常基本的问题。用户名是通用的，这显然很糟糕，但是与此密码的组合使其特别成问题。幸运的是，在此示例中，影响很小，因为主机未以任何方式连接到更广泛的解决方案，并且未被主动使用。</p><p>我觉得我不需要为这个问题提供任何额外的评论。因此，我跳过了进一步的细节，直接进入了这个问题的证据。</p><h3 id="可公开访问的-S3-存储桶"><a href="#可公开访问的-S3-存储桶" class="headerlink" title="可公开访问的 S3 存储桶"></a>可公开访问的 S3 存储桶</h3><p><strong>观测</strong></p><p>在 AWS 配置审查期间为 OmniCorp 发现了一个 S3 存储桶。无需互联网上任何人的身份验证即可访问存储桶。它包含一份关于最近发生的违规行为的机密报告以及所有员工的工资信息。违规报告显示未修补的外部漏洞，这些漏洞将允许攻击者进入网络。</p><p><strong>证据</strong></p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p><strong>第一段问题</strong></p><ul><li>结果是什么？<ul><li>发现了一个可公开访问的 S3 存储桶。</li></ul></li><li>为什么不好？<ul><li>Internet 上的任何用户都可以访问存储在存储桶中的文件。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>该存储桶包含有关最近渗透测试报告的信息，该报告详细介绍了未修补的外部漏洞。</li><li>存储桶还包含一个文件，其中列出了员工及其工资单数据。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>如果攻击者能够猜到存储桶的名称，则很容易利用此问题</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施。</li></ul></li></ul><blockquote><p><strong>描述</strong></p><p>发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。利用这些信息，攻击者可以尝试通过利用上述外部漏洞或根据工资单信息的内容对用户进行网络钓鱼和密码猜测攻击来访问互联网。如果攻击者得逞，无论是获得对生产网络的访问权限还是破坏用户的访问权限，内部网络上的敏感客户信息都可能面临泄露的风险。</p><p>aws 命令行工具的以下命令输出显示了存储在存储桶中的文件。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p>这两个文件都可以下载和检查：<br><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231945248.png" alt="img"></p><p>confidential_report.pdf内容</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231945989.png" alt="img"></p><p>employee_data.xlsx内容</p><p>机密报告包含以下可外部利用的漏洞列表，所有这些漏洞都在此评估期间存在：</p><ul><li>使用可猜测凭据向 Internet 公开的 RDP</li><li>使用匿名绑定向 Internet 公开的 LDAP</li><li>暴露的 Apache Tomcat 过时且易受攻击</li></ul><p>获取此文档访问权限的攻击者将能够立即确认这些问题的可利用性，因为它们都是面向 Internet 的，并且可能能够透视到内部网络。</p><p>工资单电子表格不仅显示了所有员工的当前工资和奖金，而且还泄露了大量可用于欺诈目的的信息，以及对 OmniCorp 进行其他攻击（例如密码猜测攻击或网络钓鱼）。电子表格中包含以下敏感信息：</p><ul><li>名字和姓氏</li><li>工资</li><li>家庭住址</li><li>个人电子邮件地址</li><li>个人电话号码</li></ul></blockquote><p>描述中的影响非常强烈，因此我觉得这不需要在其余的发现中详细说明。但是，我确实觉得有必要扩展文件的某些内容，并将其与所涵盖的影响联系起来。</p><p>我也在这里更改了顺序。我觉得先展示证据并解释其中的内容更合适，而不是相反。这表明在结构方面灵活处理剩余的发现细节是多么好。虽然有一个精心设计的开场白是必不可少的，但其余部分应该以任何最好的方式来讲述发现的故事。</p><h3 id="API-端点返回用户数据，无需身份验证"><a href="#API-端点返回用户数据，无需身份验证" class="headerlink" title="API 端点返回用户数据，无需身份验证"></a>API 端点返回用户数据，无需身份验证</h3><p><strong>观测</strong></p><p>尝试访问 API 端点 <a href="http://api.example.com/v1/userdata">http://api.example.com/v1/userdata</a> 成功，而无需任何形式的身份验证。这是在看到对 <a href="http://api.example.com/v1/userdata/2">http://api.example.com/v1/userdata/2</a> 的调用后尝试的，该调用返回了当前用户自己的数据以显示在配置文件部分中。这种未经身份验证的访问导致检索所有用户数据，表明对 API 的安全控制不足。其他 API 端点未受到影响。此终结点已向 Internet 公开。</p><p><strong>证据</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ curl -i http://api.example.com/v1/userdata<br>HTTP/1.1 200 OK<br>Content-Type: application/json<br>Content-Length: 150<br>&#123;<span class="hljs-string">&quot;users&quot;</span>: [&#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>&#125;, &#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jane Smith&quot;</span>&#125;]&#125;<br></code></pre></td></tr></table></figure><p><strong>第一段问题</strong></p><ul><li>结果是什么？<ul><li>无需任何用户身份验证即可访问 API 端点，该端点返回有关平台上所有用户的信息。</li></ul></li><li>为什么不好？<ul><li>知道 API 端点的攻击者可以访问所有用户数据。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>攻击者可以使用此数据执行其他攻击，例如网络钓鱼或密码猜测。</li><li>知道什么 ID 对应于哪些用户可用于针对系统的其他攻击。</li><li>获取用户帐户的访问权限将使攻击者能够访问其数据。</li><li>这些信息的泄露可能是违反GDPR。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>以应用程序为目标的攻击者很容易利用该漏洞。通过查看从移动客户端到 API 服务器的流量，可以发现端点，并且可以从 Internet 上利用。</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施。</li></ul></li></ul><blockquote><p><strong>描述</strong></p><p>发现了一个 API 端点，该端点返回了平台上所有用户的数据，并且无需身份验证即可访问。如果攻击者发现端点，则返回的数据将能够用于目标平台用户。这可能以密码猜测攻击、网络钓鱼或在其他 API 调用中利用其用户 ID 的形式出现。这些攻击不仅可能导致访问用户的敏感信息，而且这些信息的泄露可能会构成具有GDPR影响的隐私泄露。任何以经过身份验证的用户身份检查流量的攻击者都可能发现此漏洞，这意味着它更有可能被系统用户发现，而不是被外部攻击者随机发现。</p><p>在评估期间，观察到以下 API 调用，该调用检索到的信息随后将放置在用户的个人资料页面上：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/user/profile/1</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>根据 REST 命名方案的构造方式，不带标识符后缀的 URL 通常会返回与对象类型（在本例中为配置文件）关联的所有对象。如下图所示，这返回了所有用户的数据：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">json</span><br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: &quot;1&quot;, &quot;name&quot;: &quot;John REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&quot;&#125;, &#123;&quot;id&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Jane REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&#125;]&#125;<br></code></pre></td></tr></table></figure><p>虽然这本身就是一个重大问题，但执行了另一项检查，以查看终结点是否无需身份验证即可使用。这是通过删除请求中发送的 API 令牌来实现的，并且仍然返回来自服务器的响应，表明不需要身份验证：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;, &#123;&quot;id&quot;: <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jane REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;]&#125;<br></code></pre></td></tr></table></figure></blockquote><p>在这里，我强调了这个问题如何导致多种攻击途径，从而导致用户数据泄露。除此之外，我还提出了对隐私风险的担忧，因为它返回了用户的 PII（名字、姓氏和电子邮件）。</p><p>这个问题本身并不太复杂，无法解释，但我确实觉得讲述它是如何被发现的故事很重要，这样客户就可以理解攻击者的思维过程，并在需要时复制它。</p><p>我还指出，以一种迂回的方式，它未经身份验证的事实并不是这里的主要关注点，更多的是关于端点返回的数据。</p><h3 id="在论坛软件上存储跨站点脚本"><a href="#在论坛软件上存储跨站点脚本" class="headerlink" title="在论坛软件上存储跨站点脚本"></a>在论坛软件上存储跨站点脚本</h3><p><strong>观察</strong></p><p>在 OmniCorp 用于客户支持的论坛软件中，可以在评论字段中注入任意 JavaScript，每当用户访问受影响的页面时都会执行该字段。这表明该网站容易受到存储的跨站点脚本的影响。会话令牌可通过 JavaScript 有效负载获得。客户告知，该论坛确实安装了 Web 应用程序防火墙，但当前未运行。</p><p><strong>证据</strong></p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mel">POST /forum/post/comment HTTP/<span class="hljs-number">1.1</span><br>Host: forum.example.com<br>...<br>comment=%3Cscript%3Ealert(<span class="hljs-string">&#x27;XSS&#x27;</span>)%3C%2Fscript%3E<br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>...<br>&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">comment</span>&quot;&gt;<span class="hljs-symbol">User</span> <span class="hljs-symbol">posted: </span>&lt;<span class="hljs-symbol">script</span>&gt;<span class="hljs-symbol">alert</span>(&#x27;<span class="hljs-symbol">XSS</span>&#x27;)&lt;/<span class="hljs-symbol">script</span>&gt;&lt;/<span class="hljs-symbol">div</span>&gt;<br></code></pre></td></tr></table></figure><p><strong>第一段问题</strong></p><ul><li>结果是什么？<ul><li>OmniCorp 使用的论坛容易受到存储的跨站点脚本的影响。</li></ul></li><li>为什么不好？<ul><li>任意 JavaScript 可以在任何用户的浏览器中运行。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>攻击者可以注入类似于论坛登录页面或 OmniCorp 应用程序登录页面的 JavaScript，以窃取客户凭据。</li><li>攻击者可能试图通过窃取用户的身份验证令牌来劫持用户的会话。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>似乎没有防御性编码，这意味着新手攻击者很容易利用它。由于论坛允许自行注册，因此任何基于 Internet 的攻击者都可能尝试利用此问题。</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有采取任何缓解措施，但是，客户端建议正在使用 Web 应用程序防火墙，但当前已禁用。</li></ul></li></ul><blockquote><p><strong>描述</strong></p><p>OmniCorp 用于协助客户支持请求的论坛软件容易受到存储的跨站点脚本的影响。此漏洞影响了论坛帖子页面上的评论部分，任何恶意注入的代码都会对访问受影响页面的任何用户运行。攻击者可以利用此漏洞破坏用户论坛会话（包括论坛版主或管理员），甚至提供虚假的登录表单，试图窃取用户的生产凭据。如果获取了用户凭据，则可能导致攻击者获得对敏感用户数据的访问权限。此漏洞的攻击复杂度非常低，因为没有防御性编码，使攻击者更容易利用;唯一的要求是用户访问受影响的论坛帖子。虽然只有该平台的用户可以利用这个问题，但鉴于互联网上的任何人都可以自行注册和使用该平台，这是没有意义的。虽然在托管论坛的 Web 服务器上安装了 Web 应用程序防火墙，但它当前并未运行。但是，即使启用了此问题，它也可能无法阻止所有利用此问题的尝试。</p><p>存储的跨站点脚本是一种漏洞，Web 应用程序未对不受信任的输入执行足够的输入验证或清理，或者未对值执行足够的输出编码。其结果是，应用程序（在数据库、日志或其他系统中）提交并随后存储的恶意信息随后被反映并合并到生成的网页中。在跨站点脚本的情况下，JavaScript 被发送到服务器、存储并返回到用户的浏览器，并执行以执行各种恶意操作。</p><p>利用跨站点脚本漏洞存在一系列可能性，其中一些包括：</p><ul><li>在浏览器会话中运行加密矿工</li><li>尝试窃取经过身份验证的页面上特定于用户的会话令牌或内容</li><li>注入虚假表格供用户填写，以试图窃取信息（例如，用于收集凭据的登录表格）</li><li>在用户不知情的情况下在用户上下文中执行操作（例如，将恶意内容发布到论坛）</li><li>显示恶意内容</li></ul><p>鉴于利用此漏洞的方式多种多样，此问题会严重影响任何处理敏感数据的应用程序，因为它更有可能被盗、修改或删除。</p><p>以下 HTTP 请求和响应显示了 OmniCorp 论坛应用程序软件接受的基本 JavaScript 的注入。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/1/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-attribute">postId</span>=<span class="hljs-number">42</span>&amp;comment=%<span class="hljs-number">3</span>Cscript%<span class="hljs-number">3</span>Ealert(&#x27;XSS&#x27;)%<span class="hljs-number">3</span>C%<span class="hljs-number">2</span>Fscript%<span class="hljs-number">3</span>E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br></code></pre></td></tr></table></figure><p>以下 HTTP 请求和响应显示服务器作为可在用户浏览器会话中运行的可执行 JavaScript 返回的有效负载。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/forum/post/1/comments</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;XSS&#x27;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>下图显示了正在执行的有效负载：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231945055.png" alt="img"></p><p>正在执行的 Omnicorp 存储的跨站点脚本</p><p>创建概念验证 JavaScript 有效负载以生成以下 OmniCorp 登录表单。这将显示在请求的论坛帖子的顶部，以提示输入用户的凭据。提交后，用户的凭据将被发送到攻击者控制的服务器，然后帖子将变得可见。</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231945398.png" alt="img"></p><p>假 OmniCorp 登录屏幕</p><p>可以在附录第 5.2 节中找到虚假登录概念证明 HTML 和 JavaScript 有效负载的完整副本，以及使用的 HTTP 请求和响应。</p></blockquote><p>这个问题有点技术性，需要一些进一步的解释，因为需要修复它的人可能不清楚此问题发生的原因。因此，对于这个问题，我试图使开头的段落尽可能易于理解，以了解发生的事情和随后可能发生的事情。</p><p>在围绕存储的跨站点脚本如何工作的理论进行了更多解释，并展示了一些如何利用它的示例之后，我展示了如何将有效负载发送到服务器的 HTTP 请求和响应证据。然后，显示它如何被利用的证据以及生成的屏幕截图。</p><p>最后，我展示了一个对客户来说比简单的警报框更有意义的内容的屏幕截图。这应该有助于使总体问题及其如果被利用的潜在影响变得严肃起来。考虑到在显示如何完成此操作时将涉及多少 HTML 和其他 HTTP 请求和响应，我决定将其放在报告的附录部分。</p><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><p>我们已经完成了构建发现的开始的过程，要么是“描述”部分的第一段，要么是“影响”和“描述”的第一段。采用本课中概述的方法应该可以帮助您为发现生成一个信息量大且清晰（且便携）的开场白。</p><p>使用这些可重复的过程，您应该能够轻松地制作问题草案，首先是回答问题和合并答案，然后确保您的问题包含证据和进一步的细节。</p><h1 id="13-描述-练习"><a href="#13-描述-练习" class="headerlink" title="13-描述 - 练习"></a>13-描述 - 练习</h1><p>在上一课中，我们介绍了创建发现描述或具有单独影响和描述部分的发现的理想方法。</p><p>让我们将您学到的知识付诸实践：</p><p><strong>反思练习</strong></p><ul><li>反思您最近撰写或有权访问的报告。查看问题描述的开头段落。他们是否清楚地定义了问题、其影响以及为什么它是坏的？如何改进这些段落，使不同的读者能够理解？</li><li>想想你最近从事或阅读过的安全发现。反思调查结果的影响和描述的传达情况。非技术读者能否理解其严重性和影响？您如何重新表述描述以迎合技术和非技术受众？</li></ul><p><strong>一般练习</strong></p><ul><li>浏览 OmniCorp 章节的示例发现，并编写每个问题的发现说明。<ul><li>使用单个“描述”部分或“影响”和“描述”</li><li>按照概述的过程并记录问题的答案，然后再将它们合并为初始段落</li><li>请记住将适当的写作风格应用于文本</li><li>确保您尽可能简洁明了</li></ul></li></ul><p><strong>超越练习</strong></p><p>重写您的结果描述，以使用您以前未使用过的任何演示文稿（如果您只做了“描述”部分，则为“影响”和“描述”，如果您只做了“描述”部分，则为“描述”）</p><h1 id="14-描述-其他上下文"><a href="#14-描述-其他上下文" class="headerlink" title="14-描述 - 其他上下文"></a>14-描述 - 其他上下文</h1><p>我已经谈过几次确保可以孤立地阅读调查结果的重要性，这里的课程与这个主题有关。我们讨论的不是严格的必要性，而是更像是一种边缘情况。</p><p>假设您正在执行一项大规模评估，其中包含类似工作的多个阶段（例如多个 Web 应用程序、服务器构建和 Active Directory 环境）。评估结果将被捕获在问题跟踪系统中，并由您的客户和潜在的第三方进行审查。在这些情况下，如果发现是以通用方式编写的，则团队很难将发现与特定区域联系起来。在这种情况下，在调查结果描述的主要部分之前提供一些初步信息可以提供有用的上下文。如果您已经从以前的课程中采纳了建议，则这种情况不太可能发生，但是在必须清楚地了解问题的影响或所属位置的情况下，确保这反映在您的文档中是值得的。</p><p>一个简单的解决方案是用一个简短的句子开始发现，以陈述所评估的主题并提及其功能。当不熟悉所评估内容的人可能会阅读该发现时，这非常有用，或者如果您稍后回来并忘记了您过去审查的内容，甚至您自己也会阅读。</p><p>结合这个简单的句子可以大大减少对后续解释（通过电话或电子邮件）的需要，以澄清调查结果，并且我个人为我节省了无数时间，用于我承担的一些大型项目的电话。此外，如果这些发现将上传到问题跟踪器并单独审查，则此介绍性上下文可能非常有用，因为报告的更广泛上下文可能无法立即获得，或者可能不清楚调查结果的影响位置或影响。</p><p>这种方法将导致您的调查结果高度重复，在同一评估区域的调查结果中出现相似或相同的句子。我只建议使用这种方法，因为它可能使客户受益，节省您将来的时间，或者如果发现将在问题跟踪器上以孤立的方式进行审查。</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>让我们使用前面编写的描述来浏览一些示例。</p><h3 id="Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致"><a href="#Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致" class="headerlink" title="Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致"></a>Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</h3><p>下面是先前发现描述的示例，其中添加了此句子。</p><blockquote><p><strong>OmniCorp 的生产环境利用 Windows 域为环境中的所有 Windows 和 Linux 主机提供身份验证机制。</strong> 由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。利用此发现将导致对服务器的完全控制。由于服务器向环境中的所有主机提供身份验证，因此攻击者可能会破坏整个网络和所有客户数据。内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p></blockquote><p>在这里，我添加了一句话，以告知读者我们审查的“事物”是什么以及它的作用，然后再详细介绍什么是易受攻击的。</p><p>让我们看看其他问题的其他例子。</p><h3 id="可公开访问的-S3-存储桶-1"><a href="#可公开访问的-S3-存储桶-1" class="headerlink" title="可公开访问的 S3 存储桶"></a>可公开访问的 S3 存储桶</h3><p>在此示例中，在进入调查结果之前，我们概述了 AWS 的主要用途。</p><blockquote><p><strong>OmniCorp 使用 Amazon 的 AWS 来托管其公共 Web 应用程序，但也为普通员工和开发团队提供了一些临时用途。</strong> 发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。利用这些信息，攻击者可以尝试通过利用上述外部漏洞或根据工资单信息的内容对用户进行网络钓鱼和密码猜测攻击来访问互联网。如果攻击者得逞，无论是获得对生产网络的访问权限还是破坏用户的访问权限，内部网络上的敏感客户信息都可能面临泄露的风险。</p></blockquote><h3 id="Linux-服务器上的弱密码策略-1"><a href="#Linux-服务器上的弱密码策略-1" class="headerlink" title="Linux 服务器上的弱密码策略"></a>Linux 服务器上的弱密码策略</h3><p>Linux 服务器在环境中的主要用途是运行其 Ceph 存储集群，所以我提到了这一点。但是，当您通读发现时，这样的添加在这里感觉有点没有意义。通常与一般基础设施（或涵盖各种服务或产品的一般领域）相关的调查结果不会从本序言中获益太多，因此在这种情况下，最好将其排除在外。</p><blockquote><p><strong>OmniCorp 在整个环境中利用 Linux 服务器作为其主要用例来运行其生产应用程序的存储层。</strong> 环境中 Linux 服务器上的帐户配置了用户名和密码组合。内部网络上的攻击者可能会使用基本的用户名和密码猜测攻击来获得访问权限。虽然受影响的用户是管理员，这将导致主机完全受损，但主机未被使用，并且不包含对攻击者有用的数据或凭据材料。环境中没有其他主机受此问题的影响。</p></blockquote><h3 id="API-终端节点返回所有用户数据"><a href="#API-终端节点返回所有用户数据" class="headerlink" title="API 终端节点返回所有用户数据"></a>API 终端节点返回所有用户数据</h3><p>在此示例中，我提到了 API 在评估范围内。这为API的主要用例提供了一些额外的见解。在这些情况下，提及产品名称（如果有）可能会有所帮助，或者如果发现仅影响几个问题中的一个</p><blockquote><p><strong>OmniCorp 使用 API 为用户提供从其移动应用程序读取和写入数据的功能。</strong> 发现了一个 API 端点，该端点返回了平台上所有用户的数据，并且无需身份验证即可访问。如果攻击者发现端点，返回的数据将能够用于目标平台用户。这可能以密码猜测攻击、网络钓鱼或在其他 API 调用中利用其用户 ID 的形式出现。这些攻击不仅可能导致访问用户的敏感信息，而且这些信息的泄露可能会构成具有GDPR影响的隐私泄露。任何以经过身份验证的用户身份检查流量的攻击者都可能发现此漏洞，这意味着它更有可能被系统用户发现，而不是被外部攻击者随机发现。</p></blockquote><h3 id="在论坛软件上存储跨站点脚本-1"><a href="#在论坛软件上存储跨站点脚本-1" class="headerlink" title="在论坛软件上存储跨站点脚本"></a>在论坛软件上存储跨站点脚本</h3><p>本期已经有大量信息涵盖了受影响的内容。这里的主要变化是提到论坛软件是内部构建的。</p><blockquote><p>OmniCorp 用于协助客户支持请求的<strong>内部构建</strong>论坛软件容易受到存储的跨站点脚本的影响。此漏洞影响了论坛帖子页面上的评论部分，任何恶意注入的代码都会对访问受影响页面的任何用户运行。攻击者可以利用此漏洞破坏用户论坛会话（包括论坛版主或管理员），甚至提供虚假的登录表单，试图窃取用户的生产凭据。如果获取了用户凭据，则可能导致攻击者获得对敏感用户数据的访问权限。此漏洞的攻击复杂度非常低，因为没有防御性编码，使攻击者更容易利用;唯一的要求是用户访问受影响的论坛帖子。虽然只有该平台的用户可以利用这个问题，但鉴于互联网上的任何人都可以自行注册和使用该平台，这是没有意义的。虽然在托管论坛的 Web 服务器上安装了 Web 应用程序防火墙，但它当前并未运行。但是，即使启用了此问题，它也可能无法阻止所有利用此问题的尝试。</p></blockquote><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这个快速课程中，我们介绍了必须在调查结果中提供额外信息的利基用例。我不认为这对许多人非常有用，但对于那些属于执行大型评估的团队的人来说，请考虑一下是否包含这些附加信息可以减少通话时间和其他进一步的澄清。</p><h1 id="15-描述-其他上下文-练习"><a href="#15-描述-其他上下文-练习" class="headerlink" title="15-描述 - 其他上下文 - 练习"></a>15-描述 - 其他上下文 - 练习</h1><p>在上一课中，我们介绍了一个用例，在问题描述中加入一些前导文本可以帮助设置问题影响的区域。</p><p>让我们通过一些快速练习来尝试这个额外的问题演示。</p><p><strong>反思练习</strong></p><ul><li>反思您撰写或有权访问的报告。查看调查结果，看看如果单独阅读，它们是否会被误解或不清楚。介绍性句子如何提高清晰度？</li><li>您能想到任何时候，在问题上提供更清晰的信息可能会导致与客户的后续互动减少吗？如果是这样，可以做些什么？</li></ul><p><strong>一般练习</strong></p><ul><li>对于您之前编写的每个 OmniCorp 章节练习查找说明，请在开头添加一个额外的句子以使其更加清晰。<ul><li>完成此操作后，请记住查看整个描述，以确保限制重复并最大限度地简洁。</li></ul></li></ul><h1 id="16-使描述开场白更简洁"><a href="#16-使描述开场白更简洁" class="headerlink" title="16-使描述开场白更简洁"></a>16-使描述开场白更简洁</h1><p>我之前提到过，我建议创建问题的开头段落的方式可能会导致相当大的段落。我再次强调，这真的不是问题。如果客户无论如何都要阅读您的所有发现，那么文本的分布几乎没有区别，如果他们只想了解问题所在，他们应该拥有本段中的所有信息。</p><p>此外，值得反思您以前撰写报告的任何经验。如果你觉得你制作的描述开场白的尺寸较大，感觉“错误”或“不熟悉”，你可能只是习惯于期待更小的描述。这是很自然的，也是我必须接受自己的。为了向客户提供他们需要的额外信息，必须在描述中包含更多信息。这与我团队的“正常”不一致。</p><p>也就是说，有一些方法可以限制这些段落的大小，同时确保它包含所需的所有信息。而且，如果运气好的话，您也许可以减小这些开瓶器的尺寸，使其更符合您习惯的尺寸。</p><p>让我们回过头来重新审视描述课中的示例问题。</p><h2 id="提高简洁性"><a href="#提高简洁性" class="headerlink" title="提高简洁性"></a>提高简洁性</h2><p>在“说明”课程中，我们介绍了 Windows 域控制器上缺少的修补程序。以下是调查结果的观察文本：</p><blockquote><p>对 OmniCorp 网络中的 Windows Server 进行的 Nessus 扫描显示，缺少许多关键的缺失安全补丁，包括修复 MS17-010 的补丁。这表明服务器没有及时更新必要的安全更新。主机是生产环境的域控制器。进一步的测试表明，该服务器可以利用此漏洞。</p></blockquote><p>使用我概述的技术，这是我回答的问题。</p><ul><li>结果是什么？<ul><li>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。</li></ul></li><li>为什么不好？<ul><li>如果攻击者利用此发现，他们将控制域控制器。</li></ul></li><li>如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？接下来可能发生的最糟糕的事情是什么？<ul><li>鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。这将包括保存客户数据的后端数据存储。</li></ul></li><li>攻击者需要处于什么位置才能利用这一发现，他们利用的难易程度如何？<ul><li>由于有公开可用的工具，利用此漏洞是微不足道的。</li><li>攻击者需要在内部网络上才能利用此问题。</li></ul></li><li>是否有任何相关的缓解措施可能会使其更难被利用，应该被提及？<ul><li>没有已知的缓解措施可以防止攻击者利用此问题。</li></ul></li></ul><p>如果你把所有这些放在一起形成你的初稿，这就是你得到的：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。如果攻击者利用此发现，他们将控制域控制器。鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。这将包括保存客户数据的后端数据存储。由于有公开可用的工具，利用此漏洞是微不足道的。攻击者需要在内部网络上才能利用此问题。没有已知的缓解措施可以防止攻击者利用此问题。</p></blockquote><p>以下是可以采取的几个步骤来减少字数：</p><ul><li>删除多余的句子</li><li>删除技术细节</li><li>联接句子</li><li>更简洁</li></ul><p>可能还有一些策略可以减少描述中的单词，但这些是我在合并示例句子和重新处理文本时所经历的主要步骤。重要的是，我们不会删除太多文本，以免客户端无法理解最终版本。</p><p>让我们一步一步地完成这个并调整文本。</p><h3 id="删除冗余文本"><a href="#删除冗余文本" class="headerlink" title="删除冗余文本"></a>删除冗余文本</h3><p>由于没有缓解措施可谈，我们可以简单地删除以下句子：</p><blockquote><p>没有已知的缓解措施可以防止攻击者利用此问题。</p></blockquote><p>这将导致以下结果：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。如果攻击者利用此发现，他们将控制域控制器。鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。这将包括保存客户数据的后端数据存储。由于有公开可用的工具，利用此漏洞是微不足道的。攻击者需要在内部网络上才能利用此问题。</p></blockquote><h3 id="删除技术细节"><a href="#删除技术细节" class="headerlink" title="删除技术细节"></a>删除技术细节</h3><p>接下来，让我们回顾一下文本，看看可以从本节中删除哪些过于技术性的信息。理想情况下，开场白需要在负责修复结果的高管和技术人员的可读性之间取得平衡。</p><p>一个可以改进为技术含量稍低的主要领域可能是：</p><blockquote><p>鉴于环境中所有 Windows 和 Linux 服务器的主要身份验证方法都使用 Windows LDAP，破坏域控制器的攻击者将能够利用此方法访问环境中的所有主机。</p></blockquote><p>我们可能根本不需要在这里提及 LDAP，这会稍微减少字数：</p><blockquote><p>鉴于服务器向环境中的所有 Windows 和 Linux 服务器提供了身份验证，破坏域控制器的攻击者将能够利用这一点来访问环境中的所有主机。</p></blockquote><p>这将导致以下结果：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。如果攻击者利用此发现，他们将控制域控制器。鉴于服务器向环境中的所有 Windows 和 Linux 服务器提供了身份验证，破坏域控制器的攻击者将能够利用这一点来访问环境中的所有主机。这将包括保存客户数据的后端数据存储。由于有公开可用的工具，利用此漏洞是微不足道的。攻击者需要在内部网络上才能利用此问题。</p></blockquote><h3 id="联接句子"><a href="#联接句子" class="headerlink" title="联接句子"></a>联接句子</h3><p>这是一个可以显着减少字数的领域。</p><p>这里有两句话可以组合在一起：</p><blockquote><p>由于有公开可用的工具，利用此漏洞是微不足道的。攻击者需要在内部网络上才能利用此问题。</p></blockquote><p>本期的第二句话有点多余。我们本可以更早地删除它，但指出攻击者利用该问题（在内部网络上）所需的位置至关重要。让我们将两个句子中的信息合并为一个：</p><blockquote><p>由于公开可用的工具的可用性，内部网络上的攻击者利用此漏洞是微不足道的。</p></blockquote><p>其结果是：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。如果攻击者利用此发现，他们将控制域控制器。鉴于服务器向环境中的所有 Windows 和 Linux 服务器提供了身份验证，破坏域控制器的攻击者将能够利用这一点来访问环境中的所有主机。这将包括保存客户数据的后端数据存储。由于公开可用的工具的可用性，内部网络上的攻击者利用此漏洞是微不足道的。</p></blockquote><h3 id="更简洁"><a href="#更简洁" class="headerlink" title="更简洁"></a>更简洁</h3><p>到目前为止，我们已经删除了大约 10% 的单词。让我们看看我们是否可以更简洁地进一步减少字数。这次让我们一句一句地去。</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重且高度可利用的 MS17-010 安全发现的影响。</p></blockquote><p>更简洁的版本：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。</p></blockquote><p>我在这里删除了“和高度可利用性”，因为我们在后面的发现中讨论可利用性。</p><blockquote><p>如果攻击者利用此发现，他们将控制域控制器。</p></blockquote><p>更简洁的版本：</p><blockquote><p>利用此发现将导致对服务器的完全控制。</p></blockquote><p>在这里，我把这句话改写得更直接一些，减少了字数。</p><blockquote><p>鉴于服务器向环境中的所有 Windows 和 Linux 服务器提供了身份验证，破坏域控制器的攻击者将能够利用这一点来访问环境中的所有主机。</p></blockquote><p>更简洁的版本：</p><blockquote><p>由于服务器向环境中的所有主机提供身份验证，因此攻击者将能够访问环境中的所有主机。</p></blockquote><p>我在这里合并了“Windows”和“Linux”，因为这些细节在这里无关紧要。我还删除了上一句中关于“攻击者破坏域控制器”的一堆信息。</p><blockquote><p>这将包括保存客户数据的后端数据存储。</p></blockquote><p>更简洁的版本：</p><blockquote><p>，包括那些拥有客户数据的人。</p></blockquote><p>在这种情况下，我发现将这句话与前一句话的新版本合并很有用。</p><blockquote><p>由于公开可用的工具的可用性，内部网络上的攻击者利用此漏洞是微不足道的。</p></blockquote><p>更简洁的版本：</p><blockquote><p>内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p></blockquote><p>我稍微改写了这句话，并删除了多余的“可用性”一词。</p><h3 id="最终版本"><a href="#最终版本" class="headerlink" title="最终版本"></a>最终版本</h3><p>经过上述所有更改后，这里是该段落的最终版本，它比原始版本更短，更简洁：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。利用此发现将导致对服务器的完全控制。由于服务器向环境中的所有主机提供身份验证，因此攻击者将能够访问环境中的所有主机，包括具有客户数据的主机。内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p></blockquote><p>现在值得进行最后的通读并进行一些调整，以便文本听起来不会重复并且流畅。</p><p>这是最终版本：</p><blockquote><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。利用此发现将导致对服务器的完全控制。由于服务器向环境中的所有主机提供身份验证，因此攻击者可能会破坏整个网络和所有客户数据。内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p></blockquote><p>我巩固了发现不那么啰嗦的影响部分，并略微增加了庄严感。</p><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><p>因此，通过这个过程，字数从 129 个单词减少到 73 个单词 - 在涵盖我们需要的所有信息的同时显着减少。这表明可以在不产生大量文本的情况下编写内容丰富的开场白描述。</p><p>就我个人而言，我认为少于 120 个字的内容对于这些开场白来说都是可以的，但我确实认为，将所有信息都包含在本段中比试图限制本节中的字数更重要。</p><h1 id="17-使描述开场白更简洁-练习"><a href="#17-使描述开场白更简洁-练习" class="headerlink" title="17-使描述开场白更简洁 - 练习"></a>17-使描述开场白更简洁 - 练习</h1><p>在上一课中，我们研究了如何减少描述中产生的文本量，主要集中在开头的段落上。</p><p>让我们通过一些练习，看看是否可以对以前的报告和本章中正在处理的问题进行改进。</p><p><strong>反思练习</strong></p><p>反思您最近撰写或有权访问的报告。你能发现使用上一课中概述的策略可以使任何方面更简洁吗？你能改进它们吗？</p><p><strong>一般练习</strong></p><p>再次查看您为 OmniCorp 章节示例问题制作的发现描述段落（以及影响部分，如果您编写了这些段落）。你能在保留所有必需信息的同时使它们更简洁吗？将此过程应用于结果说明的其余部分。</p><h1 id="18-证据"><a href="#18-证据" class="headerlink" title="18-证据"></a>18-证据</h1><p>确保结果不仅包含证据，而且包含良好的证据，这对客户和测试人员都至关重要。正如前面在描述课程中提到的，应该向客户展示存在问题的证据，并包括良好的证据，使我们的同行能够更轻松地执行补救验证工作。后一点非常重要，每次撰写发现时都应该考虑这一点 - 如果您必须尝试重现此发现，本文档是否包含有效执行此操作所需的所有内容？如果不是，证据可能不充分。</p><p>让我们来看看报告中可能出现的一些典型证据示例，并展示一些好的和坏的例子。</p><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p>在你截取任何东西之前，你应该问问自己“作为片段，而不是截图会更好吗？这在本课中会出现几次来强调这一点，但通常以文本而不是屏幕截图的形式呈现证据会更清晰。这是因为文本大小可以与文档的其余文本匹配，并且对于客户端能够从文档中复制和粘贴内容也很有用。</p><p>作为指导，如果您正在查看已经采用文本格式的内容，则可能应将其作为文本捕获在报告中。这适用于：</p><ul><li>法典</li><li>文本格式的配置文件</li><li>HTTP 请求和响应</li></ul><p>任何不在此列表中的内容都应该是屏幕截图。</p><p>解释了这一点，让我们看一个坏的和好的示例屏幕截图。</p><p><strong>坏例子</strong></p><p>下面是 Jenkins 主机配置问题的示例问题：</p><p>以下屏幕截图显示了此问题：</p><blockquote><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946635.png" alt="img"></p></blockquote><p>这有一些问题。首先，图像的分辨率太低，可能难以阅读。截取某些内容的屏幕截图时，请确保它一旦放入报告文档中即可阅读。</p><p>其次，没有明确的迹象表明这是从正在审查的系统中获取的。由于这是一个 Jenkins 主机，我们应该提供一个带有 URL 的屏幕截图。</p><p>最后，我们想在这里展示什么？您可能会在查找文本中的图像之后详细了解您所指的内容，但图像本身涵盖了许多设置，但没有明确指示正在谈论的是哪一个。</p><p><strong>好例子</strong></p><p>让我们看一下上述问题的一个很好的版本。</p><blockquote><p>Jenkins 系统配置页面的以下屏幕截图显示已启用调试模式：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946033.png" alt="img"></p></blockquote><p>在此修订后的屏幕截图中，包含主机 URL，并且图像的冗余部分已被裁剪掉。此外，我在屏幕截图中突出显示了受影响的设置，因此很清楚。</p><p>另外，请注意我是如何介绍证据的，这样它就可以为读者指明正确的方向，让他们知道他们在看什么。</p><h2 id="源代码片段"><a href="#源代码片段" class="headerlink" title="源代码片段"></a>源代码片段</h2><p>如果要执行代码审查或评估，需要突出显示配置文件中的某些信息，则将信息清晰地显示为证据至关重要。呈现此信息的方式既有好有坏;让我们看一些例子。</p><p><strong>坏例子</strong></p><blockquote><p>以下代码片段显示了易受攻击的函数：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946153.png" alt="img"></p></blockquote><p>在这个糟糕的例子中，我们没有被告知这个函数存在在哪里，客户端可能需要自己手动搜索它。除此之外，证据没有明确指出漏洞在哪里。如果您稍后跟进解释哪个部分容易受到攻击，那可能是可以的。</p><p>令人讨厌的是，他们无法复制任何文本，因为证据是以图像形式提供的。在此示例中，这可能不会为他们节省太多时间，但请考虑发现可能与他们需要搜索的过于复杂和冗长的类名相关的位置。像这样的东西：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946032.png" alt="img"></p><p>有人手动键入此响应类型会非常痛苦。</p><p><strong>好例子</strong></p><p>下面是显示代码片段的一个很好的示例。</p><blockquote><p>以下代码片段显示了易受攻击的execute_command功能：</p><p>测试公司&#x2F;应用程序&#x2F;服务器&#x2F;app.py：15</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@app</span>.<span class="hljs-built_in">route</span>(<span class="hljs-string">&#x27;/execute&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>])<br>def <span class="hljs-built_in">execute_command</span>():<br>    command = request.json.<span class="hljs-built_in">get</span>(<span class="hljs-string">&#x27;command&#x27;</span>)<br>    <span class="hljs-attribute">try</span>:<br>        process = subprocess.<span class="hljs-built_in">Popen</span>(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)  # VULNERABLE<br>        stdout, stderr = process.<span class="hljs-built_in">communicate</span>()<br>        return <span class="hljs-built_in">jsonify</span>(&#123;<span class="hljs-string">&#x27;stdout&#x27;</span>: stdout.<span class="hljs-built_in">decode</span>(), <span class="hljs-string">&#x27;stderr&#x27;</span>: stderr.<span class="hljs-built_in">decode</span>()&#125;), <span class="hljs-number">200</span><br>    except Exception as <span class="hljs-attribute">e</span>:<br>        return <span class="hljs-built_in">jsonify</span>(&#123;<span class="hljs-string">&#x27;error&#x27;</span>: <span class="hljs-built_in">str</span>(e)&#125;), <span class="hljs-number">400</span><br></code></pre></td></tr></table></figure></blockquote><p>在上面的示例中，我们引入了代码片段（引用函数名称），并为客户端提供了要转到的文件路径和行号。此外，这次不是屏幕截图，如果读者想要从示例中搜索关键字，则可以从代码片段中复制和粘贴。受影响的行已被调用，并添加了“# VULNERABLE”注释。然后，可以在问题后面引用这一点。</p><p>如果您的报告平台支持编程语言的语法突出显示，也可以利用这一点。这将使其在报告中更具可读性。使用线条突出显示或不同的文本样式突出显示受影响的行也可能有效。</p><p>我见过的另一种方法是在代码片段中提供行号。这可能会使证据如下所示：</p><blockquote><p>以下代码片段显示了易受攻击的函数：</p><p>beta-corp&#x2F;app&#x2F;server&#x2F;app.py</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-number">15.</span> @app.route(<span class="hljs-string">&#x27;/execute&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>])<br><span class="hljs-number">16.</span> def execute_command():<br><span class="hljs-number">18.</span>    command = request.json.<span class="hljs-keyword">get</span>(<span class="hljs-string">&#x27;command&#x27;</span>)<br><span class="hljs-number">19.</span><br><span class="hljs-number">20.</span>    <span class="hljs-keyword">try</span>:<br><span class="hljs-number">21.</span>        process = subprocess.Popen(command, shell=True, <span class="hljs-keyword">stdout</span>=subprocess.PIPE, <span class="hljs-keyword">stderr</span>=subprocess.PIPE)<br><span class="hljs-number">22.</span>        <span class="hljs-keyword">stdout</span>, <span class="hljs-keyword">stderr</span> = process.communicate()<br><span class="hljs-number">23.</span>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;stdout&#x27;</span>: <span class="hljs-keyword">stdout</span>.decode(), <span class="hljs-string">&#x27;stderr&#x27;</span>: <span class="hljs-keyword">stderr</span>.decode()&#125;), <span class="hljs-number">200</span><br><span class="hljs-number">24.</span><br><span class="hljs-number">25.</span>    except Exception as e:<br><span class="hljs-number">26.</span>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;error&#x27;</span>: str(e)&#125;), <span class="hljs-number">400</span><br></code></pre></td></tr></table></figure></blockquote><p>这不是一个坏方法，因为现在您可以在后续文本中引用行号。</p><h2 id="HTTP-请求和响应"><a href="#HTTP-请求和响应" class="headerlink" title="HTTP 请求和响应"></a>HTTP 请求和响应</h2><p>提供 Web 应用程序或 Web API 问题的证据对于正确处理非常重要。客户不理解 HTTP 层是很常见的，即使他们是 Web 应用程序开发人员。正因为如此，至关重要的是，我们不仅要给开发人员一个 HTTP 响应，还必须显示请求（可能会被修改），它突出显示了来自浏览器或其他应用程序的数据如何不应该被信任，因为它可以被修改。</p><p>此外，如果同事（甚至您）将来需要执行一些修正验证，如果没有完整的 HTTP 请求示例，则可能难以重现该发现。</p><p><strong>坏例子</strong></p><p>下面是一个请求和响应易受攻击问题的坏示例：</p><blockquote><p>来自服务器的以下响应显示返回 uname -a 输出的 &#x2F;execute 函数：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946280.png" alt="img"></p></blockquote><p>虽然屏幕截图的介绍很好，很清楚，但证据本身并没有显示 HTTP 请求。如果将来的客户或测试人员想要重现结果，这是一个问题。请求的格式是什么？存在哪些 HTTP 标头，并且可能需要哪些 HTTP 标头才能正常工作？此处不提供此信息。</p><p>通过包含BurpSuite的完整屏幕截图，可以稍微好一点：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231946849.png" alt="img"></p><p>但是，这有其自身的缺点。屏幕截图现在变得稍微难以阅读。由于 BurpSuite 的默认布局，当您将文本大小粘贴到报告文档中时，文本大小将变得不可读（HTTP 请求在左侧，HTTP 响应在右侧）：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231947170.png" alt="img"></p><p>此外，如果需要通过代理工具复制此发现，则从图像中复制文本将不简单。我们需要确保客户和同事在未来尽可能容易地重现这些发现。</p><p><strong>好例子</strong></p><blockquote><p>这里有一个更好的例子。</p><p>以下 HTTP 请求显示正在向服务器发送命令 uname -a：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs makefile">POST /execute HTTP/1.1<br><span class="hljs-section">Host: app.omnicorp.com</span><br><span class="hljs-section">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3</span><br><span class="hljs-section">Accept: application/json</span><br><span class="hljs-section">Accept-Language: en-US,en;q=0.5</span><br><span class="hljs-section">Accept-Encoding: gzip, deflate, br</span><br><span class="hljs-section">Content-Type: application/json</span><br><span class="hljs-section">Content-Length: 31</span><br><span class="hljs-section">Connection: keep-alive</span><br><span class="hljs-section">Upgrade-Insecure-Requests: 1</span><br> <br>&#123;<br>  <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;uname -a&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>下面生成的 HTTP 响应显示了服务器 uname -a 的输出：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-keyword">Server</span>: Werkzeug/<span class="hljs-number">3.0</span><span class="hljs-number">.1</span> Python/<span class="hljs-number">3.11</span><span class="hljs-number">.0</span><br><span class="hljs-type">Date</span>: Mon, <span class="hljs-number">05</span> Feb <span class="hljs-number">2024</span> <span class="hljs-number">11</span>:<span class="hljs-number">27</span>:<span class="hljs-number">00</span> GMT<br>Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">json</span><br>Content-Length: <span class="hljs-number">148</span><br>X-Custom-<span class="hljs-keyword">Header</span>: <span class="hljs-keyword">Value</span><br>X-<span class="hljs-keyword">Security</span>-<span class="hljs-keyword">Policy</span>: <span class="hljs-keyword">Strict</span><br>X-Powered-<span class="hljs-keyword">By</span>: Flask<br>X-Content-<span class="hljs-keyword">Type</span>-<span class="hljs-keyword">Options</span>: nosniff<br>X-Frame-<span class="hljs-keyword">Options</span>: SAMEORIGIN<br>Content-<span class="hljs-keyword">Security</span>-<span class="hljs-keyword">Policy</span>: <span class="hljs-keyword">default</span>-src <span class="hljs-string">&#x27;self&#x27;</span><br><span class="hljs-keyword">Access</span>-Control-Allow-Origin: *<br><span class="hljs-keyword">Connection</span>: <span class="hljs-keyword">close</span><br> <br>&#123;<br>  &quot;stderr&quot;: &quot;&quot;,<br>  &quot;stdout&quot;: &quot;Linux omnicorp-server 5.4.0-42-generic #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux&quot;<br>&#125;<br></code></pre></td></tr></table></figure></blockquote><p>在这里，我已将 HTTP 请求和响应复制到查找文本中。这可以更容易地读取，当然，如果需要，将来复制回测试工具是微不足道的。</p><p>理想情况下，应该在这里执行语法高亮显示（Markdown 实际上支持 HTTP，如果你正在使用它的话），并且行高亮也应该以与代码片段相同的方式使用。</p><h2 id="工具输出"><a href="#工具输出" class="headerlink" title="工具输出"></a>工具输出</h2><p>我们的很多证据将基于工具输出。值得庆幸的是，我们已经介绍了上面的规则。</p><ul><li>如果输出来自命令行，则应使用与代码片段相同的规则对其进行处理</li><li>如果输出来自显示结果通过或失败的应用程序，则最好将其呈现为屏幕截图</li></ul><p>请考虑 wpscan 的以下工具输出：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231947829.png" alt="img"></p><p>显然，这是一个大屏幕截图，可以进行一些裁剪。但值得一提的是，这在报告文件中可能是什么样子——不是很好。</p><p>下面是文本的样子：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">┌──(kali㉿kali)-[~]<br>└─$ wpscan --url http://192.168.1.67:8082 --force<br>_______________________________________________________________<br>         __          _______   _____<br>         \ \        / /   __ \ / ____|<span class="hljs-string"></span><br><span class="hljs-string">          \ \  /\  / /</span>|<span class="hljs-string"> </span>|<span class="hljs-string">__) </span>|<span class="hljs-string"> (___   ___  __ _ _ __ ®</span><br><span class="hljs-string">           \ \/  \/ / </span>|<span class="hljs-string">   ___/ \___ \ / __</span>|<span class="hljs-string">/ _` </span>|<span class="hljs-string"> &#x27;_ \</span><br><span class="hljs-string">            \  /\   /  </span>|<span class="hljs-string"> </span>|<span class="hljs-string">     ____) </span>|<span class="hljs-string"> (__</span>|<span class="hljs-string"> (_</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<br>             \/  \/    |<span class="hljs-string">_</span>|<span class="hljs-string">    </span>|<span class="hljs-string">_____/ \___</span>|<span class="hljs-string">\__,_</span>|<span class="hljs-string">_</span>|<span class="hljs-string"> </span>|<span class="hljs-string">_</span>|<br> <br>         WordPress Security Scanner by the WPScan Team<br>                          Version 3.8.22<br>       Sponsored by Automattic - https://automattic.com/<br>       <span class="hljs-meta">@_WPScan_,</span> <span class="hljs-meta">@ethicalhack3r,</span> <span class="hljs-meta">@erwan_lr,</span> <span class="hljs-meta">@firefart</span><br>_______________________________________________________________<br> <br>[+] URL: http://192.168.1.67:8082/ [192.168.1.67]<br>[+] Effective URL: http://192.168.1.67:8080/<br>[+] Started: Mon Feb   5 11:16:32 2024<br> <br>Interesting Finding(s):<br> <br>[+] XML-RPC seems to be enabled: http://192.168.1.67:8082/xmlrpc.php<br> |<span class="hljs-string"> Found By: Direct Access (Aggressive Detection)</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Confidence: 100%</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> References:</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - http://codex.wordpress.org/XML-RPC_Pingback_API</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner/</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos/</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login/</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access/</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] WordPress readme found: http://192.168.1.67:8082/readme.html</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Found By: Direct Access (Aggressive Detection)</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Confidence: 100%</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] The external WP-Cron seems to be enabled: http://192.168.1.67:8082/wp-cron.php</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Found By: Direct Access (Aggressive Detection)</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Confidence: 60%</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> References:</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://www.iplocation.net/defend-wordpress-from-ddos</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - https://github.com/wpscanteam/wpscan/issues/1299</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] WordPress version 6.4.3 identified (Latest, released on 2024-01-30).</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Found By: Style Etag (Aggressive Detection)</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - http://192.168.1.67:8082/wp-admin/load-styles.php, Match: &#x27;6.4.3&#x27;</span><br><span class="hljs-string"> </span>|<span class="hljs-string"> Confirmed By: Opml Generator (Aggressive Detection)</span><br><span class="hljs-string"> </span>|<span class="hljs-string">  - http://192.168.1.67:8082/wp-links-opml.php, Match: &#x27;generator=&quot;WordPress/6.4.3&quot;&#x27;</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[i] The main theme could not be detected.</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] Enumerating All Plugins (via Passive Methods)</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[i] No plugins Found.</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] Enumerating Config Backups (via Passive and Aggressive Methods)</span><br><span class="hljs-string"> Checking Config Backups - Time: 00:00:03 &lt;=============================================================================================================================================================================================================================================&gt; (137 / 137) 100.00% Time: 00:00:03</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[i] No Config Backups Found.</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[!] No WPScan API Token given, as a result vulnerability data has not been output.</span><br><span class="hljs-string">[!] You can get a free API token with 25 daily requests by registering at https://wpscan.com/register</span><br><span class="hljs-string"> </span><br><span class="hljs-string">[+] Finished: Mon Feb   5 11:17:04 2024</span><br><span class="hljs-string">[+] Requests Done: 171</span><br><span class="hljs-string">[+] Cached Requests: 7</span><br><span class="hljs-string">[+] Data Sent: 44.134 KB</span><br><span class="hljs-string">[+] Data Received: 38.077 KB</span><br><span class="hljs-string">[+] Memory used: 220.699 MB</span><br><span class="hljs-string">[+] Elapsed time: 00:00:31</span><br></code></pre></td></tr></table></figure><p>这看起来并不令人惊奇，但它确实允许您以与代码片段相同的方式匹配文档其余部分的格式。</p><p>在这些情况下，语法突出显示可能无法很好地工作，在这种情况下，您应该裁剪掉，直到您留下要显示的证据的主要部分（如果可以的话）。如果可能的话，也要利用线条突出显示。行号在这里没有意义，因此应省略这些行号。</p><h2 id="调查结果或附录中的证据"><a href="#调查结果或附录中的证据" class="headerlink" title="调查结果或附录中的证据"></a>调查结果或附录中的证据</h2><p>值得注意的是，有些证据可能太长，无法清晰地纳入调查结果。这可能是因为输出非常冗长，或者包含一些需要完整查看的示例（这可能会占用大量空间）。在这些情况下，只需将证据放在附录中并参考问题中的部分即可。</p><p>例如：</p><blockquote><p>附录第 5.2 节详细介绍了整个攻击链的大量 HTTP 请求和响应。</p></blockquote><p>一个超过几页的问题可能需要删减，尽管请在这里使用您的判断。</p><h2 id="裁剪证据"><a href="#裁剪证据" class="headerlink" title="裁剪证据"></a>裁剪证据</h2><p>如果您有包含冗余区域的证据，则可以将其裁剪回来。如果您想让结果更清晰地放在一两页上，或者您有很多示例要显示但不想将它们移动到附录部分，这将特别有用。</p><p>让我们看一个基于文本和屏幕截图的示例。</p><h3 id="代码片段"><a href="#代码片段" class="headerlink" title="代码片段"></a>代码片段</h3><p>对于基于文本的证据，这应该像注入“SNIP”或“[…]”词一样简单（记住在报告中的所有证据中使用相同的词）。</p><p>让我们看一个例子：</p><blockquote><p>以下 PHP 应用程序包含易受攻击的 &#x2F;search 端点：</p><p>应用程序&#x2F;serve.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-number">1</span>. <span class="hljs-meta">&lt;?php</span><br><span class="hljs-number">2</span>. <span class="hljs-comment">// Display search results</span><br><span class="hljs-number">3</span>. <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displaySearchResults</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>) </span>&#123;<br><span class="hljs-number">4</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Search results for: <span class="hljs-subst">$query</span>&quot;</span>;<br><span class="hljs-number">5</span>. &#125;<br><span class="hljs-number">6</span>.<br><span class="hljs-number">7</span>. <span class="hljs-comment">// Process search query</span><br><span class="hljs-number">8</span>. <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processSearchQuery</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>) </span>&#123;<br><span class="hljs-number">9</span>.     <span class="hljs-comment">// SNIP: Other processing logic could go here</span><br><span class="hljs-number">10</span>.    <span class="hljs-title function_ invoke__">displaySearchResults</span>(<span class="hljs-variable">$query</span>);<br><span class="hljs-number">11</span>. &#125;<br><span class="hljs-number">12</span>.<br><span class="hljs-number">13</span>. <span class="hljs-comment">// Validate search query</span><br><span class="hljs-number">14</span>. <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateSearchQuery</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>) </span>&#123;<br><span class="hljs-number">15</span>.     <span class="hljs-comment">// SNIP: Validation logic might be expected here</span><br><span class="hljs-number">16</span>.    <span class="hljs-keyword">return</span> <span class="hljs-variable">$query</span>; <span class="hljs-comment">// Directly returns the query without sanitization</span><br><span class="hljs-number">17</span>. &#125;<br><span class="hljs-number">18</span>.<br><span class="hljs-number">19</span>. <span class="hljs-comment">// Main routing logic</span><br><span class="hljs-number">20</span>. <span class="hljs-variable">$path</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>];<br><span class="hljs-number">21</span>.<br><span class="hljs-number">22</span>. <span class="hljs-keyword">if</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/&#x27;</span>) &#123;<br><span class="hljs-number">23</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;h1&gt;Welcome to the PHP App&lt;/h1&gt;&#x27;</span>;<br><span class="hljs-number">24</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;Use our API to interact with the system.&lt;/p&gt;&#x27;</span>;<br><span class="hljs-number">25</span>. &#125;<br><span class="hljs-number">26</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/data&#x27;</span>) &#123;<br><span class="hljs-number">27</span>.     <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-Type: application/json&#x27;</span>);<br><span class="hljs-number">28</span>.     <span class="hljs-variable">$data</span> = [<span class="hljs-string">&#x27;key&#x27;</span> =&gt; <span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-string">&#x27;number&#x27;</span> =&gt; <span class="hljs-number">42</span>, <span class="hljs-string">&#x27;message&#x27;</span> =&gt; <span class="hljs-string">&#x27;Hello, world!&#x27;</span>];<br><span class="hljs-number">29</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$data</span>);<br><span class="hljs-number">30</span>. &#125;<br><span class="hljs-number">31</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/submit&#x27;</span> &amp;&amp; <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="hljs-string">&#x27;POST&#x27;</span>) &#123;<br><span class="hljs-number">32</span>.     <span class="hljs-variable">$name</span> = <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;name&#x27;</span>]) ? <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;name&#x27;</span>] : <span class="hljs-string">&#x27;Anonymous&#x27;</span>;<br><span class="hljs-number">33</span>.     <span class="hljs-variable">$email</span> = <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;email&#x27;</span>]) ? <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;email&#x27;</span>] : <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-number">34</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>([<span class="hljs-string">&#x27;message&#x27;</span> =&gt; <span class="hljs-string">&quot;Thank you <span class="hljs-subst">$name</span>, we will contact you at <span class="hljs-subst">$email</span>.&quot;</span>]);<br><span class="hljs-number">35</span>. &#125;<br><span class="hljs-number">36</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/search&#x27;</span>) &#123;<br><span class="hljs-number">37</span>.     <span class="hljs-variable">$query</span> = <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;query&#x27;</span>]) ? <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;query&#x27;</span>] : <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-number">38</span>.     <span class="hljs-variable">$validatedQuery</span> = <span class="hljs-title function_ invoke__">validateSearchQuery</span>(<span class="hljs-variable">$query</span>);<br><span class="hljs-number">39</span>.     <span class="hljs-title function_ invoke__">processSearchQuery</span>(<span class="hljs-variable">$validatedQuery</span>);<br><span class="hljs-number">40</span>. &#125;<br><span class="hljs-number">41</span>. <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-number">42</span>.     <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;HTTP/1.0 404 Not Found&quot;</span>);<br><span class="hljs-number">43</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>;<br><span class="hljs-number">44</span>.     <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;p&gt;The page you requested was not found.&lt;/p&gt;&#x27;</span>;<br><span class="hljs-number">45</span>. &#125;<br><span class="hljs-number">46</span>. <span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure></blockquote><p>让我们裁剪掉不相关的代码，包括任何对问题不重要的尾随代码：</p><blockquote><p>以下 PHP 应用程序包含易受攻击的 &#x2F;search 端点：</p><p>应用程序&#x2F;serve.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-number">19</span>. <span class="hljs-comment">// Main routing logic</span><br><span class="hljs-number">20</span>. <span class="hljs-variable">$path</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>];<br><span class="hljs-number">21</span>.<br><span class="hljs-number">22</span>. <span class="hljs-keyword">if</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/&#x27;</span>) &#123;<br>SNIP<br><span class="hljs-number">26</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/data&#x27;</span>) &#123;<br>SNIP<br><span class="hljs-number">31</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/submit&#x27;</span> &amp;&amp; <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="hljs-string">&#x27;POST&#x27;</span>) &#123;<br>SNIP<br><span class="hljs-number">36</span>. <span class="hljs-keyword">elseif</span> (<span class="hljs-variable">$path</span> == <span class="hljs-string">&#x27;/search&#x27;</span>) &#123;<br><span class="hljs-number">37</span>.     <span class="hljs-variable">$query</span> = <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;query&#x27;</span>]) ? <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;query&#x27;</span>] : <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-number">38</span>.     <span class="hljs-variable">$validatedQuery</span> = <span class="hljs-title function_ invoke__">validateSearchQuery</span>(<span class="hljs-variable">$query</span>);<br><span class="hljs-number">39</span>.     <span class="hljs-title function_ invoke__">processSearchQuery</span>(<span class="hljs-variable">$validatedQuery</span>);<br><span class="hljs-number">40</span>. &#125;<br><span class="hljs-number">41</span>. <span class="hljs-keyword">else</span> &#123;<br></code></pre></td></tr></table></figure></blockquote><p>此版本已被编辑以排除文件的开头，该文件不需要显示我们拥有的证据。然后，“if”和“elseif”执行路径的内容已被剪切，因为它们的内容对于解释漏洞不是必需的。你可以在这里更积极地进行截图，但我认为显示代码流很重要。</p><h3 id="截图-1"><a href="#截图-1" class="headerlink" title="截图"></a>截图</h3><p>与文本片段一样，图像也可以被剪切。我们之前看到过一个类似的例子，其中 Jenkins 系统配置页面被删减以专注于相关领域。</p><p>下面是另一个示例：</p><blockquote><p>以下屏幕截图显示了正在启用的调试模式：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231947340.png" alt="img"></p></blockquote><p>我们可以比前面的示例更积极，通过调整浏览器页面的大小来减少屏幕截图占用的空间。另外，不要忘记添加有用的框突出显示：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231947240.png" alt="img"></p><p>这对这些证据所占用的空间量产生了巨大的影响，但同时将所需的信息全部保留在屏幕截图中。</p><p>如果您已将屏幕截图做得更小且简洁，则不需要使用框突出显示显示受影响的区域。在这里使用你自己的判断。</p><h2 id="没有证据的调查结果"><a href="#没有证据的调查结果" class="headerlink" title="没有证据的调查结果"></a>没有证据的调查结果</h2><p>虽然 99.9% 的发现应该有证据，但也有一些没有。这些边缘情况通常围绕着缺乏与安全相关的内容。以下是一些示例：</p><ul><li>无密码更改机制（用于 Web 应用程序评估）</li><li>无多重身份验证（用于 Web 应用程序评估）</li><li>未安装日志记录或监视系统（用于服务器内部版本审查）</li><li>缺少 XXX 的策略（用于策略审查）</li><li>No training being performed for XXX (for a policy review)</li></ul><p>For these examples there is no evidence you can show that makes sense.</p><p>There are however other examples that might fall into this category, but evidence could be shown:</p><ul><li>默认帐户和密码<ul><li>示例证据：HTTP 请求和响应显示使用一组默认凭据成功登录</li></ul></li><li>API 终端节点无速率限制<ul><li>示例证据：许多请求快速连续发送到服务器而未被阻止</li></ul></li><li>没有帐户锁定机制<ul><li>示例证据：在多次尝试失败后，针对登录的暴力攻击成功</li></ul></li><li>不遵循最小特权原则<ul><li>示例证据：同一组中所有用户的屏幕截图</li></ul></li></ul><p>因此，请仔细考虑没有明确证据的发现。你能用其他方式展示证据吗？例如，在没有安全功能存在或启用的情况下显示攻击是可能的。</p><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课中，我们介绍了确保报告中的证据清晰且对客户和我们的同行有帮助的关键领域。以下是我们介绍的内容的快速细分：</p><ul><li>确保您只截取不仅仅是文本的内容</li><li>确保屏幕截图清晰易读 - 理想情况下，屏幕截图中的文本应与文档中的文本大小相似</li><li>突出显示屏幕截图中感兴趣的特定区域（如果适用）</li><li>在屏幕截图中，如果适用，请包含已测试内容的 URL 或其他可识别信息</li><li>避免对代码、配置文件或任何其他基于文本的格式进行屏幕截图<ul><li>这包括 HTTP 请求和响应！</li></ul></li><li>对以文本形式呈现的所有证据使用语法高亮，记住存在 HTTP 语法高亮</li><li>通过剪掉图像的冗余部分（并在屏幕截图之前调整页面或应用程序的大小）和剪掉多余的文本来保持证据简洁</li><li>将大量证据移至附录</li></ul><p>如果您在创建调查结果时遵循这些要点，您的客户将清楚地了解证据，并且他们将更容易重现漏洞。此外，任何验证结果是否已修复的后续工作对同事来说都将更容易，因为可以快速找到结果中受影响的功能，并且他们需要的所有信息都将在手边重现结果。</p><h1 id="19-证据-练习"><a href="#19-证据-练习" class="headerlink" title="19-证据 - 练习"></a>19-证据 - 练习</h1><p>在上一课中，我们介绍了许多证据类型以及呈现它们的最佳方式。</p><p>让我们通过一些练习来测试你所学到的东西。</p><p><strong>反思练习</strong></p><ul><li>反思您最近撰写或有权访问的报告。调查结果中提供的证据是否足够清晰和全面，以至于不熟悉该项目的人能够理解和重现调查结果？<ul><li>如何改进证据呈现？</li></ul></li><li>想一想，由于证据不足，您很难从报告中重现调查结果。缺少什么，如何才能更好地呈现？</li></ul><p><strong>一般练习</strong></p><ul><li>回顾一下您在 OmniCorp 章节示例调查结果中包含的证据 - 您是否包含了所有必需的证据？如果没有，请根据上一课的信息进行必要的调整。</li><li>请看以下屏幕截图。您能发现哪些问题？你会如何提出证据？</li><li><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231947177.png" alt="img"></li><li>请考虑以下 testssl 工具输出。您能发现哪些问题？你会如何提出证据？(<a href="https://files.cdn.thinkific.com/file_uploads/584845/attachments/559/a43/e44/output.csv">output.csv</a>)</li></ul><p><strong>超越练习</strong></p><p>您能否从常用工具中找到任何 CLI 工具或输出模式，以保留任何颜色高亮，使客户更容易阅读输出？</p><h1 id="2-查找-ID"><a href="#2-查找-ID" class="headerlink" title="2-查找 ID"></a>2-查找 ID</h1><p>在我们进入发现文章和他们需要涵盖的内容之前，我认为最好快速涵盖一些问题的元数据基础知识。首先：用于报表中结果的标识符 （ID）。</p><p>标识符用于为每个发现提供唯一的值，并作为客户和报告者的简单参考。除此之外，结果 ID 有时会扩展为包括一个额外的标识符，以显示它在评估的哪个区域（例如 Web 应用程序评估或基础结构评估）中发现，甚至还包括一个标识符来显示 bug 来自哪个评估。</p><p>在我看来，上述所有三个标识符至少出现在报告中非常重要，您是否选择将所有 ID 与报告问题以包含所有这些值的发现 ID 放在一起，但这完全取决于您。如今，正如我在课程的其他地方提到的，客户会将发现添加到他们选择的错误跟踪器中，并且他们通常会使用问题和报告元数据作为区分问题的方法。如果他们与少数供应商合作，全年为他们生成多个报告，这对他们特别有用。</p><p>下面是我所说的一个示例，其中报告 ID 为 AAA-001，评估区域为 2（我们审查 Web 应用程序的第二阶段工作，而不是基础结构扫描的第一阶段），结果 ID 本身为 3：</p><blockquote><p>AAA-001-02-003 - 匿名 FTP</p></blockquote><p>或：</p><blockquote><p>AAA-001-2-3 - 匿名FTP</p></blockquote><p>或者也许：</p><blockquote><p>AAA-1-2-3 - 匿名 FTP</p></blockquote><p>我还看到过一些例子，其中评估区域 ID 已被删除，或者可能只是不需要，因为报告中只有一个工作阶段：</p><blockquote><p>BBB-03型</p></blockquote><p>这里还有其他方法可以使标识符更清晰，但它们的代价是将“完整”标识符从结果本身移开。</p><p>一种方法是将报表 ID 删除到报表中包含评估元数据的其他位置，例如文档控制部分。这可以与评估名称、任何 SoW 或提案参考等信息一起存储。我从中看到的结果发现 ID 的干净版本是：</p><blockquote><p>2.3</p></blockquote><p>…尽管这可能会与一些基于文档的章节编号相混淆，这些章节编号通常遵循技术文档中的 X.Y 约定。</p><p>我还见过这样的情况：在你进入描述之前，调查结果在表格中有元数据，并且 ID 存储在那里，而调查结果的名称作为调查结果的标题位于前面和中间。</p><p>区域&#x2F;阶段编号也可以从问题中删除，并保留在文档的章节标题中。您可能需要在诸如“请参阅 Web 应用程序评估部分中的发现 2”之类的调用中引用结果，只要文档采用具有文档导航的格式，处理起来就不算太糟糕。</p><p>那么，呈现查找标识符的最佳方式是什么？我认为我不能在这里给出一个好的答案。虽然我稍后会介绍一些缺点，但我认为这个问题的最佳答案是“视情况而定”。</p><p>首先，您应该确保所有报告的一致性，最好限制特定于客户的变体，因为这将很难维护（我有很多经验）。但是，您需要为客户识别特定标识符格式的潜在用途。</p><p>如果您希望能够帮助客户将问题复制到错误跟踪器中，那么将此信息放在一个地方可能会很好 - 而不是分散在报告的不同区域。但是，可能更有用的是能够提供包含每个发现所需的所有数据的电子表格，如果他们导入错误跟踪器，这可能对他们更有帮助。尽管某些格式可能会丢失，但您可以为电子表格导出构建完整的问题编号，如果您认为它成为问题，则将其排除在问题本身之外。</p><p>这里的另一个答案是——不要太担心。如果报告中的发现具有 ID 值，并且您很高兴它看起来不太可怕，并且&#x2F;或者如果客户想要获取它，报告中存在其他必需的信息（阶段号和报告 ID），也许这不是问题。此外，如果你正在阅读这篇文章，而我所解释的内容对你来说都不是问题，那么你在这里可能都很好。</p><h2 id="数字查找-ID-的问题"><a href="#数字查找-ID-的问题" class="headerlink" title="数字查找 ID 的问题"></a>数字查找 ID 的问题</h2><p>值得指出的是，使用数字标识符可能存在问题，尽管其中一些问题取决于您如何为查找结果提供标识符。</p><p>如果您发布具有顺序编号格式的报告，并且问题按严重性排序，则如果客户要求您删除问题（例如，误报），则可能会导致问题编号更改。如果先前报告的 ID 已用作参考，则以顺序格式更改后续问题的 ID 可能会导致冲突。解决这个问题的方法可能是在报告中将问题标记为误报，并在报告中更新各种计数，但是，如果客户希望它完全消失，您可能会有一些看起来很奇怪的东西。</p><p>例如，假设问题 2 和 3 被删除，这是结果列表：</p><ul><li>BWO-1-1 - SQL 注入</li><li>BWO-1-4 - 跨站点脚本</li><li>BWO-1-5 - 默认页面存在</li><li>BWO-1-6 - 支持 TLS 版本 1.0</li></ul><p>我怀疑大多数人会怀疑这里是否存在编号问题或报告中缺少问题。</p><p>如果您在最终版本之前多次向客户端发布更新（可能不寻常，但并非闻所未闻），也会出现这些问题。如果您提前告诉客户仅在最终报告最终确定和发布时使用查找 ID，则这不是问题。</p><p>如果您执行一些修正验证（也称为重新测试）并发现新问题，也可能会发生这种情况 - 您会把它放在哪里？我认为处理这个问题的最简单方法是为已识别的其他问题创建一个新的评估阶段，以将它们与发现的原始一批问题分开。</p><p>在某些情况下，用于跟踪问题的后端系统对每个发现使用数字 ID 值，但在输入 bug 时会给出该值。这将生成一个调查结果列表，这些发现将给出一个非顺序的顺序（可能），并且由于并非所有问题都会被报告（因为某些问题将被丢弃或保留以供进一步调查），这可能会给出一个看起来很奇怪的顺序。但是，对于客户来说，这些值是唯一的可能更明显：</p><ul><li>BWO-1-7 - SQL 注入</li><li>BWO-1-4 - 跨站点脚本</li><li>BWO-1-3 - 默认页面存在</li><li>BWO-1-1 - 支持 TLS 版本 1.0</li></ul><p>上面的列表看起来是随机的，但是当您考虑到它们将按严重性顺序排列在报告中时，很容易想象它们是非连续的和唯一的。</p><p>理想情况下，在数字报表中查找 ID 应是唯一标识符，以避免上述问题。这通常不难向客户阐明，并且应该在报告中给出。</p><h2 id="另一种方法"><a href="#另一种方法" class="headerlink" title="另一种方法"></a>另一种方法</h2><p>以非数字或顺序的形式表示查找 ID 是避免上述所有问题的主要方法。这可以通过将标识符设置为字母序列的几个字母来实现，例如 XD 或 BHX。随机数字也可以像 424 或 345 一样工作。在这些情况下，关键是要确保给定报表不会重复任何值。</p><p>我认为这种方法对许多人来说有点太不同了。然而，这在许多层面上都是有道理的，考虑到所有组织识别其问题的方式，本课中提出的问题可能足够小，很容易解决。我猜大多数组织如何不遵循这种 ID 模式，也许你也不应该？</p><p>如果您想探索这种格式，这取决于您;但是，我将在整个课程中使用它。鉴于我们将处理大量不按顺序引用的示例结果，并且由于我们没有将结果组织到特定的报告部分（因为本课程不是报告文档），因此这种格式对于本课程来说不会那么混乱。</p><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><p>那么，除了解释数字查找 ID 的优缺点之外，这里应该吸取什么教训呢？</p><ul><li>理想情况下，问题应该具有某种形式的标识符，您和客户端可以将其用作参考</li><li>报告还应分解为逻辑区域或阶段，理想情况下，如果可能的话，这些区域或阶段应该有一个标识符供参考</li><li>总体报告应有自己的唯一标识符，供客户参考</li></ul><p>这些应允许客户端为其使用构造唯一的结果 ID，或者您可以在报表中为客户端构造它们。关键是存在足够的元数据，以便他们能够这样做。</p><p>正如上一章所述，如果你能与客户交谈，询问他们将如何处理你的报告中的发现，也许你可以以一种更容易导入到他们的系统的方式向他们提供报告信息（例如，他们可以操作的电子表格）。</p><h1 id="20-机密和敏感数据的编辑"><a href="#20-机密和敏感数据的编辑" class="headerlink" title="20-机密和敏感数据的编辑"></a>20-机密和敏感数据的编辑</h1><p>报告不仅非常敏感（包含影响基础设施、Web 应用程序和&#x2F;或其他事物的开放漏洞列表），而且它们通常可以包含凭据或其他秘密材料作为证据的一部分。这实质上意味着任何有权访问包含此信息的报告的人都可能能够破坏帐户、解密数据或以其他方式访问他们通常不会拥有的东西。</p><p>虽然报告应由顾问安全地交付，但报告及其内容在未来仍有可能受到损害：</p><ul><li>报告是安全存储的，但高级威胁参与者可以访问这些参与者，这些参与者已泄露了具有重要权限的帐户</li><li>报告的内容已被提取并放入问题跟踪系统进行补救，并且具有访问权限的开发人员帐户已遭到入侵</li><li>报告文档被过度共享，而那些不应该有权访问它们的人可以访问它们</li></ul><p>这一点很重要，因为报告中讨论的调查结果可能与高特权帐户有关，如果它们被利用，它们可能不明显如何以及是否受到损害。应该注意的是，有时很难不提及找到的特定凭据，尤其是在默认凭据或极其常见的服务密码的情况下。但是，如果报告落入坏人之手，我们应该帮助限制后果。</p><p>除了防止帐户和服务泄露外，我们还必须照顾客户的客户。我们应尽可能确保我们的报告不包含 PII（个人身份信息），并且我们应确保始终执行敏感客户数据的编辑。</p><p>最后，具体评估可能需要编辑或完全省略其他信息。客户可以规定某些证据不能放在报告中，或者应该以某些方式进行编辑。例如，根本不允许将代码片段作为证据，只允许使用文件路径和行号，或者不应将来自代码某些区域的代码片段放入报告中（例如，与非常敏感的专有算法相关的代码）。在开始评估之前，请确保了解这些要求。</p><p>因此，应考虑编辑的关键信息是：</p><ul><li>任何形式的证书材料</li><li>个人身份信息 （PII）</li><li>其他敏感数据</li></ul><p>在这个包罗万象的要点中，“敏感”的关键词显然是与上下文相关的。如果您正在测试医疗保健软件提供商，“敏感”可能与患者的医疗记录有关。如果您正在为一家律师事务所执行内部基础设施评估，并发现一个包含与其知名客户达成和解协议备份的未结份额，则这些将被视为敏感。在为您的问题创建证据时，请考虑数据的所有者及其涉及的对象（组织或个人）——是否应该编辑他们的信息以保护他们的业务或身份？如果是，则应对证据进行编辑或以省略敏感方面的方式捕获证据。</p><p>让我们看一下编辑的过程。</p><h2 id="编辑过程"><a href="#编辑过程" class="headerlink" title="编辑过程"></a>编辑过程</h2><p>编辑机密并不一定很困难 - 只需确保将机密替换为 REDACTED，如果它与特定问题有关，则可能会突出显示编辑。</p><p>下面是查看包含基本身份验证用户名和密码的客户端的 DevOps 代码时可能会看到的 .htaccess 文件中的基本示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">AuthType Basic<br>AuthName <span class="hljs-string">&quot;Admin Area&quot;</span><br>AuthUserFile /dev/null<br>AuthBasicProvider <span class="hljs-built_in">env</span><br>SetEnv MY_BASIC_AUTH <span class="hljs-string">&quot;admin:password123&quot;</span><br>Require <span class="hljs-built_in">expr</span> %&#123;HTTP:Authorization&#125; == <span class="hljs-string">&quot;Basic %&#123;ENV:MY_BASIC_AUTH&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>以下是编辑可能的样子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">AuthType Basic<br>AuthName <span class="hljs-string">&quot;Admin Area&quot;</span><br>AuthUserFile /dev/null<br>AuthBasicProvider <span class="hljs-built_in">env</span><br>SetEnv MY_BASIC_AUTH <span class="hljs-string">&quot;admin:REDACTED&quot;</span><br>Require <span class="hljs-built_in">expr</span> %&#123;HTTP:Authorization&#125; == <span class="hljs-string">&quot;Basic %&#123;ENV:MY_BASIC_AUTH&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>我经常看到顾问对一些机密进行一些部分编辑（通常使用 NTLM 哈希以显示共享密码使用情况），留下前 3-4 个字符、单词 REDACTED 和尾随的 3-4 个字符。这是可以的，并且在某些问题上进一步证明您发现的内容是有效的。对于在正在审查的文件中找到敏感信息的某些问题，可以编辑整个字符串。最有效的用例是当您运行工具或对某些东西执行漏洞利用时，您需要展示可以获得什么。</p><p>下面是来自 Linux 主机的影子文件示例，其中使用的哈希格式为 SHA-1：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>:$<span class="hljs-number">1</span>$VGxkR3Mw$<span class="hljs-number">4</span>Wj2r0QabIoFbC9EYK5A4/:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">daemon</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">bin</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sys</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sync</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">games</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">man</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">lp</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">mail</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">news</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">uucp</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">proxy</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">www</span>-data:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">backup</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">list</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">irc</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">gnats</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">nobody</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-timesync:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-network:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-resolve:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-bus-proxy:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">syslog</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">_apt</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">lxd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">messagebus</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">uuidd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">dnsmasq</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sshd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">user</span>:$<span class="hljs-number">1</span>$VGxkR3Mw$<span class="hljs-number">4</span>Wj2r0QabIoFbC9EYK5A4/:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br></code></pre></td></tr></table></figure><p>与其使用“已编辑”一词，另一种选择是用 X（大写或小写）替换字符。有时，哈希的剪切部分只是三个 x 是很常见的。稍后将看到这方面的示例。无论您决定采用哪种方式，只要确保在整个报告中保持一致即可。</p><p>以下是部分编辑的样子（哈希编辑而不是盐）：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>:$<span class="hljs-number">1</span>$VGxkR3Mw$<span class="hljs-number">4</span>WjXXXXXXXXXXXXXXX5A4/:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">daemon</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">bin</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sys</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sync</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">games</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">man</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">lp</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">mail</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">news</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">uucp</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">proxy</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">www</span>-data:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">backup</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">list</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">irc</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">gnats</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">nobody</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-timesync:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-network:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-resolve:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">systemd</span>-bus-proxy:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">syslog</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">_apt</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">lxd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">messagebus</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">uuidd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">dnsmasq</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">sshd</span>:*:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br><span class="hljs-attribute">user</span>:$<span class="hljs-number">1</span>$VGxkR3Mw$<span class="hljs-number">4</span>WjXXXXXXXXXXXXXXX5A4/:<span class="hljs-number">18295</span>:<span class="hljs-number">0</span>:<span class="hljs-number">99999</span>:<span class="hljs-number">7</span>:::<br></code></pre></td></tr></table></figure><p>当涉及到屏幕截图时，只需将屏幕截图复制到图像编辑器中，然后将敏感信息的区域涂黑即可。</p><p>下面是一个示例：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231948521.png" alt="img"></p><p>不要在文字处理器中将框覆盖在图像上，因为底层图像可能是可检索的！</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231948466.png" alt="img"></p><p>最后，在问题中提及凭据的编辑以及它们被编辑的原因也不是一个坏主意 - 这可能会先发制人地解决客户可能对您为什么这样做的任何问题。我以前没有做过很多次，因为这很明显，但如果你愿意，你可以这样做。</p><p>你可以简单地说这样的话：</p><blockquote><p>由于拥有此 API 密钥的任何人都可以删除整个生产数据库，因此它已被编辑。</p></blockquote><p>让我们看一些具体发现的证据示例，并展示如何编辑它们。</p><h3 id="弱SNMP社区字符串"><a href="#弱SNMP社区字符串" class="headerlink" title="弱SNMP社区字符串"></a>弱SNMP社区字符串</h3><p>SNMP社区字符串通常很弱，在网络上很容易被猜到。让我们看一下 Metasploits snmp_login模块的示例输出：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use auxiliary/scanner/snmp/snmp_login<br><span class="hljs-built_in">set</span> RHOSTS 192.168.1.0/24<br><span class="hljs-built_in">set</span> THREADS 10<br><span class="hljs-built_in">run</span><br>[*] Scanning<span class="hljs-built_in"> IP </span>range 192.168.1.0/24 <span class="hljs-keyword">for</span><span class="hljs-built_in"> SNMP </span>devices using<span class="hljs-built_in"> community </span>strings <span class="hljs-keyword">from</span> list.txt<span class="hljs-built_in">..</span>.<br>[+] 192.168.1.20:161 - Success: <span class="hljs-string">&#x27;secret&#x27;</span><br>[*] Scan completed <span class="hljs-keyword">in</span> 45 seconds<br></code></pre></td></tr></table></figure><p>在这里，我们有一些证据证明发现了一个非常弱的社区字符串。在本例中，使用了 Metasploit 中的默认单词列表。最好在证据中掩盖社区字符串，并简单地描述这个词。利用此漏洞的影响可能仅限于信息泄露，但攻击者可能足以发现足够的信息，使其他攻击成为可能（例如，查找针对特定操作系统版本或服务版本所需的特定版本控制信息）。</p><p>证据应按以下方式编辑，并给予以下评论：</p><blockquote><p>使用 Metasploit 的 snmp_login 模块对网络上运行的 SNMP 服务执行了密码猜测攻击。以下输出显示，其中一个主机响应了一个基本社区，这是一个小写的常用词：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use auxiliary/scanner/snmp/snmp_login<br><span class="hljs-built_in">set</span> RHOSTS 192.168.1.0/24<br><span class="hljs-built_in">set</span> THREADS 10<br><span class="hljs-built_in">run</span><br>[*] Scanning<span class="hljs-built_in"> IP </span>range 192.168.1.0/24 <span class="hljs-keyword">for</span><span class="hljs-built_in"> SNMP </span>devices using<span class="hljs-built_in"> community </span>strings <span class="hljs-keyword">from</span> list.txt<span class="hljs-built_in">..</span>.<br>[+] 192.168.1.20:161 - Success: <span class="hljs-string">&#x27;REDACTED&#x27;</span><br>[*] Scan completed <span class="hljs-keyword">in</span> 45 seconds<br></code></pre></td></tr></table></figure></blockquote><p>当然，攻击者可以自己执行攻击，但我们至少可以通过不给他们确切的社区字符串来让他们更难。</p><p><strong>反射的 XSS</strong></p><p>您可能想知道为什么反射的 XSS 会包含敏感信息。它可能取决于应用程序和用户，但当您发现经过身份验证的 Web 应用程序漏洞时，通常最好从请求中删除会话令牌，因为它们是机密。</p><p>下面是一个示例请求和响应：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /search?query=&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&amp;sessionToken=abc123 HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: vulnerable-website.com<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>,image/webp,*/*;q=<span class="hljs-number">0</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">Accept</span>-Language: en-US,en;q=<span class="hljs-number">0</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">Referer</span>: https://vulnerable-website.com/search<br><span class="hljs-attribute">Cookie</span>: sessionToken=<span class="hljs-number">7</span>f5f228e8e23a804f37d5256173976a2b70a2c14; otherCookie=value<br><span class="hljs-attribute">Connection</span>: keep-alive<br><br><br><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Date</span>: Mon, <span class="hljs-number">05</span> Feb <span class="hljs-number">2024</span> <span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT<br><span class="hljs-attribute">Server</span>: Apache/<span class="hljs-number">2</span>.<span class="hljs-number">4</span>.<span class="hljs-number">29</span> (Ubuntu)<br><span class="hljs-attribute">Content</span>-Type: text/html; charset=UTF-<span class="hljs-number">8</span><br><span class="hljs-attribute">Content</span>-Length: <span class="hljs-number">1024</span><br><span class="hljs-section">&lt;html&gt;</span><br><span class="hljs-section">&lt;head&gt;</span><span class="hljs-section">&lt;title&gt;</span><span class="hljs-attribute">Search</span> Results&lt;/title&gt;&lt;/head&gt;<br><span class="hljs-section">&lt;body&gt;</span><br><span class="hljs-section">&lt;h1&gt;</span><span class="hljs-attribute">Search</span> Results for &#x27;&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&#x27;&lt;/h1&gt;<br><span class="hljs-section">&lt;p&gt;</span><span class="hljs-attribute">No</span> results found for your search.&lt;/p&gt;<br><span class="hljs-section">&lt;/body&gt;</span><br><span class="hljs-section">&lt;/html&gt;</span><br></code></pre></td></tr></table></figure><p>虽然此处描述的问题与会话令牌无关，但仍应谨慎对待。被盗的会话令牌将允许攻击者成为用户并执行用户有权执行的任何操作。值得注意的是，评估结束后代币的会话到期和一般有效性可能会使编辑变得毫无意义，但我觉得最好谨慎行事并无论如何编辑它们。</p><p>以下是我们如何编辑这个秘密：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GET</span> /search?query=&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&amp;sessionToken=abc123 HTTP/<span class="hljs-number">1</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">Host</span>: vulnerable-website.com<br><span class="hljs-attribute">User</span>-Agent: Mozilla/<span class="hljs-number">5</span>.<span class="hljs-number">0</span> (Windows NT <span class="hljs-number">10</span>.<span class="hljs-number">0</span>; Win64; x64) AppleWebKit/<span class="hljs-number">537</span>.<span class="hljs-number">36</span> (KHTML, like Gecko) Chrome/<span class="hljs-number">58</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3029</span>.<span class="hljs-number">110</span> Safari/<span class="hljs-number">537</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>,image/webp,*/*;q=<span class="hljs-number">0</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">Accept</span>-Language: en-US,en;q=<span class="hljs-number">0</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">Referer</span>: https://vulnerable-website.com/search<br><span class="hljs-attribute">Cookie</span>: sessionToken=REDACTED; otherCookie=value<br><span class="hljs-attribute">Connection</span>: keep-alive<br></code></pre></td></tr></table></figure><p>您始终可以完全删除 Cookie 行，但务必使请求的结构尽可能接近原始结构，以确保将来可以复制它们。</p><h3 id="代码中的硬编码机密"><a href="#代码中的硬编码机密" class="headerlink" title="代码中的硬编码机密"></a>代码中的硬编码机密</h3><p>这是一个我过去处理过很多次的经典例子——硬编码的秘密。这在所有大型代码库中都是一个普遍存在的问题，并且通常总是在我参与的代码审查项目中提出。</p><p>机密可以采取多种形式：</p><ul><li>用户帐户凭据</li><li>服务帐户凭据</li><li>API 密钥</li><li>SSH 密钥</li><li>私钥</li><li>密码哈希</li><li>加密密钥</li></ul><p>我见过这样的案例，客户会声称其中一些不是真正的秘密，因为它们要么是哈希的，要么是加密的。如果攻击者已经获取了代码，他们现在可以尝试检索这些机密的明文版本。如果还获得了任何加密密钥的密钥，他们也将能够解密这些密钥。任何秘密材料的最佳位置是在加密的密钥存储服务中，只有有限的一组工程师可以访问它们。</p><p>无论客户对此类问题的容忍度如何，我都建议报告您发现的所有实例。如果他们觉得自己在安全地管理风险，则由他们来评估风险并接受风险。</p><p>以下是一些机密和编辑过程的示例：</p><p><strong>服务帐户凭据</strong></p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">oauth2</span>.<span class="hljs-property">GoogleCredentials</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">Storage</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">StorageOptions</span>;<br><span class="hljs-variable">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageService</span> &#123;<br>    <span class="hljs-variable">private</span> <span class="hljs-title class_">Storage</span> <span class="hljs-variable">storage</span>;<br>    <span class="hljs-variable">public</span> <span class="hljs-title class_">StorageService</span>() &#123;<br>        <span class="hljs-title class_">String</span> <span class="hljs-variable">projectId</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;your-project-id&quot;</span>;<br>        <span class="hljs-title class_">String</span> <span class="hljs-variable">credentialsJSON</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#123;&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>type<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>service_account<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>project_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">projectId</span> <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>private_key_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>29a5404bed7...&quot;</span>,<br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>private_key<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>-----BEGIN PRIVATE KEY-----<span class="hljs-char escape_">\\</span>nMIIEvQIBADANBg...&quot;</span>,<br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_email<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>storage-access@your-project-id.iam.gserviceaccount.com<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>113545198550469668813<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>auth_uri<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://accounts.google.com/o/oauth2/auth<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>token_uri<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://oauth2.googleapis.com/token<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>auth_provider_x509_cert_url<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://www.googleapis.com/oauth2/v1/certs<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_x509_cert_url<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://www.googleapis.com/robot/v1/metadata/x509/storage...&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&#125;&quot;</span>;<br>        <span class="hljs-title function_">try</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">StorageOptions</span>.<span class="hljs-property">newBuilder</span>()<br>                    .<span class="hljs-property">setProjectId</span>(<span class="hljs-variable">projectId</span>)<br>                    .<span class="hljs-property">setCredentials</span>(<span class="hljs-title class_">GoogleCredentials</span>.<span class="hljs-property">fromStream</span>(<span class="hljs-variable">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(<span class="hljs-variable">credentialsJSON</span>.<span class="hljs-property">getBytes</span>())))<br>                    .<span class="hljs-property">build</span>()<br>                    .<span class="hljs-property">getService</span>();<br>        &#125; <span class="hljs-title function_">catch</span> (<span class="hljs-title class_">IOException</span> <span class="hljs-variable">e</span>) &#123;<br>            <span class="hljs-variable">e</span>.<span class="hljs-property">printStackTrace</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// Method to interact with Cloud Storage...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>服务帐户凭据 - 已编辑</strong></p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">oauth2</span>.<span class="hljs-property">GoogleCredentials</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">Storage</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">com</span>.<span class="hljs-property">google</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">StorageOptions</span>;<br><span class="hljs-variable">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageService</span> &#123;<br>    <span class="hljs-variable">private</span> <span class="hljs-title class_">Storage</span> <span class="hljs-variable">storage</span>;<br>    <span class="hljs-variable">public</span> <span class="hljs-title class_">StorageService</span>() &#123;<br>        <span class="hljs-title class_">String</span> <span class="hljs-variable">projectId</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;your-project-id&quot;</span>;<br>        <span class="hljs-title class_">String</span> <span class="hljs-variable">credentialsJSON</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#123;&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>type<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>service_account<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>project_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">projectId</span> <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>private_key_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>29a5404bed7...&quot;</span>,<br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>private_key<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>REDACTED&quot;</span>,<br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_email<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>storage-access@your-project-id.iam.gserviceaccount.com<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_id<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>113545198550469668813<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>auth_uri<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://accounts.google.com/o/oauth2/auth<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>token_uri<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://oauth2.googleapis.com/token<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>auth_provider_x509_cert_url<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://www.googleapis.com/oauth2/v1/certs<span class="hljs-char escape_">\&quot;</span>,&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\&quot;</span>client_x509_cert_url<span class="hljs-char escape_">\&quot;</span>: <span class="hljs-char escape_">\&quot;</span>https://www.googleapis.com/robot/v1/metadata/x509/storage...&quot;</span><br>                <span class="hljs-operator">+</span> <span class="hljs-string">&quot;&#125;&quot;</span>;<br>        <span class="hljs-title function_">try</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">StorageOptions</span>.<span class="hljs-property">newBuilder</span>()<br>                    .<span class="hljs-property">setProjectId</span>(<span class="hljs-variable">projectId</span>)<br>                    .<span class="hljs-property">setCredentials</span>(<span class="hljs-title class_">GoogleCredentials</span>.<span class="hljs-property">fromStream</span>(<span class="hljs-variable">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(<span class="hljs-variable">credentialsJSON</span>.<span class="hljs-property">getBytes</span>())))<br>                    .<span class="hljs-property">build</span>()<br>                    .<span class="hljs-property">getService</span>();<br>        &#125; <span class="hljs-title function_">catch</span> (<span class="hljs-title class_">IOException</span> <span class="hljs-variable">e</span>) &#123;<br>            <span class="hljs-variable">e</span>.<span class="hljs-property">printStackTrace</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// Method to interact with Cloud Storage...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>API 密钥</strong></p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arcade">const API_ENDPOINT = <span class="hljs-string">&#x27;https://api.thirdpartyservice.com/data&#x27;</span>;<br>const API_KEY = <span class="hljs-string">&#x27;AIzaSyD-3nJrHqZzX78PQlLW2KxYQ4elV2Q7X9M&#x27;</span>;<br>fetch(<span class="hljs-string">`<span class="hljs-subst">$&#123;API_ENDPOINT&#125;</span>?key=<span class="hljs-subst">$&#123;API_KEY&#125;</span>`</span>, &#123;<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>    <span class="hljs-attr">headers</span>: &#123;<br>        <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,<br>        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,<br>    &#125;,<br>&#125;)<br>.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())<br>.then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(data))<br>.catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;Error fetching data:&#x27;</span>, error));<br></code></pre></td></tr></table></figure><p><strong>API 密钥 - 已编辑</strong></p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arcade">const API_ENDPOINT = <span class="hljs-string">&#x27;https://api.thirdpartyservice.com/data&#x27;</span>;<br>const API_KEY = <span class="hljs-string">&#x27;REDACTED&#x27;</span>;<br>fetch(<span class="hljs-string">`<span class="hljs-subst">$&#123;API_ENDPOINT&#125;</span>?key=<span class="hljs-subst">$&#123;API_KEY&#125;</span>`</span>, &#123;<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>    <span class="hljs-attr">headers</span>: &#123;<br>        <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,<br>        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,<br>    &#125;,<br>&#125;)<br>.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())<br>.then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(data))<br>.catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#x27;Error fetching data:&#x27;</span>, error));<br></code></pre></td></tr></table></figure><p><strong>加密密钥</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">from cryptography.fernet import <span class="hljs-title class_">Fernet</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataEncryptor</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>        <span class="hljs-variable language_">self</span>.encryption_key = b<span class="hljs-string">&#x27;G68ZAfT3WbR8KfrP4u5Bw1vQ2sTc6X0vq9eRySdZzWc=&#x27;</span><br>        <span class="hljs-variable language_">self</span>.cipher_suite = <span class="hljs-title class_">Fernet</span>(<span class="hljs-variable language_">self</span>.encryption_key)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt_data</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, data</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.cipher_suite.encrypt(data.encode())<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt_data</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, token</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.cipher_suite.decrypt(token).decode()<br></code></pre></td></tr></table></figure><p><strong>加密密钥 - 已编辑</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">from cryptography.fernet import <span class="hljs-title class_">Fernet</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataEncryptor</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span></span>):<br>        <span class="hljs-variable language_">self</span>.encryption_key = b<span class="hljs-string">&#x27;REDACTED&#x27;</span><br>        <span class="hljs-variable language_">self</span>.cipher_suite = <span class="hljs-title class_">Fernet</span>(<span class="hljs-variable language_">self</span>.encryption_key)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt_data</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, data</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.cipher_suite.encrypt(data.encode())<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt_data</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, token</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.cipher_suite.decrypt(token).decode()<br></code></pre></td></tr></table></figure><h3 id="具有弱密码的域用户帐户"><a href="#具有弱密码的域用户帐户" class="headerlink" title="具有弱密码的域用户帐户"></a>具有弱密码的域用户帐户</h3><p>下面是工具输出和密文的示例。在本例中，我们使用 crapmapexec 工具使用通用密码列表使用一组已知的用户名在网络上执行密码猜测攻击：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[*]</span> Starting CrackMapExec password spray attack at <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">05</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-selector-attr">[*]</span> Targeting IPs: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.100</span>-<span class="hljs-number">192.168</span>.<span class="hljs-number">1.150</span><br><span class="hljs-selector-attr">[*]</span> Using username list: usernames<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-attr">[*]</span> Using password list: common_passwords<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.105</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: Summer2024<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[+]</span> Successful login <span class="hljs-keyword">for</span>: jdoe - Password: Summer2024<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: guest<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.110</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: Password123<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[+]</span> Successful login <span class="hljs-keyword">for</span>: admin - Password: Password123<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: jdoe<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.120</span>:<span class="hljs-number">445</span> - FAILED<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.125</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: admin2024<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: jdoe<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: guest<br><span class="hljs-selector-attr">[*]</span> Attack <span class="hljs-selector-tag">summary</span>:<br>    - Total attempts: <span class="hljs-number">12</span><br>    - Successful logins: <span class="hljs-number">2</span><br>    - Unique IPs attempted: <span class="hljs-number">4</span><br><span class="hljs-selector-attr">[*]</span> Successful credentials:<br>    - <span class="hljs-number">192.168</span>.<span class="hljs-number">1.105</span> - jdoe:Summer2024<br>    - <span class="hljs-number">192.168</span>.<span class="hljs-number">1.110</span> - admin:Password123<br><span class="hljs-selector-attr">[*]</span> CrackMapExec password spray attack completed at <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">05</span> <span class="hljs-number">10</span>:<span class="hljs-number">15</span>:<span class="hljs-number">00</span><br></code></pre></td></tr></table></figure><p>在这里，我们应该简单地编辑为帐户找到的密码。由于这是来自内部测试，我们应该告诉客户端哪些帐户受到弱密码的影响：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[*]</span> Starting CrackMapExec password spray attack at <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">05</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br><span class="hljs-selector-attr">[*]</span> Targeting IPs: <span class="hljs-number">192.168</span>.<span class="hljs-number">1.100</span>-<span class="hljs-number">192.168</span>.<span class="hljs-number">1.150</span><br><span class="hljs-selector-attr">[*]</span> Using username list: usernames<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-attr">[*]</span> Using password list: common_passwords<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.105</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: REDACTED<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[+]</span> Successful login <span class="hljs-keyword">for</span>: jdoe - Password: REDACTED<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: guest<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.110</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: REDACTED<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[+]</span> Successful login <span class="hljs-keyword">for</span>: admin - Password: REDACTED<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: jdoe<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.120</span>:<span class="hljs-number">445</span> - FAILED<br><span class="hljs-selector-attr">[*]</span> Attempting connection to <span class="hljs-number">192.168</span>.<span class="hljs-number">1.125</span>:<span class="hljs-number">445</span> - SUCCESS<br><span class="hljs-selector-attr">[*]</span> Spraying password: REDACTED<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: admin<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: user1<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: jdoe<br>    <span class="hljs-selector-attr">[-]</span> Failed login <span class="hljs-keyword">for</span>: guest<br><span class="hljs-selector-attr">[*]</span> Attack <span class="hljs-selector-tag">summary</span>:<br>    - Total attempts: <span class="hljs-number">12</span><br>    - Successful logins: <span class="hljs-number">2</span><br>    - Unique IPs attempted: <span class="hljs-number">4</span><br><span class="hljs-selector-attr">[*]</span> Successful credentials:<br>    - <span class="hljs-number">192.168</span>.<span class="hljs-number">1.105</span> - jdoe:REDACTED<br>    - <span class="hljs-number">192.168</span>.<span class="hljs-number">1.110</span> - admin:REDACTED<br><span class="hljs-selector-attr">[*]</span> CrackMapExec password spray attack completed at <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">05</span> <span class="hljs-number">10</span>:<span class="hljs-number">15</span>:<span class="hljs-number">00</span><br></code></pre></td></tr></table></figure><h3 id="正在使用的-SNMP-公共社区字符串"><a href="#正在使用的-SNMP-公共社区字符串" class="headerlink" title="正在使用的 SNMP 公共社区字符串"></a>正在使用的 SNMP 公共社区字符串</h3><p>让我们再次访问SNMP，但谈谈公共社区字符串。下面是示例输出：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use auxiliary/scanner/snmp/snmp_login<br><span class="hljs-built_in">set</span> RHOSTS 192.168.2.0/24<br><span class="hljs-built_in">set</span> COMMUNITY_FILE /path/<span class="hljs-keyword">to</span>/community/string/list.txt<br><span class="hljs-built_in">set</span> THREADS 10<br><span class="hljs-built_in">run</span><br>[*] Scanning<span class="hljs-built_in"> IP </span>range 192.168.2.0/24 <span class="hljs-keyword">for</span><span class="hljs-built_in"> SNMP </span>devices using<span class="hljs-built_in"> community </span>strings <span class="hljs-keyword">from</span> list.txt<span class="hljs-built_in">..</span>.<br>[+] 192.168.2.22:161 - Success: <span class="hljs-string">&#x27;public&#x27;</span><br>[*] Scan completed <span class="hljs-keyword">in</span> 45 seconds<br></code></pre></td></tr></table></figure><p>当您遇到默认凭据或通常在标题中称为问题的非常常见的凭据时，在处理证据时有两种选择。您可以选择将其保持“原样”，即使您编辑了凭据，知道自己在做什么的攻击者也可能很容易找出凭据。另一种选择是调整标题并围绕证据进行讨论，就像前面的例子一样。</p><p>以下是您的处理方法：</p><blockquote><p>标题：正在使用的 SNMP 弱社区字符串</p><p>从Metasploit工具对网络上运行的SNMP服务执行了单词列表攻击。以下输出显示其中一个主机响应了一个非常常见且默认的社区字符串：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use auxiliary/scanner/snmp/snmp_login<br><span class="hljs-built_in">set</span> RHOSTS 192.168.2.0/24<br><span class="hljs-built_in">set</span> COMMUNITY_FILE /path/<span class="hljs-keyword">to</span>/community/string/list.txt<br><span class="hljs-built_in">set</span> THREADS 10<br><span class="hljs-built_in">run</span><br>[*] Scanning<span class="hljs-built_in"> IP </span>range 192.168.2.0/24 <span class="hljs-keyword">for</span><span class="hljs-built_in"> SNMP </span>devices using<span class="hljs-built_in"> community </span>strings <span class="hljs-keyword">from</span> list.txt<span class="hljs-built_in">..</span>.<br>[+] 192.168.2.22:161 - Success: <span class="hljs-string">&#x27;REDACTED&#x27;</span><br>[*] Scan completed <span class="hljs-keyword">in</span> 45 seconds<br></code></pre></td></tr></table></figure></blockquote><p>正如你所看到的，证据的描述与前面的例子一样，但足够模糊，以至于读者无法立即看出它是什么。与本课中需要轮换&#x2F;更改凭据的所有实例一样，客户端需要转到源代码进行更改，因此他们应该能够自己查看密钥是什么。</p><p>这取决于你想如何处理这个问题，以及你的谨慎门槛是什么。显然，任何知道自己在做什么的攻击者都会看穿这一点。如果是我，我会谨慎行事并编辑。</p><h3 id="正在使用的-SHA-1-密码哈希方案"><a href="#正在使用的-SHA-1-密码哈希方案" class="headerlink" title="正在使用的 SHA-1 密码哈希方案"></a>正在使用的 SHA-1 密码哈希方案</h3><p>让我们看另一个例子，其中有一些从数据库返回的哈希和敏感数据。此工具输出是使用 sqlmap 工具收集的：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">Database: customers_db<br>Table: users<br>[5 entries]<br>+----+------------------+----------------------------+------------------------------------------+-----------------------------+<br>|<span class="hljs-string"> id </span>|<span class="hljs-string"> name             </span>|<span class="hljs-string"> email                      </span>|<span class="hljs-string"> address                                  </span>|<span class="hljs-string"> sha1_password_hash               </span>|<br>+----+------------------+----------------------------+------------------------------------------+-----------------------------+<br>|<span class="hljs-string"> 1  </span>|<span class="hljs-string"> John Doe         </span>|<span class="hljs-string"> johndoe@example.com        </span>|<span class="hljs-string"> 1234 Elm St, Anytown, CA 90210           </span>|<span class="hljs-string"> 21d8f9ab49dfad293255f9c467d5a9e4a3b55a47 </span>|<br>|<span class="hljs-string"> 2  </span>|<span class="hljs-string"> Jane Smith       </span>|<span class="hljs-string"> janesmith@example.com      </span>|<span class="hljs-string"> 5678 Oak St, Somewhere, NY 10001         </span>|<span class="hljs-string"> 3f79bb7b435b05321651daefd374cdc681dc06e7 </span>|<br>|<span class="hljs-string"> 3  </span>|<span class="hljs-string"> Mike Johnson     </span>|<span class="hljs-string"> mikej@example.net          </span>|<span class="hljs-string"> 91011 Pine St, Littletown, TX 75001      </span>|<span class="hljs-string"> 71ac9eac8c7c5ab3d9e0bda11691a23e561b1a37 </span>|<br>|<span class="hljs-string"> 4  </span>|<span class="hljs-string"> Emily White      </span>|<span class="hljs-string"> emilywhite@example.org     </span>|<span class="hljs-string"> 1213 Maple Ave, Bigcity, FL 33101        </span>|<span class="hljs-string"> 2a76fba8c72a9db9d4a1e5d1d1f5bf68d1981651 </span>|<br>|<span class="hljs-string"> 5  </span>|<span class="hljs-string"> Alex Brown       </span>|<span class="hljs-string"> alexb@example.com          </span>|<span class="hljs-string"> 1415 Cherry Blvd, Smallville, WA 98101   </span>|<span class="hljs-string"> 05a671c66aefea124cc08b76ea6d30bb9c337a8b </span>|<br>+----+------------------+----------------------------+------------------------------------------+-----------------------------+<br></code></pre></td></tr></table></figure><p>我们不想像这样在报告中披露特定的个人，也不想输入他们的哈希值，这可能会被有权访问报告的攻击者破解。</p><p>让我们看看如何编辑这些内容：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">Database: customers_db<br>Table: users<br>[5 entries]<br>+----+----------------+----------+----------+--------------------+<br>|<span class="hljs-string"> id </span>|<span class="hljs-string"> name           </span>|<span class="hljs-string"> email    </span>|<span class="hljs-string"> address  </span>|<span class="hljs-string"> sha1_password_hash </span>|<br>+----+----------------+----------+----------+--------------------+<br>|<span class="hljs-string"> 1  </span>|<span class="hljs-string"> John REDACTED  </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> 21dxxxa47          </span>|<br>|<span class="hljs-string"> 2  </span>|<span class="hljs-string"> Jane REDACTED  </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> 3f7xxx6e7          </span>|<br>|<span class="hljs-string"> 3  </span>|<span class="hljs-string"> Mike REDACTED  </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> 71axxxa37          </span>|<br>|<span class="hljs-string"> 4  </span>|<span class="hljs-string"> Emily REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> 2a7xxx651          </span>|<br>|<span class="hljs-string"> 5  </span>|<span class="hljs-string"> Alex REDACTED  </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> REDACTED </span>|<span class="hljs-string"> 05axxxa8b          </span>|<br>+----+----------------+----------+----------+--------------------+<br></code></pre></td></tr></table></figure><p>在这里，个人的姓氏以及他们的电子邮件和地址都被屏蔽了（这应该会阻止他们被识别）。哈希值大多被编辑，xxx 代表取出的哈希值的中间。作为奖励，报告中的表格要干净得多。</p><h3 id="屏幕截图示例"><a href="#屏幕截图示例" class="headerlink" title="屏幕截图示例"></a>屏幕截图示例</h3><p>下面是一个示例 LFI（本地文件包含）问题，最好截屏而不是复制并粘贴到报告中（或者您可以使用 HTTP 请求和响应，但假设您要截取它）：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231948743.png" alt="img"></p><p>与本课前面的示例一样，目标是屏蔽敏感信息：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231948803.png" alt="img"></p><p>和以前一样，我已经掩盖了所有会泄露客户身份的元素。这一次，我决定屏蔽整个哈希值。这不是从数据库获取特定数据的问题，而是在磁盘上检索文件的问题，因此我认为不需要显示任何哈希样本。</p><h2 id="课程总结-6"><a href="#课程总结-6" class="headerlink" title="课程总结"></a>课程总结</h2><p>本课介绍了在安全报告中编辑敏感信息的重要性。我们强调了这些报告中的风险，其中包含有关开放漏洞和潜在秘密材料的详细信息，如何被破坏文档的攻击者或可能无权访问报告中证明的秘密的恶意内部人员所利用。</p><p>以下是我们介绍的内容：</p><ul><li>安全报告的敏感性和相关的暴露风险。</li><li>迫切需要安全传输和存储这些报告。</li><li>编辑敏感数据（如凭据、PII 和其他敏感详细信息）的过程和重要性。</li><li>不同方案中的脱敏示例，包括代码、配置文件和安全测试证据。</li><li>客户特定要求对编辑过程的重要性。</li></ul><p>要记住的事项：</p><ul><li>仔细审查证据并编辑任何敏感内容。</li><li>遵循特定于客户端的编辑要求。</li><li>使用部分编辑来平衡结果证明，同时限制安全风险。</li><li>如果不确定是否需要编辑，则最好进行编辑。</li></ul><p>通过关注这些做法，我们可以最大限度地降低敏感信息泄露的风险，并在报告落入坏人之手时保护客户及其客户。</p><h1 id="21-机密和敏感信息的编辑-练习"><a href="#21-机密和敏感信息的编辑-练习" class="headerlink" title="21-机密和敏感信息的编辑 - 练习"></a>21-机密和敏感信息的编辑 - 练习</h1><p>上一课介绍了确保包含机密和其他敏感数据的证据应谨慎处理并适当编辑的重要性。</p><p>让我们对此做一些快速练习。</p><p><strong>反思练习</strong></p><p>查看您最近撰写或有权访问的报告。报告是否包含任何应编辑的秘密或敏感信息？</p><p><strong>一般练习</strong></p><ul><li>查看 OmniCorp 章节练习结果、您包含在问题中的证据。是否需要执行任何其他编辑？</li><li>列出应从报告中编辑的项目清单。</li></ul><p><strong>超越练习</strong></p><p>调查可能存在哪些工具可以协助编辑过程，尤其是那些可以在不影响发现证据完整性的情况下自动执行部分编辑的工具。</p><h1 id="22-建议-简介"><a href="#22-建议-简介" class="headerlink" title="22-建议 - 简介"></a>22-建议 - 简介</h1><p>一旦我们向客户解释了这个问题，他们就会了解如何解决这个问题。建议部分是我通常鼓励添加比通常级别更多的信息的另一个领域。</p><p>提供其他信息有三个主要原因：</p><ul><li>确保客户了解他们可以执行的步骤，以发现并防止再次出现相同的问题</li><li>如果需要，建议客户端在其他地方检查问题</li><li>确保可以单独解决问题（与描述一样）</li></ul><p>这里的第一点与预防性指导有关。其中一些内容可载于报告的战略建议部分。虽然这样做非常重要，但我确实发现将这些信息保留在调查结果本身中很有用，因为它可以将所有建议集中在一个地方。除此之外，它还是一个很好的提示，说明在主要建议部分要写什么（您可以扫描所有发现以查看您需要涵盖的内容）。此外，如果调查结果从报告中转移到单独的跟踪系统，执行摘要中概述的任何预防措施仍将包含在调查结果本身中。这样，这些重要的建议就不太可能被遗忘。</p><p>这里的第二点是，如果需要，给你的客户一些提示，去对评估的内容进行全面检查，以确保问题在其他地方不存在。这并不适用于所有问题（例如，环境中的单个服务缺少特定的配置设置），但在许多情况下，这将适用。一些例子包括：</p><ul><li>在大型代码库中发现的危险编程模式</li><li>在基于抽样的测试中发现的结果</li><li>在 Web 应用程序中发现的注入类型漏洞</li><li>等。</li></ul><p>如果你觉得其他地方存在某种合理的可能性，你应该建议你的客户进行一些调查。</p><p>在涉及这两个额外领域后，调查结果建议可以从报告中获取并单独使用，而不必参考报告的主要建议部分。</p><p>因此，这就引出了我建议在建议部分提出的三个要点：</p><ul><li>修复发现的内容：<ul><li>客户端应如何修正您发现的问题？</li></ul></li><li>查找其他实例：<ul><li>这个问题可能存在于其他地方吗？如果是，建议客户进行调查。</li></ul></li><li>预防性建议<ul><li>您有什么建议可以确保此问题不再发生？</li><li>如果再次发生，您有什么建议可以确保发现此问题？</li></ul></li></ul><p>您需要将所有这些要点都放在推荐部分吗？我绝对会涵盖前两个类别。正如我在整个课程中提到的，我非常赞成确保可以孤立地阅读问题，因此我会将这些信息放在调查结果中。但是，预防性建议部分可以留给执行摘要之后的建议部分。与描述中的影响和您在其中输入的信息一样，您的偏好或报告结构可能会有所不同。</p><p>在呈现方面，我通常会将所有这些信息包含在一个部分中，而不会单独指出这三个类别中的每一个，但是，我可以看到这样做的好处。这种方式将清楚地显示客户可以而且应该采取的各种方法来解决问题。</p><p>我将本课分为多个部分，涵盖了上述三个小节，用于调查结果的推荐部分，然后是包含一些示例的课程，最后是课程总结，其中包括一些关于建议部分需要考虑的注意事项。</p><p>让我们更详细地了解这些要点。</p><h1 id="23-建议-修复发现的内容"><a href="#23-建议-修复发现的内容" class="headerlink" title="23-建议 - 修复发现的内容"></a>23-建议 - 修复发现的内容</h1><p>建议部分的这一部分的内容应完全集中在客户应如何解决发现的直接问题上。如果你以前写过报告，这肯定是你习惯写的。</p><p>一些高级示例：</p><ul><li>这些可能是需要采取的步骤来修正配置问题</li><li>用于修复代码或 Web 应用程序问题的实现级别建议</li><li>关于改进现有安全功能的建议</li></ul><p>本节的内容看起来与每个问题和评估的问题大不相同，但是有一些建议可以应用于大多数问题。</p><p>现在让我们来看看这些。</p><h2 id="推荐上下文"><a href="#推荐上下文" class="headerlink" title="推荐上下文"></a>推荐上下文</h2><p>一些修复方法可以直接向客户表达，要么是因为一般建议是司空见惯的，要么是问题有如此明确的解决方案，很容易谈论。但是，在许多情况下，有些建议会受益于您对客户的额外见解和背景。这可能是他们的实现堆栈、他们的运作方式或您正在评估的具体内容。</p><p>此外，虽然您应该始终努力推荐最佳指导，但有时需要对客户做出更谨慎和深思熟虑的回应。在某些情况下，针对某个问题的建议修复要么不可行，要么需要花费大量时间和&#x2F;或精力（甚至金钱）来修复。如果您知道客户可能是这种情况，您应该考虑客户处理问题的其他方法，但这应该始终首先遵循最佳建议（无论努力或成本如何），并且其他建议应该有任何影响或缺点。</p><p>以下是几个示例：</p><p><strong>过时的第三方库</strong></p><p>考虑一个小型开发团队，该团队已经构建并维护了一个大约 10 年的应用程序。他们经常对他们的 Web 应用程序进行外部测试，但你进来是为了对底层应用程序执行他们的代码审查。虽然您发现应用程序本身大多是健壮的，但存在少量缺陷（在通常只能通过访问代码才能发现的领域），但您确实发现许多第三方库已经过时并且运行易受攻击的版本。考虑到正在使用的库的年龄以及针对它们的集体 CVE 的数量，在测试时间内验证漏洞在其应用程序中是否可利用是不可行的。</p><p>现在这里要说的显而易见的事情是：</p><blockquote><p>将第三方库更新到最新版本。</p></blockquote><p>和</p><blockquote><p>确保库在开发过程中保持最新状态。</p></blockquote><p>虽然这些应该是最终目标，但客户的现实情况是，他们无法简单地升级所有库并期望一切正常。它需要是一种缓慢而有条不紊的升级方法。客户的测试过程（代码中的单元测试（自动代码测试）和用于测试应用程序的功能和核心功能的动态测试）可能低于标准甚至缺失。如果是这种情况，那么安全地升级到更高版本的代码将变得非常困难。</p><p>因此，我们应该考虑他们的情况，同时确保我们提供最好的建议。下面可能是这样：</p><blockquote><p>查看过时和易受攻击的库，并将其升级到最新版本。考虑首先关注具有已知漏洞的库，并进一步确定这些漏洞的优先级，以发现应用程序因使用和&#x2F;或对正在运行的版本存在严重问题的库而容易受到攻击的库。</p><p>如果特定代码库由于实现方式而难以升级，则可以利用 Web 应用程序防火墙来防止利用影响库的已知漏洞的尝试。但是，这只能被视为短期缓解措施，并且应解决所有包含漏洞的过时库的升级问题。</p><p>展望未来，确保在开发过程中及时审查和更新库。理想情况下，这应该使用工具自动执行（例如 GitHub 上的 Dependabot、Trivy 或 OWASP Dependency Check）。确保跟踪主要框架版本的生命周期终止通知，以便可以提前执行任何迁移。</p></blockquote><p>在这里，我们为客户提供了一种有节制的方法，以解决可能压倒性的问题，并提供一些临时措施，这些措施可用于在他们升级解决方案时在短期内抵消一些风险。我要指出的是，我们在这里误入了预防性指导的领域，你可以看到我们如何建议他们如何阻止和防止这种情况在未来成为问题。</p><p><strong>过时和有缺陷的支付网关实施</strong></p><p>假设我们已经为一个使用传统支付网关平台进行支付的电子商务网站的客户进行了深入评估。该解决方案的架构不支持任何现代加密标准或安全身份验证方法，这使客户卡详细信息（及其个人信息）面临重大风险。</p><p>这里最好的指导显然是使用提供最新加密和身份验证标准的支付提供商来安全传输支付详细信息。以下是可能推荐的内容：</p><blockquote><p>将电子商务支付操作迁移到支持最新加密标准的提供商（用于传输层安全和现代身份验证的最低 TLS v1.2（例如，双向 TLS 与基于 API 密钥的身份验证相结合））。</p></blockquote><p>此响应为客户提供了一些有用的细节供客户调查，但从不使用 TLS 或任何身份验证且与电子商务网站具有截然不同的通信方式的旧系统的过渡可能相当可观。虽然我们必须建议他们摆脱这种薄弱的架构，必须处理硬迁移过程，但我们应该提供一些建议来限制短期内的风险。</p><p>下面是这可能是什么样子的：</p><blockquote><p>将电子商务支付操作迁移到支持最新加密标准的提供商（用于传输层安全和现代身份验证的最低 TLS v1.2（例如，双向 TLS 与基于 API 密钥的身份验证相结合））。</p><p>建议在执行迁移到新系统时，在短期内采取几个步骤来保护客户数据：</p><ul><li>请考虑对包含客户数据的未加密流量执行网络隔离，并且仅允许对特定提供商的出站访问。这可以防止攻击者轻松访问已破坏内部网络的流量。</li><li>请与当前的提供商联系，看看他们是否会将 TLS（甚至 SSL）作为短期解决方案。如果有任何形式的传输层加密，甚至是过时的版本，这将是比完全不加密更好的选择。</li><li>请与当前提供商联系，了解他们是否有任何可以在短期内使用的身份验证方法。这总比完全没有身份验证要好。</li><li>请与当前提供商联系，了解他们是否可以允许从您的环境建立 VPN 隧道，以隧道传输未加密的流量。虽然这将允许在加密隧道中通过 Internet 发送流量，但它无法解决隧道内数据本身的根本问题，该问题可能会被网络两侧的攻击者拦截。</li></ul></blockquote><p>在这里，我们保留了最初的建议，因为离开旧平台至关重要，但我们也提供了一些关于在短期内可以采取哪些措施来限制该问题的可利用性的指南，尽管是有限的。</p><hr><p>另一个重要的领域是利用我们对特定组织的了解。我们可以用它来定制特定的建议，否则这些建议会稍微通用一些。一些示例可能包括：</p><ul><li>如果 Web 服务器没有返回标头，我们可以向它们提供我们知道正在使用的 Web 服务器中配置的示例</li><li>如果我们发现一台服务器没有将日志推送到中心位置，并且我们知道中央日志服务器的位置和详细信息，我们可以提供有关如何设置的具体指南，或者至少在建议中提及这一点</li><li>如果我们知道一个团队使用某种静态代码分析工具，我们可以建议他们为这个软件制定一个自定义规则，以捕获他们代码中不良代码模式的实例。</li></ul><p>其中一些非常容易转化为调查结果，并且对客户来说非常好，因为您不仅试图将建议与他们联系起来，而且还倾听并了解了他们的环境、工具和其他服务。</p><p>通用模板发现与为适应相关客户而略有更改的模板之间存在巨大的接收差异。这真的有很大的不同。</p><h2 id="具体和可操作的建议"><a href="#具体和可操作的建议" class="headerlink" title="具体和可操作的建议"></a>具体和可操作的建议</h2><p>当谈到对客户的实际建议时，大多数人只想被告知该怎么做。在大多数情况下，这对我们来说通常很容易做到，我们应该在本节中尽可能具体和清晰。</p><p>是时候举几个例子了。</p><p><strong>弱密码策略</strong></p><p>假设我们围绕 Web 应用程序中存在的弱密码策略提出了一个问题，我们应该避免像这样含糊不清：</p><blockquote><p>改进 Web 应用程序的密码策略，使其符合行业标准。</p></blockquote><p>这是一个可悲的建议，要么会让客户摸不着头脑，不知道具体要更改什么或设置什么，还可能让他们尝试解决问题，但不是达到最佳标准。这可能会导致客户之间无休止的来回，因为他们试图正确解决问题，通常会让他们感到非常沮丧。让我们看一个更具体的建议：</p><blockquote><p>应按以下方式调整密码策略：</p><ul><li>将最小密码长度从 6 增加到至少 12。</li><li>添加对密码复杂性的要求，以下集中的字符：<ul><li>小写</li><li>大写</li><li>数字</li><li>特殊字符</li></ul></li><li>所有管理员级别用户的最小密码长度都应更改为 16。</li></ul><p>还可以考虑实现有限的密码复杂性，但使用更大的最小长度。例如，普通用户为 16，管理员用户为 24。已发现长度较长的密码明显更强。</p></blockquote><p>在这里，我们为客户提供了具体的指导，以及可能更适合他们的替代方案。这对他们来说更具可操作性，并减少了他们需要花在研究补救措施上的时间（如果他们愿意的话），这样他们就可以根据需要立即解决问题。</p><p><strong>弱密码哈希算法</strong></p><p>另一个示例可能是您发现客户端正在使用 MD5 对用户密码进行哈希处理。这显然并不理想，因为数据库泄露将允许攻击者快速恢复用户密码的明文版本，以在应用程序中进行身份验证或尝试在其他站点上的电子邮件&#x2F;用户名和密码组合。以下是一些模糊建议的示例：</p><blockquote><p>实现包含功因子和盐的现代哈希算法。</p></blockquote><p>虽然此示例给出了需要选择的哈希算法类型的一些指示，但它没有给出任何细节。此外，在没有任何指导的情况下立即提及盐和迭代将导致低于标准的实现。</p><p>这里有一些更具体、更全面的建议。</p><blockquote><p>为用户使用更现代的哈希算法。按优先顺序，最推荐的哈希算法优先：</p><ul><li>Argon2id</li><li>scrypt</li><li>bcrypt</li><li>PBKDF2</li></ul><p>这些算法提供了可配置的工作成本，可用于使试图恢复任何恢复的密码哈希的任何明文版本的攻击者速度变慢。此外，每种算法都使用盐（通常是默认情况下），这也有助于在尝试恢复哈希的明文版本时减慢攻击者的努力。这是通过在哈希处理之前向每个密码添加唯一的数据来实现的。这可以防止攻击者简单地对猜测的密码进行哈希处理，然后检查所有哈希值以查看它是否匹配，他们必须生成盐 + 猜测的哈希值。加盐还可以防止攻击者创建“彩虹表”，即预先计算的明文密码哈希值。由于使用强大显卡的密码破解软件的进步，针对较弱算法的攻击者通常不需要这种方法。</p><p>除了改进密码哈希算法外，还可以实现“辣椒”，即在哈希之前在应用程序级别将其他数据添加到密码中。与盐不同，胡椒粉对于所有密码都是相同的，必须将其排除在数据库之外才能有效。在计算期间应包含 Pepper，并安全地存储在密码保管库或 HSM 中。这大大降低了如果攻击者只能访问数据库内容，则密码被恢复的风险。</p><p>鉴于实现这些算法并确保它们尽可能安全的复杂性，请遵循 OWASP 密码存储备忘单 （<a href="https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html%EF%BC%89">https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html）</a> 中概述的指南。</p></blockquote><p>在这里，我们已经从一个非常模糊的建议变成了涵盖客户应该调查的细节。虽然我在密码哈希方面确实有很多经验，但我仍然利用优秀的资源来构建我的发现并包括对源代码的引用。通过这种方式，我简要概述了客户在实施方面可以采取的潜在选项，并参考了 OWASP 指南，以便他们调查具体情况。</p><p><strong>代码审查问题 - SQL 注入示例</strong></p><p>假设我们在 Ruby on Rails 项目中发现了一个 SQL 注入漏洞，这是由于误用了影响旧版本 Ruby（版本 3 之前）的方法所致。在这种情况下，开发人员误解了sanitize_sql方法的使用。此方法用于清理单个条件或变量，而不是整个查询字符串。</p><p>这是它的样子：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UsersController</span> &lt; <span class="hljs-title class_ inherited__">ApplicationController</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_user</span><br>    user_input = params[<span class="hljs-symbol">:email</span>]<br>    entire_query = <span class="hljs-string">&quot;SELECT * FROM users WHERE email = &#x27;<span class="hljs-subst">#&#123;user_input&#125;</span>&#x27;&quot;</span><br>    safe_query = <span class="hljs-title class_">ActiveRecord</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:Base</span>.sanitize_sql(entire_query)<br>    <span class="hljs-variable">@users</span> = <span class="hljs-title class_">User</span>.find_by_sql(safe_query)<br>    render <span class="hljs-symbol">json:</span> <span class="hljs-variable">@users</span><br>  <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>如上所示，用户的输入与使用 Ruby 的格式字符串语法的查询相结合。然后，将整个查询传递到 sanitize_sql 方法中，在该方法中，它无法进行清理，并且不会返回任何更改。然后执行此恶意查询。</p><p>处理此处建议的最佳方法是提供一个固定代码片段的示例，该代码片段已根据所分析的内容进行了轻微的调整，或者可能是从编程语言或相关框架或库文档的可信来源获得的代码片段。</p><p>有时这并不容易避免（在小编码错误的情况下），但我们不应该修复所有客户端代码并将其发送回去。最好不要在文件级别提供完整且详尽的实现级别修补程序（除非与客户的协议要求这样做，尽管这种情况很少见）。这样做可能意味着，如果您将来要执行任何补救验证，您将“标记自己的作业”。此外，您可能希望避免因建议易受攻击或损坏的实现而承担责任。这通常只会在需要对代码库进行彻底更改并且小片段通常没问题的情况下才会出现。</p><p>因此，与其更正整个文件并将其发回，不如展示一个很好的示例，说明如何安全地使用该方法或可能可用的替代选项。</p><p>在这种情况下，鼓励客户端升级到最新版本的 Ruby on Rails，并解释如何使用 ActiveRecord 的内置功能来获取数据，该内置功能将对传入的参数进行清理（从 Ruby 版本 3 开始可用）。</p><p>显示如下所示的小片段就足够了：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@users</span> = User.<span class="hljs-built_in">where</span>(<span class="hljs-attribute">email</span>: params[:email])<br>render <span class="hljs-attribute">json</span>: <span class="hljs-variable">@users</span><br></code></pre></td></tr></table></figure><p>此代码片段充当代码修复可能是什么的缩小示例，而不是受影响文件的完整副本。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>我们将在即将到来的课程中更详细地讨论这一点，但我想我会在这里提到这一点，而且这样做感觉很自然。</p><p>有些建议可能会让开发人员或工程师稍微偏离他们的舒适区，并且他们可能不太了解您推荐的概念或建议。然而，即使是在一个简单的问题上，我们也不应该假设读者会理解我们在说什么，向读者指出一些额外的资源通常是有帮助的。正因为如此，在发现中有一个体面的参考更安全、更有帮助。</p><p>如果您通常不会在问题中添加参考文献，请在撰写您认为可能被误解或误解的发现时考虑一下 - 最好将读者链接到供应商文档、已知良好的博客文章或文章，或引用一些安全材料，例如 OWASP。这将为客户提供一个很好的进一步阅读来源，以提高他们对问题的理解，限制所需的跟进次数，并增加他们在第一次尝试时正确解决问题的机会。</p><p>如果您仍然不确定何时使用参考文献至关重要，那么一个好的迹象是您是否需要查找某些内容。尽管如前所述，为了安全起见，我建议在任何问题中参考。</p><p>您将看到，我已将引用直接添加到前面密码哈希示例的文本中。这些可以通过不同的方式呈现或插入，我们也将在后面的课程中介绍这些内容。不过，在这个例子中，我需要仔细检查我的知识在密码哈希方面是否仍然是最新的，并且考虑到使用最佳选项实现正确算法的潜在复杂性，我认为参考OWASP密码存储备忘单是明智的。</p><h2 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h2><p>在一些发现中，通过示例来演示修正更容易。这就像我们已经经历过的代码审查示例，但责任和“标记自己的作业”问题更少。</p><p>让我们看几个例子，一个是基于文本的证据，另一个是基于用户界面的。</p><p><strong>没有 HttpOnly 和安全标志的会话 Cookie</strong></p><p>我在很多情况下看到的一个经典例子是缺少HTTP cookie标志。显示缺少这些内容的典型方法是显示从服务器收到的响应。</p><p>下面是一个示例：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Date</span>: Thu, <span class="hljs-number">08</span> Feb <span class="hljs-number">2024</span> <span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT<br><span class="hljs-attribute">Server</span>: Apache/<span class="hljs-number">2</span>.<span class="hljs-number">4</span>.<span class="hljs-number">41</span> (Ubuntu)<br><span class="hljs-attribute">Content</span>-Type: text/html; charset=UTF-<span class="hljs-number">8</span><br><span class="hljs-attribute">Content</span>-Length: <span class="hljs-number">1234</span><br><span class="hljs-attribute">Connection</span>: keep-alive<br><span class="hljs-attribute">Keep</span>-Alive: timeout=<span class="hljs-number">5</span>, max=<span class="hljs-number">100</span><br><span class="hljs-attribute">X</span>-Powered-By: PHP/<span class="hljs-number">7</span>.<span class="hljs-number">4</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">Set</span>-Cookie: sessionId=REDACTED; Path=/<br><span class="hljs-attribute">Cache</span>-Control: no-cache, private<br><span class="hljs-attribute">X</span>-Content-Type-Options: nosniff<br><span class="hljs-attribute">X</span>-Frame-Options: SAMEORIGIN<br><span class="hljs-attribute">X</span>-XSS-Protection: <span class="hljs-number">1</span>; mode=block<br><span class="hljs-attribute">Strict</span>-Transport-Security: max-age=<span class="hljs-number">31536000</span>; includeSubDomains<br><span class="hljs-attribute">SNIP</span><br></code></pre></td></tr></table></figure><p>这里的关键线是：</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq"><span class="hljs-keyword">Set</span>-Cookie: sessionId= REDACTED; <span class="hljs-keyword">Path</span>=/<br></code></pre></td></tr></table></figure><p>在建议中，我们解释了设置 Secure 和 HttpOnly 标志，并展示了一个示例，说明如果正确修正，HTTP 响应中的 Set-Cookie 将是什么样子：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Set-Cookie: <span class="hljs-attribute">sessionId</span>=abc123; <span class="hljs-attribute">Path</span>=/; Secure; HttpOnly<br></code></pre></td></tr></table></figure><p>如果还可以以某种方式突出显示 Secure 和 HttpOnly，这将使读者清楚地了解要修正的问题需要存在哪些内容（粗体、不同颜色或突出显示）。</p><p>让我们转到一个 UI 示例。</p><p><strong>已启用基于 TCP&#x2F;IP 的 NetBIOS</strong></p><p>当 TCP&#x2F;IP 上的 NetBIOS 处于活动状态时，它允许攻击者拦截网络内的广播请求。然后，这些攻击者可以通过响应这些请求来伪装成合法服务，从而可能诱骗网络设备与它们通信。在此通信过程中，设备可能会尝试对攻击者控制的服务进行身份验证，从而无意中发送凭据。此漏洞可被利用进一步破坏网络或伪装成受感染的计算机或用户执行操作。</p><p>若要解决此问题，客户端应禁用 TCP&#x2F;IP 上的 NetBIOS。在建议中，我们应该解释进入正确菜单的步骤，并举例说明禁用的外观。虽然这是一个简单的例子，但如果客户正在努力进入正确的菜单，它可能会对客户有所帮助（请注意，我是如何在屏幕截图中显示大多数窗口的旅程的）。</p><p>在这里：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231949166.png" alt="img"></p><p>对于大多数基于 UI 的问题，可以采用这种类型的方法，尽管在这种情况下，有时为客户提供其他选项会有所帮助，例如一个小脚本来解决问题（如果你已经彻底测试了它，并且你知道它有效）。这就像您可能会发现云配置存在问题，并且可以在 Web UI 中应用修复程序，也可以通过供应商提供的命令行工具应用。</p><hr><p>接下来，让我们看看当我们认为需要指导客户检查发现的其他实例时，我们应该发表哪些评论。</p><h1 id="24-建议-查找其他实例"><a href="#24-建议-查找其他实例" class="headerlink" title="24-建议 - 查找其他实例"></a>24-建议 - 查找其他实例</h1><p>这部分建议很容易涵盖。理想情况下，这只是一些一般性建议，如果适用的话，在其他地方寻找相同的问题。</p><p>在我们进入一些示例之前，重要的是要提到基于样本的测试。通过基于抽样的测试，我们被要求审查许多“事物”的少量内容。这些可能是 AWS 帐户、IP 地址范围、服务器构建等。这里的目标通常是通过审查更广泛遗产的代表性选择来全面了解安全性。我为什么要提到这个？好吧，每当我们执行基于样本的测试时，我们都应该假设还有其他“事情”没有被我们审查过，需要补救。这对某些客户来说可能是显而易见的，但根据经验，如果没有提示，此检查通常会被遗忘（完全错过了基于抽样的测试的重点）。</p><p>另一方面，即使我们不执行基于样本的评估，我们也应该鼓励客户审查他们的服务&#x2F;代码&#x2F;环境，以检查是否存在给定漏洞的更多实例。这既是因为我们可能无法检查它们，要么是因为它们处于更好的位置找到它们（由于评估的时间限制或进入其他地方）。</p><p>说到这里，让我们看几个例子。</p><p><strong>云配置评估问题</strong></p><p>假设您对 2 或 3 个云环境执行基于采样的审查，其中您发现了默认防火墙配置。你可能只是有一句话说（如果它是 Azure）：</p><blockquote><p>查看其他 Azure 订阅，以检查此问题的进一步实例。</p></blockquote><p><strong>代码审查问题</strong></p><p>如果你正在执行代码审查，并且你发现了一个危险的编程模式或使用了危险的方法，我们应该建议客户端检查他们可能拥有的其他代码库。以下是您可能会说的：</p><blockquote><p>请考虑查看其他代码库，以检查此问题的进一步实例。</p></blockquote><p><strong>Web 应用程序或 API 问题</strong></p><p>在执行 Web 应用程序评估时，如果发现其他应用程序中可能存在某些内容，您可能会说：</p><blockquote><p>请考虑查看类似的应用程序是否存在此问题。</p></blockquote><p><strong>基础设施评估</strong></p><p>如果您扫描了网络并发现了几个影响主机的问题，但您知道其他网络中可能还有更多问题，您可能会说：</p><blockquote><p>请考虑扫描环境中的所有相关区域，以检查是否存在此问题。</p></blockquote><p>正如你所看到的，这些句子写起来非常简单，实际上只是提示客户去检查问题的其他实例。对我们来说，检查问题的其他实例似乎是一件好事，但是，我从经验中知道这不会发生，因此我们应该尽最大努力将客户推向正确的方向。</p><p>这些评论非常适合基于样本的测试。但是，如果您没有执行基于样本的测试，但观察到其他区域、代码存储库、环境等可能存在此问题，则应写类似的句子 您可以随时询问您的客户是否有其他可能适用于给定发现的领域。</p><hr><p>接下来，让我们看看预防性建议，以及它们如何帮助客户在发现再次出现时发现它们，或完全阻止它们。</p><h1 id="25-建议-预防性建议"><a href="#25-建议-预防性建议" class="headerlink" title="25-建议 - 预防性建议"></a>25-建议 - 预防性建议</h1><p>建议的这一部分有几个目的：</p><ul><li>如果建议不平凡、昂贵或需要大量时间，您能为客户提供什么建议？您能推荐一种多阶段方法吗？</li><li>客户应该怎么做才能确保此发现不会再次出现？</li><li>如果问题再次出现，客户可以做些什么来确保他们发现问题？</li></ul><p>我们在“推荐上下文”中介绍了第一点，测试人员应该仔细考虑某些发现的补救措施。这通常保留给修正可能需要较长时间的情况，或者应考虑多种选择。这一切都是为了权衡各种选择以及如何管理风险。</p><p>本节将重点介绍此列表中的后两点。在这里，我们希望确保客户在评估后继续前进，并且不会再次发现自己处于同样的情况。</p><p>让我们看一下前面的“查找其他实例”部分中的一些示例，其中包含一些更具体的信息：</p><p><strong>云配置评估问题</strong></p><p>假设此问题与禁用服务器端加密的 AWS SQS 队列有关。</p><blockquote><p>今后，请确保定期扫描云环境，以识别任何禁用了服务器端加密的 SQS 队列（ScoutSuite 等工具可用于此目的）。此外，请考虑实施护栏以防止创建未加密的 SQS 队列。这可以使用 AWS Identify and Access Management （IAM） 策略或服务控制策略 （SCP） 来实现。</p></blockquote><p>通过建立设置强默认值的策略，或定期运行工具来检测有问题的实例，可以避免许多云问题。在这里，我们向客户推荐了这两种产品。</p><p><strong>代码审查问题</strong></p><p>假设我们发现开发人员使用了一种危险的 React 框架方法，这可能会导致跨站点脚本。以下是我们如何建议他们将来停止在生产代码中使用它：</p><blockquote><p>开发人员应该利用代码 linter 来确保在提交代码之前发现 React 方法（包括 ‘dangerouslySetInnerHTML’）的危险用法。此外，在合并到生产代码之前，应执行自动化测试，这应该包括基本的静态代码分析。除了自动控制之外，还应制定安全编码指南，以强调使用“dangerouslySetInnerHTML”以及框架支持的任何其他已知危险方法的危险。</p></blockquote><p>在这里，我提供了三种方法来限制此问题再次出现的可能性：</p><ul><li>让开发人员在将代码提交到源代码管理系统之前发现危险实例</li><li>自动扫描开发管道中的易受攻击或危险代码，以防止其进入生产环境</li><li>要求客户考虑制作一个安全的编码标准文档，以告知开发人员 React 框架的危险区域</li></ul><p><strong>Web 应用程序或 API 问题</strong></p><p>对于下一个示例，让我们考虑一个场景，其中我们发现了一个返回所有对象数据的 API 端点，包括前端应用程序不需要的字段，例如用户的密码哈希。从预防性修复的角度来看，我们可能要说以下几点：</p><blockquote><p>确保所有未来 API 端点的实现都经过同行评审，以确保仅将所请求对象的所需数据发送到客户端。请考虑使用自定义静态分析规则或作为代码审查过程的一部分来阻止任何返回整个对象而不是指定必填字段的代码。添加或创建安全编码标准，以警告开发人员将整个对象返回给客户端的危险。</p></blockquote><p>请注意，这与代码审查问题有相似之处，并提供静态分析方法和安全编码指南作为此问题的预防性解决方案。在这里，我还提到了代码的同行评审，因为这些发现可能会被一些静态分析工具遗漏，而在某些编码框架中很难发现。</p><p><strong>基础设施评估</strong></p><p>假设我们执行了基础架构评估，并发现了许多在环境中的 Linux 主机上运行的 telnet 实例。以下是我们可能的建议：</p><blockquote><p>确保在网络内执行漏洞扫描，以发现正在运行的任何 telnet 实例，以便对其进行修正。此外，请考虑更新金牌版本或配置管理，以确保环境中的新主机和现有主机上不存在 telnet 服务器。</p></blockquote><p>为了完全阻止此问题出现，网络管理员可以修改任何黄金版本或服务器配置管理。但是，鉴于在网络上创建配置仍然很容易，因此必须强调应定期执行漏洞扫描。</p><p>您会注意到，建议的这些部分可以用通用方式编写，这非常适合模板化。如果您决定对这些模板进行模板化，请始终记住，如果可以的话，应该阅读和自定义它们。由于预防性建议可能与组织或平台范围的政策、程序和实施有关，因此应抓住任何机会为特定客户定制建议的这些部分。</p><hr><p>接下来，让我们看一些例子，说明如何把我们所经历的一切放在一起来写一个建议。</p><h1 id="26-建议-示例"><a href="#26-建议-示例" class="headerlink" title="26-建议 - 示例"></a>26-建议 - 示例</h1><p>现在，让我们以我们在这里介绍的内容为例，看看为我们在描述课程中涵盖的问题编写建议部分。</p><h2 id="可公开访问的-S3-存储桶-2"><a href="#可公开访问的-S3-存储桶-2" class="headerlink" title="可公开访问的 S3 存储桶"></a>可公开访问的 S3 存储桶</h2><p>让我们回顾一下问题的描述：</p><blockquote><p><strong>描述</strong></p><p>发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。利用这些信息，攻击者可以尝试通过利用上述外部漏洞或根据工资单信息的内容对用户进行网络钓鱼和密码猜测攻击来访问互联网。如果攻击者得逞，无论是获得对生产网络的访问权限还是破坏用户的访问权限，内部网络上的敏感客户信息都可能面临泄露的风险。</p><p>aws 命令行工具的以下命令输出显示了存储在存储桶中的文件。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p>这两个文件都可以下载和检查：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231950809.png" alt="img"></p><p>confidential_report.pdf内容</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231950124.png" alt="img"></p><p>employee_data.xlsx内容</p><p>机密报告包含以下可外部利用的漏洞列表，所有这些漏洞都在此评估期间存在：</p><ul><li>使用可猜测凭据向 Internet 公开的 RDP</li><li>使用匿名绑定向 Internet 公开的 LDAP</li><li>暴露的 Apache Tomcat 过时且易受攻击</li></ul><p>获取此文档访问权限的攻击者将能够立即确认这些问题的可利用性，因为它们都是面向 Internet 的，并且可能能够透视到内部网络。</p><p>工资单电子表格不仅显示了所有员工的当前工资和奖金，而且还泄露了大量可用于欺诈目的的信息，以及对 OmniCorp 进行其他攻击（例如密码猜测攻击或网络钓鱼）。电子表格中包含以下敏感信息：</p><ul><li>名字和姓氏</li><li>工资</li><li>家庭住址</li><li>个人电子邮件地址</li><li>个人电话号码</li></ul></blockquote><p>我们已经在本课中谈到了基于云的问题，因此其中一些看起来非常熟悉。</p><p>以下是您可以编写的内容作为本节的建议：</p><blockquote><p><strong>建议</strong></p><p>重新配置 S3 存储桶以禁用公有访问。</p><p>这可以从管理控制台执行：</p><ol><li>转到 Amazon S3 控制面板。</li><li>单击存储桶名称 omnicorp-private-files。</li><li>转到“权限”选项卡。</li><li>单击 Block public access （bucket settings） （阻止公有访问（存储桶设置）。</li><li>选中所有复选框以阻止新的公共 ACL 并删除现有的公共访问。</li><li>点击保存。</li></ol><p>或使用 AWS cli 工具：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">aws s3api put-<span class="hljs-keyword">public</span>-<span class="hljs-keyword">access</span>-<span class="hljs-keyword">block</span> --bucket omnicorp-<span class="hljs-keyword">private</span>-files --<span class="hljs-keyword">public</span>-<span class="hljs-keyword">access</span>-<span class="hljs-keyword">block</span>-configuration <span class="hljs-string">&quot;BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true&quot;</span><br></code></pre></td></tr></table></figure><p>鉴于两个公开文件中都存在高度敏感的数据，应查看与存储桶相关的任何访问日志。</p><p>对云环境执行定期扫描，以发现将来可公开访问的 S3 存储桶（可以利用 ScoutSuite 等工具）。此外，请考虑实施护栏以防止创建不安全的 S3 存储桶（例如可公开访问、不加密等）。这可以使用 AWS Identity and Access Management （IAM） 策略或服务控制策略 （SCP） 来实现。</p></blockquote><p>首先，我们介绍了客户端需要做什么来解决这个问题，这只是更正存储桶权限。为此，UI 和 CLI 选项都已提供。客户要考虑的另一件事是了解这些文件之前是否被访问过，如果是这种情况，他们可能需要采取进一步的步骤。因此，我建议对日志进行调查。</p><p>最后，我们提供一些建议，以确保这种情况不会再次发生，如果发生这种情况，我们建议采取发现方法。这以策略更改和使用安全工具扫描 AWS 账户的形式出现。</p><h2 id="Linux-服务器上的弱密码策略-2"><a href="#Linux-服务器上的弱密码策略-2" class="headerlink" title="Linux 服务器上的弱密码策略"></a>Linux 服务器上的弱密码策略</h2><p>让我们提醒自己发现描述：</p><blockquote><p><strong>描述</strong></p><p>环境中 Linux 服务器上的帐户配置了用户名和密码组合。内部网络上的攻击者可能会使用基本的用户名和密码猜测攻击来获得访问权限。虽然受影响的用户是管理员，这将导致主机完全受损，但主机未被使用，并且不包含对攻击者有用的数据或凭据材料。环境中没有其他主机受此问题的影响。</p><p>成功登录受影响的 Linux 服务器如下所示：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">$ ssh admin@<span class="hljs-number">192.168.1.122</span>.com<br>admin@<span class="hljs-number">192.168.1.122</span>.com&#x27;s password: password<br>Welcome to <span class="hljs-number">192.168.1.122</span>.com!<br>Last login: Sun Jan <span class="hljs-number">29 09:00:01</span> <span class="hljs-number">2024</span> from <span class="hljs-number">192.168.1.122</span><br>admin@<span class="hljs-number">192.168.1.122</span>:~$<br></code></pre></td></tr></table></figure></blockquote><p>同样，这个问题可以用与我们在本课中已经介绍过的例子类似的方法来解决。让我们看看它可能是什么样子：</p><blockquote><p><strong>建议</strong></p><p>如果主机未使用，请停用。</p><p>如果主机有计划，则可以通过利用 libpam-pwquality 软件包来增加密码策略。以下是为此涉及的步骤（请注意，需要进行测试以确保这在所有系统上都有效）：</p><p>安装软件包：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> update<br>sudo apt-<span class="hljs-built_in">get</span> install libpam-pwquality<br></code></pre></td></tr></table></figure><p>编辑 &#x2F;etc&#x2F;pam.d&#x2F;common-password 文件并编辑以下行：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">password        requisite                       pam_pwquality.so <span class="hljs-attribute">retry</span>=3 <span class="hljs-attribute">minlen</span>=16 <span class="hljs-attribute">dcredit</span>=-1 <span class="hljs-attribute">ucredit</span>=-1 <span class="hljs-attribute">lcredit</span>=-1 <span class="hljs-attribute">ocredit</span>=-1<br></code></pre></td></tr></table></figure><p>The example above enforces the following password complexity:</p><ul><li>minlen&#x3D;16: Minimum password length.</li><li>dcredit&#x3D;-1: Require at least one digit.</li><li>ucredit&#x3D;-1: Require at least one uppercase letter.</li><li>lcredit&#x3D;-1: Require at least one lowercase letter.</li><li>ocredit&#x3D;-1: Require at least one special character.</li></ul><p>要确保 SSH 服务器正在使用此 PAM 模块，请编辑 &#x2F;etc&#x2F;ssh&#x2F;sshd_config 并确保将 UsePam 设置为 Yes。可能需要重新启动 SSH 服务器才能生效。</p><p>如果正在使用金牌版本，或者更广泛的环境处于配置管理之下，请考虑查看密码策略集并按照上述准则增加密码策略集。密码策略的实现可能因 Linux 发行版和其他操作系统而异。虽然此方法可能有助于保护本地帐户，但对于环境中的任何中央身份验证提供商（例如 LDAP 服务），请考虑查看密码策略以确保其符合上述建议。</p></blockquote><p>在这里，我们首先简单地说明，如果不需要主机（团队说它没有使用），最简单的补救措施是从网络中删除盒子。这是他们需要保护的服务器。</p><p>如果确实需要保留，则给出了如何在服务器上应用所需强化的示例。关于测试这是否适用于所有服务器的需要，给出了一个适当的警告。此外，环境中的身份验证可能并不总是特定主机的本地身份验证（中央身份验证系统要好得多），因此这只是一个示例。</p><p>在预防性建议方面，我们已经提到他们应该更新他们的黄金服务器版本或任何配置管理系统，以确保主机得到适当的强化。此外，如果环境中的其他位置正在使用中央身份验证系统，则应检查它是否具有合适的密码策略集。</p><h2 id="Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致-1"><a href="#Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致-1" class="headerlink" title="Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致"></a>Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</h2><p>以下是描述的提醒：</p><blockquote><p><strong>描述</strong></p><p>MS17-010 漏洞会影响 Windows Server 消息块协议（1.0 版），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。但是，由于这会影响 Windows 域控制器，因此可以访问所有用户的所有凭据材料（以哈希或加密格式）。</p><p>由于这是整个环境的域控制器，并且是环境中通过 LDAP 提供身份验证的主要服务，因此入侵将影响生产域中所有连接的服务器和服务。</p><p>Nessus 的以下结果显示了这一发现：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Nessus Scan Report:</span><br><span class="hljs-attr">Host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span><br><span class="hljs-attr">OS:</span> <span class="hljs-string">Windows</span> <span class="hljs-string">Server</span> <span class="hljs-number">2019</span><br><span class="hljs-attr">Vulnerability:</span> <span class="hljs-string">MS17-010</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Critical</span><br><span class="hljs-attr">Description:</span> <span class="hljs-string">Security</span> <span class="hljs-string">Update</span> <span class="hljs-string">for</span> <span class="hljs-string">Microsoft</span> <span class="hljs-string">Windows</span> <span class="hljs-string">SMB</span> <span class="hljs-string">Server</span> <span class="hljs-string">(4013389)</span><br><span class="hljs-attr">Severity:</span> <span class="hljs-string">Critical</span><br></code></pre></td></tr></table></figure><p>虽然服务器在评估期间未被利用，但使用了 Metasploit 来确认服务器是否可能易受攻击：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Scanning</span> for vulnerabilities...<br>[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Host</span> is likely <span class="hljs-symbol">VULNERABLE</span> to <span class="hljs-symbol">MS17</span><span class="hljs-number">-010</span>! - <span class="hljs-symbol">Windows</span> <span class="hljs-number">7</span> <span class="hljs-symbol">Professional</span> <span class="hljs-number">7601</span> <span class="hljs-symbol">Service</span> <span class="hljs-symbol">Pack</span> <span class="hljs-number">1</span> (<span class="hljs-number">64</span>-bit)<br>[*] <span class="hljs-symbol">Scanned</span> <span class="hljs-number">1</span> of <span class="hljs-number">1</span> hosts (<span class="hljs-number">100</span><span class="hljs-comment">% complete)</span><br>[*] <span class="hljs-symbol">Auxiliary</span> module execution completed<br></code></pre></td></tr></table></figure></blockquote><p>此问题的补救措施是更新主机和禁用 SMB 版本 1 的组合。让我们来看看这个：</p><blockquote><p><strong>建议</strong></p><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关此漏洞的更多详细信息，请参阅 <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p><p>如果无法修补漏洞，缓解措施可能是禁用 SMB 版本 1 - 这是因为 MS17-010 仅在 SMB 服务运行版本 1 时才会影响它。但是，应该注意的是，禁用 SMB 版本 1 也应作为完全修正此问题的一部分执行，因为它的使用存在许多漏洞。有关详细信息，请参阅“正在使用的 SMB 版本 1”结果。</p><p>查看网络中不在此评估范围内的任何区域，以查看是否存在此漏洞。</p><p>展望未来，确保在整个网络中执行漏洞扫描，以便及时发现和修复关键问题。查看环境的修补过程和过程，以确保及时修补关键漏洞。</p></blockquote><p>首先，我们介绍了主要建议，即确保主机得到更新。如果由于某种原因这不简单，我们建议禁用 SMB 版本 1。关于缓解措施，您可能可以在这里写更多内容，但我宁愿将重点更多地放在解决问题上，而不是提及多种解决方法。正因为如此，我指出了如何禁用 SMB 版本 1 作为此问题补救措施的一部分（我在虚构报告的其他地方提出了这个问题，以涵盖此版本的 SMB 协议的使用）。</p><p>鉴于漏洞的性质，以及客户端明显糟糕的修补过程，我建议他们在网络的其他地方寻找这个问题。</p><p>最后，我们提到了漏洞扫描的要求，以便在网络上出现未修补的主机时可以再次发现问题，以及查看环境修补策略的建议。MS17-010 现在不应该真正出现在环境中。</p><h2 id="不带身份验证的-API-端点"><a href="#不带身份验证的-API-端点" class="headerlink" title="不带身份验证的 API 端点"></a>不带身份验证的 API 端点</h2><p>让我们再次回顾一下描述：</p><blockquote><p><strong>描述</strong></p><p>发现了一个 API 端点，该端点返回了平台上所有用户的数据，并且无需身份验证即可访问。如果攻击者发现端点，则返回的数据将能够用于目标平台用户。这可能以密码猜测攻击、网络钓鱼或在其他 API 调用中利用其用户 ID 的形式出现。这些攻击不仅可能导致访问用户的敏感信息，而且这些信息的泄露可能会构成具有GDPR影响的隐私泄露。任何以经过身份验证的用户身份检查流量的攻击者都可能发现此漏洞，这意味着它更有可能被系统用户发现，而不是被外部攻击者随机发现。</p><p>在评估期间，观察到以下 API 调用，该调用检索到的信息随后将放置在用户的个人资料页面上：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/user/profile/1</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>根据 REST 命名方案的构造方式，不带标识符后缀的 URL 通常会返回与对象类型（在本例中为配置文件）关联的所有对象。如下图所示，这返回了所有用户的数据：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">json</span><br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: &quot;1&quot;, &quot;name&quot;: &quot;John REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&quot;&#125;, &#123;&quot;id&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Jane REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&#125;]&#125;<br></code></pre></td></tr></table></figure><p>虽然这本身就是一个重大问题，但执行了另一项检查，以查看终结点是否无需身份验证即可使用。这是通过删除请求中发送的 API 令牌来实现的，并且仍然返回来自服务器的响应，表明不需要身份验证：</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;, &#123;&quot;id&quot;: <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jane REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;]&#125;<br></code></pre></td></tr></table></figure></blockquote><p>此 Web 应用程序问题将涉及我们在其他地方介绍的一些主题。让我们看看如何解决这个问题：</p><blockquote><p><strong>建议</strong></p><p>查看解决方案中的 &#x2F;api&#x2F;users&#x2F;profile 终结点及其用例。如果不需要服务器返回所有用户，则应将其从应用程序中删除。如果平台的管理员用户需要它，则应围绕端点进行适当的身份验证和访问控制，以便只有管理员用户才能从此端点检索数据。</p><p>查看所有 API 端点，以确保返回或修改的数据只有在用户登录或经过身份验证后才能访问的任何端点。同样，请查看 API 端点以确认是否设置了返回所有对象的任何端点，因为代码库中的其他地方可能存在类似的疏忽。</p><p>确保在允许将代码合并到生产代码之前执行的代码审查过程经过仔细审查，特别是围绕引入新终结点或修改现有终结点。请考虑创建动态测试，以检查对不应具有的 API 端点的匿名访问，以及检查返回所有不应配置的对象的 API 端点。最后，考虑针对代码库运行任何适用的静态分析工具。一些特定于框架的工具可能能够突出显示这些问题。</p></blockquote><p>在这里，我们指出这样一个事实，即可能不需要这种泄露所有用户信息的 API 方法，如果不是，则应将其删除。如果需要（并且唯一的逻辑原因可能是管理员用户），则终结点应仅限于管理员用户，并且需要身份验证。</p><p>鉴于这些问题通常很难从代码角度（取决于实现或框架）发现，建议客户端在此处查找这两个问题的其他实例是有意义的：缺少身份验证，以及返回特定类型资源的整个对象。</p><p>最后，突出显示了代码审查过程，以建议将来在实现新终结点时执行仔细审查。此外，还要为终结点编写测试，以检查经过身份验证的终结点是否意外变为匿名，以及检查不应返回所有内容的终结点是否不返回。最后，我提到静态分析。措辞有点凹陷，因为这可能是扫描仪发现的一个非常微妙的错误，但使用一些工具是可能的。</p><h2 id="在论坛软件上存储跨站点脚本-2"><a href="#在论坛软件上存储跨站点脚本-2" class="headerlink" title="在论坛软件上存储跨站点脚本"></a>在论坛软件上存储跨站点脚本</h2><p>最后一个例子！让我们回顾一下调查结果说明：</p><blockquote><p><strong>描述</strong></p><p>OmniCorp 用于协助客户支持请求的论坛软件容易受到存储的跨站点脚本的影响。此漏洞影响了论坛帖子页面上的评论部分，任何恶意注入的代码都会对访问受影响页面的任何用户运行。攻击者可以利用此漏洞破坏用户论坛会话（包括论坛版主或管理员），甚至提供虚假的登录表单，试图窃取用户的生产凭据。如果获取了用户凭据，则可能导致攻击者获得对敏感用户数据的访问权限。此漏洞的攻击复杂度非常低，因为没有防御性编码，使攻击者更容易利用;唯一的要求是用户访问受影响的论坛帖子。虽然只有该平台的用户可以利用这个问题，但鉴于互联网上的任何人都可以自行注册和使用该平台，这是没有意义的。虽然在托管论坛的 Web 服务器上安装了 Web 应用程序防火墙，但它当前并未运行。但是，即使启用了此问题，它也可能无法阻止所有利用此问题的尝试。</p><p>存储的跨站点脚本是一种漏洞，Web 应用程序未对不受信任的输入执行足够的输入验证或清理，或者未对值执行足够的输出编码。其结果是，应用程序（在数据库、日志或其他系统中）提交并随后存储的恶意信息随后被反映并合并到生成的网页中。在跨站点脚本的情况下，JavaScript 被发送到服务器、存储并返回到用户的浏览器，并执行以执行各种恶意操作。</p><p>利用跨站点脚本漏洞存在一系列可能性，其中一些包括：</p><ul><li>在浏览器会话中运行加密矿工</li><li>尝试窃取经过身份验证的页面上特定于用户的会话令牌或内容</li><li>注入虚假表格供用户填写，以试图窃取信息（例如，用于收集凭据的登录表格）</li><li>在用户不知情的情况下在用户上下文中执行操作（例如，将恶意内容发布到论坛）</li><li>显示恶意内容</li></ul><p>鉴于利用此漏洞的方式多种多样，此问题会严重影响任何处理敏感数据的应用程序，因为它更有可能被盗、修改或删除。</p><p>以下 HTTP 请求和响应显示了 OmniCorp 论坛应用程序软件接受的基本 JavaScript 的注入。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/1/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-attribute">postId</span>=<span class="hljs-number">42</span>&amp;comment=%<span class="hljs-number">3</span>Cscript%<span class="hljs-number">3</span>Ealert(&#x27;XSS&#x27;)%<span class="hljs-number">3</span>C%<span class="hljs-number">2</span>Fscript%<span class="hljs-number">3</span>E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br></code></pre></td></tr></table></figure><p>以下 HTTP 请求和响应显示服务器作为可在用户浏览器会话中运行的可执行 JavaScript 返回的有效负载。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/forum/post/1/comments</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;XSS&#x27;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>下图显示了正在执行的有效负载：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231949643.png" alt="img"></p><p>正在执行的 Omnicorp 存储的跨站点脚本</p><p>创建概念验证 JavaScript 有效负载以生成以下 OmniCorp 登录表单。这将显示在请求的论坛帖子的顶部，以提示输入用户的凭据。提交后，用户的凭据将被发送到攻击者控制的服务器，然后帖子将变得可见。</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231949127.png" alt="img"></p><p>假 OmniCorp 登录屏幕</p><p>可以在附录第 5.2 节中找到虚假登录概念证明 HTML 和 JavaScript 有效负载的完整副本，以及使用的 HTTP 请求和响应。</p></blockquote><p>另一个 Web 应用程序问题，此处的方法将与上一个问题有相似之处。以下是您可以编写的内容作为本节的建议：</p><blockquote><p><strong>建议</strong></p><p>防止跨站点脚本需要多种方法来确保应用程序保持安全：</p><ul><li>不受信任数据的服务器端验证</li><li>用户提供数据的输出编码</li></ul><p>应验证发送到服务器的所有数据，以确保它不包含意外类型，并且内容是预期的。当服务器需要自由范围的文本时，对这些数据进行验证可能更具挑战性。在这些情况下，可以在将特定字符存储在数据库中之前对其进行 HTML 编码。这将确保在客户端请求时以编码格式返回它们。</p><p>在为客户端构建页面时，必须确保返回的所有变量都经过适当的编码。许多现代前端框架将自动执行编码，但在使用应用程序外部任何资源中的值时仍应小心，即使它应被视为受信任的。</p><p>使用编码对应项进行编码的关键值包括：</p><table><thead><tr><th>字符</th><th>编码版本</th></tr></thead><tbody><tr><td>&amp;</td><td>&amp;</td></tr><tr><td>&lt;</td><td>&lt;</td></tr><tr><td>&gt;</td><td>&gt;</td></tr><tr><td>“</td><td>“</td></tr><tr><td>‘</td><td>&#x27;</td></tr></tbody></table><p>如果服务器返回包含 HTML 的内容，则可以使用 DOMPurify 来剥离潜在的恶意内容，并且只允许安全的 HTML 标记和属性。如果使用，此库必须保持最新状态。</p><p>对于此应用程序，服务器返回的注释至少应是 HTML，这将导致以下响应：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-symbol">&amp;lt;</span>script<span class="hljs-symbol">&amp;gt;</span>alert(<span class="hljs-symbol">&amp;#x27;</span>XSS<span class="hljs-symbol">&amp;#x27;</span>)<span class="hljs-symbol">&amp;lt;</span>/script<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果使用 DOMPurify，恶意脚本标记也将被删除。</p><p>有关跨站点脚本防护和 DOMPurify 使用的更多信息，请访问 OWASP 网站 （<a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html%EF%BC%89%E3%80%82%E6%AD%A4%E5%A4%96%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%BA%94%E7%94%A8">https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html）。此外，可以应用</a> Web 服务器强化，使攻击者更难通过 Content-Security-Policy 标头 （<a href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html%EF%BC%89">https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html）</a> 利用跨站点脚本 - 请注意，这不会解决任何潜在问题，应始终实施完整修复。</p><p>查看 Web 应用程序代码的其余部分，以检查是否在其他地方使用了类似的编码模式，这可能会导致跨站点脚本编写。</p><p>开发人员应在提交代码之前利用代码 linter 来发现潜在的危险编码模式和函数用法。此外，在合并到生产代码之前，应执行自动化测试，这应该包括基本的静态分析安全测试。除了自动控制之外，如果尚未创建安全编码指南，则应制定突出框架支持的危险方法的安全编码指南。如果当前工具无法找到该漏洞，请调查是否可以编写自定义规则来发现有问题的 Code Pattern 的未来实例，或者查找可能能够发现该漏洞的其他工具。</p></blockquote><p>这是一个相当大的建议，如果您必须自己编写，您应该查看模板;你不想一遍又一遍地写这个！</p><p>首先，我们谈到了修复跨站点脚本所需的方法。在非常简短的概述之后，我们给出了一个固定版本可能是什么样子的示例。参考文献在这里至关重要，因为这对开发人员来说可能很复杂（取决于他们的前端和后端框架是用什么编码的），所以建议让他们阅读关于解决此类问题的更全面的指南，但确保我们触及基础知识很重要。</p><p>像往常一样，我们建议他们查看他们的代码库，寻找可能导致跨站点脚本的类似编码模式（你永远不知道你是否遗漏了什么）。</p><p>最后，我们介绍了他们可以做些什么来阻止这些问题再次出现。鉴于这不是代码审查，我们对底层实现的了解有限。因此，我们只能提供高层次的指导。这主要包括我们以前经历过的建议，但更笼统。</p><hr><p>接下来，让我们以一些注意事项结束建议课程，并对我们所涵盖的内容进行最终总结。</p><h1 id="27-建议-注意事项和摘要"><a href="#27-建议-注意事项和摘要" class="headerlink" title="27-建议 - 注意事项和摘要"></a>27-建议 - 注意事项和摘要</h1><p>在为某些部分编写内容时，我想提出几件事以供考虑。现在让我们来看看这些。</p><h2 id="“查找其他实例”建议的适用性"><a href="#“查找其他实例”建议的适用性" class="headerlink" title="“查找其他实例”建议的适用性"></a>“查找其他实例”建议的适用性</h2><p>有时这些评论根本不适用。这些将适用于以下情况：</p><ul><li>只有“事物”的一个实例被发现：<ul><li>唯一系统的单个设置配置错误</li><li>Web 应用程序、服务、代码库、网络或环境中缺少的单个功能或特性</li></ul></li><li>您以非常高的置信度发现了给定问题的所有实例<ul><li>您可以访问给定评估类型的所有实例（外部基础结构、内部基础结构、代码库、云环境等）</li></ul></li></ul><p>就我个人而言，只有当我确定它们不可能存在于其他地方时，我才会避免使用这些评论。这通常意味着它们出现在我对大型组织进行评估的调查结果中，很明显我们没有评估所有内容。这要么是因为我们受到范围的限制，要么是因为与我们合作的客户团队不知道其他团队管理的领域是否可能存在相同的问题。</p><h2 id="系统性发现和“寻找其他实例”"><a href="#系统性发现和“寻找其他实例”" class="headerlink" title="系统性发现和“寻找其他实例”"></a>系统性发现和“寻找其他实例”</h2><p>可能会出现以下情况：您发现整个环境、应用程序、服务或代码库中都存在问题，并且无法找到或确认每个实例。</p><p>示例可能包括：</p><ul><li>利用大型 Web 应用程序上的 SQL 注入漏洞并非易事</li><li>在代码审查中使用危险的编程方法，偶尔会导致存在漏洞</li></ul><p>在这些情况下，您应该始终包含一两句话，以确保客户执行自己的调查以检查其他实例。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这是一个很长的教训，通过许多例子涵盖了建议的关键领域。以下是这些课程中的一些要点：</p><ul><li>理想情况下，建议应包含三个关键领域：<ul><li>有关如何修复已找到的内容的信息</li><li>检查结果的其他实例（如适用）的指示</li><li>建议客户帮助他们再次发现发现，或防止它再次出现</li></ul></li><li>我们的建议应该具体，而不是含糊不清——它们应该尽可能清晰和可操作<ul><li>此列表应包括所需的示例和参考资料</li></ul></li><li>参考有用的材料，但不要用太多的参考资料让客户不知所措</li><li>考虑一些更具挑战性的建议所涉及的复杂性和工作量，但不要犹豫，首先推荐最佳方法</li><li>通过使用已知的上下文和有关客户的信息，向客户量身定制建议;这种方法通常受到极大的赞赏</li></ul><p>我们将在即将到来的练习中将这里学到的知识付诸实践。</p><h1 id="28-建议-练习"><a href="#28-建议-练习" class="headerlink" title="28-建议 - 练习"></a>28-建议 - 练习</h1><p>在上一课中，我们介绍了如何编写建议部分。</p><p>让我们通过这些练习将我们学到的知识付诸实践。</p><p><strong>反思练习</strong></p><p>反思您撰写或有权访问的报告。查看每个调查结果的建议部分，并：</p><ul><li>改进建议，使其不那么模糊，对客户更具可操作性</li><li>在措辞上努力建议客户在其他地方寻找问题的其他实例</li><li>在调查结果中增加预防性建议</li></ul><p><strong>一般练习</strong></p><p>为所有 OmniCorp 分会练习问题创建建议部分。确保您涵盖：</p><ul><li>具体的修复信息 - 如果您不确定，请研究您可能需要在本节中编写的内容</li><li>如果适用，建议客户端在其他地方寻找其他实例。如果不适用，请记下原因</li><li>提供预防性建议，以防止问题再次出现，或者在问题再次出现时发现问题</li></ul><p><strong>超越练习</strong></p><ul><li>为不同类型的问题创建模板，这些模板可能在建议部分包含“查找其他实例”的措辞</li><li>为预防性建议创建模板，这些模板可以放入调查结果中</li></ul><h1 id="29-位置或区域"><a href="#29-位置或区域" class="headerlink" title="29-位置或区域"></a>29-位置或区域</h1><p>我们现在已经涵盖了如何编写安全发现的大部分核心部分，只剩下几个领域需要涵盖。让我们通过描述发现的“位置”或“区域”部分来进入本章的最后一课。</p><p>“位置”或“区域”是一个部分，通常位于调查结果的末尾，概述了发现问题的位置。这一部分对客户很有用，可以确定他们需要在哪些方面应用建议部分中概述的内容，也适用于可能需要执行补救验证工作的同事。</p><p>这些部分中的信息可以通过不同的方式捕获，但最常以列表或表格格式呈现。就我个人而言，我觉得发现的大部分信息应该已经涵盖，因此文档的这一领域不需要任何解释或其他信息。</p><p>这里有一些可以捕获的示例，让我们来看看常见的示例。</p><h2 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h2><p>如果已执行 Web 应用程序测试，或者已通过 Web 界面对应用程序执行配置评审，则可能需要指定发现给定问题的位置。</p><p>下面是执行具有多个匿名 API 终结点的 Web API 评估时可能会看到的 URL 列表示例：</p><ul><li><a href="https://api.example.com/v1/users/list">https://api.example.com/v1/users/list</a></li><li><a href="https://api.example.com/v1/payments/details">https://api.example.com/v1/payments/details</a></li><li><a href="https://api.example.com/v1/support/tickets">https://api.example.com/v1/support/tickets</a></li></ul><p>如果您引用的页面包含一些配置错误的应用程序安全信息，则可能会看到以下内容：</p><blockquote><p><a href="https://admin.example.com/settings/security">https://admin.example.com/settings/security</a></p></blockquote><p>请注意，我没有对单个列表项进行项目符号点。根据您自己的内部指南，当问题本身很明显时，可能不需要在此处设置单个项目。但是，我宁愿与我的其他发现保持一致，并使用相同的部分。选择权在您手中。</p><p>在某些情况下，您可能需要详细说明参数或其他信息。下面是 Web 应用程序 URL、HTTP VERB 和 SQL 注入受影响参数的列表示例：</p><table><thead><tr><th><strong>网址</strong></th><th><strong>HTTP方法</strong></th><th><strong>受影响的参数</strong></th></tr></thead><tbody><tr><td><a href="https://www.example.com/login">https://www.example.com/login</a></td><td>POST</td><td>用户名、密码</td></tr><tr><td><a href="https://www.example.com/search">https://www.example.com/search</a></td><td>GET</td><td>查询</td></tr><tr><td><a href="https://www.example.com/register">https://www.example.com/register</a></td><td>POST</td><td>电子邮件、user_name</td></tr><tr><td><a href="https://www.example.com/update">https://www.example.com/update</a></td><td>PUT</td><td>user_id，account_details</td></tr><tr><td><a href="https://www.example.com/delete">https://www.example.com/delete</a></td><td>DELETE</td><td>user_id</td></tr></tbody></table><p>我在这个例子中使用了一个表格，因为它看起来稍微干净一些。</p><h2 id="IP-地址-主机名-端口"><a href="#IP-地址-主机名-端口" class="headerlink" title="IP 地址&#x2F;主机名&#x2F;端口"></a>IP 地址&#x2F;主机名&#x2F;端口</h2><p>如果您正在执行任何基础结构类型的工作，通常需要提供有关您在哪里看到某些内容的信息。</p><p>下面介绍了如何列出多个运行 telnet 的主机，包括端口和主机名（您可以在其中解析它）。</p><table><thead><tr><th><strong>IP</strong> <strong>地址</strong></th><th><strong>端口</strong></th><th><strong>主机名</strong></th></tr></thead><tbody><tr><td>192.168.1.50</td><td>23</td><td>server1.example.com</td></tr><tr><td>192.168.1.51</td><td>23</td><td>server2.example.com</td></tr><tr><td>10.10.10.5</td><td>2323</td><td>telnet.example.com</td></tr><tr><td>10.10.10.6</td><td>2323</td><td>telnet2.example.com</td></tr><tr><td>172.16.0.4</td><td>23</td><td>internal.example.com</td></tr></tbody></table><p>如果我们能够获取环境中服务器的主机名，我们应该在报告中使用它们。许多组织将具有主机名的命名约定，或者能够根据主机名识别它们的作用。这通常使客户端能够更容易地弄清楚服务器可能在哪里以及哪些团队运行它们，从而实现更有效的补救过程。</p><p>如果所有受影响的主机都具有相同的服务和端口易受攻击，则端口号可能是可选的。如果同一服务在许多端口上的多个主机上运行，则可能需要这样做。这里的一个典型示例是配置错误的 SSL&#x2F;TLS 服务。</p><p>下面是正在使用的过时 SSL&#x2F;TLS 版本的示例：</p><table><thead><tr><th><strong>IP地址</strong></th><th><strong>端口</strong></th><th><strong>主机名</strong></th></tr></thead><tbody><tr><td>203.0.113.5</td><td>443, 8443</td><td>secure.example.com</td></tr><tr><td>198.51.100.23</td><td>443, 8443, 8080</td><td>admin.example.com</td></tr><tr><td>203.0.113.6</td><td>443</td><td>payment.example.com</td></tr><tr><td>192.0.2.17</td><td>443, 8443</td><td><a href="http://www.example.com/">www.example.com</a></td></tr></tbody></table><p>您还可以提供有关每个端口使用的版本的详细信息，但这可能会使表变得混乱。如果您有大量主机，则始终可以在补充文件中向客户端提供此附加信息。或者，您可以将 IP 信息分布在多行中：</p><table><thead><tr><th><strong>IP地址</strong></th><th><strong>端口</strong></th><th><strong>主机名</strong></th><th><strong>SSL&#x2F;TLS 版本</strong></th></tr></thead><tbody><tr><td>203.0.113.5</td><td>443</td><td>secure.example.com</td><td>红绿灯 1.2</td></tr><tr><td>203.0.113.5</td><td>8443</td><td>secure.example.com</td><td>TLS 1.1</td></tr><tr><td>198.51.100.23</td><td>443</td><td>admin.example.com</td><td>红绿灯 1.2</td></tr><tr><td>198.51.100.23</td><td>8443</td><td>admin.example.com</td><td>SSL证书 3</td></tr><tr><td>198.51.100.23</td><td>8080</td><td>admin.example.com</td><td>TLS 1.0</td></tr><tr><td>203.0.113.6</td><td>443</td><td>payment.example.com</td><td>红绿灯 1.2</td></tr><tr><td>192.0.2.17</td><td>443</td><td><a href="http://www.example.com/">www.example.com</a></td><td>红绿灯 1.2</td></tr><tr><td>192.0.2.17</td><td>8443</td><td><a href="http://www.example.com/">www.example.com</a></td><td>TLS 1.1</td></tr></tbody></table><p>如果要进行外部测试，则不太可能获得 DNS 信息，在这种情况下，可能只需要一个 IP 地址，尤其是对于影响多个实例中同一端口的问题。下面列出了涉及 RDP 向 Internet 公开的问题：</p><ul><li>203.0.113.7</li><li>203.0.113.8</li><li>198.51.100.25</li><li>198.51.100.26</li><li>192.0.2.18</li></ul><h2 id="文件路径和行号"><a href="#文件路径和行号" class="headerlink" title="文件路径和行号"></a>文件路径和行号</h2><p>如果已执行代码评审评估，甚至已对其他一些基于文本的文件进行评审，则可能需要将客户端引用到文件的多个区域。</p><p>引用这些区域的最简单方法是通过文件路径和行号。此格式可以有所不同：</p><ul><li>path&#x2F;to&#x2F;file.txt（第 25 行）</li><li>path&#x2F;to&#x2F;file_2.txt（第 25,203 行）</li></ul><p>或者（我最喜欢的）</p><ul><li>路径&#x2F;到&#x2F;file.txt：25</li><li>路径&#x2F;至&#x2F;file_2.txt：25,203</li></ul><p>让我们看一下 Java 代码库中的一些示例，在这些示例中，我们发现了不安全的随机数生成实例：</p><ul><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;security&#x2F;RandomGenerator.java：45</li><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;user&#x2F;SessionIdentifier.java：30</li><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;util&#x2F;UtilityFunctions.java：112,250</li></ul><p>显然，这假设客户端的代码将与您审查的版本匹配，但根据调查结果中的信息，这应该足以让他们知道在哪里查找问题。如果您觉得可能需要其他信息（例如，调用函数名称），可以这样做：</p><ul><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;security&#x2F;RandomGenerator.java：45 - 生成 SessionId</li><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;user&#x2F;SessionIdentifier.java：30 - 创建用户会话</li><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;util&#x2F;UtilityFunctions.java：112 - 随机折扣生成器</li><li>src&#x2F;main&#x2F;java&#x2F;com&#x2F;example&#x2F;util&#x2F;UtilityFunctions.java：250 - 生成随机数</li></ul><h2 id="其他文档类型"><a href="#其他文档类型" class="headerlink" title="其他文档类型"></a>其他文档类型</h2><p>在审查其他文件（例如审查政策文件）的情况下，指导客户的最佳方式可能是按章节编号（如果存在）：</p><ul><li>部分 2.3.. 密码管理策略</li><li>部分 4.1.5.. 数据加密标准</li><li>第 5.2 节：事件响应程序</li></ul><p>或通过章节标题导航：</p><ul><li>密码管理策略</li><li>数据加密标准</li><li>事件响应程序</li></ul><h2 id="云问题"><a href="#云问题" class="headerlink" title="云问题"></a>云问题</h2><p>执行云评估时，请务必根据特定资源所在的订阅 （Azure）、帐户 （AWS） 或项目 （GCP） 突出显示特定资源（其他供应商有自己的条款）。除此之外，还应包括受影响资源的名称和任何 ID 值。最好作为桌子来提供。区域信息在这里也很有帮助，因为云提供商的工具通常一次只检查一个区域，在这些服务的 UI 中肯定是这种情况。</p><p>让我们看一下各种云提供商的一些示例：</p><p><strong>AWS 示例</strong></p><table><thead><tr><th><strong>账户 ID</strong></th><th><strong>地区</strong></th><th><strong>资源名称</strong></th><th><strong>资源 ID</strong></th></tr></thead><tbody><tr><td>123456789012</td><td>美国东-1</td><td>生产数据库-1</td><td>DB-ABCDEFG1234567</td></tr><tr><td>987654321098</td><td>欧盟西部-1</td><td>开发数据库-2</td><td>db-HIJKLMN8901234</td></tr><tr><td>564738291012</td><td>AP-南-1</td><td>测试数据库-3</td><td>db-OPQRST5678901</td></tr></tbody></table><p><strong>Azure 示例</strong></p><table><thead><tr><th><strong>订阅 ID</strong></th><th><strong>资源组</strong></th><th><strong>资源名称</strong></th></tr></thead><tbody><tr><td>ABCD1234-AB12-CD34-EF56-ABCDEF123456</td><td>生产资源</td><td>prodstorageaccount</td></tr><tr><td>EFGH5678-EF12-GH34-IJ56-GHIJKL789012</td><td>开发资源</td><td>devstorageaccount</td></tr><tr><td>IJKL9012-IJ34-KL56-MN78-IJKLMN123456</td><td>测试资源</td><td>teststorageaccount</td></tr></tbody></table><p><strong>GCP 示例</strong></p><table><thead><tr><th><strong>项目 ID</strong></th><th><strong>位置</strong></th><th><strong>资源名称</strong></th></tr></thead><tbody><tr><td>my-gcp-项目</td><td>美国中部</td><td>公共桶-123</td></tr><tr><td>另一个-GCP-proj</td><td>欧洲-西部</td><td>私有桶-456</td></tr><tr><td>测试-GCP-项目</td><td>亚洲-东区</td><td>存档桶-789</td></tr></tbody></table><p>提供所有这些信息将确保客户确切地知道在哪里查找修复结果，并且将来审查环境的任何同事都知道他们需要访问哪些内容来验证修复。</p><p>如果您只查看了一个特定的订阅&#x2F;帐户&#x2F;项目，则可以将此信息显示为列表：</p><p><strong>AWS 示例</strong></p><ul><li>生产数据库-1 （db-ABCDEFG1234567）</li><li>分析数据库-1 （db-ZYXWVUT9876543）</li></ul><p><strong>Azure 示例</strong></p><ul><li>资源组：global-resources<ul><li>globalstorageaccount（北欧）</li><li>backupstorageaccount（美国西部）</li></ul></li></ul><p><strong>GCP 示例</strong></p><ul><li>前端服务器-1 （us-central1-a）</li><li>后端服务器-1 （us-central1-b）</li></ul><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>最后，您可能正在测试一个更高级的概念，该概念适用于环境，而不是特定的可归因元素。在这里，我们可以简单地说明它影响的“区域”或“环境”的名称。</p><p>假设我们审查了一个网络，看看它们是否被充分隔离。我们可能会像这样突出显示受影响的网络：</p><ul><li>生产环境</li><li>开发环境</li><li>暂存环境</li><li>企业网络</li><li>访客 WiFi 网络</li></ul><p>在这里，我们将这些显示为一个简单的列表，这对于此类信息来说很好。</p><h2 id="课程总结-7"><a href="#课程总结-7" class="headerlink" title="课程总结"></a>课程总结</h2><p>本课不会向你们中的许多人介绍新概念，但为了完整起见，我将其包括在内。它直截了当地提醒人们，在安全调查结果中清楚地显示受影响的区域或“事物”的关键方面。确保完成此部分，以便客户可以确定您在哪里发现了您作为调查结果提出的问题，并且如果您的同事需要对调查结果执行补救验证，也可以确定他们。</p><h1 id="查找-ID-练习"><a href="#查找-ID-练习" class="headerlink" title="查找 ID - 练习"></a>查找 ID - 练习</h1><p>我们刚刚介绍了寻找身份证件的惊险本质。这里有一些练习给你。</p><p><strong>反思练习</strong></p><p>检查您最近撰写或有权访问的报告。根据上一课，您认为查找 ID 的呈现方式是否清晰、一致且易于引用？格式可以改进吗？如果是这样，如何？</p><p><strong>超越练习</strong></p><p>您是否有办法为客户导出结果列表，以便他们轻松地将结果导入其系统？如果没有，你能写一个吗？思考，CSV，JSON，XML等。</p><h1 id="30-位置或区域-练习"><a href="#30-位置或区域-练习" class="headerlink" title="30-位置或区域 - 练习"></a>30-位置或区域 - 练习</h1><p>我们刚刚介绍了如何编写和呈现安全调查结果的“位置”或“区域”部分。</p><p>让我们来做一些练习。</p><p><strong>反思练习</strong></p><p>反思您撰写或有权访问的报告。查看调查结果的“位置”或“区域”部分（或本文档中的任何名称）。所有调查结果都包含客户在本节中查找和修复问题所需的所有内容吗？如果没有，你能根据我们刚刚学到的知识来修复它们吗？</p><p><strong>一般练习</strong></p><p>添加 OmniCorp 练习示例问题的位置信息。使用您认为合适的任何格式，最好是列表或表格。</p><p><strong>超越练习</strong></p><p>想想您每天使用的常用安全工具 - 您能否编写或找到任何工具来根据其他工具输出生成本节的内容？</p><h1 id="31-引用"><a href="#31-引用" class="headerlink" title="31-引用"></a>31-引用</h1><p>在前面的一些课程中，我们已经谈到了参考文献，但这里有一堂专门的课来正确地复习它们。</p><p>如前所述，为客户提供大多数问题的参考是有帮助的，这有几个原因可以说明这一点：</p><ul><li>向客户推荐对复杂问题的更详细解释</li><li>提供有关如何解决问题的详细指南，来自适用的供应商或受信任的资源</li></ul><p>参考文献可以被视为可选的，并且可能有许多发现不需要它们，因为它们的使用价值不大。但是，我认为重要的是要记住，我们是专家，对我们来说容易理解或司空见惯的事情并不总是适用于我们的客户。正因为如此，我更喜欢在我觉得客户有很小的可能性不理解我们在说什么的地方，或者我认为他们可能想要或需要围绕某个主题做进一步的阅读。</p><p>让我们来看看在安全检测结果中放置引用的格式选择。</p><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>据我所知，有三种方法可以在你的发现文章中放置参考文献。</p><ul><li>在调查结果末尾的专门“参考资料”部分</li><li>内联 URL</li><li>脚注</li></ul><p>让我们更详细地看一下其中的每一个。</p><h3 id="专用参考部分"><a href="#专用参考部分" class="headerlink" title="专用参考部分"></a>专用参考部分</h3><p>通常，这将是安全发现的最后一部分，只需列出多个 URL 及其标题：</p><blockquote><p><strong>引用</strong></p><ul><li>密码存储备忘单 - <a href="https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html">https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html</a></li><li>氩气2 - <a href="https://en.wikipedia.org/wiki/Argon2">https://en.wikipedia.org/wiki/Argon2</a></li></ul></blockquote><p>这些通常从调查结果的正文中引用，例如：</p><blockquote><p>有关 Argon2 和安全密码存储的更多信息，请参阅参考资料部分中的文章。</p></blockquote><p>这种方法通常“更啰嗦”，因为它需要更多的键入和格式设置。不过，很高兴看到参考文献列表在它们自己的部分中分解，并且在视觉上更具吸引力。</p><h3 id="内联链接"><a href="#内联链接" class="headerlink" title="内联链接"></a>内联链接</h3><p>指向参考文献的内联链接是您在文章中可以做的最简单的事情，但在视觉上却是最可怕的。我在本课程的示例中使用了它，只是因为我想展示查找文章的部分书面部分（例如，仅推荐部分），并同时包含参考文献。</p><p>下面是前面一课中的一个示例，说明它是什么样子的：</p><blockquote><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关此漏洞的更多详细信息，请参阅 <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p></blockquote><p>在此示例中，我们只是将链接直接复制到段落中。这个例子并不是<em>太</em>可怕，但是，当你有一个很长的URL时，这看起来一点也不好。</p><p>我建议避免使用此选项。</p><h3 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h3><p>使用脚注，您可以在需要时将引用注入文本中，但不会破坏文本流。这是通过在文本中添加一个小链接来完成的，该链接链接到您正在阅读的页面或部分底部的内容。根据你所写的内容，你的发现和报告将取决于它的呈现方式。让我们以 Word 为例：</p><p>要插入脚注，请将光标放在要添加链接的位置（例如橙色框），单击顶部导航栏中的“引用”，然后单击功能区中的“插入脚注”：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231950943.png" alt="img"></p><p>这会将您带到文档的底部，并带有“1”占位符，以便您放置 URL（或您想要的任何文本）。下面我添加了 URL：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231959067.png" alt="img"></p><p>回到段落中，您可以看到链接到页面底部的小“1”：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231959654.png" alt="img"></p><p>如果你使用 markdown 来编写你的报告，并且你能够使用脚注，你可以用非常相似的方式做到这一点。</p><p>在段落中，使用[^1]创建链接，在要插入链接的位置旁边：</p><blockquote><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关详细信息，请参阅 Microsoft 网站[^1]。</p></blockquote><p>然后在您正在处理的部分的底部创建链接，如下所示：</p><blockquote><p>[^1] <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p></blockquote><p>呈现方式将取决于您的特定报告环境。</p><p>这种方法现在非常干净，而且很常见，我个人推荐这种方法。</p><h2 id="过度引用"><a href="#过度引用" class="headerlink" title="过度引用"></a>过度引用</h2><p>提供对特定问题区域的多个引用可能很有用。当需要修正某些内容的多个部分，或者发现本身涵盖几个不同的主题时，通常需要这样做。在这些情况下，在涵盖修复中每个点的结束时，可以很好地插入不同区域的参考。</p><p>应该避免的是使用许多引用来向客户证明一个观点（“看！每个人都在说这是一个问题！或者提供多个说同样事情的参考资料。这不仅会给客户带来潜在的混乱和潜在工作的增加，而且在实际调查结果中对此的呈现看起来并不好。</p><p>如果你使用的是脚注，你不希望引用看起来像这样 - 它看起来不太好：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231950091.png" alt="img"></p><p>将 5 个参考文献一个接一个地堆叠起来，使它看起来像是文档的参考文献 12,345。理想情况下，坚持使用一个参考文献，以避免脚注的堆积。</p><p>诚然，如果您使用专用的参考部分，这看起来并不可怕，因为它们将是一个简单的项目符号列表;但同样，您不想发送太多说同样事情的参考资料。报告的结果很可能会给客户带来一些工作要做——除非我们认为确实需要，否则我们真的不想给他们额外的阅读。</p><h2 id="不正确的引用"><a href="#不正确的引用" class="headerlink" title="不正确的引用"></a>不正确的引用</h2><p>我所看到的一些常见现象，尤其是在查看基于模板的发现时，参考文献不是针对特定发现的，即使它们是相关的。</p><p>例如，如果您对瞻博网络设备执行了防火墙评估，发现启用了多个物理接口，并且出于纵深防御的原因建议禁用它们。您决定保留对问题模板中对 Cisco 的引用，而不是查找禁用端口所需命令的瞻博网络特定参考。这显然是非常糟糕的，希望在 QA 过程中能够被发现。</p><p>另一个示例可能是 Linux 构建配置审查，其中引用（甚至建议本身）与不同的 Linux 发行版相关。参考如何为 CentOS 服务器设置密码策略将显示与 Ubuntu 服务器略有不同的东西。</p><p>当调查结果的作者在提交之前没有彻底审查他们的工作时，通常会出现这些问题。请记住，参考文献应尽可能与调查结果相关;因此，被审查设备的供应商应成为参考的一部分。</p><h2 id="课程总结-8"><a href="#课程总结-8" class="headerlink" title="课程总结"></a>课程总结</h2><p>您希望在报告文档中如何呈现您的参考资料由您决定。关键是要确保参考文献的呈现方式在整个文档中保持一致。</p><p>考虑只使用一两个高质量的参考文献，而不是一长串重复或质量较低的参考文献。请务必通读您的发现，以确保参考文献尽可能具体地针对发现本身及其影响。</p><h1 id="32-引用-练习"><a href="#32-引用-练习" class="headerlink" title="32-引用 - 练习"></a>32-引用 - 练习</h1><p>在上一课中，我们介绍了参考文献及其在报告中的位置，以及我看到的一些常见的不良做法。</p><p>让我们使用我们在一些练习中学到的知识。</p><p><strong>反思练习</strong></p><p>反思您撰写或有权访问的报告。如何将参考文献添加到研究结果中？他们本来可以做得更好吗？</p><ul><li>你能发现任何“过度引用”的例子吗？</li><li>您能看到任何可能无效或不够具体的参考文献吗？</li></ul><p><strong>一般练习</strong></p><p>如果您尚未这样做，请添加对 OmniCorp 练习示例问题的引用。使用适合您的任何格式。</p><h1 id="33-查找模板"><a href="#33-查找模板" class="headerlink" title="33-查找模板"></a>33-查找模板</h1><p>任何为报告生成结果的团队都将生成模板。这对于加快报告速度和确保整个团队的一致性是绝对必要的。</p><p>让我们来看看创建和使用模板的主题。</p><h2 id="制作模板"><a href="#制作模板" class="headerlink" title="制作模板"></a>制作模板</h2><p>在我们开始之前，我要说的是，我对模板外观的看法可能与您习惯的不同。与往常一样，这很好。如果生成的模板以包含相关信息的最终结果结束，则可以。</p><p>理想情况下，一个完美的模板只需要使用它的测试人员进行很少的更改。也就是说，我相信“模板”的概念确实会引导测试人员走上一条道路，即在创建发现实例时只执行最少量的自定义。因此，在创建模板时，请务必确保有足够的占位符来提示测试人员填写特定于客户端的关键详细信息，但结果的编写方式允许大部分文本保持原样。</p><p>让我们看一下之前的发现，看看如何将其转化为模板。</p><blockquote><p><strong>Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</strong></p><p><strong>风险</strong> - 高</p><p><strong>描述</strong></p><p>由于缺少修补程序，OmniCorp 网络上的 Windows 域控制器容易受到严重的 MS17-010 安全漏洞的影响。利用此发现将导致对服务器的完全控制。由于服务器向环境中的所有主机提供身份验证，因此攻击者可能会破坏整个网络和所有客户数据。内部网络上的攻击者利用此漏洞是微不足道的，因为工具是公开可用的。</p><p>MS17-010 漏洞会影响 Windows Server 消息块协议（1.0 版），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。但是，由于这会影响 Windows 域控制器，因此可以访问所有用户的所有凭据材料（以哈希或加密格式）。</p><p>由于这是整个环境的域控制器，并且是环境中通过 LDAP 提供身份验证的主要服务，因此入侵将影响生产域中所有连接的服务器和服务。</p><p>Nessus 的以下结果显示了这一发现：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Nessus Scan Report:</span><br><span class="hljs-attr">Host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span><br><span class="hljs-attr">OS:</span> <span class="hljs-string">Windows</span> <span class="hljs-string">Server</span> <span class="hljs-number">2019</span><br><span class="hljs-attr">Vulnerability:</span> <span class="hljs-string">MS17-010</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Critical</span><br><span class="hljs-attr">Description:</span> <span class="hljs-string">Security</span> <span class="hljs-string">Update</span> <span class="hljs-string">for</span> <span class="hljs-string">Microsoft</span> <span class="hljs-string">Windows</span> <span class="hljs-string">SMB</span> <span class="hljs-string">Server</span> <span class="hljs-string">(4013389)</span><br><span class="hljs-attr">Severity:</span> <span class="hljs-string">Critical</span><br></code></pre></td></tr></table></figure><p>虽然服务器在评估期间未被利用，但使用了 Metasploit 来确认服务器是否可能易受攻击：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Scanning</span> for vulnerabilities...<br>[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Host</span> is likely <span class="hljs-symbol">VULNERABLE</span> to <span class="hljs-symbol">MS17</span><span class="hljs-number">-010</span>! - <span class="hljs-symbol">Windows</span> <span class="hljs-number">7</span> <span class="hljs-symbol">Professional</span> <span class="hljs-number">7601</span> <span class="hljs-symbol">Service</span> <span class="hljs-symbol">Pack</span> <span class="hljs-number">1</span> (<span class="hljs-number">64</span>-bit)<br>[*] <span class="hljs-symbol">Scanned</span> <span class="hljs-number">1</span> of <span class="hljs-number">1</span> hosts (<span class="hljs-number">100</span><span class="hljs-comment">% complete)</span><br>[*] <span class="hljs-symbol">Auxiliary</span> module execution completed<br></code></pre></td></tr></table></figure><p><strong>建议</strong></p><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关此漏洞的更多详细信息，请参阅 <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p><p>如果无法修补漏洞，缓解措施可能是禁用 SMB 版本 1 - 这是因为 MS17-010 仅在 SMB 服务运行版本 1 时才会影响它。但是，应该注意的是，禁用 SMB 版本 1 也应作为完全修正此问题的一部分执行，因为它的使用存在许多漏洞。有关详细信息，请参阅“正在使用的 SMB 版本 1”结果。</p><p>查看网络中不在此评估范围内的任何区域，以查看是否存在此漏洞。</p><p>展望未来，确保在整个网络中执行漏洞扫描，以便及时发现和修复关键问题。查看环境的修补过程和过程，以确保及时修补关键漏洞。</p><p><strong>位置</strong></p><p>192.168.1.100:445</p><p><strong>引用</strong></p><p>Microsoft 安全公告 MS17-010 - 严重 - <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p></blockquote><p>要将结果转换为模板，需要考虑几个步骤：</p><ul><li>删除任何特定于客户的名称、证据、位置&#x2F;区域、上下文等。<ul><li>为需要自定义的区域保留占位符</li></ul></li><li>删除对其他问题的任何引用</li><li>确定是否需要将结果模板更改为更通用的模板，或者将其更改为特定模板，并进行相应调整<ul><li>例如，Linux Server General的弱密码策略）或Ubuntu Server的弱密码策略（特定）</li></ul></li><li>最终审查</li></ul><p>让我们逐节浏览并将其转换为模板。</p><p><strong>描述</strong></p><p>首先，让我们删除客户端细节。下面可能是这样的：</p><blockquote><p>由于缺少修补程序，Windows 域控制器容易受到严重的 MS17-010 安全检测结果的影响。利用此发现将导致对服务器的完全控制。{客户特定影响背景}{特定于客户端的可利用性上下文}{特定于客户端的缓解措施}</p><p>MS17-10 漏洞影响 Windows Server 消息块协议（版本 1.0），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。但是，由于这会影响 Windows 域控制器，因此可以访问所有用户的所有凭据材料（以哈希或加密格式）。</p></blockquote><p>前面的描述已经过编辑，删除了特定于客户端的详细信息，并将其替换为占位符。开头部分剩下的是：</p><ul><li>问题是什么？</li><li>为什么不好？</li></ul><p>我们通常应该填写的内容来自定义给定的发现：</p><ul><li>情境影响</li><li>可利用性</li><li>可能存在的缓解措施</li></ul><p>假设我们想将这一发现转化为对所有 Windows 服务器都更通用的发现，而不仅仅是域控制器。由于域控制器的轻微上下文性质（由于其在环境中的身份验证用法），某些域控制器措辞已被删除。让我们删除其余部分并添加一些通用提示作为证据：</p><blockquote><p>由于缺少修补程序，网络上的 Windows 主机容易受到严重的 MS17-010 安全检测结果的影响。利用此漏洞将导致对受影响的服务器的完全控制。{客户特定影响背景}{特定于客户端的可利用性上下文}{特定于客户端的缓解措施}</p><p>MS17-10 漏洞影响 Windows Server 消息块协议（版本 1.0），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。</p><p>下面显示了网络上存在 MS17-010：</p><p>{证据}</p></blockquote><p><strong>建议</strong></p><p>此处唯一的更改是删除了对 SMB 版本 1 结果的引用。在模板中引用其他发现是没有意义的，因为在使用此模板的参与期间可能会也可能不会找到它们。</p><blockquote><p>有关详细信息，请参阅“正在使用的 SMB 版本 1”结果。</p></blockquote><p><strong>位置</strong></p><p>所有需要做的就是空白这一部分。</p><p><strong>引用</strong></p><p>与建议部分一样，可以保持原样。在本文的这一部分中没有特定于 OmniCorp 的信息。</p><p>让我们看一下最终的模板：</p><blockquote><p><strong>描述</strong></p><p>由于缺少修补程序，网络上的 Windows 主机容易受到严重的 MS17-010 安全检测结果的影响。利用此漏洞将导致对受影响的服务器的完全控制。{客户特定影响背景}{特定于客户端的可利用性上下文}{特定于客户端的缓解措施}</p><p>MS17-10 漏洞影响 Windows Server 消息块协议（版本 1.0），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。</p><p>下面显示了网络上存在 MS17-010：</p><p>{证据}</p><p><strong>建议</strong></p><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关此漏洞的更多详细信息，请参阅 [<a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010]%EF%BC%88https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010%EF%BC%89">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010]（https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010）</a></p><p>如果无法修补漏洞，则缓解措施可能是禁用 SMB 版本 1 - 这是因为 MS17-010 仅在运行版本 1 时影响 SMB 服务。但是，应该注意的是，禁用 SMB 版本 1 也应作为完全修正此问题的一部分执行，因为它的使用具有许多漏洞。</p><p>查看网络中不在此评估范围内的任何区域，以查看是否存在此漏洞。</p><p>展望未来，确保在整个网络中执行漏洞扫描，以便及时发现和修复关键问题。查看环境的修补过程和过程，以确保及时修补关键漏洞。</p><p><strong>位置</strong></p><p>{位置}</p><p><strong>引用</strong></p><p>Microsoft 安全公告 MS17-010 - 严重 - <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p></blockquote><h2 id="使用模板"><a href="#使用模板" class="headerlink" title="使用模板"></a>使用模板</h2><p>如果您发现了一个已经有模板的问题，那就太好了。这意味着，如果问题与模板内容完全一致，则可以重复使用问题中已有的大部分内容。</p><p>但是，重要的是要强调，即使使用最好的模板，也必须有一个定制、定制和仔细审查的过程。不要简单地插入你的证据来证明你的发现，什么都不改变。这种方法通常会导致客户收到非常通用的发现，并会让他们认为，“哦，这只是渗透测试公司的另一个发现”。如果你想让客户高度评价你的文章，请确保你加倍努力。这包括编辑模板，以适应您正在评估的内容以及上下文和影响。</p><p>因此，考虑到这一点，还记得我们在本章中已经介绍过的所有内容吗？描述？影响？建议？构建这些部分的方法是什么？好吧，当您想要编辑结果时，您需要重新访问所有这些概念。您必须使用它们来检查内容是否在潜在问题范围内，而不是使用这些信息来生成内容。如果不是，则需要添加。</p><p>让我们快速回顾一下在编辑模板时应该问自己的问题。</p><p><strong>风险评级</strong></p><ul><li>模板是否附带了现有的风险评级？如果是这样，对于这个特定的发现实例，这是否正确？</li></ul><p><strong>描述（和影响）</strong></p><ul><li>描述是否说明了发现是什么？</li><li>描述是否涵盖了为什么发现是坏的？</li><li>描述是否需要添加影响级别信息，是否应该针对此特定客户和发现进行修改？<ul><li>几乎可以肯定的是，如果利用这一发现，对业务、用户和&#x2F;或数据有什么影响？根据系统的了解，可能发生的最糟糕的事情是什么？</li></ul></li><li>描述是否概述了攻击者需要处于什么位置才能利用该发现，以及他们利用该发现的难易程度如何？<ul><li>这可能需要添加或更改，因为发现的可利用性因环境而异。</li></ul></li><li>调查结果是否需要涵盖任何可能使其更难利用并应提及的相关缓解措施？<ul><li>几乎可以肯定 - 这在测试之前是无法知道的。</li></ul></li><li>描述有没有地方可以放置证据？你需要包括它吗？</li><li>除了最初的开场白之外，描述是否包含进一步的解释，以帮助客户理解问题或证据？如果不是，应该吗？</li></ul><p><strong>建议</strong></p><ul><li>该建议是否包含客户端修正此发现的明确说明？</li><li>是否需要调整说明以添加特定于客户的知识或上下文？</li><li>是否需要修改说明以更具体地针对调查结果？（例如，针对略有不同的操作系统、供应商、编程语言等量身定制）</li><li>该建议是否为客户提供了在其他地方寻找问题的任何建议？如果不是，应该吗？</li><li>该建议是否包括任何预防性建议？</li><li>可以做些什么来发现将来出现的这个问题？</li><li>可以做些什么来阻止这个问题再次出现？</li></ul><p><strong>位置</strong></p><ul><li>这是需要填写位置（或区域部分）的发现吗？</li></ul><p><strong>引用</strong></p><ul><li>此模板是否有可用于支持发现的参考？</li><li>此模板是否有参考，可以帮助以更深入的方式或只是以不同的方式向客户解释问题？</li></ul><p>如果您在查看模板时解决这些问题，您应该能够确保模板是针对特定客户的发现量身定制的。您会注意到，这些都不是新的，并且在之前的课程中已经提到过。这里的不同之处在于，我们只是询问已经编写的文本的问题，而不是使用这些提示从头开始编写内容。</p><h2 id="改进模板"><a href="#改进模板" class="headerlink" title="改进模板"></a>改进模板</h2><p>如果您发现自己对模板的基本部分（不特定于客户端或结果实例的部分）进行了编辑，则很可能应该在下次将这些内容反馈到模板本身中。</p><p>以下是一些可能需要更新原始模板的区域（如果您已对原始模板进行更改）：</p><p><strong>描述（和影响）</strong></p><ul><li>对发现的描述和&#x2F;或为什么不好的任何更改。</li><li>对问题的进一步解释的任何更改，如果不是特定于客户端的。</li></ul><p><strong>建议</strong></p><ul><li>对用于解决特定问题的任何“常规”建议的更改。</li><li>更改为“在您的环境中搜索更多问题”措辞（如果它不是特定于客户端的）。</li><li>对预防性建议的更改（如果它们不是特定于客户的）。</li></ul><p><strong>引用</strong></p><ul><li>对引用的任何更新。</li></ul><p>确保模板加快报告过程的唯一方法是，它们不仅经常使用，而且保持更新。如果您觉得应该重新措辞或改进某些内容以更符合最近的更改，请更新原始模板;帮助您自己和您的团队进行未来的评估。</p><h2 id="课程总结-9"><a href="#课程总结-9" class="headerlink" title="课程总结"></a>课程总结</h2><p>如果你正在制作一个模板，请确保你花适当的时间来编写它，使其使用者需要尽可能少的编辑，但同时涵盖本章前面介绍的所有内容。</p><p>使用模板时，请记住：模板就是模板。他们的目标是节省您的时间，但他们的目标不是确保您进行零自定义。通过进行正确的调整和编辑，确保你为客户做最好的事情，为他们量身定制调查结果。</p><h1 id="34-查找模板-练习"><a href="#34-查找模板-练习" class="headerlink" title="34-查找模板 - 练习"></a>34-查找模板 - 练习</h1><p>在上一课中，我们介绍了创建和使用模板的思维过程。</p><p>以下是根据本课要解决的一些练习：</p><p><strong>反思练习</strong></p><p>反思您最近撰写或有权访问的报告。</p><ul><li>根据前面的指南，将一些发现转换为模板。</li><li>如果您知道，是否有任何基于模板创建的发现？进行了哪些更改？模板可以更新吗？根据我们在上一课中讨论的内容，您是否认为最终的发现是不完整的？</li></ul><p><strong>一般练习</strong></p><p>为您在过去几节课中编写的每个 OmniCorp 示例问题制作一个模板。</p><p><strong>超越练习</strong></p><p>你们内部有安全发现库吗？您是否能够根据在本章前面的课程中学到的内容对这些模板进行任何更新？</p><h1 id="35-使用工具输出文本的问题"><a href="#35-使用工具输出文本的问题" class="headerlink" title="35-使用工具输出文本的问题"></a>35-使用工具输出文本的问题</h1><p>我不确定这是否真的是一个教训，但只是对一小部分安全行业的一些一般建议。如果您正在进行评估，并且安全工具发现了您没有模板的内容，请不要只是从工具中复制文本并将其用作您的文章。这不仅非常不专业，而且打开的客户会识别来自常见安全工具的文本，并且不会对您评价太高。如果您经常查看报告，它们并不难发现，因为它们的编写方式与报告的其余部分不同，并且通常不包括任何特定于客户的背景或影响。</p><p>我并不是说使用工具的输出作为证据不是一个好主意，我说的是完整复制和粘贴其他工具的描述和&#x2F;或建议是这里的坏处。</p><p>我看到这种情况发生的主要原因有三个：</p><ul><li>对提出的问题缺乏了解</li><li>时间压力</li><li>懒惰</li></ul><p>后两点我无能为力，但我可以说的是，花时间了解这一发现，然后为它写一篇文章，比无耻地复制和粘贴更有益于你。此外，您应该能够为您的团队创建一个模板，如果在其他地方发现问题，可以再次使用该模板。</p><h2 id="课程总结-10"><a href="#课程总结-10" class="headerlink" title="课程总结"></a>课程总结</h2><p>我注意到我访问过的报告中的发现在过去表现出这种程度的剽窃迹象，但这种情况并不常见。如果你是一个习惯这样做的人，我的建议是：</p><ul><li>别这样！</li><li>如果您不知道问题是什么，请进行研究或向您的团队寻求支持，以便您可以自己写下发现</li></ul><h1 id="36-问题示例"><a href="#36-问题示例" class="headerlink" title="36-问题示例"></a>36-问题示例</h1><p>在本章中，我们已经介绍了发现文章的所有主要领域以及如何处理它们。</p><p>以下是五个示例问题在完整编写后的样子（至少在内容而不是呈现方面）。</p><h2 id="严重-可公开访问的-S3-存储桶"><a href="#严重-可公开访问的-S3-存储桶" class="headerlink" title="严重 - 可公开访问的 S3 存储桶"></a>严重 - 可公开访问的 S3 存储桶</h2><p><strong>描述</strong></p><p>发现了一个可公开访问的 S3 存储桶。Internet 上任何能够猜出存储桶名称的用户都可以访问和下载 S3 存储桶中的所有文件。该存储桶包含所有员工的工资单信息，以及最近的渗透测试报告的结果，其中包含几个未修补的外部漏洞。利用这些信息，攻击者可以尝试通过利用上述外部漏洞或根据工资单信息的内容对用户进行网络钓鱼和密码猜测攻击来访问互联网。如果攻击者得逞，无论是获得对生产网络的访问权限还是破坏用户的访问权限，内部网络上的敏感客户信息都可能面临泄露的风险。</p><p>aws 命令行工具的以下命令输出显示了存储桶中存储的文件：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ aws s3 ls s3://omnicorp-private-files<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-28</span> 12:35:29      1024 confidential_report.pdf<br>2024<span class="hljs-string">-01</span><span class="hljs-string">-29</span> 08:15:47      2048 employee_data.xlsx<br></code></pre></td></tr></table></figure><p>这两个文件都可以下载和检查：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231951892.png" alt="img"></p><p>confidential_report.pdf内容</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231951651.png" alt="img"></p><p>employee_data.xlsx内容</p><p>机密报告包含以下可外部利用的漏洞列表，所有这些漏洞都在此评估期间存在：</p><ul><li>使用可猜测凭据向 Internet 公开的 RDP</li><li>使用匿名绑定向 Internet 公开的 LDAP</li><li>暴露的 Apache Tomcat 过时且易受攻击</li></ul><p>获取此文档访问权限的攻击者将能够立即确认这些问题的可利用性，因为它们都是面向 Internet 的，并且可能能够透视到内部网络。</p><p>工资单电子表格不仅显示了所有员工的当前工资和奖金，而且还泄露了大量可用于欺诈目的的信息，以及对 OmniCorp 进行其他攻击（例如密码猜测攻击或网络钓鱼）。电子表格中包含以下敏感信息：</p><ul><li>名字和姓氏</li><li>工资</li><li>家庭住址</li><li>个人电子邮件地址</li><li>个人电话号码</li></ul><p><strong>建议</strong></p><p>重新配置 S3 存储桶以禁用公有访问。</p><p>这可以从管理控制台执行：</p><ol><li>转到 Amazon S3 控制面板。</li><li>单击存储桶名称 omnicorp-private-files。</li><li>转到“权限”选项卡。</li><li>单击 Block public access （bucket settings） （阻止公有访问（存储桶设置）。</li><li>选中所有复选框以阻止新的公共 ACL 并删除现有的公共访问。</li><li>点击保存。</li></ol><p>或使用 AWS cli 工具：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">aws s3api put-<span class="hljs-keyword">public</span>-<span class="hljs-keyword">access</span>-<span class="hljs-keyword">block</span> --bucket omnicorp-<span class="hljs-keyword">private</span>-files --<span class="hljs-keyword">public</span>-<span class="hljs-keyword">access</span>-<span class="hljs-keyword">block</span>-configuration <span class="hljs-string">&quot;BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true&quot;</span><br></code></pre></td></tr></table></figure><p>鉴于两个公开文件中都存在高度敏感的数据，应查看与存储桶相关的任何访问日志。</p><p>对云环境执行定期扫描，以发现将来可公开访问的 S3 存储桶（可以利用 ScoutSuite 等工具）。此外，请考虑实施护栏以防止创建不安全的 S3 存储桶（例如可公开访问、不加密等）。这可以使用 AWS Identity and Access Management （IAM） 策略或服务控制策略 （SCP） 来实现。</p><p><strong>位置</strong></p><p>omnicorp-private-files （AWS 账户 123456789012）</p><p><strong>引用</strong></p><ul><li>Amazon S3 的安全最佳实践 - <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/security-best-practices.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/security-best-practices.html</a></li><li>童子军套房 - <a href="https://github.com/nccgroup/ScoutSuite">https://github.com/nccgroup/ScoutSuite</a></li></ul><h2 id="低-Linux-服务器上的弱密码策略"><a href="#低-Linux-服务器上的弱密码策略" class="headerlink" title="低 - Linux 服务器上的弱密码策略"></a>低 - Linux 服务器上的弱密码策略</h2><p><strong>描述</strong></p><p>环境中 Linux 服务器上的帐户配置了通用用户名和密码组合。内部网络上的攻击者可能会使用基本的用户名和密码猜测攻击来获得访问权限。虽然受影响的用户是管理员，这将导致主机完全受损，但主机未被使用，并且不包含对攻击者有用的数据或凭据材料。环境中没有其他主机受此问题的影响。</p><p>成功登录受影响的 Linux 服务器如下所示：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">$ ssh admin@<span class="hljs-number">192.168.1.122</span>.com<br>admin@<span class="hljs-number">192.168.1.122</span>.com&#x27;s password: REDACTED<br>Welcome to <span class="hljs-number">192.168.1.122</span>.com!<br>Last login: Sun Jan <span class="hljs-number">29 09:00:01</span> <span class="hljs-number">2024</span> from <span class="hljs-number">192.168.1.122</span><br>admin@<span class="hljs-number">192.168.1.122</span>:~$<br></code></pre></td></tr></table></figure><p><strong>建议</strong></p><p>如果主机未使用，请停用。</p><p>如果主机有计划，则可以通过利用 libpam-pwquality 软件包来增加密码策略。以下是为此涉及的步骤（请注意，需要进行测试以确保这在所有系统上都有效）：</p><p>安装软件包：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> update<br>sudo apt-<span class="hljs-built_in">get</span> install libpam-pwquality<br></code></pre></td></tr></table></figure><p>编辑 &#x2F;etc&#x2F;pam.d&#x2F;common-password 文件并编辑以下行：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">password        requisite                       pam_pwquality.so <span class="hljs-attribute">retry</span>=3 <span class="hljs-attribute">minlen</span>=16 <span class="hljs-attribute">dcredit</span>=-1 <span class="hljs-attribute">ucredit</span>=-1 <span class="hljs-attribute">lcredit</span>=-1 <span class="hljs-attribute">ocredit</span>=-1<br></code></pre></td></tr></table></figure><p>上面的示例强制执行以下密码复杂性：</p><ul><li>minlen&#x3D;16：最小密码长度。</li><li>dcredit&#x3D;-1：至少需要一位数字。</li><li>ucredit&#x3D;-1：至少需要一个大写字母。</li><li>lcredit&#x3D;-1：至少需要一个小写字母。</li><li>ocredit&#x3D;-1：至少需要一个特殊字符。</li></ul><p>要确保 SSH 服务器正在使用此 PAM 模块，请编辑 &#x2F;etc&#x2F;ssh&#x2F;sshd_config 并确保将 UsePam 设置为 Yes。可能需要重新启动 SSH 服务器才能生效。</p><p>如果正在使用金牌版本，或者更广泛的环境处于配置管理之下，请考虑查看密码策略集并按照上述准则增加密码策略集。密码策略的实现可能因 Linux 发行版和其他操作系统而异。虽然此方法可能有助于保护本地帐户，但对于环境中的任何中央身份验证提供商（例如 LDAP 服务），请考虑查看密码策略以确保其符合上述建议。</p><p><strong>位置</strong></p><p>192.168.1.122</p><p><strong>引用</strong></p><p>Ubuntu 22.04 密码规则 - <a href="https://www.server-world.info/en/note?os=Ubuntu_22.04&p=pam&f=1">https://www.server-world.info/en/note?os=Ubuntu_22.04&amp;p=pam&amp;f=1</a></p><h2 id="高-Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致"><a href="#高-Windows-Server-漏洞，由于多个缺失修补程序（包括关键-MS17-010）而导致" class="headerlink" title="高 - Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致"></a>高 - Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</h2><p><strong>描述</strong></p><p>MS17-010 漏洞会影响 Windows Server 消息块协议（1.0 版），该协议主要用于 Windows 网络中的文件共享。该漏洞本身被 WannaCry 勒索软件广泛利用，在全球范围内造成了重大影响。</p><p>鉴于利用此漏洞会导致以 SYSTEM 用户身份在主机上执行任意远程代码，攻击者能够完全破坏系统。其结果意味着主机上的任何用户、数据或凭据材料都可能受到损害，并被用于攻击网络的其余部分。但是，由于这会影响 Windows 域控制器，因此可以访问所有用户的所有凭据材料（以哈希或加密格式）。</p><p>由于这是整个环境的域控制器，并且是环境中通过 LDAP 提供身份验证的主要服务，因此入侵将影响生产域中所有连接的服务器和服务。</p><p>Nessus 的以下结果显示了这一发现：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Nessus Scan Report:</span><br><span class="hljs-attr">Host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span><br><span class="hljs-attr">OS:</span> <span class="hljs-string">Windows</span> <span class="hljs-string">Server</span> <span class="hljs-number">2019</span><br><span class="hljs-attr">Vulnerability:</span> <span class="hljs-string">MS17-010</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Critical</span><br><span class="hljs-attr">Description:</span> <span class="hljs-string">Security</span> <span class="hljs-string">Update</span> <span class="hljs-string">for</span> <span class="hljs-string">Microsoft</span> <span class="hljs-string">Windows</span> <span class="hljs-string">SMB</span> <span class="hljs-string">Server</span> <span class="hljs-string">(4013389)</span><br><span class="hljs-attr">Severity:</span> <span class="hljs-string">Critical</span><br></code></pre></td></tr></table></figure><p>虽然服务器在评估期间未被利用，但使用了 Metasploit 来确认服务器是否可能易受攻击：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Scanning</span> for vulnerabilities...<br>[*] <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>:<span class="hljs-number">445</span>   - <span class="hljs-symbol">Host</span> is likely <span class="hljs-symbol">VULNERABLE</span> to <span class="hljs-symbol">MS17</span><span class="hljs-number">-010</span>! - <span class="hljs-symbol">Windows</span> <span class="hljs-number">7</span> <span class="hljs-symbol">Professional</span> <span class="hljs-number">7601</span> <span class="hljs-symbol">Service</span> <span class="hljs-symbol">Pack</span> <span class="hljs-number">1</span> (<span class="hljs-number">64</span>-bit)<br>[*] <span class="hljs-symbol">Scanned</span> <span class="hljs-number">1</span> of <span class="hljs-number">1</span> hosts (<span class="hljs-number">100</span><span class="hljs-comment">% complete)</span><br>[*] <span class="hljs-symbol">Auxiliary</span> module execution completed<br></code></pre></td></tr></table></figure><p><strong>建议</strong></p><p>修复此漏洞的最简单方法是使用 Windows 更新更新主机。如果使用补丁，还可以使用 WSUS 或 SCCM 在整个网络中推出。有关此漏洞的更多详细信息，请参阅 <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p><p>如果无法修补漏洞，缓解措施可能是禁用 SMB 版本 1 - 这是因为 MS17-010 仅在 SMB 服务运行版本 1 时才会影响它。但是，应该注意的是，禁用 SMB 版本 1 也应作为完全修正此问题的一部分执行，因为它的使用存在许多漏洞。有关详细信息，请参阅“正在使用的 SMB 版本 1”结果。</p><p>查看网络中不在此评估范围内的任何区域，以查看是否存在此漏洞。</p><p>展望未来，确保在整个网络中执行漏洞扫描，以便及时发现和修复关键问题。查看环境的修补过程和过程，以确保及时修补关键漏洞。</p><p><strong>位置</strong></p><p>192.168.1.100:445</p><p><strong>引用</strong></p><p>Microsoft 安全公告 MS17-010 - 严重 - <a href="https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010">https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010</a></p><h2 id="严重-未进行身份验证的-API-端点"><a href="#严重-未进行身份验证的-API-端点" class="headerlink" title="严重 - 未进行身份验证的 API 端点"></a>严重 - 未进行身份验证的 API 端点</h2><p><strong>描述</strong></p><p>发现了一个 API 端点，该端点返回了平台上所有用户的数据，并且无需身份验证即可访问。如果攻击者发现端点，则返回的数据将能够用于目标平台用户。这可能以密码猜测攻击、网络钓鱼或在其他 API 调用中利用其用户 ID 的形式出现。这些攻击不仅可能导致访问用户的敏感信息，而且这些信息的泄露可能会构成具有GDPR影响的隐私泄露。任何以经过身份验证的用户身份检查流量的攻击者都可能发现此漏洞，这意味着它更有可能被系统用户发现，而不是被外部攻击者随机发现。</p><p>During the assessment the following API call was observed which retrieved information that would be subsequently placed on the user’s profile page:</p><p><strong>Request</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/user/profile/1</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>Response</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>Based on how REST naming schemes are constructed, it is common for URLs without the suffix of identifiers to return all objects associated with the object type (profile in this case). As can be seen below, this returned data from all users:</p><p><strong>Request</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer REDACTED<br></code></pre></td></tr></table></figure><p><strong>Response</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br>Content-<span class="hljs-keyword">Type</span>: application/<span class="hljs-type">json</span><br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: &quot;1&quot;, &quot;name&quot;: &quot;John REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&quot;&#125;, &#123;&quot;id&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Jane REDACTED&quot;, &quot;email&quot;: &quot;REDACTED&#125;]&#125;<br></code></pre></td></tr></table></figure><p>While this was a significant concern on its own, another check was performed to see if the endpoint was available without authentication. This was achieved by removing the API token sent in the request and the response from the server was still returned, indicating no authentication was required:</p><p><strong>Request</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/users/profile</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br></code></pre></td></tr></table></figure><p><strong>Response</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content</span>-Type: application/json<br>Content-Length: <span class="hljs-number">150</span><br>&#123;&quot;users&quot;: [&#123;&quot;id&quot;: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;, &#123;&quot;id&quot;: <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jane REDACTED&quot;</span>, <span class="hljs-string">&quot;email&quot;</span>: <span class="hljs-string">&quot;REDACTED&quot;</span>&#125;]&#125;<br></code></pre></td></tr></table></figure><p><strong>Recommendations</strong></p><p>查看解决方案中的 &#x2F;api&#x2F;users&#x2F;profile 终结点及其用例。如果不需要服务器返回所有用户，则应将其从应用程序中删除。如果平台的管理员用户需要它，则应围绕端点进行适当的身份验证和访问控制，以便只有管理员用户才能从此端点检索数据。</p><p>查看所有 API 端点，以确保返回或修改的数据只有在用户登录或经过身份验证后才能访问的任何端点。同样，请查看 API 端点以确认是否设置了返回所有对象的任何端点，因为代码库中的其他地方可能存在类似的疏忽。</p><p>确保在允许将代码合并到生产代码之前执行的代码审查过程经过仔细审查，特别是围绕引入新终结点或修改现有终结点。请考虑创建动态测试，以检查对不应具有的 API 端点的匿名访问，以及检查返回所有不应配置的对象的 API 端点。最后，考虑针对代码库运行任何适用的静态分析工具。一些特定于框架的工具可能能够突出显示这些问题。</p><p><strong>位置</strong></p><p>&#x2F;api&#x2F;users&#x2F;profile</p><p><strong>引用</strong></p><p>OWASP 数据泄露过多 - <a href="https://owasp.org/API-Security/editions/2019/en/0xa3-excessive-data-exposure/">https://owasp.org/API-Security/editions/2019/en/0xa3-excessive-data-exposure/</a></p><h2 id="严重-在论坛软件上存储的跨站点脚本"><a href="#严重-在论坛软件上存储的跨站点脚本" class="headerlink" title="严重 - 在论坛软件上存储的跨站点脚本"></a>严重 - 在论坛软件上存储的跨站点脚本</h2><p><strong>描述</strong></p><p>OmniCorp 用于协助客户支持请求的论坛软件容易受到存储的跨站点脚本的影响。此漏洞影响了论坛帖子页面上的评论部分，任何恶意注入的代码都会对访问受影响页面的任何用户运行。攻击者可以利用此漏洞破坏用户论坛会话（包括论坛版主或管理员），甚至提供虚假的登录表单，试图窃取用户的生产凭据。如果获取了用户凭据，则可能导致攻击者获得对敏感用户数据的访问权限。此漏洞的攻击复杂度非常低，因为没有防御性编码，使攻击者更容易利用;唯一的要求是用户访问受影响的论坛帖子。虽然只有该平台的用户可以利用这个问题，但鉴于互联网上的任何人都可以自行注册和使用该平台，这是没有意义的。虽然在托管论坛的 Web 服务器上安装了 Web 应用程序防火墙，但它当前并未运行。但是，即使启用了此问题，它也可能无法阻止所有利用此问题的尝试。</p><p>存储的跨站点脚本是一种漏洞，Web 应用程序未对不受信任的输入执行足够的输入验证或清理，或者未对值执行足够的输出编码。其结果是，应用程序（在数据库、日志或其他系统中）提交并随后存储的恶意信息随后被反映并合并到生成的网页中。在跨站点脚本的情况下，JavaScript 被发送到服务器、存储并返回到用户的浏览器，并执行以执行各种恶意操作。</p><p>利用跨站点脚本漏洞存在一系列可能性，其中一些包括：</p><ul><li>在浏览器会话中运行加密矿工</li><li>尝试窃取经过身份验证的页面上特定于用户的会话令牌或内容</li><li>注入虚假表格供用户填写，以试图窃取信息（例如，用于收集凭据的登录表格）</li><li>在用户不知情的情况下在用户上下文中执行操作（例如，将恶意内容发布到论坛）</li><li>显示恶意内容</li></ul><p>鉴于利用此漏洞的方式多种多样，此问题会严重影响任何处理敏感数据的应用程序，因为它更有可能被盗、修改或删除。</p><p>以下 HTTP 请求和响应显示了 OmniCorp 论坛应用程序软件接受的基本 JavaScript 的注入。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/forum/post/1/comment</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br><br><span class="language-apache"></span><br><span class="language-apache"><span class="hljs-attribute">postId</span>=<span class="hljs-number">42</span>&amp;comment=%<span class="hljs-number">3</span>Cscript%<span class="hljs-number">3</span>Ealert(&#x27;XSS&#x27;)%<span class="hljs-number">3</span>C%<span class="hljs-number">2</span>Fscript%<span class="hljs-number">3</span>E</span><br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br></code></pre></td></tr></table></figure><p>以下 HTTP 请求和响应显示服务器作为可在用户浏览器会话中运行的可执行 JavaScript 返回的有效负载。</p><p><strong>请求</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/forum/post/1/comments</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>forum.example.com<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/x-www-form-urlencoded<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>68<br><span class="hljs-attribute">Cookie</span><span class="hljs-punctuation">: </span>sessionid=REDACTED<br></code></pre></td></tr></table></figure><p><strong>响应</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=UTF-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>256<br><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;XSS&#x27;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>下图显示了正在执行的有效负载：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404232001881.png" alt="img"></p><p>正在执行的 Omnicorp 存储的跨站点脚本</p><p>创建概念验证 JavaScript 有效负载以生成以下 OmniCorp 登录表单。这将显示在请求的论坛帖子的顶部，以提示输入用户的凭据。提交后，用户的凭据将被发送到攻击者控制的服务器，然后帖子将变得可见。</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404232001294.png" alt="img"></p><p>假 OmniCorp 登录屏幕</p><p>可以在附录第 5.2 节中找到虚假登录概念证明 HTML 和 JavaScript 有效负载的完整副本，以及使用的 HTTP 请求和响应。</p><p><strong>建议</strong></p><p>防止跨站点脚本需要多种方法来确保应用程序保持安全：</p><ul><li>不受信任数据的服务器端验证</li><li>用户提供数据的输出编码</li></ul><p>应验证发送到服务器的所有数据，以确保它不包含意外类型，并且内容是预期的。当服务器需要自由范围的文本时，对这些数据进行验证可能更具挑战性。在这些情况下，可以在将特定字符存储在数据库中之前对其进行 HTML 编码。这将确保在客户端请求时以编码格式返回它们。</p><p>在为客户端构建页面时，必须确保返回的所有变量都经过适当的编码。许多现代前端框架将自动执行编码，但在使用应用程序外部任何资源中的值时仍应小心，即使它应被视为受信任的。</p><p>使用编码对应项进行编码的关键值包括：</p><table><thead><tr><th>字符</th><th>编码版本</th></tr></thead><tbody><tr><td>&amp;</td><td>&amp;</td></tr><tr><td>&lt;</td><td>&lt;</td></tr><tr><td>&gt;</td><td>&gt;</td></tr><tr><td>“</td><td>“</td></tr><tr><td>‘</td><td>&#x27;</td></tr></tbody></table><p>如果服务器返回包含 HTML 的内容，则可以使用 DOMPurify 来剥离潜在的恶意内容，并且只允许安全的 HTML 标记和属性。如果使用，此库必须保持最新状态。</p><p>对于此应用程序，服务器返回的注释至少应是 HTML，这将导致以下响应：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment&quot;</span>&gt;</span>User posted: <span class="hljs-symbol">&amp;lt;</span>script<span class="hljs-symbol">&amp;gt;</span>alert(<span class="hljs-symbol">&amp;#x27;</span>XSS<span class="hljs-symbol">&amp;#x27;</span>)<span class="hljs-symbol">&amp;lt;</span>/script<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>如果使用 DOMPurify，恶意脚本标记也将被删除。</p><p>有关跨站点脚本防护和 DOMPurify 使用的更多信息，请访问 OWASP 网站 （<a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html%EF%BC%89%E3%80%82%E6%AD%A4%E5%A4%96%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%BA%94%E7%94%A8">https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html）。此外，可以应用</a> Web 服务器强化，使攻击者更难通过 Content-Security-Policy 标头 （<a href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html%EF%BC%89">https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html）</a> 利用跨站点脚本 - 请注意，这不会解决任何潜在问题，应始终实施完整修复。</p><p>查看 Web 应用程序代码的其余部分，以检查是否在其他地方使用了类似的编码模式，这可能会导致跨站点脚本编写。</p><p>开发人员应在提交代码之前利用代码 linter 来发现潜在的危险编码模式和函数用法。此外，在合并到生产代码之前，应执行自动化测试，这应该包括基本的静态分析安全测试。除了自动控制之外，如果尚未创建安全编码指南，则应制定突出框架支持的危险方法的安全编码指南。如果当前工具无法找到该漏洞，请调查是否可以编写自定义规则来发现有问题的 Code Pattern 的未来实例，或者查找可能能够发现该漏洞的其他工具。</p><p><strong>位置</strong></p><p>POST &#x2F;forum&#x2F;post&#x2F;1&#x2F;comment （参数：comment）</p><p><strong>引用</strong></p><ul><li>OWASP 备忘单 - 跨站点脚本防护 <a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html">https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html</a></li><li>OWASP 备忘单 - 内容安全策略 <a href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html">https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html</a></li></ul><h1 id="37-本章小结"><a href="#37-本章小结" class="headerlink" title="37-本章小结"></a>37-本章小结</h1><p>如果你做到了这一点，那就太好了——这是一个很长的章节。在其中，我们涵盖了查找文章的所有核心领域，以及如何以捕获客户执行补救所需的所有信息的方式编写它们的策略。</p><p>以下是本章的一些关键要点：</p><ul><li>确保您的调查结果具有标识符 （ID），以便客户可以轻松参考调查结果 - 越简单越好</li><li>对调查结果的风险评级要深思熟虑，尤其是当您对客户有额外的背景和见解时</li><li>仔细考虑“良好”或“信息性”的调查结果 - 它们应该在调查结果部分、报告的其他地方，还是完全省略？</li><li>考虑使用其他元数据来支持您的发现，例如影响、可利用性、可能性、类别、修正工作或修正验证状态的分数&#x2F;指标</li><li>确保所有调查结果的议题标题格式一致，措辞简明扼要，但需要时包括细节</li><li>在撰写调查结果时，请考虑如果漏洞被利用，对客户及其组织的实际影响</li><li>确保在文章中包括每个发现的影响</li><li>查找说明应包括以下信息：<ul><li>发现是什么</li><li>为什么不好</li><li>影响（或分解成自己的部分）<ul><li>哪些用户会受到影响？</li><li>哪些系统会受到影响？</li><li>哪些数据会受到影响？</li></ul></li><li>该问题的可利用性以及被利用的可能性如何？</li><li>是否有任何缓解措施可能使问题更难利用？</li><li>调查结果的证据</li><li>如果问题很复杂或您需要解释您的证据，则解释调查结果的更多细节（超出初始描述）</li></ul></li><li>调查结果建议应包括：<ul><li>有关如何修复发现的发现的信息，包括细节和可操作的建议</li><li>建议客户在其他地方搜索同一问题（如果适用）</li><li>如果问题再次出现，就发现问题的预防性建议，或完全预防问题的策略</li></ul></li><li>确保以最清晰的方式提供证据，如果有意义，可以将其放在附录中或作为补充文件提供</li><li>从证据中编辑敏感信息</li><li>包括给定发现存在的明确位置，以便客户知道在哪里进行补救</li><li>考虑为所有非平凡的可解释的发现提供一两个好的参考资料。确保这些内容干净利落地呈现<ul><li>不要用无休止的引用来超载发现，并确保使用的任何引用都是最新的</li></ul></li><li>使用您在这些课程中学到的所有知识来创建好的模板，为您自己或您的团队留下占位符，以注入良好的客户特定上下文和影响信息</li><li>如果使用模板，请记住本章的课程，以确保它们包含所有必需的信息 - 请记住，所有模板都需要自定义！</li></ul><p>创建良好的安全发现是一项必须训练的技能，因此，如果您在本章中的练习中遇到困难，请不要担心。本课程稍后将进行更多练习。如果你将本章学到的原则应用到你的工作中，你的发现写作会得到改善。</p><h1 id="4-严重程度与风险等级"><a href="#4-严重程度与风险等级" class="headerlink" title="4-严重程度与风险等级"></a>4-严重程度与风险等级</h1><p>评级问题是任何安全评估的重要组成部分。它告知客户与评估的内容相比存在多少风险，并充当他们检查的分类列表，通常首先从最关键的风险开始。</p><p>我不认为我在整个行业中看到太多差异，当使用“关键”、“高”、“中”或“低”（或微妙的不同版本）等常见的“风险”评分系统时，如何对错误进行评级。</p><p>在本课中，我们将介绍如何使用这个久经考验的评级系统对调查结果进行评级。我们还将介绍其他一些评级系统，并考虑如何处理“良好”和“信息性”调查结果。</p><h2 id="风险"><a href="#风险" class="headerlink" title="风险"></a>风险</h2><p>“风险”评级系统使用以下公式：</p><blockquote><p>风险 &#x3D; 可能性 X 严重性</p></blockquote><p>让我们来分解一下：</p><ul><li>可能性：漏洞被利用的概率</li><li>严重性（也称为影响）：利用漏洞可能造成的损害或后果</li><li>风险：将“可能性”和“严重性”组合为分数的结果 - “严重”、“高”、“中”或“低”</li></ul><p>这是表格中的样子（请原谅我糟糕的 excel 表格）：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231944793.png" alt="img"></p><p>如果您熟悉此评级系统，您就会知道它提供了一定程度的灵活性和自由裁量权，这也是它优于其他系统的原因之一。</p><p>让我们回顾一下本章开头介绍的 OmniCorp 调查结果，并计算出它们的风险。</p><p><strong>可公开访问的 S3 存储桶</strong></p><ul><li>可能性：中&#x2F;高 - 对于攻击者来说，存储桶的名称并非不可能猜到，但也不完全容易。</li><li>严重性：高 - 存储桶包含一些极其敏感的数据。</li><li>风险：高&#x2F;严重 - 根据存储桶的内容，我会将此四舍五入为“严重”。</li></ul><p><strong>Linux 服务器上的弱密码策略</strong></p><ul><li>可能性：中 - 虽然密码很常见，但攻击者需要在网络内部才能利用此密码。</li><li>严重性：低 - 虽然攻击者可以访问基础主机上的低特权帐户，但主机本身并未使用。</li><li>风险：低 - 鉴于主机上有其他上下文，并且没有其他主机受到影响，这可能是一个孤立的情况。</li></ul><p><strong>Windows Server 漏洞，由于多个缺失修补程序（包括关键 MS17-010）而导致</strong></p><ul><li>可能性：中 - 攻击者需要在内部网络上才能利用此问题。</li><li>严重性：高 - 鉴于这是整个生产网络的域控制器，此漏洞的影响将非常高。</li><li>风险：高&#x2F;严重 - 可以提出一个论点，使这成为一个关键问题。但是，根据在内部网络上的要求，我会选择高。</li></ul><p><strong>API 终端节点返回所有用户数据</strong></p><ul><li>可能性：高 - API 端点可通过 Internet 访问，只需代理流量即可找到。</li><li>严重性：高 - 应用程序返回有关所有用户的数据，包括电子邮件地址。</li><li>风险：高&#x2F;严重 - 从 GDPR 的角度来看，此问题可能很严重，因为个人数据可能已暴露给未经授权的用户。</li></ul><p><strong>在论坛软件上存储跨站点脚本</strong></p><ul><li>可能性：高 - 鉴于论坛评论无法抵御跨站点脚本攻击，新手攻击者可以利用此漏洞。</li><li>严重性：高 - 由于根本没有保护措施，攻击者可以使用多种类型的攻击。最糟糕的是，他们能够从用户那里窃取会话令牌并作为他们进行身份验证。他们甚至可以进行虚假登录以窃取凭据。</li><li>风险：严重 - 此漏洞的潜在损害具有重大潜力。</li></ul><p>你会注意到，我和自己争论一些收视率。对于这个评级系统来说，这是非常普遍的，因为当问题似乎介于两个严重性级别之间时，通常会对问题进行评级。</p><h2 id="假设违规和内部威胁"><a href="#假设违规和内部威胁" class="headerlink" title="假设违规和内部威胁"></a>假设违规和内部威胁</h2><p>近年来出现的一种理念是零信任。这个概念指出，网络本身应该被认为是敌对的，组织应该认为它们已经被破坏了，并认为员工本身就是攻击者。这是对外围安全控制的有效性和有效性的范式转变，并要求在外部和内部进行严格的控制。</p><p>我亲眼目睹了这种转变如何对风险评级产生有趣的影响，客户希望将这一理念应用于调查结果。</p><p>让我们回顾一下之前的发现，并根据这种零信任心态重新评估它们。</p><p><strong>可公开访问的 S3 存储桶</strong></p><ul><li>可能性：高 - 如果我们假设具有 AWS 访问权限的恶意内部人员可以获取存储桶的名称，他们可能能够轻松访问存储桶内容。</li><li>严重性：高 - 存储桶包含极其敏感的数据。</li><li>风险：严重 - 我觉得这比以前稍微严重了一点，但不是很多。</li></ul><p><strong>Linux 服务器上的弱密码策略</strong></p><ul><li>可能性：高 - 如果我们假设攻击者已经在内部（员工或突破边界的攻击者），则通过密码喷射攻击成功破坏 SSH 的机会很高。</li><li>严重性：低 - 虽然攻击者可以访问基础主机上的低特权帐户，但主机本身并未使用。</li><li>风险：低&#x2F;中 - 尽管可能性发生变化，但主机的价值对攻击者来说仍然很小，即使它们位于内部网络上。</li></ul><p><strong>缺少修补程序的 Windows Server</strong></p><ul><li>可能性：高 - 如果我们假设攻击者已经在网络上，他们将能够轻松利用此漏洞。</li><li>严重性：高 - 鉴于这是整个生产网络的域控制器，此漏洞的影响将非常高。</li><li>风险：严重 - 当您认为外部或内部攻击者有权访问网络并可以访问域控制器时，前面关于严重性的论点将失效。</li></ul><p><strong>不带身份验证的 API 端点</strong></p><ul><li>可能性：高 - API 端点可通过 Internet 访问，只需代理流量即可找到。</li><li>严重性：高 - 应用程序返回有关所有用户的数据，包括电子邮件地址。</li><li>风险：高&#x2F;严重 - 由于此问题是外部面临的，因此假设违规&#x2F;内部威胁理念不会改变此问题的风险。特别是考虑到这个问题的可发现性。</li></ul><p><strong>在论坛软件上存储跨站点脚本</strong></p><ul><li>可能性：高 - 鉴于论坛评论无法抵御跨站点脚本攻击，新手攻击者可以利用此漏洞。</li><li>严重性：高 - 由于根本没有保护措施，攻击者可以使用多种类型的攻击。最糟糕的是，他们能够从用户那里窃取会话令牌并作为他们进行身份验证。他们甚至可以进行虚假登录以窃取凭据。</li><li>风险：严重 - 与上一个问题一样 - 由于此问题是外部面临的，因此假设违规&#x2F;内部威胁理念不会改变此问题的风险。特别是考虑到这个问题的可发现性。</li></ul><hr><p>您将看到，对问题所做的调整主要影响内部托管的服务&#x2F;应用程序&#x2F;等，或者作为“内部人员”可能会让您更深入地了解发现或利用漏洞的区域（调整的可能性增加）。外部面临的明显或微不足道的漏洞以及对攻击者几乎没有价值的内部漏洞仍然不受影响。</p><h2 id="CVSS系列"><a href="#CVSS系列" class="headerlink" title="CVSS系列"></a>CVSS系列</h2><p>我不认为我可以在不涉及 CVSS 的情况下上一堂关于风险评级的课。CVSS（或通用漏洞评分系统）是一种开放标准，它提供了一种公式化方法来确定基于风险的评分。</p><p>该标准经过多年的发展，并进行了调整，以应对安全环境的变化，并解决漏洞的不同性质。这当然是 CVSS 版本 2 和版本 3 中的一个问题。我无法对 CVSS 版本 3 或 4 的使用发表评论，但我可以肯定地说，对于 2 来说，报告几个不符合所需标准的漏洞是相当痛苦的，尤其是代码审查和 Web 应用程序漏洞。</p><p>虽然 CVSS 过去显然存在一些缺点，但它确实为组织提供了一种更准确地评估漏洞的方法，并提供更一致的风险评级。在上一节中，我不得不与自己讨论什么是可能的，什么是不可能的——CVSS 将强制执行更严格的标准，从而产生更具确定性的漏洞评分——这对组织来说更有用。</p><p>可悲的是，“风险”系统的灵活性意味着业内对 CVSS 有很多鄙视。CVSS 通常被视为一种降低风险的手段，以避免不得不修复重大发现，或者是一种用于降低安全研究人员工作的价值和影响的工具。此外，这个评级系统还有一点学习曲线，因为与“风险”系统相比，它非常复杂，有许多指标和修饰符，都有自己的值。</p><p>不管你喜不喜欢，如果你是一个渗透测试人员，你将来可能会遇到这个评级系统。如果你想了解它，你可以在这里找到一些详细信息 - <a href="https://www.first.org/cvss/">https://www.first.org/cvss/</a></p><h2 id="客户的风险评级系统"><a href="#客户的风险评级系统" class="headerlink" title="客户的风险评级系统"></a>客户的风险评级系统</h2><p>并不是说我在这里可以给你很多建议，但有时你可能需要使用客户的内部评级系统，或者根据客户自己的指标将熟悉的风险评级应用于问题。在某些方面，我觉得这些系统是客户自己对 CVSS 的实现。</p><p>这是我比我认识的大多数顾问要做的事情，值得庆幸的是，我花了很多时间与某些客户打交道，以至于我很容易摆脱看待问题及其风险的正常方式。对于其他顾问来说，他们会短暂地加入我从事的长期项目，他们很难重新连接他们的大脑。</p><p>虽然以不熟悉的方式进行评级问题可能会非常痛苦和令人沮丧，但我们需要记住，客户是出于自己的原因形成评级的，我们需要支持他们。我见过这些没什么意义的案例，但其他一些案例确实如此。尽管每个客户对风险的看法不同，但这些系统几乎总是用于某种内部风险登记或分类过程。这使他们能够从许多来源（自动化工具、内部测试团队、第三方评估供应商等）获取漏洞信息，应用相同的评级系统，并在所有来源上获得一致的评级。</p><p>与往常一样，请务必联系您的客户，就您不确定可能存在的风险的情况寻求任何指导。最好寻求帮助并评价错误的东西，然后在评估完成后处理恼火的客户。</p><h2 id="信息发现"><a href="#信息发现" class="headerlink" title="信息发现"></a>信息发现</h2><p>信息性发现有时会在报告中提出，其中测试人员观察到一些没有与之相关的安全风险，但可能需要客户进行调查。</p><p>多年来，我一直喜欢在报告中报告信息问题，但随着时间的推移，我觉得它们在报告中的价值微乎其微。当您认为信息问题没有与之相关的安全风险时，这意味着出于安全评估的目的，不需要对发现进行补救 - 如果是这种情况，为什么要报告它？</p><p>解决这个问题的一个好方法是，如果发现有丝毫的安全问题，要么将风险提高到“低”，要么放弃报告发现。如果该项目值得向客户提及，但在报告中没有任何相关性（无论是作为发现、警告还是其他内容），您可以通过电子邮件向客户发送有关它作为提醒。</p><h2 id="良好的发现"><a href="#良好的发现" class="headerlink" title="良好的发现"></a>良好的发现</h2><p>我过去曾看到过“良好”风险评级的概念，所以值得一提。这对我来说有点过时，但由于我使用过的报告要求，我有偏见。当我们谈论“发现”时，对我来说，这是需要补救的事情。对于任何与之相关的潜在安全风险（从关键到低），甚至可能是信息发现（本质上是他们调查或注意的项目，尽管如前所述，如果可能的话，我宁愿跳过这些），但对于“好”发现，没有什么可做的或采取行动。这让我觉得它们的使用与报告中更广泛的调查结果列表不一致。</p><p>我认为最好在执行摘要或报告顶部的单独部分讨论高层次的“良好”做法，而不是将它们作为具体问题。但是，只有在您确实有证据证明的情况下，才提及“好”的事情。</p><h2 id="忽略低风险问题"><a href="#忽略低风险问题" class="headerlink" title="忽略低风险问题"></a>忽略低风险问题</h2><p>多年来，我与许多顾问交谈过，我听说过几次，一些低风险或无关紧要的问题没有被报告。我不确定这种做法在整个行业中有多普遍，但原因是他们不想用对他们的风险状况没有任何实际影响的发现来打扰客户。</p><p>最初，有些评论对我来说是有道理的，但过了一会儿，这种做法让我感到震惊。作为安全专业人员（或者即使您在内部团队工作），我们也应该强调在参与过程中发现的任何风险。由客户团队选择他们想要对结果执行的操作以及是否要对其进行补救。如果我们觉得发现存在安全风险，即使它是微不足道的，我们当然有责任报告它吗？</p><p>如果未报告的 bug 曾经被利用或用作针对客户端的更广泛攻击的一部分，这对测试团队来说可能是非常糟糕的。此外，如果客户将来由不同的测试人员（来自同一测试供应商或其他测试供应商）进行测试，则未报告的结果将显示出来的风险也会增加。鉴于这些风险较低的问题很容易找到，一些客户可能会惊讶地看到它们以前没有被发现。</p><p>我怀疑过去一些客户已经推迟了低风险问题，这就是为什么选择省略某些类型的调查结果的原因。但是，在这些情况下，我倾向于在特定客户的基础上应用这一理念，而不是一刀切地应用这一理念，事实上，请确保您警告客户，从报告中省略问题可能会有风险。</p><h2 id="课程总结-11"><a href="#课程总结-11" class="headerlink" title="课程总结"></a>课程总结</h2><p>我们必须正确地对问题进行评级，因为这将影响客户在确定何时应该解决的问题时做出决策。如果未以正确的方式对结果进行评级，则重大风险可能会存在足够长的时间，以至于攻击者可能会利用它。使用您不熟悉的风险评级系统时，请确保在对调查结果的风险进行评分时仔细考虑。如果您在这里犯了错误，这可能会导致您不得不重新进行分析。如果客户认为您歪曲了调查结果的风险，则可能会发生这种情况。或者，如果某些调查结果的评分太低，客户可能不会给予适当的关注。关于低风险问题的话题 - 不要代表客户做出决定并省略调查结果，始终报告您认为有风险的调查结果，无论多么小。</p><h1 id="严重性和风险评级-练习"><a href="#严重性和风险评级-练习" class="headerlink" title="严重性和风险评级 - 练习"></a>严重性和风险评级 - 练习</h1><p>这是一堂关于如何评价问题的相当长的课。</p><p>让我们做一些练习来练习对问题的评级，并考虑我们涵盖的其他主题。</p><p><strong>反思练习</strong></p><ul><li>查看您编写或有权访问的报告。调查结果描述是否与给定的风险级别匹配？<ul><li>如果没有，你能纠正它们吗？</li><li>如果你不确定，这是为什么？缺少哪些信息可以帮助您确定更准确的风险评级？</li></ul></li><li>查看您编写或有权访问的报告。它是否提出了任何“良好”或“信息”问题？你觉得他们为报告增加了价值吗？或者，根据上一课，您觉得它们可以移动到报表中的其他位置或完全删除吗？</li><li>查看您撰写或有权访问的报告，重点关注分配给每个发现的风险评级。对调查结果的可利用性提出一些假设的缓解措施或更改 - 风险评级会改变吗？</li></ul><p><strong>一般练习</strong></p><ul><li>使用风险评级系统对 OmniCorp 章节示例结果进行评分。<ul><li>以与课程相同的格式，给出可能性、严重性和风险的理由。</li></ul></li><li>使用假设违规&#x2F;内部威胁方法对 OmniCorp 章节示例发现进行评分。<ul><li>以与课程相同的格式，给出可能性、严重性和风险的理由。</li></ul></li></ul><p><strong>超越练习</strong></p><ul><li>研究和了解 CVSS（最好是最新版本）</li><li>回顾上一课中的示例问题 - 你能在 CVSS 中对它们进行评分吗？</li></ul><h1 id="6-其他查找元数据"><a href="#6-其他查找元数据" class="headerlink" title="6-其他查找元数据"></a>6-其他查找元数据</h1><p>我们刚刚介绍了风险评级以给出一个发现，但我认为可能值得非常快速地涵盖我偶尔看到的其他特定于发现的元数据。值得指出的是，我也看到了相反的情况，报告的调查结果中几乎没有元数据 - 只是一个风险评级。</p><p>一些供应商发现将这些附加信息打包并放在调查结果旁边很有用，这样客户在对调查结果进行分类时可以为客户提供更多的背景信息。在某些情况下，客户将能够使用这些来深入了解给定漏洞的风险是如何获得的，以及他们的下一步可能是什么。</p><p>让我们来看看我见过的一些最常见的元数据。</p><h2 id="影响"><a href="#影响" class="headerlink" title="影响"></a>影响</h2><p>影响（或我在本课程中所说的严重性）通常采用“低”、“中”或“高”的格式。这通常是测试人员用来计算给定问题风险的等式的一半。有关此内容，请参阅“严重性和风险评级”课程中的精彩表格。</p><h2 id="可利用性-可能性"><a href="#可利用性-可能性" class="headerlink" title="可利用性&#x2F;可能性"></a>可利用性&#x2F;可能性</h2><p>与“影响”类似，可利用性或可能性通常可以用大致相同的方式表示。同样，请参阅“严重性和风险评级”课程中的表格。潜在值可以是“低”、“中”或“高”，也可以是“理论”、“未证实”、“可能”、“可能”、“确认”或“确定”。</p><h2 id="类别"><a href="#类别" class="headerlink" title="类别"></a>类别</h2><p>有时，给定漏洞的类别与调查结果一起提供。我在课程的前面谈到了这一点，以及根据发现的问题的“类型”来分解调查结果是如何有用的，这就是这些信息的来源。</p><p>我见过这里使用了多种不同的值，比如来自 OWASP Top 10（以2021年版为例）的名称：</p><ul><li>访问控制失效</li><li>加密失败</li><li>注入攻击</li><li>不安全设计</li><li>安全配置错误</li><li>易受攻击和过时组件</li><li>身份验证与认证失败</li><li>安全日志与监控失效</li><li>服务器端请求伪造</li></ul><p>……或者更为宽泛的类别，如：</p><ul><li><p>身份验证</p></li><li><p>授权</p></li><li><p>加密</p></li><li><p>补丁管理</p></li><li><p>日志记录</p></li><li><p>等等</p></li></ul><p>使用类别有相当大的价值，然而，挑战在于确保类别列表不会太长，但足够大，以便能够合理地对一系列发现进行分组。</p><h2 id="需要的修正工作"><a href="#需要的修正工作" class="headerlink" title="需要的修正工作"></a>需要的修正工作</h2><p>有时，在估计开发或工程团队解决问题所需的工作量时，会涉及猜测。我总是有点不确定是否建议这种数据，因为在补救措施方面，我们真的永远无法确定团队的能力和优先级。如果客户同意我们只能提供 T 恤尺寸（S、M、L、XL）的粗略估计，并理解我们的知识有限，那么它应该是可以接受的。</p><p>显然，客户需要对问题进行自己的调查，以亲眼看看他们将如何计划工作以及他们认为修复它需要多长时间，但测试团队的一些评论可能有助于初步了解这项工作可能是什么。</p><h2 id="CVSS-分数字符串"><a href="#CVSS-分数字符串" class="headerlink" title="CVSS 分数字符串"></a>CVSS 分数字符串</h2><p>还记得您刚刚完成的 CVSS 练习吗？如果报告对 CVSS 问题进行了评分，则最好不仅提供分数名称（“严重”、“高”、“中”、“低”、“无”）和十进制数（从 10.0 到 0.0），还要提供等式中给出的所有值的字符串。这可能看起来像这样（对于版本 3.1）：</p><blockquote><p>CVSS：3.1&#x2F;AV：N&#x2F;AC：L&#x2F;PR：N&#x2F;UI：N&#x2F;S：U&#x2F;C：H&#x2F;I：H&#x2F;A：H</p></blockquote><p>我会让你计算出最终的分数以及这一切意味着什么。</p><h2 id="修复验证状态"><a href="#修复验证状态" class="headerlink" title="修复验证状态"></a>修复验证状态</h2><p>如果一份报告已发布给客户，客户已修复了一些问题，且测试团队已进行了某些修复验证（又称重新测试），那么在报告中记录发现项的状态并非罕见做法。</p><p>可能的值包括：</p><ul><li>Open（未解决）</li><li>Part Closed（部分关闭）</li><li>Closed（已关闭）</li><li>False Positive（误报）</li></ul><p>这样，报告读者就能看到对于给定问题列表，当前存在的开放风险的最新状态。我们将在后续几章中深入探讨修复验证。</p><h2 id="课程总结-12"><a href="#课程总结-12" class="headerlink" title="课程总结"></a>课程总结</h2><p>虽然调查结果可以简单地从风险评级分数和标题开始，但在这里，我们展示了如何为客户提供额外的有用元数据，以帮助他们一目了然地了解调查结果。其他元数据在调查结果本身中也很有用，可以涉及修正工作，甚至可以触及调查结果的状态。值得注意的是，我们永远不会真正知道为给定的客户修复某些事情是多么容易或困难，我们应该在报告中提出适当的警告来提及这一点。</p><h1 id="7-其他查找元数据-练习"><a href="#7-其他查找元数据-练习" class="headerlink" title="7-其他查找元数据 - 练习"></a>7-其他查找元数据 - 练习</h1><p>上一课介绍了一堆额外的元数据，你可以附加到问题上，以便为客户端提供更好的上下文。</p><p>让我们做一些练习，看看你过去看到了什么，并练习应用它们。</p><p><strong>反思练习</strong></p><ul><li>反思您最近撰写或有权访问的报告。它是否在具体调查结果中包含了任何其他元数据？<ul><li>如果没有，是否可以将“影响”、“可利用性”和“修正工作”添加到调查结果中？</li></ul></li></ul><p><strong>一般练习</strong></p><ul><li><p>创建一个可能包含在报告中的漏洞类别列表。确保该列表既全面又不过于冗长，以便对发现项进行合理的分组。</p><p>对于 OmniCorp 章节练习中的每个发现项，请应用以下元数据：</p><ul><li>影响</li><li>利用难易度</li><li>类别（使用您刚刚制作的列表）</li><li>修复工作量</li></ul></li></ul><h1 id="8-标题"><a href="#8-标题" class="headerlink" title="8-标题"></a>8-标题</h1><p>所有发现都需要给它一个名字，这样做并不难。尽管如此，标题可能需要考虑以下几个方面：</p><ul><li>格式</li><li>措辞</li><li>详细查找标题</li></ul><p>让我们来看看它们。</p><h2 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h2><p>我在课程的其他地方已经谈到了如何命名部分，所以请将其视为一个温和的提醒，因为这里同样适用。</p><p>有三种方法可以做到这一点：</p><ul><li>所有关键词均大写。介词（例如“in”、“under”、“without”）和冠词（例如“a”、“an”）或其他 3 个字符或更少的单词不大写。<ul><li>“客户配置文件页面中的 SQL 注入”</li></ul></li><li>所有单词均大写。<ul><li>“客户配置文件页面中的 SQL 注入”</li></ul></li><li>标题更像是一个句子而不是一个标题，我会避免这样做。<ul><li>“客户资料页面中的 SQL 注入”</li></ul></li></ul><p>我通常用第一种格式写标题。这是技术报告写作的一种非常常见的格式，但是，第二种格式已被更多地采用。我不完全确定这是因为对团队说“将标题的所有单词大写”更容易，或者在第一种格式中是否发生了错误或不一致。在我看来，无论哪种方式都可以，正如我之前提到的——一致性是关键。</p><p>就我个人而言，我不喜欢第三种格式。这似乎太像一个被用作标题的句子了。我不想这么说，但如果你与这种格式保持一致，它可能没问题，只是我注意到它不是经常使用的（而且我认为它在报告中看起来并不那么好）。</p><h2 id="措辞"><a href="#措辞" class="headerlink" title="措辞"></a>措辞</h2><p>报告中查找标题的措辞方式感觉很重要，主要是为了避免问题标题太长或太模糊。我坐下来思考了我过去看到的一些不好的例子（或者一些我可能考虑过写的例子），所以我可以在这里提供一些智慧。</p><p>这是我想出的：</p><ul><li>跨站点脚本可从用户的个人资料页面利用</li><li>搜索功能容易受到 SQL 注入的影响</li><li>允许匿名访问所有患者数据</li><li>使用过时的第三方库的 Web 应用程序</li><li>应用程序无法保护静态和传输中的 PII</li></ul><p>标题本身内容丰富，但对于其预期目的来说可能过于冗长。简明扼要，使标题更清晰：</p><ul><li>配置文件页面中的跨站点脚本</li><li>搜索函数中的 SQL 注入</li><li>匿名访问患者数据</li><li>过时的第三方库</li><li>无效的 TLS 证书</li><li>PII 在静态和传输中不受保护</li></ul><p>在上面的例子中，我删除了诸如“易受攻击”和“可利用”之类的词——鉴于我们将它们作为调查结果提出，这两个词都是隐含的。其他多余的词（如“允许”或“Web 应用程序”）也同样被删除，因为它们在报告的上下文中应该是显而易见的。“应用程序失败”也是如此 - 如果它没有失败，那么我们就不会有发现。</p><h2 id="详细查找标题"><a href="#详细查找标题" class="headerlink" title="详细查找标题"></a>详细查找标题</h2><p>您会注意到，在上面的示例中有一些特别命名的发现（从某种意义上说，我指出了受给定错误影响的特定区域）。当有一个特定的函数或“事物”是易受攻击的，并且能够以这种方式被调用时，我认为这样做是可取的。它有助于显示漏洞发生的位置，并表明此实例可能是少数孤立案例之一。当您有一个或多个 bug 类示例时，这很有帮助，但它不够多产，需要过于高级的查找。</p><p>考虑确定是否需要更详细的标题的方法是考虑以下问题：</p><ul><li>是否存在一个 bug 实例？<ul><li>&gt; 否 - 使用包含细节的标题提出。</li><li>&gt; 是 - 发现的实例是两个还是三个之一？<ul><li>&gt; 是 - 考虑使用包含细节的标题单独提出调查结果。</li><li>&gt; 否 - 提出一般性发现并引用发现的实例（在发现本身或附录中）。</li></ul></li></ul></li></ul><p>何时考虑单独筹集或不考虑单独筹集的门槛可能有所不同，但我会记住的是：</p><ul><li>这些错误是否彼此明显不同，或者就错误的位置或表现形式而言，它们应该单独提出？例如：<ul><li>该错误位于同一测试的不同部分或完全不同的 Web 应用程序中</li><li>该漏洞的发现和&#x2F;或利用表明，潜在的发现略有不同</li></ul></li><li>这些错误会以不同的方式修复吗？如果是，单独饲养可能更有意义</li></ul><p>同样，这些都是小细节。但作为一个长期痴迷于报道的人，它们是我思考的事情。</p><h2 id="课程总结-13"><a href="#课程总结-13" class="headerlink" title="课程总结"></a>课程总结</h2><p>在报告写作中，可能比标题看起来更重要的事情需要担心，但是，通过一些简单的调整，本节可以很容易地提高专业性和清晰度的感觉。以更直接、更简洁的方式编写标题感觉更干净，并且使用一致的格式来查找标题（以及报告部分）将避免使文档看起来很草率。如果提出相似但又不同的错误，以便它们在自己的发现中有意义，那么标题中有一些细节是值得的（例如，漏洞的发现地点）。</p><h1 id="9-标题-练习"><a href="#9-标题-练习" class="headerlink" title="9-标题 - 练习"></a>9-标题 - 练习</h1><p>在上一课中，我们仔细研究了研究结果的标题。我们研究了它们的格式、可能包含的细节以及如何使它们更简洁。</p><p>这里没有太多值得赘述的（谢天谢地），所以给你一些简单的练习。</p><p><strong>反思练习</strong></p><p>查看您撰写或有权访问的报告，并查看调查结果的标题。您认为这些标题的格式和措辞是否符合推荐的方法？它们是否清晰、简洁和一致？是否可以根据上一课所涵盖的内容进行改进？</p><p><strong>一般练习</strong></p><ul><li>根据上一课中概述的内容，重写以下查找标题，使其更加简洁和准确：<ul><li>“发现用户个人资料页面中存在跨站脚本漏洞”</li><li>“在搜索功能中发现 SQL 注入漏洞”</li><li>“已发现匿名用户可以访问所有患者数据”</li><li>“Web 应用程序当前正在使用过时的第三方库”</li><li>“该应用程序没有充分保护静态和传输中的个人身份信息”</li><li>“由于存在无效的TLS证书而导致的加密漏洞”</li><li>“由于未受保护的管理员凭据导致数据泄露的潜在风险”</li><li>“用户认证措施不足导致安全风险”</li><li>“通过不安全的 API 端点过度暴露数据”</li><li>“缺乏适当的输入验证导致多个安全漏洞”</li></ul></li><li>查看 OmniCorp 章节练习的标题并应用您喜欢的格式。</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-3 报告内容</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-3%20%E6%8A%A5%E5%91%8A%E5%86%85%E5%AE%B9/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-3%20%E6%8A%A5%E5%91%8A%E5%86%85%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（报告内容）介绍"><a href="#0-章节（报告内容）介绍" class="headerlink" title="0-章节（报告内容）介绍"></a>0-章节（报告内容）介绍</h1><p>在本章中，我们将研究渗透测试报告的各个方面。我们将涵盖数据和主要报告部分应该存在的基础知识，以及它们的内容应该涵盖的内容。我们还将讨论一些您可能在报告中遇到的附加部分（或者您可能在自己的组织中使用的部分）。</p><h2 id="示例组织"><a href="#示例组织" class="headerlink" title="示例组织"></a>示例组织</h2><p>为了用示例说明本章内容，我创建了一个虚构的 SaaS（软件即服务）平台 - OGPatientBooking。我们假装对整个平台进行了安全评估，并为客户制作了一份报告。</p><p>这是我们在与客户启动期间和评估期间了解到的有关应用程序的一些关键信息：</p><ul><li>OGPatientBooking 是一种患者预约解决方案，被英国多家医院使用</li><li>主要用例是患者在医院入口使用“自助”终端告知相关部门他们已到达</li><li>应用程序中还有一些可选模块，可以启用：<ul><li>“医院导航” - 引导患者穿过医院</li><li>“患者通讯” - 允许患者查看检测结果并阅读来自医生和其他医院工作人员&#x2F;部门的消息</li><li>“患者更新” - 允许患者更新他们的个人数据：<ul><li>地址，电子邮件和电话号码</li><li>医生诊所</li></ul></li></ul></li><li>该解决方案是一个基于浏览器的应用程序，预计在受限制的终端界面上运行 - 尽管 OGPatientBooking 不负责确保这些终端被锁定。</li><li>该应用程序主要使用 Java Spring 编写，具有 JavaScript React 前端。</li><li>该解决方案在单个大型 EC2 实例上运行，但利用了几个 AWS 服务：</li><li>使用 Amazon Managed Redis 存储会话缓存<ul><li>使用 MySQL 服务器（使用 AWS RDS）存储所有预订数据</li><li>使用 Amazon S3 存储桶托管应用程序 React 部分的前端文件</li><li>亚马逊KMS用于存储医院EMR系统的凭据</li></ul></li><li>解决方案的生产部署对所有客户来说都在 AWS 区域 eu-west-1 运行</li><li>所有医院客户都在一个AWS账户内运行，并共享一个数据库（系统的客户通过各种表中的client_id字段进行分隔）</li><li>平台有几种出站通信：<ul><li>与短信提供商集成，用于客户通知</li><li>与电子邮件提供商集成，用于客户通知和警报</li><li>与 EMR（电子医疗记录）解决方案集成，以获取有关患者的信息</li></ul></li><li>该解决方案确实在应用程序中内置了一个管理用户级别，用于管理 OGPatientBooking 客户（即医院）</li></ul><p>为了更清楚地说明上述内容（并作为评估的一部分），我使用 draw.io 创建了一个威胁模型图，并使用了来自 <a href="https://github.com/michenriksen/drawio-threatmodeling">https://github.com/michenriksen/drawio-threatmodeling</a> 的 DFD（数据流图）库</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404160918335.png" alt="img"></p><h1 id="1-章节（报告内容）介绍-练习"><a href="#1-章节（报告内容）介绍-练习" class="headerlink" title="1-章节（报告内容）介绍 - 练习"></a>1-章节（报告内容）介绍 - 练习</h1><p>在章节介绍中，我使用了许多术语和 AWS 服务提供的名称来描述 OGPatientBooking 平台。以下是我建议您完成的一些练习，以填补您知识中的任何空白，并帮助您理解我们将在后续课程和章节中报告的内容。</p><p> <strong>一般练习</strong></p><p>复习上一课，并记录下您不熟悉的任何术语、技术、服务或编码框架。</p><ul><li>研究它们的用途或功能</li><li>研究如何执行安全评估（请注意，本课程中不要求您执行评估）</li><li>有哪些安全配置错误或其他常见漏洞会影响它们</li></ul><h1 id="10-调查结果概述"><a href="#10-调查结果概述" class="headerlink" title="10-调查结果概述"></a>10-调查结果概述</h1><p>大多数报告中都有几个部分与调查结果概述有关：</p><ul><li>所有结果的高级视图，可以作为基于严重性的汇总表，也可以是图形&#x2F;图形，以显示基于严重性的结果分布</li><li>一个列表，其中包含找到的每个发现以及相应的严重性（可能还有一些其他属性）</li></ul><p>让我们浏览下面这些部分。</p><h2 id="调查结果概述"><a href="#调查结果概述" class="headerlink" title="调查结果概述"></a>调查结果概述</h2><p>调查结果的高级别概述通常位于报告的开头附近，并且通常紧随执行摘要。就我所见，其位置各不相同，有时会缺失。</p><p>这是它可能看起来的样子：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>Critical</strong></th><th><strong>High</strong></th><th><strong>Medium</strong></th><th><strong>Low</strong></th><th><strong>Info</strong></th><th><strong>Total</strong></th></tr></thead><tbody><tr><td>Web 应用程序审查</td><td>3</td><td>1</td><td>5</td><td>5</td><td>0</td><td>14</td></tr><tr><td>AWS 配置审查</td><td>1</td><td>3</td><td>4</td><td>10</td><td>2</td><td>20</td></tr><tr><td>Total</td><td>4</td><td>4</td><td>9</td><td>15</td><td>2</td><td>34</td></tr></tbody></table><p>这并不特别吸引人，只是让你对数字有了一些感觉。如果你有许多阶段可以进行比较，并且数字之间的差异很大，那么它可能会提供一些显著的见解，但实际上，发现本身需要它们的上下文来展示某事有多糟糕，或者某事有多难修复。尽管如此，高管们喜欢数字，所以我们应该提供给他们。</p><p>表示这些数据的其他方式可能是通过柱状图或饼图，如果您想显示严重程度的分布，这可能会更具视觉吸引力。</p><p>这里有一些相同数据以图表形式显示的示例：</p><p>条形图（分组柱状图）</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404161002790.png" alt="img"></p><p> <strong>饼图</strong></p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404161002446.png" alt="img"></p><p>我看过的另一种分类方式可能对某些客户有用，而且肯定是一种展示数据的不同方式，就是基于发现类别创建摘要表格或图表。这种方法确实需要在撰写时对所有发现进行分类（这取决于您如何进行报告，可能容易也可能困难）。这可能会为对哪些组件或领域有最多发现感兴趣的客户提供洞察（再次强调，仅仅看数字并不总是有帮助的）。</p><h2 id="发现清单"><a href="#发现清单" class="headerlink" title="发现清单"></a>发现清单</h2><p>通常，在发现部分之前会列出所有发现的列表，如果有的话。该部分包含所有发现的表格，标题，评估阶段，发现 ID 和风险。该表格还可以用于显示发现的当前状态（例如，是否已经被修复）。</p><p>这里是一个可能的示例：</p><table><thead><tr><th><strong>评估阶段</strong></th><th><strong>Finding ID</strong></th><th><strong>Risk</strong></th><th><strong>Status</strong></th><th><strong>Title</strong></th></tr></thead><tbody><tr><td>Web 应用程序评估</td><td>CSK</td><td>Critical</td><td>Closed</td><td>未经身份验证的 API 端点返回医院配置</td></tr><tr><td>Web 应用程序评估</td><td>ZNB</td><td>Critical</td><td>Closed</td><td>为管理员帐户设置默认密码</td></tr><tr><td>Web 应用程序评估</td><td>JXY</td><td>Critical</td><td>Open</td><td>通用管理员帐户</td></tr><tr><td>Web 应用程序评估</td><td>IIB</td><td>High</td><td>Closed</td><td>不安全的直接对象引用</td></tr><tr><td>Web 应用程序评估</td><td>CJZ</td><td>High</td><td>Closed</td><td>SQL 注入患者详细信息更新屏幕</td></tr><tr><td>Web 应用程序评估</td><td>XQJ</td><td>High</td><td>Closed</td><td>无 MFA 的管理员登录</td></tr><tr><td>Web 应用程序评估</td><td>GLK</td><td>High</td><td>Closed</td><td>管理员门户公开访问</td></tr><tr><td>Web 应用程序评估</td><td>NAA</td><td>High</td><td>Part Closed</td><td>医院门户在未经身份验证的情况下公开访问</td></tr><tr><td>Web 应用程序评估</td><td>WOO</td><td>Medium</td><td>Open</td><td>租户实施不足</td></tr><tr><td>Web 应用程序评估</td><td>SAU</td><td>Medium</td><td>Open</td><td>可能捕获 EMR 存储凭据</td></tr><tr><td>Web 应用程序评估</td><td>IUF</td><td>Medium</td><td>Open</td><td>未设置速率限制</td></tr><tr><td>Web 应用程序评估</td><td>LAM</td><td>Medium</td><td>Open</td><td>可猜测的管理员网址</td></tr><tr><td>AWS 配置审查</td><td>TDL</td><td>High</td><td>Closed</td><td>管理员帐户未强制使用 MFA</td></tr><tr><td>AWS 配置审查</td><td>DWM</td><td>High</td><td>Closed</td><td>未强制密码复杂性</td></tr><tr><td>AWS 配置审查</td><td>CIV</td><td>High</td><td>Closed</td><td>未启用 Cloudwatch</td></tr><tr><td>AWS 配置审查</td><td>EDE</td><td>High</td><td>Closed</td><td>SSH 服务器暴露</td></tr><tr><td>AWS 配置审查</td><td>CTY</td><td>High</td><td>Open</td><td>单个 EC2 实例用于生产 - DoS 风险</td></tr><tr><td>AWS 配置审查</td><td>FBB</td><td>High</td><td>Open</td><td>No Backups</td></tr><tr><td>AWS 配置审查</td><td>PSY</td><td>High</td><td>Closed</td><td>未启用 MFA 删除功能的数据库</td></tr><tr><td>AWS 配置审查</td><td>ISN</td><td>Medium</td><td>Open</td><td>没有 Web 应用防火墙</td></tr><tr><td>AWS 配置审查</td><td>DXU</td><td>Medium</td><td>Open</td><td>缺乏用户组</td></tr></tbody></table><p>这为客户提供了一个按评估阶段和严重程度排序的列表，可以快速查看已发现的问题。请注意，您的标识符可能与此不同（假设您使用它们），也许您可以在这里省略阶段名称或发现状态。再次强调，此表格可以根据您的喜好进行定制，但请确保列表包含带有其相应严重程度的发现名称。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>为客户提供已发现内容的高级计数可能会吸引高管，我们通常很容易提供这些信息。因此，报告应努力提供这种简单的概述。此外，一个列举所有发现及其严重级别的部分对于客户（可能是更技术性的读者）来说非常有用，可以让他们对已发现的内容有一个非常高层次的了解。同样，这是另一个应该很容易组织并包含在报告中的琐碎部分。</p><h1 id="11-调查结果概述-练习"><a href="#11-调查结果概述-练习" class="headerlink" title="11-调查结果概述 - 练习"></a>11-调查结果概述 - 练习</h1><p>在上一课中，我们介绍了用于显示结果列表的两个常见部分。 这里有一些相关的练习。</p><h2 id="反思练习"><a href="#反思练习" class="headerlink" title="反思练习"></a>反思练习</h2><p>反思您读过或写过的报告。 是否有调查结果概述或调查结果列表部分？ 如果有，信息是如何呈现的？ 您能否根据上一课改进所提供的内容，或者如果缺少其中一个或两个部分，现在可以创建它吗？</p><h2 id="一般练习"><a href="#一般练习" class="headerlink" title="一般练习"></a>一般练习</h2><p>让我们再次查看 Goal Gobbler 和 Retail Rodeo 应用程序的调查结果来创建这些部分。</p><p>以下是有关问题的提醒：</p><p><u>Goal Gobbler Findings</u>：</p><ul><li>配置文件更新页面中经过身份验证的 SQL 注入</li><li>身份验证绕过</li><li>反射式跨站脚本</li><li>支持 SSLv3</li><li>不支持多重身份验证</li><li>忘记密码时的电子邮件枚举</li><li>过于宽松的跨域源资源共享</li><li>证书即将到期</li></ul><p><u>Retail Rodeo Findings</u>：</p><ul><li>暴露的云存储桶</li><li>过于宽松的防火墙规则（暴露 RDP 和 SSH）</li><li>App Engine 和 Google Cloud SQL 中的有限日志记录和监控</li><li>云存储桶静态时未加密</li><li>可通过 HTTP 访问的云存储桶</li><li>过于宽松的 IAM 角色</li><li>PCI 环境缺乏隔离</li><li>App Engine 使用的服务帐户权限过多</li><li>缺乏用户群体</li><li>存储在环境变量中的秘密</li><li>PostgreSQL 数据库缺乏备份</li><li>缺少 App Engine 设置的安全标头</li></ul><p><u>Exercises</u></p><ul><li>对于列出的每个漏洞，为其分配风险分类。 由于我们没有讨论严重性，所以请随意采取简单的方法并根据您自己的经验猜测它们可能是什么。<ul><li>或者，如果您感到有动力，请回顾调查结果，将其潜在风险置于背景中（在执行摘要课程中提供），并像您在日常工作中可能的那样对它们进行评级（如果适用）</li></ul></li><li>使用您对每个组织得出的评级：<ul><li>创建基于严重性的汇总表</li><li>创建条形图来显示数据</li><li>创建饼图来显示数据</li><li>研究可以显示数据的其他方法并尝试这些方法</li><li>创建问题列表，列出问题的严重性以及您认为可能有用的其他元数据</li></ul></li><li>给每个问题一个“类型”分类，然后根据这些创建汇总表和图表。<ul><li>您可能想要研究漏洞类别来创建您的分类 - 它们的级别应该足够高，可以将漏洞分组在一起，但又足够具体，以便将问题分配到类别中是有用的。</li></ul></li></ul><h1 id="12-范围"><a href="#12-范围" class="headerlink" title="12-范围"></a>12-范围</h1><p>报告中的另一个必不可少且极其关键的部分是范围定义章节。该章节应明确阐述拟开展的工作，并传达评估的边界。至关重要的一点是，本章节内容应与提议的范围保持一致。</p><p>我所观察到的此类表达方式的两个极端风格如下：</p><ul><li>以散文形式书写，包含项目列表及少量表格</li><li>完全采用表格格式，仅呈现关键信息</li></ul><p>一如往常，所有报告的撰写方式各有不同，且往往混合使用这两种风格。只要关键信息表述清晰，都是可以接受的。</p><p>文档中应包含的关键信息如下：</p><ul><li>评估的开始和结束日期<ul><li>在工作上花费的可选天数（如果这适用于您）</li></ul></li><li>评估团队中的人员列表<ul><li>例如，对附录中列表的引用</li></ul></li><li>测试内容的名称，以及可能的描述<ul><li>包括任何测试环境信息（如果适用）</li></ul></li><li>具体测试内容的列表，可能按工作阶段划分。这方面的一些例子可能是：<ul><li>Web 应用程序评估<ul><li><a href="https://pppp.dddddd.dddddd/test">https://pppp.dddddd.dddddd/test</a></li><li><a href="https://cccc.dddddd.dddddd/test">https://cccc.dddddd.dddddd/test</a></li></ul></li><li>AWS 评估<ul><li>AWS 账户 ID AKIAIOSFODNN7EXAMPLE、AKIAIOSFODNN7EXAMPLE2</li></ul></li><li>Web 应用程序的代码审查评估<ul><li>前端 - 提交哈希 4e725f6e656edddffabc1234567890abcd123456</li><li>后端 - 提交哈希 1234abcd5678efgh9012ijkl3456mnop7890qrst</li></ul></li><li>外部基础设施评估<ul><li>xxx.10.122.123</li><li>xxx.10.122.124</li><li>xxx.10.122.125</li></ul></li><li>文档审查<ul><li>policies.zip - SHA256 校验和： a594a6d13eb6b77f97b1fe3627bdfd58f420ca749b1158ae9082dc1988ba52d</li></ul></li></ul></li></ul><p>有许多情况下，将较大工作范围的内容放入附录，然后在此部分进行引用更为适宜。在我的经验中，尤其当代码审查评估涉及数十个仓库时，这种方式是必需的，因为这些内容无法整洁地容纳于一页之内。</p><p>接下来，我们将通过两种格式来了解这些信息可能呈现的样子。</p><h2 id="表格格式"><a href="#表格格式" class="headerlink" title="表格格式"></a>表格格式</h2><p>表格格式相当简洁，具有多个优点。与较为冗长的范围段落相比，需填写的信息较少。这种数据很可能可以在排程或销售系统中预先定义，然后自动导入您使用的模板或报告工具中。</p><p>以下是 OGPatientBooking 评估的外观：</p><table><thead><tr><th>评估开始</th><th>2024-01-01</th></tr></thead><tbody><tr><td>评估结束</td><td>2024-01-15</td></tr><tr><td>评估小组</td><td>卢克·罗杰森</td></tr><tr><td></td><td>丹尼尔·詹宁斯</td></tr><tr><td>评估名称</td><td>OGPatientBooking Web 应用程序和 AWS 审核</td></tr><tr><td>工作阶段</td><td>Web 应用程序评估</td></tr><tr><td></td><td>AWS 配置审查</td></tr><tr><td>范围</td><td>Web 应用程序： <a href="https://hhhh.xxxxxxxxx.bbb/">https://hhhh.xxxxxxxxx.bbb</a></td></tr><tr><td></td><td>AWS 账户：AKIAIOSFODNN7EXAMPLE</td></tr><tr><td>测试环境</td><td>在生产环境中测试医院帐户 （test-hospital-2）。</td></tr></tbody></table><p>尽管这种方式极其精炼且易于填写，但它未能捕捉到在工作说明书中可能已讨论过的评估关键关注点或目标。当然，你也可以在这里包含这些信息，但这样做可能会使表格格式显得杂乱或臃肿。</p><h2 id="散文格式"><a href="#散文格式" class="headerlink" title="散文格式"></a>散文格式</h2><p>这是我更喜欢的格式。它允许更多的自定义，同时还能够从模板生成。</p><p>没有任何评估是完全相同的，客户关心的目标、关注领域或场景也会有所差异。采用此格式，我们可以更自由地表述我们以客户易于理解的方式评估了特定细节，而非将其挤在表格之中。</p><p>以下是这种较为详尽版本的一个示例：</p><blockquote><p>OGPatientBooking 联系了 ogSec，要求对其平台进行评估。主要目标是确认是否存在任何 Web 应用程序漏洞，并对其 AWS 环境进行配置审查。在项目启动电话会议期间商定的一项具体要求是审查静态和传输加密的使用情况，并指出是否存在与这些领域相关的漏洞。</p><p>评估于 2024-01-05 和 2024-01-15（含）进行，由 Luke Rogerson 和 Daniel Jennings 进行。</p><p>评估范围包括以下几个阶段的工作：</p><p>- 生产 AWS 账户的 AWS 配置审查 （AKIAIOSFODNN7EXAMPLE）</p><p>- 生产环境中 OGPatientBooking 应用程序的 Web 应用程序评估 （<a href="https://hhhh.xxxxxxxxx.bbb)/">https://hhhh.xxxxxxxxx.bbb）</a></p><p>- 请注意，提供的是测试医院实例，而不是现有客户的实例 （test-hospital-2）</p><p>应该指出的是，拒绝服务测试不在本次评估的范围内。</p></blockquote><p>上述内容并不算过于繁复，但它确实概述了进行评估的动机，包括要求审视静态存储和传输过程中的加密情况。此外，它还强调我们在此次合作期间不会进行任何拒绝服务类型（DoS）的测试（这一点虽然很容易添加到表格格式中）。</p><p>文本主体内容将主要源于与客户的工作说明书（Statement of Work, SOW）及启动会议（理想情况下，仅在双方书面达成一致的情况下承诺对特定范围进行变更）。</p><h2 id="复制粘贴自工作说明书？"><a href="#复制粘贴自工作说明书？" class="headerlink" title="复制粘贴自工作说明书？"></a>复制粘贴自工作说明书？</h2><p>有些人可能倾向于从提案或工作说明书中直接复制粘贴文本。虽然在合理范围内可以这样做，但必须谨慎处理。如果您希望确保时态和格式的一致性，那么复制进来的文本必须适应报告的格式和写作风格。因此，请务必像对待刚写完的文字一样审查复制的内容，并将其调整以与文档其余部分保持一致。</p><h2 id="课程小结"><a href="#课程小结" class="headerlink" title="课程小结"></a>课程小结</h2><p>范围章节的内容应取自客户已签字确认的提案或工作说明书。如本课所述，展示这些信息有多种方法，任何一种方式都是可接受的。需要牢记的最重要事项是保持信息清晰无歧义，且包含已在客户签字确认的工作范围或提案中涵盖的所有内容。</p><h1 id="13-范围-练习"><a href="#13-范围-练习" class="headerlink" title="13-范围 - 练习"></a>13-范围 - 练习</h1><p>在上一课中，我们介绍了在报告文档中呈现范围界定信息的两种常用格式。应始终包括范围，以显示在评估期间执行了哪些操作，并反映在报告中。</p><p>让我们来做一些练习。</p><p><strong>反思练习</strong></p><p>反思您阅读或撰写的报告。范围部分的格式如何？是散文、表格格式，还是两者兼而有之？考虑所提供的范围信息的清晰度和完整性。如何改进本节的表述方式，以便更好地理解和与评估协议保持一致？</p><p><strong>一般练习</strong></p><p>编写 Goal Gobbler 和 Retail Rodeo 评估的范围部分。为两者制作表格和散文示例。请随意编造或包含可能需要的任何其他信息。</p><p><strong>超越练习</strong></p><p>创建一个清单或模板，用于在评估准备期间收集所有必要的范围信息。该清单应确保预先收集所有关键细节，以便提前包含在报告的范围部分。</p><h1 id="14-注意事项"><a href="#14-注意事项" class="headerlink" title="14-注意事项"></a>14-注意事项</h1><p>注意事项部分（也称为“测试限制”部分）是工作说明书中无法完成或仅部分完成的任何元素的详细信息的地方。原因和时间也在这里被捕捉到。这是在评估结束后发生任何争议时必须完成的关键。</p><p>以下是可能导致评估覆盖范围或完成受到影响的一些原因：</p><ul><li>客户要求我们停止测试数小时或数天</li><li>应用程序或环境要么不可用，要么速度非常慢</li><li>未提供凭据来对环境或应用程序进行身份验证（根本没有提供，或者在一段时间后提供）</li><li>属于范围的关键功能或正在运行的服务无法正常运行或丢失</li><li>访问测试物理位置的问题</li><li>范围界定问题<ul><li>完成工作所需的努力超出了工作说明中概述的预期</li><li>所需的评估与工作说明中概述的评估不同</li></ul></li><li>等等</li></ul><p>在反思上述任何一项时，请确保您遵守事实，并提供影响评估的关键事件的任何日期和时间信息。</p><p>此外，请务必跟踪将来发生争议时可能需要的任何证据。这可能是这样的：</p><ul><li>来自任何重要工具的日志（漏洞扫描结果、代理日志等）</li><li>应用程序或服务的屏幕截图显示错误，或在预期时以其他方式丢失（最好是时间戳）</li><li>来自客户或第三方的电子邮件</li></ul><p>最后，如果在评估期间出现重大中断，但您能够在不影响覆盖范围的情况下完成评估，则无需在本节中发表评论。<strong>只有当</strong>工作陈述的某些部分无法完成时，才应编写本节。</p><h2 id="注意-保持冷静，保持专业"><a href="#注意-保持冷静，保持专业" class="headerlink" title="注意 - 保持冷静，保持专业"></a>注意 - 保持冷静，保持专业</h2><p>当测试没有按计划进行或由于各种问题而难以完成时，可能很想使用报告的这一部分来发泄。不要这样做。这令人难以置信地不专业，可能会影响与客户的关系。</p><p>如前所述：坚持事实。只要捕捉到重要的细节和事件，他们就可以在发生争议时为自己说话。</p><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>假设 OGPatientBooking 应用程序的测试没有按计划进行，原因如下：</p><ul><li>我们已经有几天没有收到申请的凭据了</li><li>应用程序速度慢且无响应</li><li>客户对邮件不予回复（即便回复，其言辞也颇为生硬且粗鲁）。</li></ul><h3 id="坏"><a href="#坏" class="headerlink" title="坏"></a>坏</h3><p>让我们先看一个不好的例子：</p><blockquote><p>由于 OGPatientBooking 未及时提供凭据，测试应用程序损失了两天时间。</p><p>此外，当我们请求帮助时，OGPatientBooking 没有回复我们的电子邮件，因为在整个测试过程中，该应用程序的速度非常慢且没有响应。这种缺乏合作使测试过程非常具有挑战性。</p><p>这两件事都意味着申请的全面覆盖受到严重影响，评估无法在时间范围内完成。客户应确保他们为未来的任何评估做好更充分的准备，以免浪费时间。</p></blockquote><p>这不仅包含无法测试的内容的有限细节，而且以一种将评估的缺点归咎于客户的方式编写。虽然通常情况下，当测试不顺利时这不是我们的错，但我们仍然不应该为此责怪客户。在报告中和报告外都应完全避免这种情况。</p><h3 id="好"><a href="#好" class="headerlink" title="好"></a>好</h3><p>下面是一个更好的示例：</p><blockquote><p>直到评估开始后 2 天（2024 年 5 月 7 日上午），才提供用于测试应用程序认证方面的凭据。</p><p>此外，在整个评估过程中，应用程序会周期性地一次无响应几分钟。除此之外，服务器需要几秒钟来响应请求。这意味着许多依赖于快速连续向服务器发送多个请求的测试无法成功完成或花费大量时间。因此，无法对整个应用程序完成某些漏洞的测试。在整个评估过程中，OGPatientBooking 被告知应用程序的行为。</p><p>由于上述原因，Web 应用程序的测试覆盖率受到了重大影响。以下列表从测试角度显示了应用程序主要区域的高级状态：</p><p>全面覆盖</p><p>基本测试，例如但不限于：</p><ul><li>未经身份验证的 Web 应用程序测试</li><li>TLS&#x2F;SSL测试</li><li>Web 服务器配置问题</li><li>审查前端资产</li><li>认证</li><li>办理登机手续的流程功能</li></ul><p>部分承保</p><ul><li>患者通信功能</li><li>患者更新功能</li><li>无或有限承保范围：</li><li>纳维医院</li></ul><p>鉴于上述部分和有限的覆盖范围，建议进行单独的评估，以审查受影响的区域和特征。</p><p>评估期间重大影响的时间表可在附录第x.x节中找到。</p><p>请注意，AWS 配置审查已顺利完成。</p></blockquote><p>此版本有几项改进：</p><ul><li>写作风格避免了责备客户的措辞</li><li>提供了有关测试如何受到影响的更多详细信息</li><li>哪些具体因素受到影响 - 这可用于可能的后续评估</li><li>在附录中加入时间表既有助于覆盖我们自己，也有助于告知客户在他们想进行自己的调查时发生了什么。如果这种类型的部分很长，在附录中可能会更好。</li><li>呼吁其他元素不受影响是一个很好的选择，因为它有点说“这并不全是坏事，我们确实设法覆盖了范围的其余部分”</li></ul><p>这个例子显然非常彻底，你可能会得到一些更简洁的东西。但是，如果您需要回来查看最初无法查看的内容，那么在这些类型的场景中进行更精细的细分将对您的团队有所帮助，否则他们可能不得不再次评估所有内容（尽管这不是坏事）。</p><p>如果评估进展不顺利，最好在发生问题时跟踪出错的地方，以便本节尽可能简单编写。考虑以简单的项目符号格式制作每日笔记，如果需要，以后可以将其转换为本节。</p><h2 id="限时评估"><a href="#限时评估" class="headerlink" title="限时评估"></a>限时评估</h2><p>如果您正在接受被认为是“尽力而为”或“有时间限制”的评估，那么填写一个简单的声明来解释评估是在压缩的时间范围内进行的，这可能是合适的。</p><p>现实情况是，几乎所有的评估都是有时间限制的，不可能或不合理地发现所有问题（并且很可能已将这种措辞添加到SoW中），但是在测试受到时间的严格约束并被明确指出的情况下，可以在本节中提及。</p><h2 id="没有附加注意事项"><a href="#没有附加注意事项" class="headerlink" title="没有附加注意事项"></a>没有附加注意事项</h2><p>如果评估中没有注意事项，则有两种选择：</p><ul><li>要么在报告中有该部分，要么有一个简单的声明，说明没有警告</li><li>完全删除该部分</li></ul><p>我倾向于保留该部分，以避免客户提出“您的警告部分发生了什么？”的后续问题，这只会产生更多我们需要回应的事情。但是，我当然看到过许多没有此部分的报告，这些报告在测试过程中可能没有问题。</p><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><p>注意事项部分对于确保评估的任何缺陷都明确并记录在评估报告中至关重要。如果没有它，客户可能不知道您在评估过程中可能遇到的问题，以及这些问题如何影响您的工作范围，以及可以完成多少原始计划的工作范围。请记住，本节不是我们指责客户将工作未完成的责任归咎于客户，而只是记录评估期间发生的事情，这些事件影响了我们完成工作范围的能力。</p><h1 id="15-注意事项-练习"><a href="#15-注意事项-练习" class="headerlink" title="15-注意事项 - 练习"></a>15-注意事项 - 练习</h1><p>在上一课中，我们强调了注意事项部分的重要性，尤其是在评估无法成功完成的情况下。</p><p>以下是与报告这一部分相关的一些练习。</p><p><strong>反思练习</strong></p><p>反思您参与的评估，其中评估没有按计划进行。注意事项或测试限制部分写了什么？回顾警告的呈现方式，并考虑它们是否清晰、真实和专业。该部分能否根据上一课的内容进行任何改进？</p><p><strong>一般练习</strong></p><p>这里有一些评估示例供您编写警告部分。尝试以专业的方式编写它们，而不责怪客户。如果您想添加其他细粒度的详细信息，请随时这样做。</p><p><u>评估 1</u></p><ul><li>范围：QuantumGuard 网络安全解决方案的内部基础设施测试</li><li>详细信息：目的是评估 QuantumGuard 内部网络的安全性并识别漏洞。该合作持续了 10 天，针对 100 台网络设备和服务器。评估小组在评估的头3天无法进入现场，虽然可以对所有网络设备进行扫描，但无法进行进一步的普查和特定于服务的检查。</li></ul><p><u>评估 2</u></p><ul><li>范围：EcoSolutions Unlimited 的外部基础设施扫描</li><li>详细信息：客户希望在此基础结构上托管的 8 个 Web 应用程序也应该经过测试。评估范围为 5 天，扫描 25 个 IP 地址。公开了有限的服务，这意味着您只能对 Web 应用程序执行基本测试。</li></ul><p><u>评估 3</u></p><ul><li>范围：NexaTech Innovations， Inc. 的 Web 应用程序测试。</li><li>详细信息：测试的第一天没有提供证书，但能够获得全面覆盖</li></ul><h1 id="16-调查结果"><a href="#16-调查结果" class="headerlink" title="16-调查结果"></a>16-调查结果</h1><p>报告的“发现”部分用于存储评估期间发现的漏洞、错误配置和其他安全风险。</p><p>本课的范围实际上不是关于发现本身，而是关于整个部分及其结构，正如你所想象的那样，由于这个原因，这里没有太多的东西要涵盖。</p><h2 id="调查结果报告结构"><a href="#调查结果报告结构" class="headerlink" title="调查结果报告结构"></a>调查结果报告结构</h2><p>对于跨单个工作阶段的评估，本节中可能不需要进行重大细分。考虑单个 Web 应用程序的 Web 应用程序测试，这可能是这样的：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Web 应用程序评估</p></blockquote><p>如果评估涵盖两个或多个 Web 应用程序，则这些应用程序可以由单个阶段涵盖，因此在单个部分中。这确实使报告更容易，因为两个应用程序中存在的发现可以写在单个发现中，但是，最好询问您的客户应该如何处理这个问题。根据我的经验，特定的团队可能负责特定的应用程序，并且对影响报告中的内容的内容进行清晰的细分通常对客户来说更可取（特别是如果这些发现在将它们放入 JIRA 之类的东西之前要拆分）。在这种情况下，按如下方式单独指定它们可能更清楚：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Alpha Web 应用程序评估</p><p>2.2.2 Beta Web 应用程序评估</p></blockquote><p>如果正在执行的评估“类型”明显不同，建议将其分解为各自的领域。这样可以更轻松地突出显示应用程序不同区域中的任何结果分布（回想一下结果概述课程），以及当我们在报告的上半部分总结结果时。下面是一个示例：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Web 应用程序评估</p><p>2.2.2 外部基础设施评估</p><p>2.2.3 服务器构建审查</p></blockquote><p>在测试期间，上述每个元素的多个元素也可能发生，并且可能对您的客户端进行分解更有用。对于较大的作业，请仔细考虑这一点，因为额外报告编写的开销可能会影响您的测试，但是最好考虑客户在这种情况下的偏好，理想情况下，工作范围应该有足够的报告时间，以便在他们自己的部分中涵盖这些项目。下面是一个示例：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 Alpha Web 应用程序评估</p><p>2.2.2 Alpha 服务器构建回顾</p><p>2.2.3 Alpha 外部基础设施评估</p><p>2.2.4 Beta Web 应用程序评估</p><p>2.2.5 Beta 服务器构建回顾</p><p>2.2.6 测试版外部基础设施评估</p></blockquote><p>最后，考虑这些部分的命名。当与工作范围一起审查时，每个阶段的内容可能很明显，但是如果这些阶段的命名不明确，情况可能并非如此。确保相位名称唯一且清晰，但也要尽可能简洁。</p><h2 id="对评估阶段进行编号"><a href="#对评估阶段进行编号" class="headerlink" title="对评估阶段进行编号"></a>对评估阶段进行编号</h2><p>给特定的测试阶段一个数字并不是我在所有报告中看到的。不过，它确实有几个好处。下面是前面示例的样子：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 第 1 阶段 - Alpha Web 应用程序评估</p><p>2.2.2 第 2 阶段 - Alpha 服务器构建审查</p><p>2.2.3 第 3 阶段 - Alpha 外部基础设施评估</p><p>2.2.4 第 4 阶段 - Beta Web 应用程序评估</p><p>2.2.5 第 5 阶段 - Beta 服务器构建回顾</p><p>2.2.6 第 6 阶段 - Beta 版外部基础设施评估</p></blockquote><p>这可能会增加报告模板的复杂性，但具有以下好处：</p><ul><li>在讨论报告时，您可以说“请参阅第 1 阶段的调查结果”</li><li>如果您想将查找标识符与特定阶段联系起来，则可以在查找标识符中使用此编号 - 我个人认为最好为查找设置一个简短的唯一标识符，而不是合并阶段号。</li></ul><h2 id="一个部分用于复杂的工作？"><a href="#一个部分用于复杂的工作？" class="headerlink" title="一个部分用于复杂的工作？"></a>一个部分用于复杂的工作？</h2><p>我在一些报告中看到，已经完成了广泛而复杂的评估，但调查结果尚未分解为单独的阶段。取而代之的是，使用单个部分来存储所有结果。这使得客户更难消化报告中的信息，也使评估团队更难总结在哪里发现了什么。</p><p>在这里使用您的最佳判断，何时只有一个阶段，但请考虑：</p><ul><li>询问客户在某些领域使用多个阶段是否有意义。</li><li>如果正在审查多个评估“类型”（如前面的示例中所述），是否应该将它们分解？（可能）</li><li>如果报告将受益于其他部分（例如：调查结果概述、执行摘要或建议部分）中调查结果的逻辑隔离</li></ul><p>需要注意的一件事是，不同的客户团队可能负责评估的不同领域。例如，如果在一个报表中执行了 Web 应用程序评估和基础结构评估，并且每个区域都由单独的团队管理，则如果将结果分开，则对他们来说可能会更容易。</p><h2 id="常见发现部分"><a href="#常见发现部分" class="headerlink" title="常见发现部分"></a>常见发现部分</h2><p>我参加过一些评估，也看到过一些评估，其中许多领域的共同主题浮出水面。在报告主题时，最好将它们拿出来单独报告。</p><p>在具体的发现和主题之间有一条线。发现与漏洞的特定或小实例集合有关，而主题与可能跨越多个评估阶段的更高级别（可能缺少一些主要组件或缺少战略安全实践）有关。如果在它所处的每个评估阶段都提出这个问题，那么在查看清单中的所有调查结果时，这将是一个重复的结果。</p><p>调查结果 - 可能保留在他们自己的评估阶段：</p><ul><li>跨不同代码评审评估阶段的代码中的多个凭据实例</li><li>跨不同内部网段使用的 TLS 版本 1.0</li><li>影响多个 Web 应用程序的跨站点脚本</li></ul><p>主题 - 将在他们自己的部分提出：</p><ul><li>凭据管理不善（如果在单独的代码审查阶段在代码中看到凭据实例）</li><li>缺乏第三方渗透测试（这将是广泛的，可能会影响多个阶段）</li><li>缺乏漏洞扫描（可能影响多个网络）</li></ul><p>在决定是否应该在“共同发现&#x2F;领域”提出某些问题时，您可以问自己的一个问题是：“如果我分多个阶段报告这个问题，补救措施是否<strong>完全相同</strong>？例如，结果“不存在 Web 应用程序防火墙 （WAF）”可能会对正在测试的多个应用程序使用相同的 WAF，因此您不希望在每个评估阶段重复此结果。</p><p>不管这个建议如何，在一个地方提出共同的发现可能是可以的，我已经多次看到代码中的秘密在“共同发现”部分提出。因此，再一次，使用您自己的判断并与您的客户合作，以确保以正确的方式处理这种方法。</p><p>可能还有另一种选择，您可以分解战略指南和发现的具体实例。这可能取决于您如何理解您的客户将如何处理您的发现。</p><p>再次使用代码示例中的机密时，可能会有如下内容：</p><blockquote><p>2.2 评估结果</p><p>2.2.1 第 1 阶段 - 代码审查常见结果</p><p>糟糕的凭证管理</p><p>2.2.1 第 2 阶段 - 身份验证堆栈的代码审查</p><p>代码中的机密</p><p>2.2.2 第 3 阶段 - 产品目录微服务的代码审查</p><p>代码中的机密</p></blockquote><p>这样，客户端可以修正阶段 2 和阶段 3 中的发现，以烧毁代码中发现的凭据的特定实例，并单独处理更具战略性的解决方案（在第 1 阶段中概述）的实现。</p><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这个简短的课程中，我们考虑了如何最好地在逻辑上将发现彼此分开。我们应该考虑客户可能如何处理即将到来的发现。如果不同的团队负责审查不同的应用程序或工作阶段，那么将它们分开是有意义的——因此请在此处与您的客户联系以获得指导。在提出主题发现时，可能会有一个专门的阶段，用于审查多个相同的“类型”事物（例如，审查多个代码库或 Web 应用程序）。使用您的最佳判断来确定是否应该针对发现相同错误的每个区域同时提出共同发现和特定发现。</p><h1 id="17-调查结果-练习"><a href="#17-调查结果-练习" class="headerlink" title="17-调查结果 - 练习"></a>17-调查结果 - 练习</h1><p>正如在上一课中所讨论的，为了我们的客户的可读性，在需要时将调查结果分成不同的部分是重要和体贴的。</p><p>以下是一些相关练习：</p><p><strong>反思练习</strong></p><ul><li>反思您最近阅读或撰写的报告。考虑调查结果的结构：是否按评估阶段或类型明确区分调查结果？这种结构是否有助于理解和解决调查结果？想一想，如果有机会，根据上一课所涵盖的内容，如何重新组织调查结果。</li><li>想想你参与的评估，其中的结果跨越了多个领域或工作类型（例如，Web 应用程序、服务器构建、外部基础设施）。这些发现是如何记录的？思考将发现分成不同阶段或单个部分是否更有效地将发现传达给客户。</li></ul><h1 id="18-附录"><a href="#18-附录" class="headerlink" title="18-附录"></a>18-附录</h1><p>报告文档的附录部分可用于存储许多内容。它的用法在行业内各不相同，有时在其位置或之前使用称为“补充数据”的类似部分。出于本课程的目的，我们将坚持使用单个部分。</p><p>从广义上讲，以下类型的信息可以存储在这里（可能还有其他一些类别）：</p><ul><li>用于保存有关评估的扩展元数据信息的部分。例如：<ul><li>评估小组</li><li>风险评级概览</li><li>方法</li><li>扩展范围界定信息</li></ul></li><li>从测试本身创建的信息。例如：<ul><li>测试工具输出</li><li>概念验证</li><li>攻击链</li></ul></li></ul><p>对于从测试中生成的信息，使用附录的主要原因是确保结果不会因需要大量滚动的无休止的工具输出而臃肿，从而降低结果的可读性。</p><p>让我们在下面浏览一些值得注意的例子。</p><h2 id="评估小组"><a href="#评估小组" class="headerlink" title="评估小组"></a>评估小组</h2><p>“杂项数据和部分”课程中提到了这一部分。让我们在这里再次回顾一下作为提醒。</p><p>有时，参与评估的个人名单会列在附录中，有时也会在范围界定部分提及。</p><p>再一次，这是它可能的样子：</p><table><thead><tr><th><strong>名字</strong></th><th><strong>标题</strong></th><th><strong>认证&#x2F;注意事项</strong></th></tr></thead><tbody><tr><td>卢克·罗杰森</td><td>导演</td><td>进攻性安全认证专家 （OSCP）</td></tr><tr><td>陈婷婷</td><td>安全分析师</td><td>认证信息系统安全专家</td></tr><tr><td>艾哈迈德·赛义德</td><td>高级顾问</td><td>认证道德黑客 （CEH），CISSP</td></tr><tr><td>莎拉·约翰逊</td><td>主任审计师</td><td>ISO 27001主任审核员</td></tr><tr><td>卡洛斯·拉米雷斯</td><td>网络工程师</td><td>思科认证网络助理 （CCNA）</td></tr><tr><td>埃琳娜·彼得罗娃</td><td>IT经理</td><td>项目管理专业人员 （PMP）</td></tr><tr><td>拉杰·帕特尔</td><td>程序员</td><td>AWS 认证解决方案架构师</td></tr><tr><td>田中由纪</td><td>网络安全主管</td><td>GIAC Security Essentials 认证 （GSEC）</td></tr><tr><td>大卫·奥康纳</td><td>首席信息安全官</td><td>网络安全硕士，CISSP</td></tr><tr><td>伊莎贝拉·罗西</td><td>DevOps工程师</td><td>认证 Kubernetes 管理员 （CKA）</td></tr><tr><td>艾莎·曼苏尔</td><td>风险经理</td><td>认证风险和信息系统控制 （CRISC）</td></tr><tr><td>西奥·伯纳德</td><td>事件响应者</td><td>GIAC 认证事件处理人员 （GCIH）</td></tr><tr><td>王婷婷</td><td>数据保护官</td><td>注册数据隐私解决方案工程师 （CDPSE）</td></tr><tr><td>贾斯珀·辛格</td><td>合规官</td><td>认证信息隐私专家 （CIPP&#x2F;E）</td></tr><tr><td>格蕾丝·金（Grace Kim）</td><td>云架构师</td><td>AWS 认证安全性 - 专业</td></tr></tbody></table><p>在范围界定部分列出所有这些人可能会占用很多空间，因此将此列表分解为报告中的单独部分可能更合适。</p><h2 id="风险评级概览"><a href="#风险评级概览" class="headerlink" title="风险评级概览"></a>风险评级概览</h2><p>一些报告概述了所使用的风险评级系统及其在高层次上的工作原理。这是为了告知读者每个严重性级别意味着什么，以及如何解释调查结果中的相关风险。本课程的其他地方介绍了风险评级本身，但下面是一个示例：</p><blockquote><p>本报告使用标准风险评级系统来描述调查结果。使用的风险评级为“严重”、“高”、“中”和“低”。为了阐明评估期间提出的其他意见以及任何良好做法，可以使用“信息”和“良好”评级。</p><p>风险的细分及其高级解释如下：</p><table><thead><tr><th><strong>风险</strong></th><th><strong>解释</strong></th></tr></thead><tbody><tr><td>危急</td><td>具有重大风险的问题可能导致整个系统泄露、大规模数据泄露或导致重大运营问题。这些问题可能很容易被新手攻击者利用或检测到。甚至可能是已知的漏洞可以在线获得，从而增加了攻击的可能性。</td></tr><tr><td>高</td><td>高风险问题可能会导致严重后果，例如数据泄露或业务运营受到严重干扰。这些问题可能需要特定条件才能利用，或者需要从网络或用户权限的角度适当定位攻击者。</td></tr><tr><td>中等</td><td>这些问题可能对系统和数据造成有限影响。这些问题可能需要一些专业知识来利用或影响可能对整体环境不重要的系统。</td></tr><tr><td>低</td><td>低风险问题本身不太可能造成重大伤害，但可以用作更重要的更大攻击链的一部分。这些问题可能影响有限或难以利用。</td></tr><tr><td>信息</td><td>在评估过程中提出了一项意见，即虽然不构成安全风险，但值得注意的是，它使读者了解偏离建议准则的特定方面或做法。</td></tr><tr><td>好</td><td>用于突出显示正在使用的良好安全实践。</td></tr></tbody></table></blockquote><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>虽然许多组织将一些方法信息放在报告的上半部分（通常在范围附近），但方法出现在附录中的情况并不少见。</p><p>我不会介绍方法可能是什么样子的，因为它偏离了报告写作之外，进入了评估本身，因此超出了本课程的范围。如果您对给定评估的方法部分可能是什么样子感兴趣，请在线搜索一些示例。</p><p>另一种可能减少报告页数的选项是，从附录中的某个部分或报告的其他部分链接到报告中的适用方法，以访问您组织的网站。这样，组织可以向潜在客户展示他们的测试方法，也可以将该链接用作报告中的参考。</p><h2 id="工具输出"><a href="#工具输出" class="headerlink" title="工具输出"></a>工具输出</h2><p>使用附录的主要原因之一是存储工具输出或其他测试数据，否则这些数据会使特定发现变得混乱。</p><p>重要的是要记住，客户不想要 1,000 页的报告，因此请仔细考虑您在本节中输入的内容：</p><ul><li>首先，尝试截取&#x2F;压缩&#x2F;总结工具输出，以便它可以在发现中使用，同时确保它仍然适合作为证据</li><li>如果工具输出突出显示了多个位置的特定错误配置或漏洞的许多实例，您能否将其导出为电子表格并将其与报告一起提供？（别忘了在调查结果中参考本文档）</li><li>如果这些用例都不起作用，请将工具输出放在附录部分。使用可读的格式，并且不会占用超过需要的页面。<ul><li>如果您需要将其分解为多个小节以便于阅读或浏览文档，请这样做</li></ul></li></ul><p>不要害怕将补充文件传递给客户。大多数工具都支持以可以轻松操作到漂亮的电子表格中的格式进行输出。这些比 PDF 文件中跨越多个页面的表格更容易使用。</p><p>最后，不要忘记参考相关调查结果中的附录。我见过很多案例，客户追着我们索取更多信息，只是为了在文件中提供信息，但它与适用的调查结果无关。是的，他们本可以自己找到它，但我们应该始终尽可能地提供帮助。默认情况下，插入对相关部分的交叉引用是将附录部分与查找一起使用时应执行的操作。</p><h2 id="概念验证"><a href="#概念验证" class="headerlink" title="概念验证"></a>概念验证</h2><p>如果发现的问题需要多个步骤才能利用，或者编写了长时间的自定义漏洞，则最好将发现结果中的扩展详细信息移到附录中。</p><p>这一概念也适用于将报告中的多项调查结果串联起来。有时，攻击链本身可以作为单独的发现提出，然后引用到本附录部分。这将显示用于描述端到端攻击的所有步骤、示例和证据。</p><h2 id="扩展范围界定信息"><a href="#扩展范围界定信息" class="headerlink" title="扩展范围界定信息"></a>扩展范围界定信息</h2><p>有时，参与的范围很复杂或很长（或两者兼而有之），将其单独存储在附录中，然后从范围界定部分引用它是有意义的。同样，这是为了避免无休止的页面使报告的重要部分混乱。虽然这并不是说这些详细的范围界定信息不重要，但确实如此。但是，当将其分解为附录中的专用部分时，它更清晰，更具可读性。</p><p>以下是附录中可能更好的几个范围界定信息示例。</p><h3 id="代码审查范围界定"><a href="#代码审查范围界定" class="headerlink" title="代码审查范围界定"></a>代码审查范围界定</h3><p>您正在执行漫长而复杂的代码评审评估，该解决方案由数十个存储库组成。对于每个存储库，您都有一个名称、URL 和一个提交哈希。</p><p>下面是它可能的样子：</p><table><thead><tr><th><strong>存储库名称</strong></th><th><strong>存储库 URL</strong></th><th align="center"><strong>提交哈希</strong></th></tr></thead><tbody><tr><td>AlphaCore</td><td><a href="https://github.com/example/AlphaCore">https://github.com/example/AlphaCore</a></td><td align="center">a1b2c3d4</td></tr><tr><td>BetaEngine</td><td><a href="https://github.com/example/BetaEngine">https://github.com/example/BetaEngine</a></td><td align="center">e5f6g7h8</td></tr><tr><td>GammaService</td><td><a href="https://github.com/example/GammaService">https://github.com/example/GammaService</a></td><td align="center">i9j0k1l2</td></tr><tr><td>DeltaAPI</td><td><a href="https://github.com/example/DeltaAPI">https://github.com/example/DeltaAPI</a></td><td align="center">m3n4o5p6</td></tr><tr><td>EpsilonFramework</td><td><a href="https://github.com/example/EpsilonFramework">https://github.com/example/EpsilonFramework</a></td><td align="center">q7r8s9t0</td></tr><tr><td>ZetaLibrary</td><td><a href="https://github.com/example/ZetaLibrary">https://github.com/example/ZetaLibrary</a></td><td align="center">u1v2w3x4</td></tr><tr><td>EtaModule</td><td><a href="https://github.com/example/EtaModule">https://github.com/example/EtaModule</a></td><td align="center">y5z6a7b8</td></tr><tr><td>ThetaComponent</td><td><a href="https://github.com/example/ThetaComponent">https://github.com/example/ThetaComponent</a></td><td align="center">c9d0e1f2</td></tr><tr><td>IotaUtils</td><td><a href="https://github.com/example/IotaUtils">https://github.com/example/IotaUtils</a></td><td align="center">g3h4i5j6</td></tr><tr><td>KappaTools</td><td><a href="https://github.com/example/KappaTools">https://github.com/example/KappaTools</a></td><td align="center">k7l8m9n0</td></tr><tr><td>LambdaServices</td><td><a href="https://github.com/example/LambdaService">https://github.com/example/LambdaService</a></td><td align="center">a8b9c0d1</td></tr><tr><td>MuInterfaces</td><td><a href="https://github.com/example/MuInterfaces">https://github.com/example/MuInterfaces</a></td><td align="center">e2f3g4h5</td></tr><tr><td>NuScripts</td><td><a href="https://github.com/example/NuScripts">https://github.com/example/NuScripts</a></td><td align="center">i6j7k8l9</td></tr><tr><td>XiFunctions</td><td><a href="https://github.com/example/XiFunctions">https://github.com/example/XiFunctions</a></td><td align="center">m0n1o2p3</td></tr><tr><td>OmicronHelpers</td><td><a href="https://github.com/example/OmicronHelpers">https://github.com/example/OmicronHelpers</a></td><td align="center">q4r5s6t7</td></tr><tr><td>PiComponents</td><td><a href="https://github.com/example/PiComponents">https://github.com/example/PiComponents</a></td><td align="center">u8v9w0x1</td></tr><tr><td>RhoUtilities</td><td><a href="https://github.com/example/RhoUtilities">https://github.com/example/RhoUtilities</a></td><td align="center">y2z3a4b5</td></tr><tr><td>SigmaLib</td><td><a href="https://github.com/example/SigmaLib">https://github.com/example/SigmaLib</a></td><td align="center">c6d7e8f9</td></tr><tr><td>TauModules</td><td><a href="https://github.com/example/TauModules">https://github.com/example/TauModules</a></td><td align="center">g0h1i2j3</td></tr><tr><td>UpsilonAPIs</td><td><a href="https://github.com/example/UpsilonAPIs">https://github.com/example/UpsilonAPIs</a></td><td align="center">k4l5m6n7</td></tr><tr><td>PhiService</td><td><a href="https://github.com/example/PhiService">https://github.com/example/PhiService</a></td><td align="center">p8q9r0s1</td></tr><tr><td>ChiTools</td><td><a href="https://github.com/example/ChiTools">https://github.com/example/ChiTools</a></td><td align="center">t2u3v4w5</td></tr><tr><td>PsiModules</td><td><a href="https://github.com/example/PsiModules">https://github.com/example/PsiModules</a></td><td align="center">x6y7z8a9</td></tr><tr><td>OmegaLib</td><td><a href="https://github.com/example/OmegaLib">https://github.com/example/OmegaLib</a></td><td align="center">b0c1d2e3</td></tr><tr><td>AlphaNet</td><td><a href="https://github.com/example/AlphaNet">https://github.com/example/AlphaNet</a></td><td align="center">f4g5h6i7</td></tr><tr><td>BetaStream</td><td><a href="https://github.com/example/BetaStream">https://github.com/example/BetaStream</a></td><td align="center">j8k9l0m1</td></tr><tr><td>GammaSync</td><td><a href="https://github.com/example/GammaSync">https://github.com/example/GammaSync</a></td><td align="center">n2o3p4q5</td></tr><tr><td>DeltaAccess</td><td><a href="https://github.com/example/DeltaAccess">https://github.com/example/DeltaAccess</a></td><td align="center">r6s7t8u9</td></tr><tr><td>EpsilonCompute</td><td><a href="https://github.com/example/EpsilonCompute">https://github.com/example/EpsilonCompute</a></td><td align="center">v0w1x2y3</td></tr><tr><td>ZetaData</td><td><a href="https://github.com/example/ZetaData">https://github.com/example/ZetaData</a></td><td align="center">z4a5b6c7</td></tr><tr><td>EtaStorage</td><td><a href="https://github.com/example/EtaStorage">https://github.com/example/EtaStorage</a></td><td align="center">d8e9f0g1</td></tr><tr><td>ThetaProcess</td><td><a href="https://github.com/example/ThetaProcess">https://github.com/example/ThetaProcess</a></td><td align="center">h2i3j4k5</td></tr><tr><td>IotaFlow</td><td><a href="https://github.com/example/IotaFlow">https://github.com/example/IotaFlow</a></td><td align="center">l6m7n8o9</td></tr><tr><td>KappaConnect</td><td><a href="https://github.com/example/KappaConnect">https://github.com/example/KappaConnect</a></td><td align="center">p0q1r2s3</td></tr><tr><td>LambdaControl</td><td><a href="https://github.com/example/LambdaControl">https://github.com/example/LambdaControl</a></td><td align="center">t4u5v6w7</td></tr><tr><td>MuInterfaceDesign</td><td><a href="https://github.com/example/MuInterfaceDesign">https://github.com/example/MuInterfaceDesign</a></td><td align="center">x8y9z0a1</td></tr><tr><td>NuAutomation</td><td><a href="https://github.com/example/NuAutomation">https://github.com/example/NuAutomation</a></td><td align="center">b2c3d4e5</td></tr><tr><td>XiVisualization</td><td><a href="https://github.com/example/XiVisualization">https://github.com/example/XiVisualization</a></td><td align="center">f6g7h8i9</td></tr><tr><td>OmicronAnalysis</td><td><a href="https://github.com/example/OmicronAnalysis">https://github.com/example/OmicronAnalysis</a></td><td align="center">j0k1l2m3</td></tr><tr><td>PiSimulation</td><td><a href="https://github.com/example/PiSimulation">https://github.com/example/PiSimulation</a></td><td align="center">n4o5p6q7</td></tr><tr><td>RhoIntegration</td><td><a href="https://github.com/example/RhoIntegration">https://github.com/example/RhoIntegration</a></td><td align="center">r8s9t0u1</td></tr><tr><td>SigmaTesting</td><td><a href="https://github.com/example/SigmaTesting">https://github.com/example/SigmaTesting</a></td><td align="center">v2w3x4y5</td></tr><tr><td>TauNetworking</td><td><a href="https://github.com/example/TauNetworking">https://github.com/example/TauNetworking</a></td><td align="center">z6a7b8c9</td></tr><tr><td>UpsilonSecurity</td><td><a href="https://github.com/example/UpsilonSecurity">https://github.com/example/UpsilonSecurity</a></td><td align="center">d0e1f2g3</td></tr><tr><td>PhiDatabase</td><td><a href="https://github.com/example/PhiDatabase">https://github.com/example/PhiDatabase</a></td><td align="center">h4i5j6k7</td></tr><tr><td>ChiFirmware</td><td><a href="https://github.com/example/ChiFirmware">https://github.com/example/ChiFirmware</a></td><td align="center">l8m9n0o1</td></tr><tr><td>PsiCloud</td><td><a href="https://github.com/example/PsiCloud">https://github.com/example/PsiCloud</a></td><td align="center">p2q3r4s5</td></tr><tr><td>OmegaAnalytics</td><td><a href="https://github.com/example/OmegaAnalytics">https://github.com/example/OmegaAnalytics</a></td><td align="center">t6u7v8w9</td></tr><tr><td>AlphaVision</td><td><a href="https://github.com/example/AlphaVision">https://github.com/example/AlphaVision</a></td><td align="center">x0y1z2a3</td></tr><tr><td>BetaMachineLearning</td><td><a href="https://github.com/example/BetaMachineLearning">https://github.com/example/BetaMachineLearning</a></td><td align="center">b4c5d6e7</td></tr></tbody></table><p>显然，这是一个相当大的表格，可以放在报告的重要部分，并且可能会跨越多页。</p><h3 id="内部基础设施评估"><a href="#内部基础设施评估" class="headerlink" title="内部基础设施评估"></a>内部基础设施评估</h3><p>您正在参与对客户内部基础设施的大量审查。该审查跨越多个区域、站点和隔离网络。每个站点都细分为生产、预生产、测试、开发和企业 IP 地址范围。10个国家正在接受测试，每个国家有1至5个地点。</p><p>下面是这可能是什么样子的：</p><table><thead><tr><th><strong>国家</strong></th><th><strong>站点编号</strong></th><th><strong>网段</strong></th><th><strong>IP 地址范围</strong></th></tr></thead><tbody><tr><td>国家 1</td><td>站点 1</td><td>生产</td><td>10.1.1.0 - 10.1.1.255</td></tr><tr><td>国家 1</td><td>站点 1</td><td>前期制作</td><td>10.1.2.0 - 10.1.2.255</td></tr><tr><td>国家 1</td><td>站点 1</td><td>测试</td><td>10.1.3.0 - 10.1.3.255</td></tr><tr><td>国家 1</td><td>站点 1</td><td>发展</td><td>10.1.4.0 - 10.1.4.255</td></tr><tr><td>国家 1</td><td>站点 1</td><td>企业</td><td>10.1.5.0 - 10.1.5.255</td></tr><tr><td>国家 1</td><td>站点 2</td><td>生产</td><td>10.1.6.0 - 10.1.6.255</td></tr><tr><td>国家 1</td><td>站点 2</td><td>前期制作</td><td>10.1.7.0 - 10.1.7.255</td></tr><tr><td>国家 1</td><td>站点 2</td><td>测试</td><td>10.1.8.0 - 10.1.8.255</td></tr><tr><td>国家 1</td><td>站点 2</td><td>发展</td><td>10.1.9.0 - 10.1.9.255</td></tr><tr><td>国家 1</td><td>站点 2</td><td>企业</td><td>10.1.10.0 - 10.1.10.255</td></tr><tr><td>国家 2</td><td>站点 1</td><td>生产</td><td>10.2.1.0 - 10.2.1.255</td></tr><tr><td>国家 2</td><td>站点 1</td><td>前期制作</td><td>10.2.2.0 - 10.2.2.255</td></tr><tr><td>国家 2</td><td>站点 1</td><td>测试</td><td>10.2.3.0 - 10.2.3.255</td></tr><tr><td>国家 2</td><td>站点 1</td><td>发展</td><td>10.2.4.0 - 10.2.4.255</td></tr><tr><td>国家 2</td><td>站点 1</td><td>企业</td><td>10.2.5.0 - 10.2.5.255</td></tr><tr><td>国家 2</td><td>站点 2</td><td>生产</td><td>10.2.6.0 - 10.2.6.255</td></tr><tr><td>国家 2</td><td>站点 2</td><td>前期制作</td><td>10.2.7.0 - 10.2.7.255</td></tr><tr><td>国家 2</td><td>站点 2</td><td>测试</td><td>10.2.8.0 - 10.2.8.255</td></tr><tr><td>国家 2</td><td>站点 2</td><td>发展</td><td>10.2.9.0 - 10.2.9.255</td></tr><tr><td>国家 2</td><td>站点 2</td><td>企业</td><td>10.2.10.0 - 10.2.10.255</td></tr><tr><td>国家 3</td><td>站点 1</td><td>前期制作</td><td>10.3.2.0 - 10.3.2.255</td></tr><tr><td>国家 3</td><td>站点 1</td><td>测试</td><td>10.3.3.0 - 10.3.3.255</td></tr><tr><td>国家 3</td><td>站点 1</td><td>发展</td><td>10.3.4.0 - 10.3.4.255</td></tr><tr><td>国家 3</td><td>站点 1</td><td>企业</td><td>10.3.5.0 - 10.3.5.255</td></tr><tr><td>国家 3</td><td>站点 2</td><td>生产</td><td>10.3.6.0 - 10.3.6.255</td></tr><tr><td>国家 3</td><td>站点 2</td><td>前期制作</td><td>10.3.7.0 - 10.3.7.255</td></tr><tr><td>国家 3</td><td>站点 2</td><td>测试</td><td>10.3.8.0 - 10.3.8.255</td></tr><tr><td>国家 3</td><td>站点 2</td><td>发展</td><td>10.3.9.0 - 10.3.9.255</td></tr><tr><td>国家 3</td><td>站点 2</td><td>企业</td><td>10.3.10.0 - 10.3.10.255</td></tr><tr><td>国家 4</td><td>站点 1</td><td>生产</td><td>10.4.1.0 - 10.4.1.255</td></tr><tr><td>国家 4</td><td>站点 1</td><td>前期制作</td><td>10.4.2.0 - 10.4.2.255</td></tr><tr><td>国家 4</td><td>站点 1</td><td>测试</td><td>10.4.3.0 - 10.4.3.255</td></tr><tr><td>国家 4</td><td>站点 1</td><td>发展</td><td>10.4.4.0 - 10.4.4.255</td></tr><tr><td>国家 4</td><td>站点 1</td><td>企业</td><td>10.4.5.0 - 10.4.5.255</td></tr><tr><td>国家 4</td><td>站点 2</td><td>生产</td><td>10.4.6.0 - 10.4.6.255</td></tr><tr><td>国家 4</td><td>站点 2</td><td>前期制作</td><td>10.4.7.0 - 10.4.7.255</td></tr><tr><td>国家 4</td><td>站点 2</td><td>测试</td><td>10.4.8.0 - 10.4.8.255</td></tr><tr><td>国家 4</td><td>站点 2</td><td>发展</td><td>10.4.9.0 - 10.4.9.255</td></tr><tr><td>国家 4</td><td>站点 2</td><td>企业</td><td>10.4.10.0 - 10.4.10.255</td></tr><tr><td>国家 5</td><td>站点 1</td><td>生产</td><td>10.5.1.0 - 10.5.1.255</td></tr><tr><td>国家 5</td><td>站点 1</td><td>前期制作</td><td>10.5.2.0 - 10.5.2.255</td></tr><tr><td>国家 5</td><td>站点 1</td><td>测试</td><td>10.5.3.0 - 10.5.3.255</td></tr><tr><td>国家 5</td><td>站点 1</td><td>发展</td><td>10.5.4.0 - 10.5.4.255</td></tr><tr><td>国家 5</td><td>站点 1</td><td>企业</td><td>10.5.5.0 - 10.5.5.255</td></tr><tr><td>国家 5</td><td>站点 2</td><td>生产</td><td>10.5.6.0 - 10.5.6.255</td></tr><tr><td>国家 5</td><td>站点 2</td><td>前期制作</td><td>10.5.7.0 - 10.5.7.255</td></tr><tr><td>国家 5</td><td>站点 2</td><td>测试</td><td>10.5.8.0 - 10.5.8.255</td></tr><tr><td>国家 5</td><td>站点 2</td><td>发展</td><td>10.5.9.0 - 10.5.9.255</td></tr><tr><td>国家 5</td><td>站点 2</td><td>企业</td><td>10.5.10.0 - 10.5.10.255</td></tr><tr><td>国家 6</td><td>站点 1</td><td>生产</td><td>10.6.1.0 - 10.6.1.255</td></tr><tr><td>国家 6</td><td>站点 1</td><td>前期制作</td><td>10.6.2.0 - 10.6.2.255</td></tr><tr><td>国家 6</td><td>站点 1</td><td>测试</td><td>10.6.3.0 - 10.6.3.255</td></tr><tr><td>国家 6</td><td>站点 1</td><td>发展</td><td>10.6.4.0 - 10.6.4.255</td></tr><tr><td>国家 6</td><td>站点 1</td><td>企业</td><td>10.6.5.0 - 10.6.5.255</td></tr><tr><td>国家 6</td><td>站点 2</td><td>生产</td><td>10.6.6.0 - 10.6.6.255</td></tr><tr><td>国家 6</td><td>站点 2</td><td>前期制作</td><td>10.6.7.0 - 10.6.7.255</td></tr><tr><td>国家 6</td><td>站点 2</td><td>测试</td><td>10.6.8.0 - 10.6.8.255</td></tr><tr><td>国家 6</td><td>站点 2</td><td>发展</td><td>10.6.9.0 - 10.6.9.255</td></tr><tr><td>国家 6</td><td>站点 2</td><td>企业</td><td>10.6.10.0 - 10.6.10.255</td></tr><tr><td>国家 7</td><td>站点 1</td><td>生产</td><td>10.7.1.0 - 10.7.1.255</td></tr><tr><td>国家 7</td><td>站点 1</td><td>前期制作</td><td>10.7.2.0 - 10.7.2.255</td></tr><tr><td>国家 7</td><td>站点 1</td><td>测试</td><td>10.7.3.0 - 10.7.3.255</td></tr><tr><td>国家 7</td><td>站点 1</td><td>发展</td><td>10.7.4.0 - 10.7.4.255</td></tr><tr><td>国家 7</td><td>站点 1</td><td>企业</td><td>10.7.5.0 - 10.7.5.255</td></tr><tr><td>国家 7</td><td>站点 2</td><td>生产</td><td>10.7.6.0 - 10.7.6.255</td></tr><tr><td>国家 7</td><td>站点 2</td><td>前期制作</td><td>10.7.7.0 - 10.7.7.255</td></tr><tr><td>国家 7</td><td>站点 2</td><td>测试</td><td>10.7.8.0 - 10.7.8.255</td></tr><tr><td>国家 7</td><td>站点 2</td><td>发展</td><td>10.7.9.0 - 10.7.9.255</td></tr><tr><td>国家 7</td><td>站点 2</td><td>企业</td><td>10.7.10.0 - 10.7.10.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 1</td><td>生产</td><td>10.8.1.0 - 10.8.1.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 1</td><td>前期制作</td><td>10.8.2.0 - 10.8.2.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 1</td><td>测试</td><td>10.8.3.0 - 10.8.3.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 1</td><td>发展</td><td>10.8.4.0 - 10.8.4.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 1</td><td>企业</td><td>10.8.5.0 - 10.8.5.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 2</td><td>生产</td><td>10.8.6.0 - 10.8.6.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 2</td><td>前期制作</td><td>10.8.7.0 - 10.8.7.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 2</td><td>测试</td><td>10.8.8.0 - 10.8.8.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 2</td><td>发展</td><td>10.8.9.0 - 10.8.9.255</td></tr><tr><td>国家&#x2F;地区 8</td><td>站点 2</td><td>企业</td><td>10.8.10.0 - 10.8.10.255</td></tr><tr><td>国家 9</td><td>站点 1</td><td>生产</td><td>10.9.1.0 - 10.9.1.255</td></tr><tr><td>国家 9</td><td>站点 1</td><td>前期制作</td><td>10.9.2.0 - 10.9.2.255</td></tr><tr><td>国家 9</td><td>站点 1</td><td>测试</td><td>10.9.3.0 - 10.9.3.255</td></tr><tr><td>国家 9</td><td>站点 1</td><td>发展</td><td>10.9.4.0 - 10.9.4.255</td></tr><tr><td>国家 9</td><td>站点 1</td><td>企业</td><td>10.9.5.0 - 10.9.5.255</td></tr><tr><td>国家 9</td><td>站点 2</td><td>生产</td><td>10.9.6.0 - 10.9.6.255</td></tr><tr><td>国家 9</td><td>站点 2</td><td>前期制作</td><td>10.9.7.0 - 10.9.7.255</td></tr><tr><td>国家 9</td><td>站点 2</td><td>测试</td><td>10.9.8.0 - 10.9.8.255</td></tr><tr><td>国家 9</td><td>站点 2</td><td>发展</td><td>10.9.9.0 - 10.9.9.255</td></tr><tr><td>国家 9</td><td>站点 2</td><td>企业</td><td>10.9.10.0 - 10.9.10.255</td></tr><tr><td>国家 10</td><td>站点 1</td><td>生产</td><td>10.10.1.0 - 10.10.1.255</td></tr><tr><td>国家 10</td><td>站点 1</td><td>前期制作</td><td>10.10.2.0 - 10.10.2.255</td></tr><tr><td>国家 10</td><td>站点 1</td><td>测试</td><td>10.10.3.0 - 10.10.3.255</td></tr><tr><td>国家 10</td><td>站点 1</td><td>发展</td><td>10.10.4.0 - 10.10.4.255</td></tr><tr><td>国家 10</td><td>站点 1</td><td>企业</td><td>10.10.5.0 - 10.10.5.255</td></tr><tr><td>国家 10</td><td>站点 2</td><td>生产</td><td>10.10.6.0 - 10.10.6.255</td></tr><tr><td>国家 10</td><td>站点 2</td><td>前期制作</td><td>10.10.7.0 - 10.10.7.255</td></tr><tr><td>国家 10</td><td>站点 2</td><td>测试</td><td>10.10.8.0 - 10.10.8.255</td></tr><tr><td>国家 10</td><td>站点 2</td><td>发展</td><td>10.10.9.0 - 10.10.9.255</td></tr><tr><td>国家 10</td><td>站点 2</td><td>企业</td><td>10.10.10.0 - 10.10.10.255</td></tr></tbody></table><p>同样，这看起来并不漂亮，并且在报告的主要范围界定部分中会感觉非常不合适。因此，将其放入附录部分并从范围界定文件中引用它是有意义的。</p><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课中，我们介绍了附录中可能出现的一些常见部分。附录应用于存储可能使报告主要部分混乱的信息或作为可选阅读的信息。</p><p>在报告的正文中，力求在全面性和可读性之间取得平衡。当您认为包含某些信息会影响可读性时，可能是时候使用附录或将其移至补充文档了。</p><p>在附录中存储任何材料时，请考虑是否最好创建补充文档。在决定是否将材料列入附录或将其汇编成单独的补充文件时，应评估信息与报告内容的直接相关性和适用性。</p><p>通过使用附录和补充文件，您可以提高报告的清晰度和有效性，确保报告既能提供信息又能为读者所接受。</p><h1 id="19-附录-练习"><a href="#19-附录-练习" class="headerlink" title="19-附录 - 练习"></a>19-附录 - 练习</h1><p>上一课介绍了附录中出现的几个常见部分。以下是一些练习，可以反映您对本节的体验以及如何更好地利用它（或可能使用某些工具的补充文档）。</p><p><strong>反思练习</strong></p><ul><li>反思您撰写或有权访问的报告。<ul><li>评估小组在哪里列出？你认为这个位置有意义吗，或者在其他地方会更好？如果是这样，为什么？</li><li>报告中是否有总结风险评级的部分？它在哪里，你觉得它应该搬迁吗？如果是这样，为什么？</li><li>报告中是否详细说明了方法？如果是，如何以及在哪里？这个位置看起来合乎逻辑吗？如果是这样，为什么？ </li><li>如果没有提到方法，你认为它们应该包括在内吗？如果是这样，为什么？</li></ul></li><li>想想你过去写的那些依靠工具输出来获取证据的发现。<ul><li>你有没有觉得一个问题由于工具输出过多而变得太长？</li><li>涉及哪些工具？</li><li>如何更好地压缩工具输出，还是应该将其放在附录中或作为单独的文件提供？</li></ul></li><li>您是否在一个发现中详细描述了跨多个页面的复杂攻击？将其列入附录会更合适吗？如果是这样，为什么？</li></ul><p><strong>超越练习</strong></p><ul><li>想想你使用的安全工具。您熟悉他们提供的不同输出格式吗？是否可以以更易于在报告或电子表格中消化的方式导出结果？</li><li>选择您使用的三种具有输出格式的常用工具，并尝试将其输出处理成简洁的电子表格格式。如果您想不出一个工具，请尝试：<ul><li>testssl</li><li>nmap</li><li>trivy</li></ul></li></ul><h1 id="2-概述"><a href="#2-概述" class="headerlink" title="2-概述"></a>2-概述</h1><p>我已经提到过这一点，但值得明确说明的是 - 所有制作渗透测试报告的组织都以自己的格式和风格进行。我见过各种各样的报告变体（其中一些我将在本章的相关课程中提到），但从根本上讲，它们都试图传达类似甚至相同的信息。因此，几乎每份报告中都有一系列常见部分的清单：</p><ul><li>执行摘要或结论 - 对评估的高层摘要，通常供非技术人员阅读</li><li>建议 - 客户应遵循的高层建议，以确保所审查的内容或建议进一步增强或评估</li><li>范围 - 对所评估内容的详细说明</li><li>注意事项 - 可能影响评估覆盖范围的任何原因</li><li>发现 - 评估中发现的具体漏洞详情</li><li>附录 - 用于存储可能太大以至于无法清晰地存储在文档的其余部分中的任何支持数据，或包含与评估相关的单独文档</li></ul><p>上述提到的部分可能并非所有报告中都存在（也许它们的名称不同或与其他部分合并）。但是，如果您被要求创建自己的报告格式，那么您的报告很可能包含这些部分中的大部分。我们将在接下来的课程中介绍每个部分应包含的内容。</p><p>在评估风格定制且客户对评估有非常具体要求的情况下，传统的报告格式可能会被几乎完全放弃。在这些情况下，报告可能会被替换为更容易报告客户需求的内容。一个很好的例子可能是，评估的范围仅集中在测试几个特定场景，客户要求将这些信息的结果以一种他们可以在内部使用的方式显示和报告（例如，移入一个单独的系统或作为他们使用的标准流程的一部分提供给第三方开发人员）。</p><p>在这里要提到一件事，因为这似乎是最好的地方 - 几乎所有的报告都是以PDF文件的形式交付的。然而，我通常在我的工作中使用.docx文件，因为我们的报告需要经过法律审查和潜在的删除操作，然后才能交给客户，但我也看到过.docx文件在这种情况之外被使用的情况（尤其是在内部渗透测试报告中）。结果被整理成幻灯片，甚至只能在由执行评估工作的供应商开发的定制Web门户中获得，这也并不罕见。虽然存在这些可交付成果（以及其他一些），但出于本课程的目的，我们将坚持使用“传统”的报告格式。</p><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这个简单的课程中，我们已经讨论了报告中可能出现的典型部分，并突出了几种不同形式的可交付成果。虽然本课程介绍了传统的报告格式，但大多数原则和建议适用于大多数可交付成果类型，并可以纳入其中。</p><h1 id="20-其他报告部分"><a href="#20-其他报告部分" class="headerlink" title="20-其他报告部分"></a>20-其他报告部分</h1><p>在这一点上，我们已经介绍了核心部分以及它们应该包含的内容，但我想我会浏览一些额外的或不太常见的部分并讨论它们的用法。我过去看过很多其他部分，所以我会坚持使用我过去看过或使用过的部分。</p><p>我们已经介绍了一些可能出现在附录部分中的可选部分：</p><ul><li>评估小组</li><li>风险评级概览</li><li>方法</li><li>工具输出</li><li>概念验证</li><li>扩展范围界定信息</li></ul><p>我们将在下面介绍的部分可能更具情境性（但也可能是可选的），并且不太可能是您放在附录中的内容（尽管下面的一些将是这些示例）。</p><h2 id="何时使用"><a href="#何时使用" class="headerlink" title="何时使用"></a>何时使用</h2><p>在某些情况下，各种供应商报告的结构和内容非常正式，但很僵化。这可能是由于结构受到很大限制，无法确保所有报告的一致性，评估或报告的时间有限，这意味着报告没有机会偏离可接受的规范太远，甚至因为工作范围不需要额外的部分。</p><p>我撰写或审查的大多数报告确实有几个额外的部分。这主要是为了提供进一步的信息和细节，说明所审查的内容或由于特定的客户要求。</p><p>虽然与熟悉的部分保持一致的结构允许回头客找到他们希望快速查看的信息，但应考虑在标准模板中放置对客户有用的其他评论或信息。</p><p>我并不是建议仅仅为了它而写更多的报告，但如果是为了提高文档质量和客户的价值，就应该考虑。</p><p>以下是包含一些附加部分的一些高级原因：</p><ul><li>客户提到，无论是在 SoW 中正式确定的，还是在临时的，他们对几个领域有担忧。对于客户来说，有一个部分来讨论这些可能会更清楚。<ul><li>同样，如果客户明确询问是否可以以某种方式呈现信息，您应该尽量通融</li></ul></li><li>如果评估是有针对性的，或者只是更普遍地偏离了标准评估，则最好调整报告以添加部分，而不是尝试涵盖现有部分中的特定信息。<ul><li>这是我见过很多次的事情，客户要求做一些工作来回答关键问题，而得到的报告只是标准的，没有参考要求。或者将信息放在不太有意义的部分，使报告感觉好像没有正确编写。</li></ul></li><li>如果有很多问题或答案，或者要求执行的检查列表，以更明显的方式分解它们会非常有帮助。</li></ul><h2 id="良好的观察"><a href="#良好的观察" class="headerlink" title="良好的观察"></a>良好的观察</h2><p>我有时看到，对被评估事物的“良好”行为或安全态势的分析被分解成自己的部分。这样做的动机在不同的报告中各不相同，但通常是因为客户希望从安全角度分析什么是好的。不太常见的是，测试人员在评估过程中没有发现太多错误。</p><p>原则上，这些部分是可以添加的（甚至包含在执行摘要等地方），但是，请确保您只谈论好东西，如果它们真的都是好的。</p><p>有几次，我看到顾问在有相反的证据时，在报告事情时会引起混乱。例如，有人发现其中一个页面上存在 SQL 注入漏洞，但应用程序的其余部分似乎不受此漏洞类的影响。然后，报告中发表了一条评论，表明该应用程序可以很好地抵御不受信任的输入，因为在<strong>几乎所有</strong>情况下，这些攻击都是不可能的。虽然这种说法可能不是假的，但它可能会误导读者，最好谨慎行事，只有在您完全确定某个错误或一类错误没有被利用时才做出这些断言（如果我无法访问评估中的代码并且无法断然排除它，我可能会完全避免说这句话， 例如）。</p><p>在这种情况下，最好评论发现的漏洞是特定的，而不是系统性的。或者换句话说，发现了单个（或少数）实例，而不是在整个应用程序中广泛存在。最好不要在“好”部分中指出这样的问题。</p><p>所以，我的建议是：</p><ul><li>如果您有足够的证据证明在您正在讨论的任何类别的漏洞中都没有可利用的发现，则可以编写本节。</li><li>如果在您标记为安全的区域中发现了单个漏洞，请避免将其归类为“良好”。相反，将其描述为一个孤立的事件。可能会将其移出任何“好”部分。<ul><li>客户仍然应该检查自己是否存在我们无法发现的其他案例</li><li>如果您怀疑自己没有发现错误类的所有实例，或者您怀疑是否在安全性方面给客户打及格分数，那么请不要这样做。与您的团队讨论，看看这是否合理。</li></ul></li><li>在对安全状况进行广泛评论时要谨慎，尤其是在一些关键漏洞可能危及应用程序的整体安全性的情况下。</li></ul><p>如果您要发表这些评论，最好将其纳入执行摘要并在高层次上发言，而不是将其分成单独的部分。</p><p>下面是一个简短的示例，说明这可能是什么样子：</p><blockquote><p>该 Web 应用程序在许多领域都表现出强大的安全态势。在评估期间，没有发现任何发现显示 Web 应用程序在处理不受信任的用户输入方面存在缺陷。这意味着可以很好地防御几个漏洞类别，包括跨站点脚本和 SQL 注入。</p></blockquote><p>请注意，虽然我已经广泛地谈到了该应用程序。我还通过说“许多领域”而不是全部来削弱我的措辞。我还说过“在评估期间”——我们不能排除在评估期间，当我们执行评估的时间有限时，我们可能会错过其他情况。</p><p>我还提到了一个范围广泛的漏洞类，然后给出了几个具体的例子。如果这是在执行摘要中，我会仔细考虑这一点，因为这对于执行摘要来说可能有点太技术性了（我会说这里的例子没问题，而不是进一步的解释）。</p><p>如果这是在执行摘要中，如果发现其他漏洞，我会按照以下内容遵循此声明：</p><blockquote><p>尽管如此，还是发现了几个安全问题，这些问题可能会导致未经授权的各方访问用户数据。</p></blockquote><h2 id="关于公司"><a href="#关于公司" class="headerlink" title="关于公司"></a>关于公司</h2><p>有时，评估供应商可能会在报告中专门列出一个部分来展示他们的认证和能力。通常这出现在附录部分，但我在报告的上半部分已经看到了它。</p><p>我不会花时间讨论它可能是什么样子，因为我在本节中看到了如此多的差异，但最好将其描述为您可能在网站上看到的营销材料，这些材料被提炼成一个或多个页面。</p><h2 id="词汇表或关键术语"><a href="#词汇表或关键术语" class="headerlink" title="词汇表或关键术语"></a>词汇表或关键术语</h2><p>虽然一般的 Web 应用程序或基础架构评估将包含对客户和测试人员都显而易见的术语或首字母缩略词（由于他们熟悉），但在某些情况下，本节会很有用。</p><p>如果正在为第三方制作报告和&#x2F;或评估的主题非常小众，通常非常欢迎将以下信息细分为参考：</p><ul><li>缩略语及其各自的定义</li><li>关键行业术语解释</li><li>内部产品名称或服务说明</li></ul><p>这通常被分解成一个简单的表格，并在整个报告中引用。它通常存储在附录中，但是，如果该部分是单页，并且为了便于参考，放在正文中会更有用，这也是可以的。</p><p>下面是一个航空公司的例子：</p><table><thead><tr><th><strong>术语&#x2F;缩略语</strong></th><th><strong>定义</strong></th></tr></thead><tbody><tr><td><strong>缩写</strong></td><td></td></tr><tr><td>AGL</td><td>地面以上 - 用于描述地面以上测量高度的术语</td></tr><tr><td>IFR</td><td>仪表飞行规则 - 管理进行仪表飞行程序的规则</td></tr><tr><td>MTOW</td><td>最大起飞重量 - 允许飞行员尝试起飞的最大重量</td></tr><tr><td><strong>行业术语</strong></td><td></td></tr><tr><td>Fuselage</td><td>机翼和尾翼组件连接到飞机的主体</td></tr><tr><td>Yaw</td><td>描述飞机机头左右运动的运动</td></tr><tr><td>Lift</td><td>直接对抗飞机重量并将飞机保持在空中的力</td></tr><tr><td><strong>产品&#x2F;服务</strong></td><td></td></tr><tr><td>SkyPulse Engine</td><td>虚构的下一代航空发动机，旨在提高燃油效率和减少排放</td></tr><tr><td>AeroSync Navigation</td><td>一个虚构的商用客机高级导航系统，具有实时天气更新和航线优化功能</td></tr><tr><td>JetStream Analytics</td><td>一种虚构的服务，提供数据分析，以优化航线和降低运营成本</td></tr></tbody></table><p>至于如何决定词汇表中的内容，最好考虑报告的利益相关者技术性稍差，并且不熟悉主题。这个较低的标准将确保术语表涵盖最关键的关键术语，而不是其行业应该理解的最明显的术语。</p><h2 id="问题和答案"><a href="#问题和答案" class="headerlink" title="问题和答案"></a>问题和答案</h2><p>每当客户在中期报告发布期间，甚至在评估开始时提出问题时，我通常会确保这些问题记录在报告中并得到回答。这确保了我们记录客户的询问和我们的回复，提供证据证明我们已经解决了他们的问题。</p><p>我还没有看到太多的报告这样做，但如果需要，它很简单。在附录中，甚至在报告的上半部分，格式如下：</p><blockquote><p><strong>问题在这里？</strong></p><p>在这里回答。</p></blockquote><p>如果许多答案很长或需要大量不同格式的信息，则将此数据放在表格中可能不可读。</p><p>如果有很多问题，则可以选择补充电子表格，并且答案足够简洁，可以以这种格式阅读。如果这样做，请记住从主报告中引用此单独的文档。</p><h2 id="某些框架的差距分析"><a href="#某些框架的差距分析" class="headerlink" title="某些框架的差距分析"></a>某些框架的差距分析</h2><p>虽然针对安全框架执行差距分析并不是本报告写作课程的真正重点，但在某些情况下，客户要求我们将差距分析结果的任一评论捆绑到典型的渗透测试报告中。</p><p>在这些情况下，表格格式最适合左侧的控件和右侧的结果。桌子上的红绿灯颜色也可能效果很好。</p><p>下面是 PCI 的示例：</p><table><thead><tr><th><strong>PCI DSS控制</strong></th><th><strong>评估结果</strong></th></tr></thead><tbody><tr><td><strong>要求 1：安装和维护防火墙配置以保护持卡人数据</strong></td><td></td></tr><tr><td>1.1.2 查看防火墙和路由器配置</td><td>防火墙配置正确，但路由器配置需要更新。</td></tr><tr><td><strong>要求 2：不要对系统密码和其他安全参数使用供应商提供的默认值</strong></td><td></td></tr><tr><td>2.2.3 加密所有非控制台管理访问权限</td><td>所有非控制台访问都经过加密。</td></tr><tr><td><strong>要求 3：保护存储的持卡人数据</strong></td><td></td></tr><tr><td>3.4 对持卡人数据在开放的公共网络上的传输进行加密</td><td>传输加密符合要求。</td></tr><tr><td><strong>要求 4：对通过开放公共网络传输的持卡人数据进行加密</strong></td><td></td></tr><tr><td>4.1 使用强大的加密和安全协议</td><td>密码学标准符合，但一些较旧的协议仍在使用。</td></tr><tr><td><strong>要求 5：使用并定期更新防病毒软件或程序</strong></td><td></td></tr><tr><td>5.1 在通常受恶意软件影响的所有系统上部署防病毒软件</td><td>防病毒软件在大多数系统上都是最新的，但某些端点缺少该软件。</td></tr><tr><td><strong>要求 6：开发和维护安全的系统和应用程序</strong></td><td></td></tr><tr><td>6.5 解决软件开发过程中常见的编码漏洞</td><td>遵循安全编码实践，但没有进行正式培训。</td></tr><tr><td>6.6 确保所有面向 Web 的应用程序都受到保护，免受已知攻击</td><td>Web 应用程序防火墙 （WAF） 已实现，但需要更新规则。</td></tr><tr><td><strong>要求 7：按业务需要限制对持卡人数据的访问</strong></td><td></td></tr><tr><td>7.1 将系统组件和持卡人数据的访问权限限制为仅其工作需要访问的个人</td><td>访问控制得到很好的实施并定期审查。</td></tr><tr><td><strong>要求 8：识别和验证对系统组件的访问</strong></td><td></td></tr><tr><td>8.2 除了分配唯一 ID 外，还至少采用以下一种方法来验证所有用户：密码、令牌设备、生物识别等。</td><td>强大的身份验证机制，包括 2FA。</td></tr><tr><td><strong>要求 10：跟踪和监控对网络资源和持卡人数据的所有访问</strong></td><td></td></tr><tr><td>10.6 查看所有系统组件的日志和安全事件，以识别异常或可疑活动</td><td>日志审查流程已到位，但执行不一致。</td></tr><tr><td><strong>要求 11：定期测试安全系统和流程</strong></td><td></td></tr><tr><td>11.3 至少每年进行一次渗透测试，并在发生任何重大变化后进行渗透测试</td><td>每年进行渗透测试，但在系统更改后不进行。</td></tr><tr><td><strong>要求 12：维护针对所有人员的信息安全的策略</strong></td><td></td></tr><tr><td>12.3 建立、发布、维护和传播安全策略</td><td>安全政策是最新的并传播的，但缺乏员工意识。</td></tr></tbody></table><p>我的偏好是：</p><ul><li>将完整的结果表存储在附录部分</li><li>有一个像结果概述这样的部分，并制作一个通过&#x2F;失败表或类似表格</li><li>在执行摘要部分中涵盖高层次的差距分析<ul><li>建议部分也可能根据评估的目标和&#x2F;或取决于差距分析的结果来反映这项工作</li></ul></li></ul><p>如果针对大量控件执行差距分析，则最好将详尽的结果存储在电子表格中。对于客户端来说，这可能更容易查看，因为他们可以按控制或通过&#x2F;失败进行排序。确保从主报告中引用此文档。</p><h2 id="体系结构概述"><a href="#体系结构概述" class="headerlink" title="体系结构概述"></a>体系结构概述</h2><p>概述正在评估的解决方案的架构是我做过很多次的事情，也是我在审查其他供应商工作时看到的事情。在对包含多个组件的解决方案执行分析时，这通常很有帮助，这些组件通常是在内部构建的一个或多个组件。</p><p>此处的一个常见示例是多个服务支持的 Web 应用程序（如 OGPatientBooking 示例所示）。</p><p>本部分的目的并不是真正讨论安全问题，而是从组件、其组织和核心数据流的角度描述解决方案。</p><p>像往常一样，没有关于如何将本节放在一起的规则，但我的建议是：</p><ul><li>首先介绍正在评估的内容和主要组成部分</li><li>创建一个图表，以显示主要组件和关键数据流</li><li>描述每个组件及其在更广泛的解决方案中的功能<ul><li>这应该包括关于它们与哪些其他组件或第三方系统通信的评论</li></ul></li></ul><p>这是本节的一个基本示例，包括一个非常粗略的图表。</p><blockquote><p>OGPatientBooking 应用程序遵循典型的现代 Web 应用程序体系结构。该解决方案在 Amazon AWS 中运行，并与多个第三方组件进行通信。</p><p>下图显示了解决方案的高级体系结构：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231959020.png" alt="img"></p><p>该解决方案的前端和后端是分开的，React 框架为面向用户的应用程序提供支持，Java Spring 应用程序为前端提供 REST 服务。管理员和标准用户都与同一个应用程序前端进行交互，尽管使用两个截然不同的 UI 视图。</p><p>整个平台使用三个主要数据存储：</p><ul><li>MySQL是应用程序的主要数据存储，负责处理所有医院的所有预订信息。</li><li>Redis 用作会话缓存以提高性能。</li><li>KMS 用于存储运行时机密以及每家医院的凭据到其后端 EMR 解决方案。</li></ul><p>该解决方案与少量外部服务进行通信。这包括：</p><ul><li>向患者发送提醒和其他通知的短信提供商。</li><li>具有相同功能的电子邮件提供商，以及具有各种通知功能的管理员的电子邮件提供商。</li><li>EMR系统用于提取有关患者的其他信息，这些信息部分用于预订功能，但也促进了“患者通信”功能，患者可以在其中查看测试结果并阅读医生的消息。</li></ul></blockquote><p>当我不得不编写本节时，我会尽可能地利用客户端的现有图表。这在评估过程中节省了大量时间，因为制作这些（并确保它们看起来不错 - 与上面的示例不同）可能很耗时。如果您不经常使用图表工具，这可能意味着需要更长的时间。</p><p>如果您确实必须制作图表，请考虑保持其简单、可读和易懂。如果您需要使用颜色，请坚持使用柔和和的色调，以使读者的眼睛更容易。</p><p>在考虑解释架构图所需的深度时，请坚持事物是什么以及它们的主要功能。避免过多地进入架构概述的“工作原理”描述。对于非常复杂的系统，最好用几个图表来说明解决方案。上述格式可用于多个图表，假设它们覆盖不同的区域，或者它们位于不同的深度。</p><h2 id="数据流图"><a href="#数据流图" class="headerlink" title="数据流图"></a>数据流图</h2><p>数据流图通常用于可视化解决方案中的组件如何相互交互，以及信息流、处理和存储的方式。这些关系图与体系结构关系图相似，但略有不同，因为数据流本身是要显示的目标，而不是显示系统的组件。</p><p>下面是上一课中显示 OGPatientBooking 应用程序的数据流的图表：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231959831.png" alt="img"></p><p>请注意，此图还显示了信任边界（红色虚线），它显示了数据越过接收组件可能将数据视为不受信任的点的点。这在威胁模型图上更为常见。</p><p>我不打算在数据流图中提供速成课程，但这里概述了每个组件的含义：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404231959695.png" alt="img"></p><h2 id="威胁模型"><a href="#威胁模型" class="headerlink" title="威胁模型"></a>威胁模型</h2><p>威胁建模是梳理针对应用程序或解决方案的所有关键威胁的绝佳方法，既可以确保已缓解或阻止某些攻击，又可以确定在要执行安全评估时要攻击的位置。</p><p>如何执行威胁模型超出了本课程的范围。如果您想学习如何执行威胁建模，请查看 STRIDE 或 DREAD 入门，它们为您提供了可以考虑的威胁类别。</p><p>需要注意的一点是，“威胁建模”不是创建图表，而是创建与系统相关的威胁列表。这是我见过一些顾问被赶上的事情。在编写威胁列表之前，最好先从图表开始，甚至可能标记图表本身。</p><p>例如，下面是使用 STRIDE 格式的 OGPatientBooking 应用程序的示例威胁列表：</p><p><strong>欺骗</strong></p><ul><li>威胁：攻击者可以通过破坏管理用户帐户来冒充医院工作人员访问敏感数据。</li><li>示例：为获取管理员凭据而进行的网络钓鱼攻击。</li></ul><p><strong>篡改</strong></p><ul><li>威胁：未经授权更改会话缓存或共享 MySQL 数据库中的数据可能会导致使用不正确的患者信息。</li><li>示例：修改患者记录或预约时间的 SQL 注入。</li></ul><p><strong>否认</strong></p><ul><li>威胁：如果没有适当的日志记录和审核，患者或工作人员可能会拒绝他们在系统内采取的行动。</li><li>示例：患者拒绝更新其联系信息，导致错过预约通知。</li></ul><p><strong>信息披露：</strong></p><ul><li>威胁：由于不安全的端点访问控制，患者数据意外泄露。</li><li>示例：OGPatientBooking 系统中的 IDOR 漏洞允许未经授权的用户访问患者数据。通过操纵 URL 参数或可预测的资源标识符，攻击者可以访问属于其他患者的私人信息。</li></ul><p><strong>拒绝服务：</strong></p><ul><li>威胁：系统可能被恶意流量淹没，阻止患者预约或签到。</li><li>示例：针对托管应用程序的 EC2 实例的 DDoS 攻击。</li></ul><p><strong>特权提升：</strong></p><ul><li>威胁：攻击者可以利用漏洞获得比预期更高的权限，访问仅限于管理员用户的功能或访问其他医院的数据。</li><li>示例：利用 React 前端的漏洞获取管理员级访问权限。</li></ul><p>虽然这部分不是所有报告的必修课，但我总是建议在评估开始时将威胁建模作为一项任务（尤其是针对复杂系统的评估）。它不一定是正式的，你也不需要花太多时间去做，但它会帮助你专注于在评估期间应该审查的关键领域。</p><h2 id="使用的工具"><a href="#使用的工具" class="headerlink" title="使用的工具"></a>使用的工具</h2><p>我在报告中看到的东西，虽然可能不是最近看到的，是参与中使用的工具的表格或列表。本节背后的原因可能有两个：</p><ul><li>向客户展示使用什么工具来发现报告中发现的各种问题，也许这样他们就可以检查自己</li><li>向对评估中使用的工具执行修正验证的任何人提供信息</li></ul><p>此列表应涵盖使用的所有工具，无论它们是否发现了特定问题。这可以呈现出来，但感觉很自然，但我个人认为桌子看起来最好：</p><table><thead><tr><th><strong>工具名称</strong></th><th><strong>网站</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>Nmap</td><td><a href="https://nmap.org/">https://nmap.org</a></td><td>一种网络发现和安全审核工具，用于发现计算机网络上的主机和服务。</td></tr><tr><td>Wireshark</td><td><a href="https://www.wireshark.org/">https://www.wireshark.org</a></td><td>一种网络协议分析器，可用于捕获和交互式浏览网络上运行的流量。</td></tr><tr><td>Metasploit</td><td><a href="https://www.metasploit.com/">https://www.metasploit.com</a></td><td>用于针对远程目标计算机开发和执行漏洞利用代码的框架。</td></tr><tr><td>Burp Suite</td><td><a href="https://portswigger.net/burp">https://portswigger.net/burp</a></td><td>用于执行 Web 应用程序安全测试的集成平台。</td></tr><tr><td>Nessus</td><td><a href="https://www.tenable.com/">https://www.tenable.com</a></td><td>一种漏洞扫描程序，旨在识别和评估各种系统的漏洞。</td></tr><tr><td>OWASP ZAP</td><td><a href="https://www.zaproxy.org/">https://www.zaproxy.org</a></td><td>开源 Web 应用程序安全扫描程序。</td></tr><tr><td>John the Ripper</td><td><a href="https://www.openwall.com/john">https://www.openwall.com/john</a></td><td>一种密码破解工具，可自动检测密码哈希类型并包含可自定义的破解程序。</td></tr><tr><td>Aircrack-ng</td><td><a href="https://www.aircrack-ng.org/">https://www.aircrack-ng.org</a></td><td>一套用于 802.11a&#x2F;b&#x2F;g WEP 和 WPA 破解的工具。</td></tr><tr><td>SQLmap</td><td><a href="http://sqlmap.org/">http://sqlmap.org</a></td><td>一种开源渗透测试工具，可自动检测和利用 SQL 注入缺陷的过程。</td></tr><tr><td>Hydra</td><td><a href="https://github.com/vanhauser-thc/thc-hydra">https://github.com/vanhauser-thc/thc-hydra</a></td><td>一个非常快速的网络登录破解程序，支持许多不同的服务。</td></tr></tbody></table><p>此表最好存储在报告的附录部分。</p><p>另一种方法是在调查结果本身中讨论任何特定的工具用法，而不是维护这样的列表进行评估。这样一来，客户就不需要主动询问您使用了什么工具，也不需要维护一个可能很长的工具列表，这些工具对某些客户来说可能是显而易见的，从而从您的待办事项列表中删除另一个任务。</p><h2 id="关键攻击链-路径"><a href="#关键攻击链-路径" class="headerlink" title="关键攻击链&#x2F;路径"></a>关键攻击链&#x2F;路径</h2><p>过去广受好评的一个部分（我经常在执行摘要中引用）是包含重要攻击链列表的部分。这应该演示没有访问权限（或有限访问权限）的攻击者如何破坏评估解决方案的资产。</p><p>资产可以是很多东西，但它是组织应该保护的有价值的东西。资产是威胁建模练习的一部分，虽然不在本课程的范围内，但我鼓励你调查威胁建模的工作原理并了解关键术语。理想情况下，攻击链的末端会影响资产或导致攻击者在网络定位或权限方面的访问发生变化。</p><p>攻击链可以用多种方式表示，例如简单的列表甚至流程图。您选择如何显示此信息取决于您，但为了您的客户考虑可读性。为了避免我制作图表，我将列出一些示例。</p><p><strong>访问患者预约数据</strong></p><ol><li>通过未经身份验证的 API 端点发现医院门户页面</li><li>暴力患者出生日期进入登记屏幕</li><li>患者详细信息更新页面中的 SQL 注入</li><li>由于共享数据库，编辑、提取或删除所有医院的患者数据库数据</li></ol><p><strong>访问患者预约数据</strong></p><ol><li>通过未经身份验证的 API 端点发现医院门户页面</li><li>暴力患者出生日期进入登记屏幕</li><li>利用不安全的直接对象引用漏洞访问其他患者的数据 - 利用未经身份验证的 API 端点漏洞获取医院 ID，以访问其他医院的患者数据</li></ol><p><strong>访问管理员门户导致拒绝服务风险</strong></p><ol><li>通过未经身份验证的 API 端点发现医院门户页面</li><li>发现 &#x2F;admin&#x2F; 页面的 URL 暴力破解</li><li>登录页面上的用户名枚举攻击 - 存在通用“管理员”帐户</li><li>针对“管理员”帐户的密码猜测攻击 - 使用的默认密码</li><li>访问登录面板（没有可用或正在使用的多因素身份验证）</li><li>能够更改所有医院设置 - 拒绝服务风险</li></ol><p><strong>访问患者预订数据</strong>（可能）</p><ol><li>通过互联网对暴露的 SSH 服务器进行密码猜测攻击</li><li>从代码或环境中提取数据库连接详细信息</li><li>连接到数据库并提取或修改数据</li></ol><p><strong>访问患者数据</strong>（潜在）</p><ol><li>通过互联网对暴露的 SSH 服务器进行密码猜测攻击</li><li>从代码或环境中提取数据库连接详细信息</li><li>连接到数据库并提取医院 EMR 凭证</li><li>连接到医院 EMR 系统以访问和编辑患者数据</li></ol><p>拥有潜在和已实现的攻击链列表有助于传达漏洞链接在一起时可能有多严重的集体风险和影响。除了高级执行摘要说明之外，这也很有用，可以逐步说明攻击者如何利用该解决方案。</p><p>可能需要执行这些攻击链中的一个或多个，并且这方面的证据将在附录部分捕获（或者以其他方式具有相当大的单个发现）。这将向客户表明这些攻击链不仅仅是理论上的。</p><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><p>考虑您是否认为您的报告可以从上述任何部分中受益，以帮助您的客户了解您的评估结果。此外，请考虑是否可能缺少其他部分。</p><p>虽然在报告中添加其他部分可能会增加报告开销，但应鼓励在增加价值且对客户有用的地方使用它们。</p><h1 id="21-其他报告部分-练习"><a href="#21-其他报告部分-练习" class="headerlink" title="21-其他报告部分 - 练习"></a>21-其他报告部分 - 练习</h1><p>在上一课中，关于报告中可能包含的不同类型的附加部分涵盖了相当多的内容。</p><p>以下是一些相关的经验教训，可以帮助您扩展知识并在以后的报告中使用这些部分。</p><p><strong>反思练习</strong></p><p>对于您最近看到或撰写的报告：</p><ul><li>考虑是否可以添加前面讨论的任何部分以提高报告质量，或者它们是否对客户有所帮助。<ul><li>返回并创建这些可能缺失的部分以供练习。</li></ul></li></ul><p><strong>一般练习</strong></p><p>创建您经常使用的工具列表，其中包括其名称、网站（或可能的 GitHub 存储库）和简要说明，以便在报告中引用。</p><p><strong>超越练习</strong></p><p>上一课中讨论的一些部分要么超出了渗透测试报告的“通常”标准报告，要么涵盖了本报告编写课程范围之外的领域。但是，如果您想自己深入研究这些领域，这里有一些可选的作业：</p><ul><li>选择三个利用多个组件运行的开源项目（这些组件可以是 Web 服务器、数据库或其他组件），然后：<ul><li>为他们创建体系结构概述部分</li><li>创建解决方案的数据流图</li><li>创建解决方案的修改数据流图，将其转换为威胁模型图。软件选项可能包括：<ul><li>Draw.io 以下库 <a href="https://github.com/michenriksen/drawio-threatmodeling">https://github.com/michenriksen/drawio-threatmodeling</a></li><li>Microsoft 威胁建模工具</li><li>OWASP Threat Dragon</li></ul></li></ul></li><li>针对一个或多个常见框架（例如 STRIDE 和 DREAD）创建解决方案的威胁模型</li></ul><p>一些例子可能是：</p><ul><li>NextCloud<ul><li>网址： <a href="https://nextcloud.com/">https://nextcloud.com/</a></li><li>描述： Nextcloud 是一个开源的自托管文件共享和协作平台。它利用 Web 服务器、数据库和存储系统等组件。</li></ul></li><li>Mattermost<ul><li>网址： <a href="https://mattermost.com/">https://mattermost.com/</a></li><li>描述： Mattermost 是一个面向团队和组织的开源消息传递平台。它依赖于 Web 服务器、数据库和实时消息传递系统等组件。</li></ul></li><li>GitLab<ul><li>网址： <a href="https://about.gitlab.com/">https://about.gitlab.com/</a></li><li>描述： GitLab 是一个开源 DevOps 平台，提供源代码管理、CI&#x2F;CD 等。它使用 Web 服务器、数据库和版本控制系统等组件。</li></ul></li></ul><h1 id="22-本章小结"><a href="#22-本章小结" class="headerlink" title="22-本章小结"></a>22-本章小结</h1><p>在本章中，我们介绍了渗透测试报告中最有可能出现的所有主要部分。让我们来看看本章的一些关键要点。</p><ul><li>大多数报告中显示的核心部分是<ul><li>摘要</li><li>建议</li><li>范围</li><li>警告</li><li>发现</li><li>附录</li></ul></li><li>报告还包含多个杂项部分和数据点<ul><li>扉页，通常是报告的开头，包含评估的名称、作者和报告的编写组织</li><li>目录</li><li>变更控制部分，详细说明文档中随时间推移的更改以及谁进行了更改</li><li>有关评估团队的信息，包括姓名、职称和证书</li><li>有关评估的一般元数据，包括对提案的引用、文件的分类、评估日期等。</li></ul></li><li>执行摘要应涵盖评估的要点，以便高管理解。它应包括：<ul><li>在参与范围中考虑了哪些风险和威胁</li><li>发现了哪些风险</li><li>发现的影响是什么</li><li>关于记录和监控的评论，以防发现可能导致违规行为的严重发现</li><li>客户可能会立即采取一些后续步骤</li></ul></li><li>建议部分应侧重于高级修正计划，以便：<ul><li>修正重要发现</li><li>建议如何发现未来可能出现的问题，或完全阻止它们出现</li><li>建议可以执行的进一步工作以发现风险</li></ul></li><li>报告中有一个或多个调查结果概述部分<ul><li>一个是按严重程度对发现的数量进行细分</li><li>另一种方法是在表格中列出调查结果，通常带有风险评级</li><li>图形和图表可以使这些信息更具可读性</li></ul></li><li>范围部分应用于捕捉评估的目标是什么以及正在评估的内容的细节<ul><li>范围界定信息可以存储在表格中，也可以像报告的任何其他部分一样完全编写</li><li>镜像原始范围界定文档的信息非常重要</li></ul></li><li>警告部分应用于突出评估无法完成概述工作的问题或原因。<ul><li>它不应该被用来责怪客户，即使这是他们的错。</li><li>坚持事实并尽可能详细，以帮助客户了解已涵盖和未涵盖的内容（如果他们返回完成评估，这也可能会对您的团队有所帮助）</li></ul></li><li>结果部分存储评估中发现的问题的技术信息。<ul><li>深思熟虑如何构建这一部分，在有意义的地方将工作的不同阶段分开</li><li>与您的客户交谈，看看不同的团队是否可能负责工作的不同阶段 - 这可能是您可能通过分离工作来帮助客户的迹象</li></ul></li><li>附录部分应用于存储可能使主要报告文件杂乱无章的信息，或存储大量参考资料<ul><li>考虑使用补充文档（例如电子表格）而不是使用附录，如果附录会显着增加页数或以不同的格式对客户更有用</li></ul></li><li>如果您正在执行的评估具有与您的正常工作不同的特定要求，则在报告的正文或附录中添加其他部分以存储这些要求的结果可能会有所帮助</li></ul><p>确保您的报告文件涵盖基本内容至关重要。如果没有上述几个部分，您很可能不会在评估结束时向客户传达正确的信息。</p><h1 id="3-概述-练习"><a href="#3-概述-练习" class="headerlink" title="3-概述 - 练习"></a>3-概述 - 练习</h1><p>在上一课中，我们讨论了出现在渗透测试报告中的常见部分。以下是一些与此相关的练习。</p><p> <strong>反思练习</strong></p><ul><li>反思您可能已经阅读或撰写的任何报告（包括渗透测试或其他报告）。这些报告的结构如何与提到的常见部分相符？有哪些部分特别有用或您觉得缺失了哪些部分？是否有任何部分被赋予不同的名称？</li><li>想想你过去创建或看到的报告。它们使用了什么文件格式，或者结果是以什么其他方式呈现的？你觉得这些格式有效或合理吗？请解释。</li></ul><h1 id="4-杂项数据及部分"><a href="#4-杂项数据及部分" class="headerlink" title="4-杂项数据及部分"></a>4-杂项数据及部分</h1><p>在涵盖更大、更常见的报告部分之前，我想先讨论一些可能出现在报告中的较小数据点和部分。</p><h2 id="标题页"><a href="#标题页" class="headerlink" title="标题页"></a>标题页</h2><p>大多数报告不会立即进入讨论，它们通常有一个封面页面，其中包含：</p><ul><li>评估的名称（通常来自工作说明或提案）</li><li>评估的日期，例如评估完成的月份和年份</li><li>作者的姓名或姓名</li><li>报告准备给个人或公司的名称</li></ul><p>有时组织喜欢在此页面上放置他们的标志或花哨的库存图像。组织目前持有的认证有时以标志形式放置在此页面上。报告的此页面上也可能有一些免责声明，尽管也可能存在于其他地方。</p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>您需要让您的客户能够轻松浏览报告的各个部分。当标题与目录一起在常见文件格式中使用时，您可以轻松地在目录中单击一个部分名称，然后跳转到正确的页面。</p><p>令人惊讶的是，我曾看到一些没有目录的报告，这可能会惹恼一些客户。</p><p>目录中的页码未及时更新并不罕见（因为我自己也犯过这种错误，也在实际情况中看到过）。请记得在向客户发布任何文档之前更新此目录，如果您使用需要更新的编辑器（例如 Microsoft Word）。此外，请更新任何内部交叉引用，因为这可能会很容易中断或更改。</p><p>同样，每页应该有页码，以便于参考和帮助报告导航。更重要的是，各节应该有节号，而不仅仅是命名的节，这样阅读报告的人可以说类似“跳转到 2.2 节”。</p><h2 id="变更控制"><a href="#变更控制" class="headerlink" title="变更控制"></a>变更控制</h2><p>本节涵盖了文档的版本控制以及已经进行了哪些更改以及由谁进行的更改。通常出现在报告的开头附近，尽管其确切位置在评估供应商之间可能有所不同。肯定有一些报告没有这个部分，可能是因为组织不符合ISO 27001标准（也许？）。然而，出于几个原因，拥有这个部分是很好的：</p><ul><li>显示您拥有文件审查和批准流程</li><li>跟踪谁审查了文件，何时以及为什么</li></ul><p> 这可能看起来像：</p><table><thead><tr><th><strong>Version</strong></th><th><strong>Date</strong></th><th><strong>Author</strong></th><th><strong>变更摘要</strong></th></tr></thead><tbody><tr><td>0.1</td><td>2024-01-14</td><td>卢克·罗杰森</td><td>内部草稿，用于质量保证流程</td></tr><tr><td>0.2</td><td>2024-01-15</td><td>丹尼尔·詹宁斯</td><td>内部同行评审</td></tr><tr><td>1.0</td><td>2024-01-16</td><td>卢克·罗杰森</td><td>发布给客户</td></tr></tbody></table><p>这是每个标题用于的内容。</p><h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><p>该版本跟踪报告的（通常是）数字版本。</p><p>较小的内部或草稿更改适合 0.1 增量。当报告达到主要版本并准备与客户共享时，应将其增加到下一个整数。例如，在上表中，一旦由’Luke Rogerson’在版本 0.2 中审查或接受了任何建议的更改，将与客户共享的最终报告将更新为 1.0。</p><p>记住这一点的简单方法可能是：</p><ul><li>所有关于 x.0 版本的报告都是面向客户的</li><li>所有关于不以 0 结尾的子版本的报告应被视为内部草稿</li></ul><p>如果交付的报告需要更改，则在传递给客户之前也应进行审查:</p><table><thead><tr><th><strong>Version</strong></th><th><strong>Date</strong></th><th><strong>Author</strong></th><th><strong>变更摘要</strong></th></tr></thead><tbody><tr><td>0.1</td><td>2024-01-14</td><td>Luke Rogerson</td><td>内部草稿，用于质量保证流程</td></tr><tr><td>0.2</td><td>2024-01-15</td><td>丹尼尔·詹宁斯</td><td>内部同行评审</td></tr><tr><td>1.0</td><td>2024-01-15</td><td>卢克·罗杰森</td><td>发布给客户</td></tr><tr><td>1.1</td><td>2024-01-18</td><td>卢克·罗杰森</td><td>添加了一些小的澄清</td></tr><tr><td>1.2</td><td>2024-01- 19</td><td>Samantha Collins</td><td>内部同行评审</td></tr><tr><td>2.0</td><td>2024-01- 20</td><td>卢克·罗杰森</td><td>发布给客户</td></tr></tbody></table><p>这个版本控制系统是我最常用的，然而，在制作报告时，您可能已经看到或使用了略有不同的系统。对于像这样的任何事情，最重要的是您在所有报告中保持版本一致，以免让自己困惑，也不要让您的客户困惑。</p><h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><p>这只是文档指定版本在可供他人进一步工作之前保存的日期，或与客户共享的日期。报告文档中使用的日期格式似乎有所不同，但我更喜欢使用 ISO 标准日期格式。如上所示，该格式为 YYYY-MM-DD 格式，其中年份表示为 4 位数字，月份表示为 2 位数字，日期表示为 2 位数字。此日期格式的示例可以是 2002-01-05 或 2024-12-21。</p><p>以这种方式显示日期有一些优点：</p><ul><li>日期的结构清晰，消除了处理日期格式时可能出现的模糊性（英国日期和美国日期之间的差异 - 分别为DD&#x2F;MM&#x2F;YYYY和MM&#x2F;DD&#x2F;YYYY）</li><li>这种日期格式也可以更容易地在表格中进行排序，使用允许表格操作的工具（例如 Microsoft Word 或 Excel）。<ul><li>它还可以作为文件名前缀，以数字方式进行排序</li></ul></li></ul><h3 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h3><p>本节标识了所做更改的作者或作者，详细说明在更改摘要中。如果文档在版本之间由多人更改，则可以列出多个人。最好以特定方式列出作者，可以按字母顺序或按最大贡献者优先。</p><h3 id="变更摘要"><a href="#变更摘要" class="headerlink" title="变更摘要"></a>变更摘要</h3><p>一些文档的变更摘要可能相当重要。然而，根据我的经验，渗透测试报告中的变更摘要通常非常具体和简洁（可以清晰地放入表格中的单元格中）。如果您想详细说明报告中更具体的变更，以显示发生了哪些特定部分的变更，请确保文档控制部分有足够的空间来清晰地展示信息（例如，您可能希望将此部分横向排列）。</p><h2 id="评估团队"><a href="#评估团队" class="headerlink" title="评估团队"></a>评估团队</h2><p>本部分用于列出参与评估的具体个人。它通常位于报告的附录部分，尽管报告的范围部分通常也可以看到其版本。它可能看起来像这样（或至少包含相同或类似数量的信息）：</p><table><thead><tr><th><strong>Name</strong></th><th><strong>Title</strong></th><th><strong>认证&#x2F;注释</strong></th></tr></thead><tbody><tr><td>卢克·罗杰森</td><td>Director</td><td>Offensive Security Certified Professional (OSCP)</td></tr></tbody></table><p>由一两个人撰写的许多报告可能并不真正需要这一部分。相反，他们可以在封面上被提及为作者，或者如前所述，在文档的范围部分。然而，保持一致很重要，所以如果您的模板使用此部分，也许最好不要删除它。</p><h2 id="文档控制元数据"><a href="#文档控制元数据" class="headerlink" title="文档控制元数据"></a>文档控制元数据</h2><p>报告文档中包含一些额外的报告元数据并不罕见。一些文档会包含一个“文档控制”部分，其中包括这些内容（还包括“版本控制”部分）。这一部分通常位于报告的开头附近。</p><p>这一部分可能包含以下信息：</p><ul><li>评估名称 - 评估的名称，可能与报告的标题相同</li><li>工作说明书&#x2F;提案参考 - 将报告与特定的工作说明书或提案联系起来，该文档的唯一ID或名称将在此引用</li><li>账户经理 - 负责管理与特定客户的关系的人员</li><li>客户代表 - 我们与之合作进行评估的客户的主要联系人</li><li>参与经理 - 测试团队的团队负责人，也是我们客户的主要联系人</li><li>分类 - 分配给报告的分类（通常放在报告文档的页眉或页脚）。示例可能包括：<ul><li>客户机密 - 只有供应商和客户应查看报告</li><li>公开 - 如果报告面向公众</li><li>内部 - 如果报告只应在内部披露（例如内部渗透测试报告）</li><li>注意：如果报告是为政府实体完成的，则可能会使用政府分类。一些客户可能坚持使用自己的分类。</li></ul></li><li>评估日期 - 评估的开始和结束日期</li></ul><h3 id="分发列表和保密通知"><a href="#分发列表和保密通知" class="headerlink" title="分发列表和保密通知"></a>分发列表和保密通知</h3><p>常见的做法是列出谁将访问报告的名字。渗透测试报告通常包含关键或敏感信息，因此确切知道谁应该查看报告是一个好的做法（尽管一旦报告发送给客户，限制文档访问权限将由他们决定）。</p><p>这一部分可能看起来像这样：</p><table><thead><tr><th><strong>Organisation</strong></th><th><strong>Name</strong></th><th><strong>Job Title</strong></th></tr></thead><tbody><tr><td>ogSec</td><td>卢克·罗杰森</td><td>Director</td></tr><tr><td>ogSec</td><td>丹尼尔·詹宁斯</td><td>高级研究员</td></tr><tr><td>ogSec</td><td>乔治·哈里森</td><td>客户经理</td></tr><tr><td>OGPatientBooking</td><td>安德鲁·史蒂文斯</td><td>Product Lead</td></tr></tbody></table><p>其他报告可能只是简单地说明谁准备了报告，以及为谁准备了报告的人员名单。</p><p>还可能有一份书面声明，说明该报告只被授权与这些明确列出的个人或组织分享。</p><h3 id="保修通知"><a href="#保修通知" class="headerlink" title="保修通知"></a>保修通知</h3><p>与保密通知类似，可能会出现另一种法律通知来覆盖评估供应商。这可能包括以下内容：</p><ul><li>报告是对所评估的安全风险的时间点快照 - 如果所评估的内容被更新和更改，报告的适用性或准确性将随时间变化。</li><li>评估可能未揭示每个漏洞</li><li>渗透测试供应商对客户或第三方因评估或其结果而造成的任何损害、损失或费用不负责</li><li>客户有责任确保报告中提出的漏洞得到纠正，并且在未来保持良好的安全姿态</li></ul><p>请注意，以上内容均不构成法律建议，仅仅是对这类部分常见措辞的总结。</p><h2 id="文件名"><a href="#文件名" class="headerlink" title="文件名"></a>文件名</h2><p>所有组织都有自己的文件命名约定；然而一个关键元素是尽量使它们尽可能独特，同时使它们易于识别。文件名结构可能由以下内容组成：</p><ul><li>评估供应商名称（可能是缩写名称）</li><li>客户名称（可能是缩写名称）</li><li>评估名称</li><li>工作说明书或提案参考</li><li>日期</li><li>报告版本</li></ul><p>这可能会给您一个（可怕的）文件名，看起来像“ogSec_OGPatientBooking_2002_Platform-Review-Report_2024-01-19_v2.0.pdf”。请注意，下划线用于分隔文件名的主要部分，破折号用于分隔这些子部分的部分。</p><p>一些组织更喜欢更清晰易读的命名约定：”ogSec - OGPatientBooking - 2002 平台审查 - 2024-01-19 v2.0.pdf”。</p><h2 id="文件元数据"><a href="#文件元数据" class="headerlink" title="文件元数据"></a>文件元数据</h2><p>你可能还需要考虑的是删除（或更好地预防）可能出现在你创建的报告中的任何敏感元数据。在这里明确一下，我指的是文件级元数据。可能出现在其中的内容有：</p><ul><li>您或您的组织用于制作文档的软件的名称和版本</li><li>您文档的作者姓名（如果您在报告中指出文档的作者，则无关紧要）<ul><li>电子邮件地址和电话号码也可能存在</li></ul></li></ul><p>这可能对试图针对您组织内个人的攻击者有用。在审查客户网站上公开可用的文件时，有时会将此作为安全问题提出，因此这可能也是您需要考虑的问题。</p><h2 id="课程总结-6"><a href="#课程总结-6" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课程中，我们涵盖了报告中出现的一些较小部分或元数据，以及它们通常包含的内容。虽然报告材料的大部分内容将包含在其他部分中，但这些较小的部分出于各自的原因仍然很重要，并且应该出现在所有报告中。</p><h1 id="5-杂项数据及部分-练习"><a href="#5-杂项数据及部分-练习" class="headerlink" title="5-杂项数据及部分 - 练习"></a>5-杂项数据及部分 - 练习</h1><p>这节课之后没有太多可以深究的地方，但是可能有一些反思的要点需要考虑。以下是一些练习。</p><p> <strong>反思练习</strong></p><ul><li>想想你使用过或看到别人使用的报告格式。报告中是否包含了之前提到的所有部分？如果没有，你认为它们是否应该被要求，并解释原因。</li><li>想想你遇到过的报告文件名称，无论是内部的还是外部的。回顾它们并评论一下它们的简洁性和信息量。它们是否缺少任何关键信息？</li></ul><p> <strong>一般练习</strong></p><p>考虑前一课程中描述的部分和页面，并为这些部分创建模板。它们应该易于调整和可重用于不同的报告中。</p><p><strong>超越练习</strong></p><ul><li>查看您可以从报告交付件中提取的元数据。您可以针对以下任何文件类型进行操作：<ul><li>PDF 文件</li><li>任何 Microsoft Office（或 Open Office）文档</li><li>图像或图表</li></ul></li><li>这里有一些工具可以帮助您入门：<ul><li>exiftool</li><li>pdfinfo</li></ul></li></ul><h1 id="6-执行摘要"><a href="#6-执行摘要" class="headerlink" title="6-执行摘要"></a>6-执行摘要</h1><p>执行摘要是每份渗透测试报告中至关重要的部分。这一部分的目标不是阐明在技术层面上发现了什么具体问题（这留给报告中的各个发现），而是为决策者和利益相关者回答以下问题：</p><ul><li>在承揽范围内考虑了哪些风险和威胁？</li><li>发现了哪些风险？</li><li>发现的影响是什么？</li></ul><p>一些执行摘要可能涵盖战略建议或应尽快实施的建议。</p><p>本节的受众通常是高管（因此得名），他们可能没有与阅读发现的人具有相同的技术经验，但通常更有可能监督已经测试过的决策制定。这些通常是决定投入什么时间、资源和金钱来进行补救的人，或者是需要离开并要求额外预算的人。</p><p>报告的这一部分出现在开头，有些情况下是文档的第一页或第二页。这样做是为了让那些想要快速了解文档内容，但没有时间或愿望完整阅读的读者，能够快速了解主要要点，并理解发现的风险可能带来的影响。我见过一些报告将这一部分放在最后。从讲故事的角度来看，这在逻辑上是有道理的，但与行业规范相比，这是不寻常且不理想的。</p><h2 id="示例执行摘要"><a href="#示例执行摘要" class="headerlink" title="示例执行摘要"></a>示例执行摘要</h2><p>我为 OGPatientBooking 平台的评估撰写了一份执行摘要。执行摘要分为不同的部分，旨在回答我上面概述的问题。</p><h3 id="设定背景-是什么？背景规模"><a href="#设定背景-是什么？背景规模" class="headerlink" title="设定背景 - 是什么？背景规模"></a>设定背景 - 是什么？背景规模</h3><p>由于我的背景是为收购方创建报告，因此对我来说，适当地设定背景至关重要。虽然报告文件将包含有关评估平台是什么、其规模和所持有数据的信息，但在开始时简要提及可以赋予任何后来在摘要中提出的风险或观察以庄严和背景。这实际上是所有高管摘要的绝佳引言，并我鼓励您在报告中使用这样的开场白。</p><p>这可能是什么样子的：</p><blockquote><p>OGPatientBooking解决方案是一种SaaS（软件即服务）平台，目前在英国的十几家大型医院中使用。其主要目的是为患者提供一个单一的地方，在医院自助办理入住手续，从而降低接待人员的需求或为其他任务腾出时间。该平台每天通过放置在医院入口处的终端设备为约25,000名独立患者预约（每月约75万人次）。大多数使用该平台的医院还使用“患者通讯”模块，允许患者查看检测结果或医生的消息。由于在英国大型医院的使用以及访问患者数据的能力，该解决方案潜在地可以访问约1000万人的数据。</p></blockquote><p>如上所示，以下问题已被回答以铺设基础：</p><ul><li>应用程序实现了什么功能？</li><li>解决方案在世界的哪些地区运作？</li><li>应用程序的主要用户是谁？（在这种情况下，医院为解决方案付费，主要用户是患者）</li><li>有哪些大致的数字或指标可以总结平台的使用情况？</li></ul><p>在后续的摘要部分中，当谈论风险、可利用性、影响以及最坏情况时，这些观点中的一些将得到反映。</p><p>虽然你可以将这段文字视为可选内容，但我意识到以这种格式进行介绍有助于过渡到后面的执行摘要部分，我们将在下面看到。</p><h3 id="概念风险"><a href="#概念风险" class="headerlink" title="概念风险"></a>概念风险</h3><p>下一个需要关注的领域突出了影响平台的关键概念风险。这些概念风险代表着高层次的潜在威胁，虽然尚未实现，但对组织构成重大关注，必须积极防范。这些是理论上的漏洞或威胁，可能对平台的安全姿态和运营完整性产生严重影响，特别是在数据的保密性、可用性和完整性至关重要的环境中。</p><p>这些风险要么是在评估过程中发现的，要么是在与客户进行的那些启动电话中注意到的。在我阅读的许多高管摘要中，这种叙述并不总是那么常见。然而，突出向客户强调已经了解了被审查内容的潜在风险是至关重要的，同时为您提供一段文本，以便在高管摘要的下一个领域进行反思。</p><p>一个关于概念风险的示例部分可能如下所示：</p><blockquote><p>由于平台在医院运营中的关键作用，平台的可用性和完整性以及涉及的患者数据的保密性至关重要。如果这个基本系统变得不可用，医院可能会受到严重影响。更为重要的是，从这个解决方案使用和访问的数据必须以任何代价都得到保护，因为它包含个人健康信息（PHI）。对于隐私而言，任何对这些数据的妥协或修改都可能具有重大意义，最坏的情况下可能导致生命丧失（例如，攻击者获得对医院 EMR 解决方案的访问权并更改了患者的药物或剂量）。</p></blockquote><p>在这一段中提到了解决方案的两个主要资产：解决方案的可用性和它处理和存储的数据。解决方案下线或患者数据被访问或修改的后果可能对医院及其患者造成严重后果，因此将这一点突出显示是至关重要的。</p><p>在这一部分和下一部分之间需要一些流畅的过渡。此外，如果发现了重要发现，可能会诱人在本段落中详细介绍这些内容 - 避免这样做。目标只是简单地指出客户在风险方面最关心的内容（希望确实如此）。</p><h3 id="发现的风险及其影响"><a href="#发现的风险及其影响" class="headerlink" title="发现的风险及其影响"></a>发现的风险及其影响</h3><p>现在是时候谈谈发现了什么了。以下是在评估过程中发现的最重要的发现列表：</p><p><strong>Web 应用程序评估</strong></p><ul><li>不安全的直接对象引用</li><li>租户实施不足</li><li>SQL注入患者详细信息更新界面</li><li>无 MFA 的管理员登录</li><li>管理员门户公开访问</li><li>医院门户在未经身份验证的情况下公开访问</li><li>未经身份验证的 API 端点返回医院配置</li><li>通用管理员帐户</li><li>在管理员门户中进行用户枚举</li><li>管理员帐户的默认密码</li><li>EMR 存储凭据可能被捕获</li></ul><p> <strong>AWS 配置审查</strong></p><ul><li>管理员帐户未强制执行 MFA</li><li>包括 root 用户</li><li>未强制执行密码复杂性</li><li>未启用 CloudWatch</li><li>SSH 服务器暴露</li><li>用于生产的单个 EC2 实例</li><li>没有 Web 应用防火墙</li><li>没有配置数据库备份</li></ul><p>这些漏洞中的一些可以被链接在一起产生戏剧效果，从而将整个平台、用户和数据置于重大风险之中。</p><p>如果您对这些漏洞或配置错误中的任何一个都感到陌生，请花些时间查找并做笔记。这样，我接下来要描述的内容会更加容易理解。</p><p>这是执行摘要的下一部分，也是最重要的部分：</p><blockquote><p>虽然该应用程序展示了一些安全的网络应用程序安全实践领域，以及在外部面向网络应用程序部署方面的几个安全配置，但一些具体的发现和架构上的问题意味着患者数据面临着被泄露的重大风险。</p><p>由于登记流程的方式，到达医院的患者需要通过触摸屏验证身份，并按照多步骤的流程使用出生日期进行验证。尝试使用触摸屏猜测出生日期是可能的，但对攻击者来说并不可行。然而，在测试过程中发现，所有医院的登记页面都可以通过互联网访问，并且很容易被发现。这意味着可以创建自动化工具，请求所有出生日期（过去100年）以返回当天有预约的患者名单。一旦攻击者处于这种位置，他们可以使用从患者预约中返回的详细信息来访问检查结果、医生的消息或查看或更新他们的个人信息（电子邮件地址、电话号码和医生诊所）。发现医院的门户页面只需要猜测一个URL，这对攻击者来说是很容易的。随后对登记流程的利用也将非常容易，因为有可用的工具可以帮助进行此类攻击。</p><p>一旦攻击者处于上述位置，他们将能够利用平台中的其他漏洞，从而获取托管在平台上的所有医院的所有预约数据的访问权限。由于在用于存储所有医院数据的单个数据库中，不同医院数据之间的隔离非常有限，因此可以读取、修改或删除这些记录。攻击者不仅可以从所有这些患者那里提取个人信息，还可以通过删除所有记录有效地取消所有预约。假设攻击者成功获得了一个患者的预约访问权限，这些漏洞对于经验丰富的攻击者来说将很容易发现。</p><p>与医院的登记页面一样，每家医院的管理面板也是可以访问的。一旦发现了医院的登记页面位置，攻击者就很容易发现管理页面。更糟糕的是，使用的是通用管理帐户，并且对于几家医院来说，它还没有从默认值（在公开可访问的文档中可用）中更改。使用这个帐户访问这个区域将允许攻击者更改许多设置，这可能导致使某家医院的系统下线。</p><p>平台的前端不仅面临着重大风险，解决方案的部署以及在 AWS 中缺乏加固措施意味着攻击者可能能够访问 AWS。如果攻击者能够猜测或获取 AWS 管理员的用户名和密码，他们将完全控制整个解决方案，并能够访问、修改或删除平台内的所有数据。如果启用了多因素身份验证，这种情况是可以避免的。</p><p>此外，攻击者还可以访问凭证材料（存储安全但所有AWS用户都可以访问）以访问医院EMR系统，显著增加攻击者可以访问的数据类型。例如，这可能是约1000万患者的病历。对这些数据的任何泄露可能违反2018年数据保护法或英国《一般数据保护条例》（GDPR），该法规涵盖个人健康信息。对这些数据的泄露可能导致OGPatientBooking受到严厉处罚。</p><p>尽管架构审查不在此评估范围内，但注意到解决方案在 AWS 中没有足够的高可用性配置，也没有有效的备份。如果发生违规行为，并且应用程序受到拒绝服务条件的影响，这将产生重大影响。例如，正如已经提到的，如果数据库内容被删除，目前没有已知的恢复数据的方法。此外，如果运行在单个 EC2 实例上的应用程序受到拒绝服务条件的影响，将没有简单的方法来扩展负载。这两个例子表明，这个关键系统的可用性可能会很容易受到具有足够资源或访问权限的攻击者的影响。</p><p>由于代码审查不在此评估范围内，因此无法确定 Web 应用程序本身的日志记录实现，但是，AWS 环境的日志记录和监控配置处于默认状态。这意味着无法审查 AWS 环境的任何审核，其中管理员已经进行了身份验证并对环境进行了更改。</p><p>根据确定的实施和架构问题，该平台存在严重的潜在违规风险，允许攻击者访问敏感的患者数据，并使其容易受到拒绝服务的影响。由于可以轻松获取公开可访问页面的 URL，数据泄露和未经授权访问应用程序配置面板的可能性很高。攻击者利用系统所需的后续步骤很少，对应用程序安全构成严重威胁。立即采取行动，调查和纠正应用程序的入口点，并确认是否发生过任何历史患者数据泄露。</p></blockquote><p>如果您是报告撰写的新手，或者也许您以前没有在类似这样的部分中看到过这个级别&#x2F;类型的信息，并且感到沮丧或受到威胁 - 请不要。您应该专注于确保关键信息和分析的存在，而不需要模仿我的写作风格（或其他人的）。请记住，报告撰写是一种需要练习的技能，在这门课程和您自己的工作中都会有大量练习的机会。</p><p>现在，让我们回顾一下这段文字，并逐步构建这一部分草稿的方法。</p><p>摘要的这一部分分为三个方面：</p><ul><li>为安全影响和高层次后果设定场景</li><li>每个重要段落：<ul><li>攻击链</li><li>漏洞或配置错误</li><li>系统问题</li><li>极端的做法</li></ul></li><li>（可选）日志记录和监控功能</li><li>结尾声明</li></ul><p>我发现解决这些部分的最佳方法是回答几个问题，然后对文本进行细化，使其流畅。让我们看看这是什么样子。</p><h3 id="设置场景"><a href="#设置场景" class="headerlink" title="设置场景"></a>设置场景</h3><p>从对正在评估的安全风险景观的观点开始</p><ul><li>我们对安全风险的高层次观点是什么？有多糟糕或多好？</li><li>哪些资产（用户、数据、系统等）受到的影响最为显著？</li><li>有什么好东西可以反映或评论吗？<ul><li>提及好东西是可以的，但不要让好东西掩盖了不好的地方，如果有重要发现，请改变本节的必要语气。</li></ul></li></ul><h3 id="运行风险"><a href="#运行风险" class="headerlink" title="运行风险"></a>运行风险</h3><p>这部分通常会是报告中需要提及的重要事项的段落。有多种方法可以处理这个问题，所以我将概述几组类似的问题。请注意，您可能需要在单个执行摘要中使用多个相同类型的部分或以下变体。请记住，这部分的构建方式没有严格的规定，我们只需要确保所需信息以一种易于理解的方式呈现。</p><p>在下面我提到的内容之外可能还有其他类别，但这应该足以为您提供一些方向，以应对这一部分。一旦您回答了这些问题，文本应该被审查和完善，使其流畅并且有意义。如果这意味着您需要偏离“每段一个主题”的模式，或者需要改变结构的其他方面 - 那完全没问题。</p><p>记住 - 尽量避免在本节中包含技术细节。</p><p>攻击链 - 通过利用多个漏洞可能危害资产。</p><ul><li>攻击链的起点是什么，是否需要简要解释某些工作原理？</li><li>在涉及的每个步骤中，攻击者要做什么才能继续下一步？</li><li>一旦资产被危害，影响是什么？<ul><li>攻击者现在可以访问什么？</li><li>他们可以利用这个访问权限做什么？</li><li>他们可以对他们访问的东西做什么？</li><li>现在他们能够攻击其他东西吗，他们是什么？</li><li>现在可能发生的最糟糕的情况是什么？</li></ul></li><li>攻击者有多容易利用这种攻击链，攻击者可能会发现它的可能性有多大？</li><li>在这个攻击链中是否有任何显著的缓解措施，可以防止攻击链中的漏洞被发现或利用？</li></ul><p>单一重大漏洞或配置错误 - 通过利用单一漏洞或配置错误，可以利用资产</p><ul><li>问题的性质和攻击者的利用路径的高级概述是什么？</li><li>一旦资产被危害，影响是什么？<ul><li>攻击者现在可以访问什么？</li><li>他们可以利用这个访问权限做什么？</li><li>他们可以对他们访问到的东西做什么？</li><li>现在他们能够攻击其他事物吗，他们是什么？</li><li>现在可能发生的最糟糕的情况是什么？</li></ul></li><li>攻击者有多容易利用这个漏洞或错误配置，攻击者发现它的可能性有多大？</li><li>在这个攻击链中是否有任何显著的缓解措施，可以防止发现或利用漏洞或错误配置？</li></ul><p>系统性问题或不良实践 - 发现了一个严重问题，它存在于整个解决方案中</p><ul><li>在评估过程中观察到了什么类型的问题或不良实践？<ul><li>避免提及漏洞的技术信息，最好只涉及其类型以及攻击者可能利用它做什么</li><li>这也可能是由于没有遵循良好的实践</li></ul></li><li>漏洞在整个解决方案中有多常见？它是否可以很容易地得到纠正（无论是否已知）</li><li>一旦资产被危害，影响是什么？<ul><li>攻击者现在可以访问什么？</li><li>他们可以利用这个访问权限做什么？</li><li>他们可以对他们访问到的东西做什么？</li><li>现在他们能够攻击其他事物吗，他们是什么？</li><li>现在可能发生的最糟糕的情况是什么？</li></ul></li><li>攻击者有多容易利用这个普遍问题或不良实践，攻击者可能会发现它的可能性有多大？</li><li>在这个攻击链中是否有任何显著的缓解措施，可以防止链中的漏洞被发现或利用？</li></ul><h3 id="日志记录和监控功能的洞察"><a href="#日志记录和监控功能的洞察" class="headerlink" title="日志记录和监控功能的洞察"></a>日志记录和监控功能的洞察</h3><p>如果发现了关键发现，您认为有很高的可能性已被利用（或目前正在被利用），那么如果您对日志记录和监控有任何洞察力，评论可能是有意义的。这可能会使下一课中我们将涵盖的建议部分更容易反思。</p><p> 要回答的问题：</p><ul><li>您观察到了哪些可能检测到解决方案中恶意活动的日志记录和监控？如果您没有看到任何内容（可能是因为它不在范围内或根本没有），请说明</li><li>根据第一个问题的答案 - 这对客户可能会产生什么后果？<ul><li>如果他们有日志记录，可以建议他们可能有数据可供调查</li><li>如果没有日志记录，建议可能难以检测到违规行为</li><li>如果您对日志记录功能没有了解，应该直接说明</li></ul></li></ul><h3 id="结束声明"><a href="#结束声明" class="headerlink" title="结束声明"></a>结束声明</h3><p>撰写一份陈述，通过将您讨论的内容压缩成一个段落来总结摘要</p><p> 需要回答的问题：</p><ul><li>影响审查的整体安全风险是什么？</li><li>在最坏的情况下，哪些资产受到影响，以及受到了什么程度的影响？</li><li>为客户建议哪些高层次的即时行动？</li></ul><p>保持这段文字简洁明了。</p><h2 id="关于可利用性和影响的说明"><a href="#关于可利用性和影响的说明" class="headerlink" title="关于可利用性和影响的说明"></a>关于可利用性和影响的说明</h2><p>对于更大的执行摘要，其中有许多主题需要总结，措辞可能开始变得重复。这通常发生在有多个妥协资产的途径或者在评估中存在许多漏洞类别的情况下。如果在审查文本时注意到这一点，请考虑将有关可利用性和影响的部分中的一些或全部注释移至结束语句中 - 在上面的示例中已经做到了一定程度。</p><h2 id="有限发现方法"><a href="#有限发现方法" class="headerlink" title="有限发现方法"></a>有限发现方法</h2><p>如果评估产生了有限的重大发现，或者根本没有重大发现，执行摘要的这一部分应侧重于找到的关键漏洞（如果有的话），并在必要时描述影响、可利用性和可能性（如上述部分所述）。</p><p>如果报告大部分是好的，您可以尝试描述良好安全姿态证据已经到位的情况：</p><ul><li>您观察到哪些证据表明良好的安全实践得到了遵循？<ul><li>这可能包括在各种漏洞类别中没有发现，尽管经过严格测试。</li><li>这也可能是安全功能和加固的存在</li></ul></li></ul><h2 id="建议？"><a href="#建议？" class="headerlink" title="建议？"></a>建议？</h2><p>我将在下一课中涵盖这些内容。但值得指出的是，通常情况下，要么在本节之后列出明确的下一步清单，要么提出一些战略性建议。建议要么完全融入本节，要么单独列出。我们将在即将到来的建议课程中涵盖这一点。</p><h2 id="完整示例"><a href="#完整示例" class="headerlink" title="完整示例"></a>完整示例</h2><p>这里是所有示例汇总为一段文本。这是一个相当长的执行摘要，大约有两页的字数，通常一页左右就足够了。</p><blockquote><p>OGPatientBooking 解决方案是一个在英国超过十几家大型医院中使用的 SaaS（软件即服务）平台。其主要目的是作为患者在医院自助登记的单一地点，随后降低了接待人员的需求或为其他任务腾出时间。该平台每天通过放置在医院入口处的终端为大约 25,000 名独特患者预约（每月约 750,000 人）。大多数使用该平台的医院还使用“患者通信”模块，允许患者查看检查结果或医生的消息。由于在英国大型医院的使用以及访问患者数据的能力，该解决方案潜在地可以访问约 1000 万人的数据。</p><p>由于平台在医院运营中的关键作用，平台的可用性和完整性以及涉及的患者数据的保密性至关重要。如果这个基本系统变得不可用，医院可能会受到严重影响。更为关键的是，从这个解决方案使用和访问的数据必须以任何代价都得到保护，因为其中包含个人健康信息（PHI）。对这些数据的任何妥协或修改可能在隐私方面具有重大意义，在最坏的情况下（例如，攻击者获取了对医院EMR解决方案的访问权限并更改了患者的药物或剂量），可能导致生命丧失。</p><p>尽管该应用展示了一些安全的网络应用程序安全实践领域，以及在外部面向的网络应用程序部署方面的几个安全配置，但一些具体的发现和架构上的担忧意味着患者数据面临着重大的危险。</p><p>由于登记流程的方式，到达医院的患者需要通过触摸屏验证身份，并按照多步骤的流程使用出生日期进行验证。尝试通过触摸屏猜测出生日期是可能的，但对攻击者来说不可行。然而，在测试中发现，所有医院的登记页面都可以通过互联网访问，并且很容易被发现。这意味着可以创建自动化工具，请求所有出生日期（过去100年）以返回当天有预约的患者列表。一旦攻击者处于这种位置，他们可以使用从患者预约中返回的详细信息来访问检查结果、医生的消息，或查看或更新他们的个人信息（电子邮件地址、电话号码和医生诊所）。发现医院的门户页面只需要猜测一个URL，这对攻击者来说很容易。随后对登记流程的利用也将非常容易，因为有可用的工具可以帮助进行此类攻击。</p><p>一旦攻击者处于上述位置，他们将能够利用平台中的其他漏洞，从而获得托管在平台上的所有医院的所有预约数据的访问权限。可以访问、修改或删除这些记录，因为在用于托管平台的单个数据库中，不同医院数据之间的隔离非常有限。攻击者不仅可以从所有这些患者那里提取个人信息，还可以通过删除所有记录有效地取消所有预约。这些漏洞对经验丰富的攻击者来说很容易发现，假设他们成功获得了一个患者的预约访问权限，那么攻击发生的可能性就会增加。</p><p>就像医院的登记页面是公开可访问的一样，每家医院的管理面板也是可以访问的。一旦发现了医院的登记页面位置，攻击者就很容易发现管理页面。更糟糕的是，使用了通用的管理账户，并且对于一些医院来说，这个账户的默认值没有被更改（这个默认值在公共文档中是公开可见的）。使用这个账户访问这个区域将允许攻击者更改许多设置，可能导致某家医院的系统下线。</p><p>平台的前端不仅面临着重大风险，解决方案的部署以及在 AWS 中缺乏加固措施意味着攻击者可能能够访问 AWS。如果攻击者能够猜测或获取 AWS 管理员的用户名和密码，他们将完全控制整个解决方案，并能够访问、修改或删除平台内的所有数据。如果启用了多因素身份验证，这种情况是可以避免的。</p><p>此外，攻击者还可以访问凭证材料（存储安全但所有AWS用户都可以访问）以访问医院EMR系统，显著增加攻击者可以访问的数据类型。例如，这可能是约1000万患者的病历。对这些数据的任何泄露可能违反2018年数据保护法或英国《一般数据保护条例》（GDPR），该法规涵盖个人健康信息。对这些数据的泄露可能导致OGPatientBooking受到严厉处罚。</p><p>尽管架构审查不在此评估范围内，但注意到解决方案在 AWS 中没有足够的高可用性配置，也没有有效的备份。如果发生违规行为，并且应用程序受到拒绝服务条件的影响，这将产生重大影响。例如，正如已经提到的，如果数据库内容被删除，目前没有已知的恢复数据的方法。此外，如果运行在单个 EC2 实例上的应用程序受到拒绝服务条件的影响，将没有简单的方法来扩展负载。这两个例子表明，这个关键系统的可用性可能会受到具有足够资源或访问权限的攻击者的影响。</p><p>由于代码审查不在此评估范围内，因此无法确定 Web 应用程序本身的日志记录实现，但是 AWS 环境的日志记录和监控配置处于默认状态。这意味着无法审查 AWS 环境的任何审计，其中管理员已经进行了身份验证并对环境进行了更改。</p><p>根据确定的实施和架构问题，该平台存在潜在违规的重大风险，允许攻击者访问敏感的患者数据，并使其容易受到拒绝服务的影响。由于可以轻松获取公开可访问页面的 URL，数据泄露和未经授权访问应用程序配置面板的可能性很高。攻击者利用系统所需的后续步骤很少，对应用程序的安全性构成严重威胁。需要立即采取行动调查和纠正应用程序的入口点，并确认是否发生过任何历史患者数据泄露事件。</p></blockquote><h2 id="课程总结-7"><a href="#课程总结-7" class="headerlink" title="课程总结"></a>课程总结</h2><p>执行摘要是渗透测试报告中最重要的部分之一。在其中，您需要清晰地阐明影响组织的风险，以及利用这些风险可能带来的影响。该部分应使报告的读者清楚地了解评估过程中发现的内容，并且应该为非技术决策者所理解。</p><p>写好执行摘要并非一蹴而就。希望本课程中概述的信息能够提高你在质量和内容方面的水平，但是持续的练习、反思和自我提升才能改善你的写作。因此，如果你觉得我在这里展示的例子对你来说难以达到，不要灰心——通过练习，你应该能够达到甚至超越我所写的水平。</p><h1 id="7-执行摘要-练习"><a href="#7-执行摘要-练习" class="headerlink" title="7-执行摘要 - 练习"></a>7-执行摘要 - 练习</h1><p>我们刚刚涵盖了报告中最冗长且可能最重要的部分，我们涵盖了许多内容，如果不经常练习，很容易被遗忘。</p><p> <strong>反思练习</strong></p><ul><li>反思一下你可能读过或写过的任何报告。<ul><li>根据之前的课程，您觉得执行摘要中有什么重要的内容遗漏了吗？如果有，现在写下来。</li><li>摘要中是否有引言段落或突出所审查内容的概念风险？如果没有，您现在可以写吗？</li></ul></li></ul><p> <strong>一般练习</strong></p><p>在课程结束时将有一项报告写作任务，以下是一些具体情景，帮助您练习撰写本节的内容。不必觉得您需要生成与上一个示例中相同数量的文本，但可以随意借鉴任何风格或措辞。虽然我说您不应该模仿我的写作风格，但可以用它作为灵感。</p><p>针对以下每个情况，根据以下事实撰写一份执行摘要。随时添加其他事实、问题或甚至攻击的链接以便撰写摘要（将这些视为您可以撰写的模板）。如果您添加任何内容，请做笔记。我们将在本章的其余部分继续处理这些示例。</p><p>再次，如果您对任何漏洞或错误类别感到陌生，请搜索定义并做笔记。</p><hr><h2 id="足球结果网站-AKA-Goal-Gobblers-的网络应用程序测试"><a href="#足球结果网站-AKA-Goal-Gobblers-的网络应用程序测试" class="headerlink" title="足球结果网站 AKA Goal Gobblers 的网络应用程序测试"></a>足球结果网站 AKA Goal Gobblers 的网络应用程序测试</h2><p> <strong>上下文和信息</strong></p><ul><li>跟踪英国和美国所有联赛的足球比分</li><li>它通过与提供评分信息的多个第三方网站进行通信来实现这一点。</li><li>用户可以注册接收所选团队的通知。</li><li>该平台平均每天接待5万名访客</li><li>该平台拥有大约 10,000 名注册用户</li><li>收入来自嵌入在页面上的广告</li><li>该应用有一个适用于移动设备的版本</li><li>应用程序的前端是 React.js，后端是 Node.js</li><li>解决方案部署在 AWS 中，但除此之外，不清楚配置或部署的具体情况</li></ul><p> <strong>评估范围</strong></p><p>ScoreScraper.com 网站的 Web 应用程序评估</p><p> <strong>发现</strong></p><ul><li>在个人资料更新页面中的身份验证 SQL 注入</li><li>身份验证绕过</li><li>反射型跨站脚本</li><li>支持 SSLv3</li><li>不支持多因素身份验证</li><li>忘记密码时的电子邮件枚举</li><li>过度宽松的跨域资源共享</li><li>即将到期的证书</li></ul><p> <strong>缓解措施</strong></p><p>已部署网络应用防火墙 - 阻止部分攻击，但不是全部</p><h2 id="电子商务网站的-Google-平台配置审查-AKA-Retail-Rodeo"><a href="#电子商务网站的-Google-平台配置审查-AKA-Retail-Rodeo" class="headerlink" title="电子商务网站的 Google 平台配置审查 - AKA Retail Rodeo"></a>电子商务网站的 Google 平台配置审查 - AKA Retail Rodeo</h2><p> <strong>上下文和信息</strong></p><ul><li>评估流行电子商务平台的 GCP 配置</li><li>该电子商务平台拥有超过 10 万名直接客户销售物品</li><li>整个解决方案每年为超过 2000 万客户提供销售服务</li><li>该平台还保存了选择不使用 PayPal 或类似支付处理器的客户的付款卡信息。</li><li>该平台是跨国的，运营在英国、美国、几个欧盟主要国家以及澳大利亚和新西兰。</li><li>电子商务平台的收入来自于每个卖家每月的固定费用，以及从每笔销售中收取的一小部分百分比。</li><li>该解决方案是在Django Python网络框架中开发的，并使用了PostgreSQL数据库。</li></ul><p> <strong>评估范围</strong></p><p>对预生产环境的 GCP 配置进行审查，该环境是生产环境的复制品（将部署到全球各个地区）</p><p> <strong>发现</strong></p><ul><li>公开的云存储桶</li><li>过于宽松的防火墙规则（RDP 和 SSH 暴露）</li><li>App Engine 和 Google Cloud SQL 中的有限日志记录和监控</li><li>云存储桶在静态时未加密</li><li>云存储桶可通过 HTTP 访问</li><li>过于宽松的 IAM 角色</li><li>缺乏 PCI 环境的隔离</li><li>应用引擎使用的服务帐户权限过多</li><li>缺乏用户群体</li><li>存储在环境变量中的秘密</li><li>PostgreSQL数据库缺乏备份</li><li>App Engine 设置的安全标头丢失</li></ul><p> <strong>缓解措施</strong></p><p>CloudFlare 用于 Web 应用程序防火墙和面向客户端点的拒绝服务保护</p><h1 id="8-建议"><a href="#8-建议" class="headerlink" title="8-建议"></a>8-建议</h1><p>建议部分（通常称为战略建议），位于个别问题之外，属于高层次，遵循（或作为执行摘要的一部分包括在内）。</p><p>传统的思考这一部分的方式是将项目放在短期、中期和长期标题下。我不喜欢这种方法，似乎许多组织也同意，因为这种格式随着时间的推移已经消失。</p><p>更常见的做法是突出客户应立即解决的紧急问题，然后是其他几个中长期类别：</p><ul><li>发现任何其他重要问题</li><li>强调可以提出的建议，以便发现未来可能出现的问题，或者完全预防它们</li><li>建议可以进行的进一步工作，以发现风险</li></ul><p>我们将在接下来的几节中详细讨论上述内容，然而，我必须再次强调，传达这些信息有许多种方式，您当前的流程或报告结构可能与我提出的不同。这没关系 - 如果您在下面的信息中包含了某种形式的建议部分，那可能是可以的。</p><p>从写作风格的角度来看，确保您专注于需要完成的事情，而不是深入探讨为什么要这样做或当前问题为什么糟糕 - 具体细节应该在报告的发现部分中涵盖（并在执行摘要中提及）。</p><h2 id="立即下一步"><a href="#立即下一步" class="headerlink" title="立即下一步"></a>立即下一步</h2><p>正如前一课所提到的，如果本节是执行摘要的延续，或者是其版本，那么以简明、清晰、优先级明确的项目列表呈现信息将会很有帮助，这些项目可以被采取行动。</p><p>就 OGPatientBooking 平台而言，他们的开发团队需要处理大量工作，然而，眼下最紧要的是减少其解决方案的攻击面，并防止可避免的攻击。</p><p>以下是可能在前一课执行摘要结束后看起来如何的内容：</p><blockquote><p>根据确定的实施和架构问题，该平台存在严重的潜在风险，允许攻击者访问敏感的患者数据，并使其容易受到拒绝服务条件的影响。数据泄露和未经授权访问应用程序配置面板的可能性很高，主要是因为轻松获取公开可访问页面的 URL。攻击者利用系统所需的后续步骤很少，对应用程序安全构成严重威胁。需要立即采取行动调查和修复应用程序的入口点，并确认是否发生过任何历史患者数据泄露。</p><p>建议采取以下即时步骤，显著减少解决方案的攻击面，并防止对基础设施的重大攻击：</p><ul><li>与医院合作，实施防火墙规则，将其登记门户锁定为仅可从其网络访问。</li><li>对于管理面板也应执行相同操作。</li><li>与医院合作，确保他们的管理密码已更改。</li><li>查看 Web 应用程序和 AWS 日志，以确定是否发生了违规行为。</li><li>确保在此过程中识别和纠正任何日志记录和监控方面的漏洞。</li><li>对所有 AWS 用户强制执行多因素身份验证。</li></ul></blockquote><p>这也可以作为独立的部分呈现，可以采用完全相同的格式，也可以稍微深入一些。我更喜欢的方法是保持简洁，并作为执行摘要的延伸，并链接到一个单独的战略建议部分，其中包含这些条目的更深入内容，但也包含组织要遵循的更多行动项目。</p><blockquote><p>有关战略建议的完整列表，包括上述的即时关注事项，请参阅第 x.x 节。</p></blockquote><h2 id="战略建议"><a href="#战略建议" class="headerlink" title="战略建议"></a>战略建议</h2><p>战略建议部分的目标是向客户阐明他们可以在各个方面进行重大变革以改善整体安全性。这也应包括在执行摘要中提出的任何建议，以及指出报告中特定问题的整改措施（这将极大地改善所评估内容的安全状况），这些措施可以由某些组合集体完成，也可以根据其重要性单独完成。</p><p>这也是建议客户可能受益的其他审查的好地方（这可能会为您带来更多工作-创建一份有价值且受欢迎的报告的另一个原因是未来可能的工作）。这些审查可能是原始范围的进一步延伸，可能需要调查的新领域，甚至是如果发现或高度怀疑或可能发生违规行为时的事件响应服务（尽管我期望如果是这种情况，已经与客户进行了一些直接沟通）。</p><p>这是 OGPatientBooking 的示例战略建议部分：</p><blockquote><p>OGPatientBooking 应该审查此报告的发现和摘要，并计划根据它们带来的风险和影响来修复漏洞。</p><p>显著增加解决方案攻击面的关键漏洞应首先得到修复。任何互联网用户都能够访问医院门户登记页面和相应的管理页面的能力应该被阻止：只有来自预期通信的医院网络才能访问这些页面。</p><p>与医院合作，确保默认管理员帐户密码已更改，并鼓励为每个管理员创建特定用户帐户，而不是使用通用帐户。还应制定废弃默认帐户的计划，并在设置过程中创建命名帐户。</p><p>确保所有 AWS 用户强制执行和启用双因素身份验证，同时加强用户密码复杂性要求。应启用 AWS Config 日志记录并馈送到 CloudWatch。还应将来自资产内其他组件的日志记录馈送到 CloudWatch。为所有相关组件启用备份。</p><p>审查 Web 应用程序和 AWS 环境的所有可用日志，以确认是否发生未经授权访问数据的情况。如果不存在可以显示此类证据的日志，请确保将其作为解决本报告中问题的一部分实施。</p><p>请注意，您可以联系 ogSec 寻求有关当前或过去违规行为的确定以及有关所描述的漏洞的帮助，以及帮助识别可能存在于代码级别或 AWS 内部的日志记录和监控差距。</p><p>实施身份验证以登录到门户页面（即医院内的触摸屏在使用前需要登录到应用程序）。强制执行强密码复杂性要求，可能还需要多因素身份验证。此外，为管理员用户开发多因素身份验证，并确保在应用程序内强制执行。</p><p>考虑在解决方案的管理面板中实现一个受信任网络列表，以便管理员能够自行添加防火墙配置。</p><p>审查解决方案中的租赁模型，并可能比当前通过简单的数据库列键实现的更加分离医院之间。最好的隔离可能是将医院分隔到它们自己的 AWS 帐户中，拥有自己的数据库和其他组件。</p><p>同样，全面审查解决方案的架构，看看是否可以利用其他 AWS 服务来使解决方案能够有效扩展，并消除任何单点故障。</p><p>考虑定期扫描 AWS 环境，以发现潜在的配置错误和进一步加固的机会。</p><p>如果尚未执行，请执行静态代码分析，检查可能存在的常见实现级安全问题，并确保它们不会提交到生产代码中。</p><p>考虑寻求代码辅助的网络应用程序评估解决方案，以检查进一步的实现、业务逻辑或配置问题，这些问题可能在评估时间内无法发现。</p></blockquote><p>这是构建此部分的方法论：</p><ul><li>提醒客户全面审查此报告，以便根据它们对解决方案的风险来规划和纠正发现。</li><li>针对需要立即解决的问题进行梳理，如果您在执行摘要中简洁提到了它们，或者在它们自己的子部分中稍微深入讨论。</li><li>突出应执行的任何其他重要行动项目，无论是基于执行摘要中指出的内容，还是基于特定的关键问题。</li><li>将所有发现作为一个整体进行审查。如果您能想到某一类漏洞可以通过战略性方式来预防或发现（例如持续的云安全扫描、漏洞扫描、静态代码分析、开发加固或最佳实践指南等），请提出建议。<ul><li>理想情况下，您也应该在问题建议中提到这一点，这将使这个过程更容易（稍后在课程中详细介绍）。</li></ul></li><li>如果您对应该进行进一步评估工作有建议，请陈述原因，说明为什么这对客户有益。</li></ul><p>好消息是，您可以将这里的一些建议模板化，因为许多战略建议将适用于许多评估和大多数客户，所以在撰写这些建议并将其保存以供以后使用时要聪明。</p><h2 id="课程总结-8"><a href="#课程总结-8" class="headerlink" title="课程总结"></a>课程总结</h2><p>建议部分是所有渗透测试报告的关键部分。它概括了组织在评估后需要解决的重要行动项目，同时提供了进一步保护所评估内容的几个战略考虑因素。一个好的建议部分涵盖了客户可以实施的预防选项，同时建议了发现新漏洞实例的策略。</p><h1 id="9-建议-练习"><a href="#9-建议-练习" class="headerlink" title="9-建议 - 练习"></a>9-建议 - 练习</h1><p>上一课程介绍了如何使用遵循 OGPatientBooking 执行摘要的示例构建报告的推荐部分。</p><p>让我们继续进行一些练习，延续之前的执行摘要练习：</p><p> <strong>反思练习</strong></p><ul><li>反思您可能已经阅读或撰写的任何报告（渗透测试或其他）。<ul><li>你是否写了类似“下一步”部分的内容？如果没有，现在可以写一下吗？</li><li>你的战略建议部分采取了什么形式？根据上一课的内容，你觉得有什么遗漏的地方吗？现在写下你认为遗漏的内容</li></ul></li></ul><p> <strong>一般练习</strong></p><ul><li>对于之前的两个示例测试（Goal Gobblers 网站评估和 Retail Rodeo 的 GCP 回顾），为两者都写下战略建议部分。<ul><li>随意创建细节来完善您的叙述，并以我的先前示例作为您需要写的灵感。</li></ul></li><li>为每个部分编写“下一步”部分，可以作为执行摘要的延续或独立的部分。</li><li>考虑您可以放入报告中的高层战略建议性陈述。为这些常见段落创建模板，以便您可以在未来的工作中使用它们。</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-2 写作风格</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-2%20%E5%86%99%E4%BD%9C%E9%A3%8E%E6%A0%BC/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-2%20%E5%86%99%E4%BD%9C%E9%A3%8E%E6%A0%BC/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（写作风格）介绍"><a href="#0-章节（写作风格）介绍" class="headerlink" title="0-章节（写作风格）介绍"></a>0-章节（写作风格）介绍</h1><p>我在本课程开始时提到过，这不会是一份详尽的英语教程，而且也不会是。尽管我花了十年时间写报告，但我不能说我完全掌握了英语，以至于我有信心写出这样一门课程，但我可以反思的是：</p><ul><li>从英语角度来看，人们在写报告时常犯的错误</li><li>最专业的写作风格类型，以及如何避免以随意的方式写作</li><li>使您的生活和读者的生活更轻松的一些有用提示</li></ul><p>本节的主要注意事项也是我之前说过的：您可能对报告的风格和语法有不同的内部指导方针。那没关系。只需确保写作风格在所有报告中保持一致。您可能也不同意我在那一章中写的内容，也没关系。您可以采纳或忽略我的建议，只需确保您对改进和建议持开放态度。</p><p>说了这么多，让我们开始吧。</p><h1 id="1-一致性"><a href="#1-一致性" class="headerlink" title="1-一致性"></a>1-一致性</h1><p>报告撰写和格式上的不一致可能导致报告看起来杂乱无序、不专业。在应该一致的地方出现变化会给人一种匆忙撰写、未经审查的印象。这种感知是不可取的，尤其是考虑到客户在报告通常是他们收到的唯一可交付成果时很可能已经花费了大量资金。</p><p>这些问题可以通过以下明显的步骤来消除：</p><ul><li>确保整个团队的语法、区域设置和拼写检查设置相同</li><li>就连字或拼写方面使用的术语达成一致</li><li>遵循内部报告格式和写作风格指南</li><li>在提交给 QA 或发送给客户之前，审查已完成的草稿</li><li>为搜索常见不一致性创建自动化工具会得到额外加分</li></ul><p>让我们来看一下常见的模式。</p><h2 id="本地拼写"><a href="#本地拼写" class="headerlink" title="本地拼写"></a>本地拼写</h2><p>作为一名英国人，在为美国客户进行了大量工作后，报告的内容通常会混合使用英国英语和美国英语拼写。</p><p>以下是一些常见示例：</p><table><thead><tr><th><strong>UK</strong></th><th><strong>US</strong></th></tr></thead><tbody><tr><td>Organisation</td><td>Organization</td></tr><tr><td>Centre</td><td>Center</td></tr><tr><td>Colour</td><td>Color</td></tr><tr><td>Authorisation</td><td>Authorization</td></tr><tr><td>Licence</td><td>License</td></tr><tr><td>Behaviour</td><td>Behavior</td></tr><tr><td>Customise</td><td>Customize</td></tr><tr><td>Defence</td><td>Defense</td></tr><tr><td>Analyse</td><td>Analyze</td></tr></tbody></table><p>这个具体建议的目标受众可能是和我处境类似的人：你在为美国公司工作，但来自英国，或者在测试英国公司并用更常见的美式英语撰写报告。</p><p>在报告中看到这种拼写混合会给人留下粗心的印象，因为有很简单的方法可以避免这种情况发生。确保你在用于撰写报告的工具中选择了正确的语言（例如英式英语、美式英语）。这样在你手动审查或运行拼写检查时，应该会突出需要调整的地方。</p><h2 id="拼写客户产品-服务"><a href="#拼写客户产品-服务" class="headerlink" title="拼写客户产品&#x2F;服务"></a>拼写客户产品&#x2F;服务</h2><p>当您测试客户的产品或服务选择时，如果它们有奇怪的名称，可能会导致报告中的命名变化。这可能是因为不一致的懒惰，团队中的不同人认为他们书写名称的方式是正确的，或者两者兼而有之。</p><p>如果您不确定某物的名称，请与客户确认。在客户读到产品名称错误的报告之前，您确认这一点他们会更加高兴。</p><p>有时这不是拼写问题，而是大小写问题。例如可能是 “Dropbox” 或 “DropBox”。如果不确定，再次与客户确认正确的命名方案。</p><p>在上述两种情况下，很可能在线材料会告诉您正确的拼写是什么，这样您就可以避免向客户提出可能令人尴尬的问题。</p><p>花时间审查报告最终草稿中的所有文本，检查不一致之处，并在发送给客户之前纠正任何命名不一致之处。</p><h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><p>在使用提供了很大灵活性的工具（例如 Microsoft Word）创建报告时，而不是使用更严格的格式（例如可能利用标记语言的格式），人们更有可能偏离任何可能使用的样式或格式指南。如果给定项目的多个成员也以各自的方式偏离，情况可能会变得更糟。</p><p>这里是我发现的常见格式不一致的列表：</p><ul><li>以不同方式格式化、对齐、加边框的图片</li><li>带有和不带有图文的图片</li><li>给定不同风格的表格</li><li>在不期望的部分使用的副标题</li><li>在类似的部分以不同方式格式化的标题（例如，在一个部分中仅为粗体文本，但在另一个部分中是适当的部分标题）</li><li>不同的样式</li><li>不同的列表编号</li></ul><p>我不会举例说明这些，因为这将非常乏味，但你可能可以想象，如果出现一个或多个这些不一致，一个文件可能会变得邋遢和不专业。</p><p>确保审查报告，并通过遵循使用的任何内部样式和格式指南，或通过规范报告中的不一致性，以确保应以相同方式呈现的不同区域确实保持一致。</p><h2 id="连字化"><a href="#连字化" class="headerlink" title="连字化"></a>连字化</h2><p>我们将在本章后面更深入地讨论连字符，但在这里值得一提。在团队中有多名成员参与的大型项目中，关键术语的连字符在整个报告中变化是相当常见的。</p><p>一些常见出现在报告中的例子有：</p><ul><li>跨站脚本攻击 &#x2F; 跨站脚本攻击</li><li>中间人攻击 &#x2F; 中间人攻击</li><li>开源 &#x2F; 开源</li><li>网络中心 &#x2F; 网络中心</li><li>多因素认证 &#x2F; 多因素认证</li></ul><p>以上示例中哪个是正确的可能取决于你与谁交谈，因此我经常在单个报告中看到上述内容的混合。最近一些这些术语已经出现在文字处理器和浏览器的词典中，意味着它们很容易被纠正。然而，并非总是如此，因此在将最终成果交付给客户之前，应进行一次扫描，以查找可能需要连字符（或不需要）的技术术语。</p><h2 id="标题中的大写字母"><a href="#标题中的大写字母" class="headerlink" title="标题中的大写字母"></a>标题中的大写字母</h2><p>我稍后会在课程中更深入地讨论这个问题，但是我会在这里简要提及，因为它与一致性有关。</p><p>在报告中编写标题时，确保它们遵循相同的格式是很重要的。以下是我经常看到的三种格式：</p><ul><li>“客户资料页面中的 SQL 注入”<ul><li>所有关键词都是大写的。介词（例如“在”，“在…之下”，“没有”）和冠词（例如“一个”，“一些”）或其他三个字符或更少的单词不大写。</li></ul></li><li>“客户资料页面中的 SQL 注入”<ul><li>所有单词都是大写的。</li></ul></li><li>客户资料页面中的 SQL 注入<ul><li>标题写得更像是一个句子而不是一个标题，我会避免这样做。</li></ul></li></ul><p>无论您用什么样的标题风格，请确保整个报告都采用相同的方法。同样，如果适用，应默认使用您正在遵循的样式指南建议。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>在本课程中，我们已经介绍了确保报告以一致的方式编写和呈现的重要性。在审查您的工作时，始终确保可能存在变化的区域始终被规范化。尽可能利用工具来帮助消除不一致性（例如拼写&#x2F;语法和区域设置）。</p><h1 id="10-语态-练习"><a href="#10-语态-练习" class="headerlink" title="10-语态 - 练习"></a>10-语态 - 练习</h1><p>撰写报告的视角在读者感受到专业性方面起着重要作用。因此，我认为技术报告应该以使用大部分被动语态和客观风格的方式撰写。</p><p>这可能是另一个人们与我意见不一致的领域。如果这是你习惯的方式，也许以前没有人抱怨，那就没问题。</p><p>对于那些想要改变写作方式的人，或者只是想练习的人，这里有一些练习供您参考。</p><p> <strong>反思练习</strong></p><ul><li>反思你写过或可以访问的报告。识别所使用的视角（第一人称、第三人称、客观&#x2F;被动语态，或其他）。考虑视角选择对报告的专业性和客观性产生的影响。</li><li>想想你最近写过的重要电子邮件或信件。如果用不同的视角来写，语气和感知会如何改变？重新写一遍，看看会有什么不同。</li></ul><p> <strong>一般练习</strong></p><ul><li>重新写一段你可以访问的报告中没有使用被动语态的段落，将其从原有的视角改为使用被动语态的客观风格。你是否注意到语气上的差异？</li><li>在您的领域中，首先以第一人称，然后以第三人称，最后以客观风格撰写一份关于虚构情况的简短报告摘要。比较这些版本。您认为哪个版本听起来更专业？</li></ul><p><strong>超越练习</strong></p><p>研究专业写作中的被动语态与主动语态。它们有什么区别，何时应该使用？</p><h1 id="11-工具"><a href="#11-工具" class="headerlink" title="11-工具"></a>11-工具</h1><p>确保正确设置报告中的工具将提高撰写和审阅过程的速度，这有望对报告的质量以及您用于搜索漏洞的时间产生影响。</p><p>另外，确保安全使用第三方工具也很重要。我们必须确保我们为客户创建的所有数据都得到安全处理。</p><p>让我们看一下可能在报告撰写过程中使用的经典工具的一些选项，然后讨论一些潜在危险的工具。</p><h2 id="微软-Word"><a href="#微软-Word" class="headerlink" title="微软 Word"></a>微软 Word</h2><p>对于许多供应商来说，撰写报告的主要手段是经过验证的微软 Word。这个工具提供了大量选项，使其非常适合撰写报告。我提到过，工具本身的灵活性可能对试图在所有报告中强制执行一致性的大型供应商来说可能是一个缺点，尽管如此，您可以生成干净的文档，并使用内置工具以出色的方式呈现数据。</p><p>为了确保节省时间和精力（以及审阅您工作的人），最好确保微软 Word 配置为根据您期望的格式审阅您的文本。</p><p>确保您为客户选择正确的语言。对我来说，要么是美式英语，要么是英式英语。</p><p>单击“审阅”选项卡，在功能区中单击“语言”按钮，然后从下拉菜单中选择“设置校对语言”。</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404151423128.png" alt="img"></p><p>确保您未选中“不检查拼写和语法”。取消选中“自动检测语言”也有助于防止推荐的拼写切换到不需要的语言。</p><p>在相同的下拉菜单中，可以找到更多选项，位于“语言首选项…”下方。</p><p>点击左侧的“语言”可以设置默认语言。如果您经常使用与 Windows 安装语言不同的语言进行报告，则值得这样做：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404151423838.png" alt="img"></p><p>点击左侧的“校对”会给您一些值得审查的校对选项：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404151423532.png" alt="img"></p><p> 这里有一些要点：</p><ul><li>忽略大写字母的单词将避免拼写检查打扰您关于行业特定首字母缩略词的问题</li><li>忽略带有数字的单词是首选的，因为它们在我们的报告中有其原因（例如“user1”）</li><li>出于与上述相同的原因，忽略互联网和文件地址</li><li>重复的单词通常是拼写错误，因此我们应该标记它们</li><li>在输入时检查拼写和语法是理想的，这样您可以在输入时解决文本问题</li><li>检查“经常混淆的单词”会检查通常在错误位置或错误上下文中使用的单词，例如 affect&#x2F;effect，lose&#x2F;loose，all together&#x2F;altogether 等。</li></ul><p>在“在 Word 中更正拼写和语法”下的“写作风格”应设置为“语法和修饰”，这样可以确保检查语法，以及简洁性。单击此下拉菜单旁边的“设置”。</p><p>这里有大量可供选择的选项，您应将自己内部的写作风格映射到这些设置。我只对简洁性设置进行了更改：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404151423025.png" alt="img"></p><p>我在这里介绍的所有建议可能与市场上的类似产品或开源产品相匹配。这包括您的浏览器，如果您报告给某种网络应用程序或工单系统。</p><h2 id="拼写检查"><a href="#拼写检查" class="headerlink" title="拼写检查"></a>拼写检查</h2><p>拼写检查是任何报告撰写软件中应该使用的关键工具之一。如果您正在使用浏览器，请确保您已经查看了与拼写有关的设置，以便您可以即时进行修正。</p><p>如果您正在使用类似于 Microsoft Word 的软件，请确保在阅读完文档并确认准备好交给 QA 团队或您的客户（取决于您在交付过程中的位置）之前进行拼写检查。</p><h2 id="潜在危险工具"><a href="#潜在危险工具" class="headerlink" title="潜在危险工具"></a>潜在危险工具</h2><p>在使用工具进行报告撰写时应谨慎。这主要适用于您的报告内容被发送给第三方进行处理和反馈的情况。很可能不久之后（也许这已经是一个取决于您何时完成此课程的事情），Microsoft Word 将启用联合飞行员，以便所有您的数据都在 Microsoft 的云中进行审核。对于下面的示例也必须考虑相同的情况 - 您是否希望为客户编制的报告内容被上传到第三方？</p><p>这不是我可以回答的问题，但显而易见的后果是，如果所述的第三方遭到入侵并存储了上传的数据，那么这些数据可能会泄露，而这将超出您的控制范围。</p><p>这里有一些主要示例，可能用于上传报告内容，您应该仔细考虑并可能避免：</p><ul><li>谷歌巴德，聊天 GPT，Grok，必应聊天</li><li>Grammarly（以及类似产品）</li><li>云托管解决方案，用于绘图（draw.io）</li><li>带有拼写检查功能的浏览器，可将数据上传到云端</li></ul><p>关于最后一条要点，这是谷歌增强拼写检查的功能：</p><p><img src="https://raw.githubusercontent.com/B1ueD0g/Picture/main/202404151423612.png" alt="img"></p><p>是否信任第三方供应商处理关键数据的立场是许多测试人员之前考虑过的事情。这不仅影响报告产品，还影响那些已经取消对本地安装的支持，只允许使用他们的云服务的有用评估服务。</p><p>我看到许多大型组织处理客户数据的方式，通常并不像你期望的那样强大和安全。正因为如此，渗透测试人员对安全声明持怀疑态度，也是他们更倾向于限制需要将数据上传到第三方服务器的工具使用的原因 - 一旦数据到达目的地，我们就不知道数据会发生什么。</p><p>仔细考虑何时以及用于何种用途使用这些工具，因为您可能会违反与客户的保密协议，或者仅仅是将客户的数据置于风险之中。如果有疑问，坚持使用仅限本地的工具，不连接互联网服务。</p><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这里，我们讨论了 Microsoft Word 中可用于优化报告撰写和审阅过程的选项。我们还涵盖了一些可能会危及客户数据安全的“危险”工具。</p><p>始终确保您使用的工具针对您的报告编写过程进行了最佳配置，并且设置与您尝试对齐的写作风格保持一致。谨慎使用第三方工具 - 一旦数据到达他们的系统，您就不知道会发生什么。您可能也不被允许这样做。</p><p>考虑使用仅具有本地工具且不使用基于云的服务作为最安全的选择。</p><h1 id="12-工具-练习"><a href="#12-工具-练习" class="headerlink" title="12-工具 - 练习"></a>12-工具 - 练习</h1><p>确保您的工具被正确和安全地配置是至关重要的。这不仅会确保您遵守正确的报告写作风格，还会确保您保护客户的数据安全。</p><p>这里有一些相关的练习供您进行。</p><p> <strong>反思练习</strong></p><ul><li>反思您目前用于报告写作的工具。考虑您是否已根据报告语言和风格正确配置了拼写和语法。<ul><li>工具中是否有任何上传数据到第三方的情况？这在您的内部指南中被允许吗？</li></ul></li><li>想象一种情况，您不得不使用第三方工具进行报告撰写或数据处理。思考涉及的潜在风险以及您是如何减轻它们的，或者将来如何减轻它们的。</li></ul><p> <strong>一般练习</strong></p><ul><li>如果您还没有调整报告撰写设置，请根据上一课程中提供的指南配置 Microsoft Word 或首选的报告撰写工具。调整校对语言、语法设置以符合您的内部写作风格。</li><li>在报告撰写软件中尝试关闭和打开不同的校对选项。注意每个设置如何影响文档的审阅过程，并确定哪些设置最适合您的写作风格和需求。</li></ul><p><strong>超越练习</strong></p><ul><li>研究替代的报告撰写工具，并将它们的功能与您当前的报告撰写软件或平台进行比较，特别是在隐私和数据安全方面。考虑调查开源选项或具有增强安全功能的工具。</li><li>探索您的网络浏览器拼写检查的设置，特别是涉及基于云处理的设置。根据需要调整这些设置以提高隐私保护。</li></ul><h1 id="13-事实-vs-意见"><a href="#13-事实-vs-意见" class="headerlink" title="13-事实 vs 意见"></a>13-事实 vs 意见</h1><p>写专业报告的一个重要元素是确保我们在写作中坚持事实，不包括我们对某事有多糟糕（也许有多好）的看法。许多测试人员会知道，当客户收到一份带有许多意外发现的报告时，他们可能会变得很防御，当我们提出不受欢迎的意见时，他们甚至可能会变得更加不悦。</p><p>现在，我要说的是，在报告中使用一些意见是有道理的，特别是在发现重大漏洞的情况下。在写意见时，如果客户对您提出质疑，您必须能够为自己辩护。您必须有足够的证据，可以向客户指出，以显示任何带有个人看法的措辞是完全合理的。关键在于平衡。</p><p>保持事情清晰简单至关重要。我们需要以直截了当的方式谈论发现，但不要让客户心烦意乱。我们的工作是指出需要修复的问题，而不要让它听起来太苛刻。通过选择合适的措辞，我们可以突出已发现的问题，同时与客户保持良好关系。</p><h2 id="常见例子和中性语气"><a href="#常见例子和中性语气" class="headerlink" title="常见例子和中性语气"></a>常见例子和中性语气</h2><p>避免显得过于主观的一种方法是以中性语气写作。通过这种方式，您以一种无偏见和客观的方式呈现信息 - 从您试图表达的要点中去除情感。使用这种语气意味着您更不太可能从客户那里得到防御性的回应。</p><p>这里列出了一些您可能在报告中写下的常见主观短语及其中性对应短语。请注意，如果您有足够的证据，这些例子通常是明智的放在报告中的：</p><ul><li>不良做法” &#x3D;&#x3D; “缺失做法</li><li>薄弱安全” &#x3D;&#x3D; “安全不足</li><li>“不可靠的配置” &#x3D;&#x3D; “可能存在可靠性问题的配置”</li></ul><p>尽管在能够证明其合理性时使用这些带有主观看法的例子可能没问题，但如果你知道你的客户可能会做出不良反应（或者认为他们会），那么如果你以更中立的语气写作，很可能会避免令人痛苦的对话。评估的一种方法是想象自己是客户，而你的做法被称为“糟糕” - 这会让你感觉如何？如果你发现某些措辞从客户的角度看可能显得严厉，你可能需要考虑重新表达以采用更中立的语气。</p><p>另一方面，值得注意的是，我们被请来作为专家进行评估，应该能够利用以往的经验进行比较。这样可以让我们知道与其他评估相比，事物是“感觉”还是“看起来”更糟糕或更好。如果我们真的对某事有这种感觉，我们应该向客户提出：我们不希望因为不这样做而给他们一种虚假的安全感。我们将在本课程的后面看一些如何利用这一点的例子。</p><h2 id="极端偏见的语气"><a href="#极端偏见的语气" class="headerlink" title="极端偏见的语气"></a>极端偏见的语气</h2><p>在报告中我看到一些短语，它们实际上不应该出现在那里，会被视为贬低或过于夸张。使用这些短语会大大降低专业水平，并更有可能导致与客户发生冲突。</p><p>这里有一些例子：</p><ul><li>应用程序的编码很随意。</li><li>考虑到访问其他患者数据的便捷性，平台中松散的安全控制可能被视为疏忽。</li><li>平台间共享的数据以一种不负责任的方式进行。</li><li>安全控制实际上毫无用处。</li></ul><p>上述措辞远非专业，开始变得指责性，或者以一种试图让客户尴尬的方式书写。如果你读到自己写的内容，产生这些想法，那么很可能在试图写出有影响力的报告时已经越过了界限。记住，我们在这里是为了帮助，而不是指责并告诉他们他们做得很糟糕。再次强调，当你审阅自己的工作时，设身处地为客户考虑 - 如果你的工作被称为“马虎”，那会让你感觉如何？可能不太好！</p><p>在报告内容显示出重大安全问题的情况下，通常无需使用上述的措辞来明确问题 - 问题本身，已经证实的影响以及后果本身应该足以说明问题。这就是坚持事实最有效的地方，特别是当我们写的报告更有可能引起客户情绪反应时。</p><h2 id="执行摘要示例"><a href="#执行摘要示例" class="headerlink" title="执行摘要示例"></a>执行摘要示例</h2><p>让我们看一下来自执行摘要的几个不同版本的摘录，这些版本经历了我们讨论过的各种语气：稍微带有观点（但可以接受），中立和极端带有观点。</p><p>让我们从稍微带有观点的语气开始：</p><blockquote><p>尽管该应用展示了一些安全的网络应用安全实践领域，以及在外部面向网络应用部署方面的几个安全配置，但几个具体的发现和架构上的担忧意味着患者数据面临着重大的危险。</p><p>由于登记流程的方式，到达医院的患者需要通过触摸屏验证身份，并按照多步骤验证自己的出生日期。尝试使用触摸屏猜测出生日期是可能的，但对攻击者来说不可行。然而，在测试过程中发现，所有医院的登记页面都可以通过互联网访问，并且很容易被发现。这意味着可以创建自动化工具，请求所有出生日期（过去100年）以返回当天有预约的患者名单。一旦攻击者处于这种位置，他们可以利用从患者预约返回的详细信息来访问检查结果、医生的消息，或查看或更新他们的个人信息（电子邮件地址、电话号码和医生诊所）。发现医院的门户页面只需要猜测一个URL，这对攻击者来说很容易。随后对登记流程的利用也将非常容易，因为有可用的工具可以帮助进行此类攻击。</p></blockquote><p>在这个例子中，我在坚持事实和添加一些形容词之间保持微妙平衡，以赋予情况严重性的一定程度的庄严感。有些人可能会认为我在某些措辞上有些过火，但我知道基于调查结果本身（以及这些问题可能带来的后果），客户需要充分了解情况的严重性 - 如果利用这个漏洞，将会发生糟糕的事情。使用诸如“微不足道”或“容易”之类的词语并不会直接指责客户，也不会让他们听起来好像做了坏事，或者他们所创建的东西很糟糕，它只是反映了情况的现实性以及攻击者可能利用所发现的内容的可能性或可能性有多大。</p><p>让我们看看当我们去掉带有个人意见的措辞以使语气更加中立时，文本会发生什么变化：</p><blockquote><p>虽然该应用程序展示了安全的网络应用程序安全实践领域和在外部面向网络应用程序部署方面的一些安全配置，但几个具体的发现和架构上的担忧意味着患者数据有遭受威胁的风险。</p><p>由于登记流程的方式，到达医院的患者需要通过触摸屏验证身份，并按照多步骤验证自己的出生日期。尝试通过触摸屏猜测出生日期是可能的，但对攻击者来说不可行。然而，在测试中发现，所有医院的登记页面都可以通过互联网访问并被发现。这意味着可以创建自动化工具，请求所有出生日期（过去100年）以返回当天有预约的患者名单。一旦攻击者处于这种位置，他们可以使用从患者预约返回的详细信息来访问检查结果、医生的消息，或查看或更新他们的个人信息（电子邮件地址、电话号码和医生诊所）。发现医院的门户页面需要攻击者猜测一个常见单词的URL。如果找到，攻击者可以使用现成的工具执行对登记流程的后续利用。</p></blockquote><p>在这里，一些更主观的形容词已经被删除或替换为添加了更多中立性的文本。例如，诸如“容易”，“琐碎”和“简单”之类的词已被删除。焦点几乎完全放在事实和可能实现的内容上。对我来说，这份执行摘要部分所需的庄重感现在还不够，而更像是一份关于攻击者可能做什么而没有任何关于他们能够轻松做到的迹象的陈述。</p><p>让我们看一个最终的例子，其中去掉了专业性，添加了听起来严厉的观点。</p><blockquote><p>虽然该应用程序展示了一些安全的 Web 应用程序安全实践领域，以及在外部面向 Web 应用程序部署方面的一些安全配置，但几个可怕的发现和架构上的担忧意味着患者数据面临极高的妥协风险。</p><p>由于办理入院手续的方式，到达医院的患者需要通过触摸屏验证身份，并按照多步骤使用出生日期验证自己。尝试通过触摸屏猜测出生日期是可能的，但对攻击者来说并不容易。然而，在测试过程中发现，所有医院的办理入院页面都可以通过互联网访问，并且可以被任何初级黑客发现。由于解决方案编码不慎，攻击者可以编写简单脚本请求所有出生日期（过去100年）以返回当天有预约的患者名单。一旦攻击者处于这种位置，他们可以使用从患者预约中返回的详细信息来访问检查结果、医生的消息，或查看或更新他们的个人信息（电子邮件地址、电话号码和医生诊所）。发现医院的门户页面只需要猜测一个URL，这对攻击者来说是很容易的。 登记流程的后续利用也将非常容易，因为有可用的工具可以帮助进行此类攻击。</p></blockquote><p>如果您将此示例与前两个进行比较，您应该会看到专业性的下降，希望您能理解客户可能会如何个人化地对待这些评论。像“可怕”或“粗心”这样的词语是在指责的同时也带有主观看法，很可能会引发客户的负面反应。如果您写作方式类似于这种方式，请接受这些建议。我知道有时候会忍不住以这种方式写作，可能是因为客户的行为使评估变得具有挑战性，或者评估发现了一些真正可怕的错误，但我们必须保持专业。就像我们不是被雇来与客户交朋友一样，我们也不是被付钱来成为他们的敌人。确保在报告时坚持事实，并仅在必须传达关键安全发现的消息并有证据支持时才使用带有主观看法的措辞。</p><h2 id="好的意见"><a href="#好的意见" class="headerlink" title="好的意见"></a>好的意见</h2><p>报告也可以提供积极的反馈。然而，即使表达良好意见时也必须小心。虽然我很少见到，但在报告中向客户提供可能不合理的赞美是恭维的，但不是我们的典型目标。</p><p>就像我们不希望通过软化报告中揭示许多发现的评估的措辞来给客户一种虚假的安全感一样，我们也不应该给予那些可能不值得的客户过分的赞美。</p><p>再次强调，我们需要事实说话。如果在测试网页应用程序时没有发现任何值得注意的安全问题，我们应该如实说明。例如，如果我们对它们没有（或有限的）了解，我们应该避免使用涉及“强大的开发实践”和“安全编码”的措辞。我可以从过去进行的许多代码审查中说出，应用程序的网页前端可能看起来安全，但在幕后往往存在重大的不良实践。</p><p>在撰写报告时，如果想要赞扬客户的应用程序安全性或员工，确保你对所写内容有信心，并且感觉有证据支持。</p><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>在撰写报告时，我们必须确保始终保持专业性。避免使用极具主观色彩的文字，可能会导致客户感到不悦、防御或愤怒。虽然我们应该坚持事实并尽可能保持中立，但我们应确保在向客户提出重要观点时不要写得过于轻率。最后，确保你有足够的证据来支持你所提出的任何主张，并且有足够的信心来捍卫自己，如果客户对其提出质疑。</p><h1 id="14-事实-vs-意见-练习"><a href="#14-事实-vs-意见-练习" class="headerlink" title="14-事实 vs 意见 - 练习"></a>14-事实 vs 意见 - 练习</h1><p>在上一课中，我们讨论了在报告中保持事实性的重要性，使用带有意见的措辞可能会降低报告的专业性。我们还谈到，过分主观的意见可能会增加报告被客户负面接受的机会，潜在地引发冲突。</p><p>这里是一些基于上一课的练习。</p><p> <strong>反思性练习</strong></p><p>反思您最近撰写或可以访问的报告。识别可能被视为过于主观或不专业的短语。您能重新表达它们以保持专业性，同时仍向客户传达正确的信息和影响吗？</p><p> <strong>一般练习</strong></p><ul><li>撰写一个虚构（或最近的）安全评估的简短执行摘要，首先使用专业和中立的语气，然后以带有意见的语气重写，最后以过于夸张或不专业的方式。比较这些以了解来自客户角度的语气影响。</li><li>创建一个短语或词汇清单，避免在您的报告中写入，特别是那些可能被视为贬低、过于夸张或指责性的短语。</li></ul><p><strong>超越练习</strong></p><ul><li>考虑审阅公开可获得的报告，看看它们在传递关键发现时是否保持专业性。您能做出任何改进或建议吗？</li><li>使用您之前制作的清单，您能实施任何能够自动检测其使用情况的工具吗？</li></ul><h1 id="15-用第二语言写作"><a href="#15-用第二语言写作" class="headerlink" title="15-用第二语言写作"></a>15-用第二语言写作</h1><p>由于我从未不得不用第二语言写作，也无法真正用第二语言书写或交谈，因此我对这个话题的观点将会相当片面。我能分享的是，我曾与一群非母语人士合作过，看到他们的英语随着时间大幅提高。如果你想要用非母语书写报告（或者你已经在做了），这里有一些可能对你有帮助的建议。</p><p>注意：如果你不用第二语言写作，你可能会想跳过这节课。然而，如果你审阅他人的作品，这节课包含了重要信息，将帮助你为那些用第二语言写作的人提供建设性反馈。</p><h2 id="质量保证反馈"><a href="#质量保证反馈" class="headerlink" title="质量保证反馈"></a>质量保证反馈</h2><p>对于之前没有经历过我的质量保证流程的人来说，这个过程的开始通常会对他们的系统造成相当大的冲击，但经过几周后，他们很快学会了按照我期望的标准写作。因此，我看到许多顾问从较弱的报告写作转变为非常快速地撰写详尽和信息丰富的报告。最终的质量可与我合作过的一些最优秀的顾问相媲美，这也适用于用第二语言撰写的顾问。</p><p>由于我所做的工作是为一个需要英文报告的客户，我的外国同事被要求用英文写作。他们中的许多人在顾问职业中还很新，虽然他们的口语英语很好，但报告所需的正式风格还需要一些改进。</p><p>我处理任何质量保证的方式都很直接，不管作者是用第二语言写的。我会突出几乎所有需要修正的地方，包括那些我可以在审查过程中轻松更正的地方。在突出显示的地方旁，我会提供清晰但详尽的指导，解释为什么需要做出改变。这通常包括示例，特别是在同样的错误反复出现或者对报告要求存在误解的地方。随着时间的推移，我的同行们逐渐开始按照预期格式撰写问题，从他们的错误中学习。这导致了更好地撰写的发现和报告，甚至在质量保证过程之前，从而使每个人的生活更轻松。我怀疑这种改进源于他们想要提高和避免重复相同的质量保证评论和反馈的愿望的结合。</p><p>所以，我的建议是：每当您将工作发送给质量保证部门时，请附上一张礼貌的便条，请求尽可能多的建设性反馈。确保反馈包括对报告所做任何更改的解释以及您应该如何写作的示例。只有在意识到错误时，您才能纠正错误，并且随着您学会识别和避免这些错误，您的写作将会得到改善。记住，熟能生巧。</p><p>如果你收到很多负面反馈，我会说，尽量不要为此感到沮丧或伤心。你应该为自己能够尝试用第二语言写报告感到自豪。记住这一点，如果有人在没有处于类似位置时给你负面反馈，温和地提醒他们也不是坏主意。</p><h2 id="自我反思"><a href="#自我反思" class="headerlink" title="自我反思"></a>自我反思</h2><p>如果可能的话，另一个尝试的选择是在审阅前后检查您的工作，然后评估审阅者所做的任何更改。这可能与先前的建议结合使用效果更好，但仍然可以独立发挥价值。注意任何风格、语言、拼写或语法上的变化。</p><p>如果您想要&#x2F;需要的反馈水平不可用，您可以随时查看以前编写的报告并分析它们，以检查潜在的缺点或您可以改进的领域。</p><p>这个过程应该是一个持续的反馈循环 - 随着你学到更多或得到更多反馈，你应该始终努力将其融入到你的下一个报告中。就像任何事情一样，除非你尝试，否则你不会学到或改进，所以确保你不断审查自己的工作，并确保它是你最好能力的书写。</p><p>最后，如果您不确定或不理解审阅人员为什么做出了某些更改，请联系他们并要求解释。在这种情况下，只有当您了解为什么有人可能改变了您的工作时，您才能知道如何改进。</p><h2 id="简单句子"><a href="#简单句子" class="headerlink" title="简单句子"></a>简单句子</h2><p>对于那些刚开始并且在努力表达需要传达的观点的人，考虑保持简洁明了的句子。这种方法将在后续关于问题写作的课程中发挥作用，我们将试图回答简单的问题来构建发现描述的核心文本。</p><p>这里有一些简单句子的英文示例：</p><ul><li>Web 应用程序存在 SQL 注入漏洞。</li><li>攻击者可以利用这个漏洞来获取数据库中用户数据的访问权限。</li><li>数据包含个人信息和密码哈希值。</li><li>攻击者可能会尝试破解密码哈希以获取明文凭据。</li><li>这些凭据可以用来登录用户的帐户并下载敏感文件。</li></ul><p>在英语中，简单句的定义是包含一个独立从句并且结构简单直接的句子。换句话说，这样的句子应该能够独立理解，不依赖于前后句子。</p><p>尽管客户阅读这些可能会感到乏味，但这样做可以让您更容易从同行那里获得反馈，了解如何将这些句子转换为复杂句子。这样，您可以尝试根据建议基于结构调整任何未来的工作。</p><p>这里有一个以上句子被操纵成稍微复杂的例子：</p><blockquote><p>Web 应用程序容易受到 SQL 注入攻击。利用这个漏洞将允许攻击者 compromise 存储在数据库中的敏感用户数据。因为这包括用户的密码哈希，攻击者可以下载并尝试恢复明文凭据。这将允许他们对应用程序进行身份验证并下载属于用户帐户的敏感文件。</p></blockquote><p>这种方法可能比尝试编写更复杂的内容更可取，并且可能以您自己的母语表达的方式来表达。我见过这种情况发生几次，尝试纠正这些尝试或提供替代方案更具挑战性（尽管不是不可能的）。</p><p>因此，在可能的情况下，如果您认为有必要，保持文本简单，并在同行的良好反馈后寻求改进。</p><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们已经介绍了一些提高第二语言写作能力并随着时间的推移不断改进的方法。正如我在这节课开始时提到的，我无法想象这有多难，我对那些能够用非母语写正式文件的人表示敬意。通过练习和自我审查的结合，你应该能够慢慢适应写作方式，与同行保持一致。如果你刚开始学习，请保持简单。随着反馈的不断调整，逐渐适应，并将每篇报告中学到的东西应用到下一份工作中。</p><h1 id="16-用第二语言写作-练习"><a href="#16-用第二语言写作-练习" class="headerlink" title="16-用第二语言写作 - 练习"></a>16-用第二语言写作 - 练习</h1><p>在上一课中，我给那些用第二语言写作的人提供了（希望是）有用的建议。如果这不适用于您，可以跳过这组练习。</p><p> <strong>反思练习</strong></p><p>回顾您最近撰写并经过审查的任何报告或其他文本。如果可以的话，在审查之前和之后进行回顾。</p><ul><li>您注意到您的写作中有哪些模式变化？</li><li>你如何应用这些变化来改进你的下一份工作？</li></ul><p> <strong>一般练习</strong></p><ul><li>写一段关于熟悉话题的简短技术段落，使用简单明了的句子。然后，逐渐增加语言的复杂性，同时确保清晰和准确性保持不变。<ul><li>请同事审阅你的工作，看看他们是否有任何建议可以改进你的写作。</li></ul></li><li>创建并维护一个您收到的反馈列表，并在您撰写下一份报告之前、期间和之后练习运行它。存档您知道自己一直在做的反馈或领域，并专注于您的较弱领域。</li></ul><p><strong>超越练习</strong></p><p>搜索以您撰写报告的语言撰写的博客文章（您感兴趣的）。您能从他们使用的语言风格中得到什么启发，并在未来的报告中使用吗？</p><h1 id="17-花言巧语与口头禅"><a href="#17-花言巧语与口头禅" class="headerlink" title="17-花言巧语与口头禅"></a>17-花言巧语与口头禅</h1><p>在这门课程中，我曾经说过，讽刺的是我的英语并不是很好，从来都不是。正因为这种平庸的能力，我经常遇到在报告中看起来奇怪或不合适的词语。当与写下这些词语的同事商讨时，他们经常反驳说这些词足够常见且很酷。”酷”</p><p>不幸的是，当我们向客户呈现一份报告时，如果他们需要查找一个从未见过的奇怪表达或词语，我们就得不到任何积分。</p><p>多年来，我见过一些写起来很好的词语，但很有可能客户不理解，因此我们应该避免使用它们。</p><p>最近我观察到的一些词汇列表（我会留给你自己查找定义）：</p><ul><li>Perlance &#x2F; Parlance</li><li>Outwith</li><li>工作方式</li><li>失言</li><li>大规模</li><li>自由放任</li><li>不合逻辑的推论</li><li>无所不在</li><li>表面的</li></ul><p>写作时，请确保考虑读者。他们可能是用第二语言阅读（或者他们的英语能力像我一样），所以请节省他们费力去理解你想表达的意思或查找不熟悉的单词的痛苦。用一种对任何语言的普通读者来说简单易懂的方式写作。</p><p>以上唯一的注意事项是确保提及对报告重要的关键技术术语。因此，如果需要讨论跨站脚本或SQL注入，您应该这样做。</p><h2 id="口语用语说明"><a href="#口语用语说明" class="headerlink" title="口语用语说明"></a>口语用语说明</h2><p>这里我应该提到的另一个领域是口语用语。如果你不知道口语用语是指在口语中非正式使用的词语或短语，通常不用于正式写作。</p><p>在撰写这门课程时，我希望它尽可能易于理解，因此我特意寻找了文本中的口语用语。看到我的写作风格中有这么多口语用语，我感到相当震惶，不得不重新表达许多段落，以确保更广泛受众的可读性。作为一个英语使用者，我认为我很容易忽视我们日常语言中多少是建立在口语用语基础上的。不过，我确实偶尔留下了一些口语用语。</p><p>让我给你一些例子，这些例子最终可能会出现在报告中，以及你可能如何重新表述它们</p><ul><li>红旗</li><li>原文: “缺乏双因素身份验证可能是潜在安全漏洞的一个红旗。”</li><li>缺乏双因素认证表示潜在安全漏洞的重大风险。</li><li>易于获得的目标（我肯定在这门课程的某个地方使用过这个词汇）<ul><li>原文:“对该系统缺乏认证是网络攻击者易于攻击的目标。”</li><li>重新表述：”对该系统缺乏身份验证是网络攻击者容易利用的漏洞。”</li></ul></li><li>志同道合</li><li>原文：”非常重要的是所有团队成员在开发实践和安全编码标准方面保持一致。”</li><li>重新表述：”所有团队成员对开发实践和安全编码标准有一致的理解至关重要。”</li><li>打开大门</li><li>原文：”弱密码可能为各种网络攻击打开大门。”</li><li>重新表述：”弱密码可能增加各种网络攻击的风险。”</li><li>后门（可能被视为行业技术术语）<ul><li>原文：”在软件中发现了一个后门，可以用于未经授权的访问。”</li><li>软件中发现了一个意外的访问点，可能允许未经授权的进入。</li></ul></li><li>在野外</li><li>原文: “这种类型的恶意软件已经在野外观察到，影响了许多系统。”</li><li>这种恶意软件已经在实际运行环境中观察到，影响了许多系统。</li><li>棘手的问题</li><li>起初：”调查服务器漏洞揭开了一个棘手的问题，揭示了多个安全问题。”</li><li>描述: “调查服务器漏洞揭示了一系列复杂的其他安全问题。”</li><li>冰山一角</li><li>原文: “确定的安全漏洞只是冰山一角。”</li><li>已重新表述：”所识别的安全漏洞仅代表潜在基础问题的一小部分。”</li><li>跳过障碍</li><li>原文：”攻击者必须跨越重重障碍才能突破更新的外围安全防线。”</li><li>已重新表述：”攻击者必须克服多个具有挑战性的障碍才能突破更新的外围安全防线。”</li><li>确定下来</li><li>原文: “需要明确响应计划的具体细节，以更好地应对潜在的网络威胁。”</li><li>重新表述: “应该最终确定响应计划的具体细节，以更好地应对潜在的网络威胁。”</li></ul><p>尽管我认为学习口语是任何非母语者为了交流需要随着时间掌握的技能，但当许多口头禅被写入报告时，可能会使一些读者难以理解。</p><p>因此，尽可能地检查您的工作，看看是否使用了任何口头语，并用更正式的表达替换它们。这不仅可以使文本更容易被具有不同背景的更多读者理解，还会产生更专业的语调。</p><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们讨论了一些因素，这些因素可能会影响报告的清晰度，当使用不常见的词语或口头语时。重要的是要认识到，行业中的个体来自不同的背景，并且对语言的熟练程度也不同。因此，报告应该旨在通过使用广为人知的术语和最小化口头表达来使广大受众能够理解，确保报告简单明了。</p><h1 id="18-花言巧语与口语-练习"><a href="#18-花言巧语与口语-练习" class="headerlink" title="18-花言巧语与口语 - 练习"></a>18-花言巧语与口语 - 练习</h1><p>在之前的课程中，我们考虑了我们的写作能力可能比其他读者的能力更高，无论是通过对所给语言的一般熟练掌握，还是读者的母语可能与报告中使用的语言不同。</p><p>这里有一些涵盖这个主题的练习，希望能让你考虑到这一点，并在未来完善你的写作。</p><p> <strong>反思练习</strong></p><ul><li>回顾一篇你最近写过或可以访问到的报告。你能发现任何对一般读者可能不清楚的高级或不常见的词汇吗？你如何用更简单的语言重写这些部分？</li><li>在同一份报告中审查口语用法。你能找到多少个？你认为有些会让普通读者困惑吗，或者会让非母语读者感到困惑吗？</li></ul><p> <strong>一般练习</strong></p><ul><li>写一段关于你选择的主题的简短段落，并故意使用高级词汇或口语。然后，修改它，使其更容易理解给那些可能不认识高级词汇或非英语为母语的人。</li><li>创建一个可能被视为高级词汇或常用口语表达的单词列表。在每个单词旁边，写一个更简单或更普遍理解的替代词。</li></ul><p><strong>超越练习</strong></p><ul><li>研究并整理您在报告中看到的高级词汇和口语，以及它们的普通语言对应词。与同事分享这些内容，或在写作中用作参考。<ul><li>向同事征求他们在报告中看到的高级词汇和口语的意见，并将其纳入您的列表中。</li></ul></li></ul><h1 id="19-章节总结"><a href="#19-章节总结" class="headerlink" title="19-章节总结"></a>19-章节总结</h1><p>在本章中，我们涵盖了一系列主题，旨在改善您的写作风格，使其更适合渗透测试报告，使报告更易理解&#x2F;消化，确保所写内容能够得到良好接受。</p><p>另外，我们还涉及了一些其他领域和考虑因素，围绕着设置工具来确保常见错误或潜在改进能够及时解决，如何限制高级语言或口头语，并为那些使用第二语言写作的人提供建议。</p><p>以下是一些关键要点：</p><ul><li>确保您使用的写作和格式样式在整个报告中保持一致<ul><li>包括拼写、连字符和大写</li></ul></li><li>要注意常见的语法错误，并确保在报告提交给客户或进行质量保证之前进行更正</li><li>考虑保持写作简单，如果你觉得更容易出错，避免使用更高级的语法</li><li>考虑以更简洁的方式写作，使你试图表达的观点尽可能清晰和直接<ul><li>删除类似的句子或将它们合并</li><li>删除多余的词语和形容词</li></ul></li><li>在撰写报告时考虑使用过去时态 - 你所发现的事情发生在过去</li><li>检查你在撰写报告时使用的“语气”，考虑使用被动语态的客观风格，以显得更专业和中立</li><li>确保所有用于撰写报告的工具都设置正确，以帮助您在撰写过程中进行审查，同时也防止客户数据泄露给第三方<ul><li>使用可能摄入敏感客户数据的工具时要小心</li></ul></li><li>撰写报告时尽量保持客观，避免表达极端意见 - 我们不希望惹恼客户<ul><li>当意见是合理和公正明确时，它们可以被采纳。</li></ul></li><li>如果您用第二语言写作，请在努力提高语法水平的同时考虑使用简单句子。<ul><li>与您的团队合作，获取反馈。</li></ul></li><li>避免使用一些读者可能不熟悉的不常见词汇和口语。</li></ul><p>如果你对写报告还很生疏，并且在提升风格方面与同行水平有困难，不要担心。我记得我最初几年写报告时非常痛苦，但在后来看到这些报告时，我发现随着时间的推移我取得了显著的进步（即使看到最初的报告有多糟糕也是令人不快的）。记住，写报告是一种技能，我们只有通过实践才能提高技能。所以，请确保你已经向团队请求了所需的支持，并记住正在提出的建议和你学到的新东西。事情会变得更好的，我保证。</p><h1 id="2-一致性-练习"><a href="#2-一致性-练习" class="headerlink" title="2-一致性 - 练习"></a>2-一致性 - 练习</h1><p>在上一课中，我们讨论了在报告撰写和呈现中保持一致性的重要性。</p><p>这里有一些相关的练习：</p><p> <strong>反思练习</strong></p><ul><li>回顾你写过或可以访问的报告。识别任何不一致的语言使用实例（例如，英式与美式英语）。你认为这些使文件显得不专业吗？如适用，未来应该采取什么措施避免这种情况发生？</li><li>反思您过去在报告撰写&#x2F;阅读方面的经验。考虑在术语、拼写或大小写不一致时可能出现的情况。您或您的团队是如何解决这些问题的？</li></ul><p> <strong>一般练习</strong></p><ul><li>查看以下段落并发现错误：<ul><li>对 Luke Corp 的 Web 应用程序进行评估发现了几个漏洞，特别是跨站脚本和 SQL 注入。值得注意的是，加密协议的使用被发现是不足够的。此外，针对中间人攻击的防御机制未达到行业标准。</li><li>在对卢克公司进行安全审查期间，发现了他们在网络中心化方法和多因素身份验证系统方面存在的问题。</li><li>卢克公司的系统安全分析显示了他们在开源软件管理方面存在的重大风险。</li></ul></li><li>根据前一课程中概述的常见不一致性创建一个清单（例如拼写、格式、连字符）。在最终化需要提交给质量保证流程或交付给客户的报告时使用并构建此清单。</li></ul><p><strong>超越练习</strong></p><ul><li>调查您使用的任何工具或软件是否有助于保持报告撰写的一致性。在样本报告上测试工具，并评估其有效性。<ul><li>警告：小心使用可能将报告数据上传到第三方的工具</li></ul></li><li>是否有任何工具可以编写，可以帮助捕捉报告撰写过程中的常见不一致性？</li></ul><h1 id="3-语法"><a href="#3-语法" class="headerlink" title="3-语法"></a>3-语法</h1><p>在这节课中，我将讨论我在过去审阅其他顾问工作时看到的主要错误。一些错误可能会被一个体面的文字处理工具发现，因此确保这些工具配置正确以尽早发现这些问题是很重要的。然而，如果我们能在第一次写作时就写对了，那么当我们审阅我们的文本时就会少些工作。</p><h2 id="大写"><a href="#大写" class="headerlink" title="大写"></a>大写</h2><p>在审阅草稿时，发现大写字母的使用错误是比较常见的。通常，问题不在于不理解如何使用大写字母，而只是忘记按 Shift 键。</p><p>这里是我看到的主要例子：</p><ul><li>专有名词（特定的人、地点和事物），例如：<ul><li>卢克（一个名字）</li><li>伦敦（一个城市）</li><li>大本钟（一个特定地标）</li></ul></li><li>一个句子的第一个词，例如：<ul><li>卢克喜欢参观伦敦的大本钟。</li></ul></li><li>一周和一个月的日子，例如：<ul><li>卢克是在星期一的 6 月 21 日出生的。</li></ul></li><li>节日和特别活动，例如：<ul><li>圣诞节</li><li>独立日</li></ul></li><li>语言和国籍，例如：<ul><li>英语是英国使用的主要语言。</li></ul></li><li>首字母缩写，例如：</li><li>URL</li><li>HTTP</li><li>AI</li><li>公司名称或其产品名称（如果它们是大写的），例如：<ul><li>Google </li><li>YouTube</li><li>谷歌浏览器</li></ul></li></ul><p>当提到“互联网”和“网络”（指互联网）时，也常见将这些词大写。</p><p>从上面的例子中可以看出，如果在报告中写错这些内容很可能是疏忽。首字母缩略词和产品&#x2F;服务名称是我在报告中经常看到未大写的内容。</p><h2 id="撇号"><a href="#撇号" class="headerlink" title="撇号"></a>撇号</h2><p>撇号（’）在英语中有多种用法：</p><ul><li><p>拥有某物，例如：</p><ul><li>卢克的房子（卢克的房子）</li><li>谷歌的网络浏览器（谷歌的浏览器）</li></ul></li><li><p>The possession of plurals and names ending in ‘s’, for example:</p><ul><li>病人病房（属于病人的病房）</li><li>詹姆斯的马在田野里（取决于风格，詹姆斯的马在田野里）</li><li>查尔斯的狗在湖中游泳（取决于风格，查尔斯的狗在湖中游泳）</li></ul></li></ul><p>偶尔我看到顾问们在使用撇号时会遇到困难，通常是在与产品名称结合使用时，可能会被拼写或语法检查忽略，或者在撇号放置在复数或以”s”结尾的事物名称上时（我经常被这个问题困扰）。</p><p>在报告中还有一些我建议避免使用的非正式用法：缩略词和日期的缩写：</p><ul><li>缩略词，例如：<ul><li>你需要审查这些发现。</li><li>这将需要快速修复。</li><li>不要忘记实施这个关键控制。</li><li>由于产品当前的实现方式，这是无法完成的（can’t &#x3D;&gt; cannot）</li></ul></li><li>日期缩写，例如：<ul><li>这个库是在 90 年代末推出的（’90s &#x3D;&gt; 九十年代）</li></ul></li></ul><p>尽管在报告中不太可能需要像上面描述的方式谈论日期，但使用缩略词是。在专业性方面，我坚信使用缩略词会使写作风格更加随意，我总是确保删除缩略词并用它们的完整形式替换。这种写作风格更加专业，更符合正式文件的预期。</p><h2 id="连字"><a href="#连字" class="headerlink" title="连字"></a>连字</h2><p>这是我经常犯错误的另一个领域，其他人也是如此。这更多是知道哪些词需要连字，而不是不知道如何做某件事的情况。此外，还要确保报告中某种连字的一致性。一个经典的例子是在同一份报告中使用“man-in-the-middle”和“man in the middle”（如前一课中提到的）。</p><p>我描述的术语是“连字符化合物”（当两个或多个单词用连字符连接时）。以这种方式连接的英语单词几乎肯定会被拼写&#x2F;语法检查器检测到，通常被忽略的是技术或客户特定的情况（如上所述）。</p><p>确保仔细审查工作，以确保连字符在报告文档中的使用既正确又一致。如果您有关于某些单词连字符使用的内部指南，请记得遵循它们。</p><h2 id="“高级”语法"><a href="#“高级”语法" class="headerlink" title="“高级”语法"></a>“高级”语法</h2><p>我认为“高级”不是这里的正确词语，也许我应该说“不常用”。我之所以这样说是因为我经常看到标点符号的使用不正确，也许通过保持文本简单和简洁就可以避免这种情况。</p><p>另外，当一份报告由多个人编写时，其中一个人的写作风格包括大量使用“;”或“:”时，这在报告中会显得突出。这通常不是一个很大的问题，但它可能会使报告在质量方面显得有些失衡，即使团队其他成员制作的内容没有问题。</p><p>这里有一些例子，如果你不知道如何正确使用它们，我会尽量避免使用：</p><ul><li>：- 限制冒号用于列表的引入，例如：<ul><li>在评估过程中发现了以下项目：</li></ul></li><li>；- 我会完全避免使用分号。我经常看到分号在列表项的末尾使用，这不是一种标准做法。</li><li>“!” - 如果你需要在报告文档中使用感叹号，我会感到惊讶。</li><li>“—“ - 不要与连字符混淆，这是用来强调一个观点或突出信息的。</li></ul><p>如果你对以下任何一点感到满意，那很好，如果你意识到自己可能不太了解何时以及如何使用它们，那就坚持以避免使用它们的方式写作。</p><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这个快速的课程中，我们讨论了我观察到的语法常见陷阱。制作一个有语法错误的报告在专业文档中不会给人留下良好的印象，尤其是有人为之付费的情况下。此外，由于这个领域的许多错误可以通过拼写&#x2F;语法检查甚至校对来避免，这会给任何审阅你工作的人带来不必要的头痛。因此，请利用工具检查语法，并始终校对你的工作。请查阅任何内部风格指南，例如连字符和大写字母的使用，以确保你按照组织的期望编写内容。</p><h1 id="4-语法-练习"><a href="#4-语法-练习" class="headerlink" title="4-语法 - 练习"></a>4-语法 - 练习</h1><p>现在人们对语法知识变得懒惰（包括我自己），因为 Microsoft Word 和其他工具可以找出我们犯错的地方。然而，让我们看看是否可以提高能力，不要一直依赖工具。</p><p> 这里有一些练习：</p><p> <strong>反思练习</strong></p><p>反思你写过或可以访问的报告，并检查看看是否能发现错误：</p><ul><li>大写的用法</li><li>连字符的使用或不使用</li><li>撇号的用法</li></ul><p>在上一课中提到的“高级”语法有没有被使用？它被正确使用了吗？</p><p> <strong>一般练习</strong></p><p>这里有几段文字，展示了上一课提到的一些问题，同时写得不够好。请不使用任何工具，尝试找出语法错误。</p><blockquote><p>所进行的评估显示，在较高水平上，马术加网站存在许多问题。存在一些跨站脚本漏洞，这意味着攻击者可以轻松地通过向应用程序的所有页面注入脚本来获取用户数据。</p><p>解决方案的管理员能够更改应用程序的URL方案，这意味着它将通过明文http提供。由于普通用户无法更改此设置，因此此攻击的可能性受到限制，因此仅影响了互联网面向站点的4个用户。以这种方式错误配置应用程序将使中间人攻击成为可能。</p><p>尽管移动应用软件显示出强大的安全性，但在手机上部署的应用程序配置仍有改进空间。这在为澳大利亚市场开发和部署的应用程序中尤为明显，该应用程序未强制使用https连接到面向互联网的Web服务器。</p></blockquote><p><strong>超越练习</strong></p><p>考虑研究我之前提到的“高级”语法概念，并学习它们。你能将它们应用到你的报告写作中吗？</p><h1 id="5-简洁性"><a href="#5-简洁性" class="headerlink" title="5-简洁性"></a>5-简洁性</h1><p>虽然我看过许多我认为很简略且有点欠缺的报告，但我也看过一些写作风格过于啰嗦的报告。这种情况有很多形式，通常相当微妙且不会立即显而易见，但对于那些阅读大量报告的人来说，这是非常明显的。</p><p>写报告并非竞赛谁能写最多字，我们只需要以客户能理解的方式写作。理想情况下，我们应该尽可能简洁地做到这一点。这样做有几个好处：</p><ul><li>客户需要阅读的文字更少</li><li>我们需要写的字越少<ul><li>我们有更多时间用在其他地方</li></ul></li><li>希望阅读起来更清晰</li></ul><p>我经常看到这方面有几个常见的类别（是的，我确实查了一下这些事情是否有官方术语）：</p><p>冗余或类似的句子</p><ul><li>句子中的冗余词语（迂回累赘）</li><li>冗余的形容词（多余）</li></ul><p>我个人的理论是，这种情况发生的原因是我们在学校时需要为作业达到一定字数。因此，我们采用了一种臃肿和重复的写作风格，通常使用两倍于所需字数的词语来表达观点。</p><p>另一个原因可能是模仿他人的写作风格。我曾经工作过的一个组织确实有一种风格，似乎每个人都在遵循。我想说，我从他人那里学到了更多的坏习惯，而我仍然发现我的写作在某些方面仍然臃肿。由于团队中的其他顾问也犯了类似的错误，这个理论可能是正确的。</p><p>无论原因是什么，这是我在报告中经常注意并强调的一点，也是整个行业的一个缺点。</p><p>与本章中许多课程一样，重要的是要注意从您的写作中消除这些模式的方法是确保您审查文本以检查它们。</p><p>让我们通过一些例子来看看。</p><h2 id="相似的句子"><a href="#相似的句子" class="headerlink" title="相似的句子"></a>相似的句子</h2><p>在描述某事时，我看到有些情况下会使用多个句子，这些句子可能具有相同或相似的内容。这些额外的句子可以被删除，或者使用复杂句子合并。</p><p>考虑以下示例：</p><blockquote><p>该网络应用程序未实施多因素身份验证。由于应用程序未使用多因素身份验证，如果用户的密码被泄露，用户将面临风险。</p></blockquote><p>希望您能注意到“应用程序”这个词的多次提及，更重要的是提到未使用多因素身份验证。我们可以压缩这些句子，使其看起来像这样：</p><blockquote><p>网页应用程序没有实施多因素身份验证，这意味着如果用户的密码被泄露，他们将面临风险。</p></blockquote><p>或者我们可以删除一句话：</p><blockquote><p>由于应用程序未使用多因素身份验证，用户如果密码被泄露将面临风险。</p></blockquote><p>根据这个措辞所在的位置，您可能也可以删除对应用程序的提及，因为这可能是显而易见的。这可能意味着您最终会得到一个看起来像这样的句子：</p><blockquote><p>未实施多因素身份验证，这意味着如果用户的密码被泄露，他们将面临风险。</p></blockquote><p>这可以更简洁，但我们将在这里停下，因为我们偏离了主要观点。当您完成一段文字的撰写后，请确保仔细阅读并检查是否重复信息，然后将其删除。</p><h2 id="冗余词语"><a href="#冗余词语" class="headerlink" title="冗余词语"></a>冗余词语</h2><p> <strong>常见的句子填充词</strong></p><p>我经常看到的最常见的例子是以下变体:</p><blockquote><p>网页应用程序被发现容易受到 SQL 注入攻击。</p></blockquote><p>“被发现容易受到” 可以简单地替换为 “被”。</p><blockquote><p>网页应用程序容易受到 SQL 注入攻击。</p></blockquote><p>我怀疑人们可能认为这样读起来会更好一些，而且我也长时间以来都是这样写的。然而，我们并不需要这样写，可以简单地跳过这些词语，更加简洁。</p><p>这里有这种模式的其他示例。</p><p> <strong>示例 1：</strong></p><blockquote><p>该网络被评估为存在多个漏洞。</p></blockquote><p> 可以变成：</p><blockquote><p>该网络存在多个漏洞。</p></blockquote><p> <strong>例子 2：</strong></p><blockquote><p>云环境似乎处于默认配置状态。</p></blockquote><p> 可以变成：</p><blockquote><p>云环境处于默认配置状态。</p></blockquote><p><strong>冗余的句子开头</strong></p><p>有时候出现的另一个例子是在报告的推荐部分或问题本身中出现以下内容：</p><blockquote><p> 推荐</p><p>建议启用多因素身份验证。</p></blockquote><p>“建议”这个词完全是多余的。我们不需要再次强调，因为我们已经说明这一部分是建议部分。这句话可以简化为：</p><blockquote><p>启用多因素身份验证。</p></blockquote><p>再次强调，这是另一个人们认为这种冗长版本读起来更好的地方。就个人而言，我更喜欢并推荐一种风格，用尽可能少的打字来传达观点。这导致了这个更短、更清晰、更干净的句子。</p><h2 id="冗余形容词"><a href="#冗余形容词" class="headerlink" title="冗余形容词"></a>冗余形容词</h2><p>当试图向读者表达一个关键观点时，通常会使用形容词来试图传达一个关键观点。不幸的是，通常在文本中我们在告诉客户某事有多糟糕时会使用形容词。我经常看到的一个模式，也是微软 Word 经常纠正我的地方，就是在某些词前使用形容词，而这些词本身已足以证明某事的严重性或规模。</p><p> 以下是一些例子:</p><blockquote><p>网络受到了非常重要的配置错误的影响。</p></blockquote><p>这里并不需要使用“非常”这个词，因为“重要”已经足够突出情况的严重性。事实上，也许我有偏见，但下一句话让情况听起来更严重：</p><blockquote><p>网络受到了重要配置错误的影响。</p></blockquote><p>这里有更多的例子：</p><p> <strong>例子 1：</strong></p><blockquote><p>…并且发现这个漏洞对于攻击者来说是非常明显的。</p></blockquote><p> 可以更改为：</p><blockquote><p>…并且发现这个漏洞对攻击者来说是显而易见的。</p></blockquote><p> <strong>例子 2：</strong></p><blockquote><p>服务器过时且非常容易受攻击者攻击的软件版本使其成为经验丰富的攻击者的极易目标。</p></blockquote><p> 可以更改为：</p><blockquote><p>服务器过时且易受攻击者攻击的软件版本使其成为经验丰富的攻击者的易目标。</p></blockquote><p> <strong>示例 3：</strong></p><blockquote><p>在 SSL 加密协议中发现了一个极其严重的安全漏洞，可能会导致数据安全方面的极其灾难性后果。</p></blockquote><p> 可以更改为：</p><blockquote><p>在 SSL 加密协议中发现了一个严重的安全漏洞，可能会导致数据安全方面的灾难性后果。</p></blockquote><hr><p>在未来的写作中，请注意不要为已经清晰和有影响力的描述使用过多的形容词。</p><h2 id="课程总结-6"><a href="#课程总结-6" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这里，我们已经列举了一些文本可能比必要更臃肿的例子，以及需要采取的措施使其更为简洁。在撰写和审阅您的作品时，请考虑是否添加了填充词或多次表达同一观点。如果发现这种情况，请考虑重新表达您的作品或删除词语，使您的文本更为简洁和清晰。</p><p>Enable fullscreen</p><h1 id="6-简洁-练习"><a href="#6-简洁-练习" class="headerlink" title="6-简洁 - 练习"></a>6-简洁 - 练习</h1><p>在上一课中，我们展示了报告中的句子经常充满了可能使文本臃肿并且对读者不够清晰和直接的内容。</p><p>让我们做一些练习，以实践所学内容。</p><p> <strong>反思练习</strong></p><p>看一看你写过或可以访问的一两份报告。</p><ul><li>你能发现任何相似的句子是聚集在一起的吗？你如何合并或删除它们？</li><li>反思你对常见句子填充词和多余句子开头的使用。是否有一些情况下你可以更简洁？</li><li>回顾所使用的形容词。是否有一些多余的形容词可以被删除而不失去句子的影响力？</li></ul><p> <strong>一般练习</strong></p><ul><li>简化以下段落：</li></ul><blockquote><p>在本报告中，Imodium Testing 对 Luke Corp 开发的 Web 应用程序的安全状况进行了全面和详细的分析。这次渗透测试的目的是仔细检查和彻底调查 Web 应用程序安全功能的各个方面。值得注意的是，这种分析是以模拟可能由恶意攻击者进行的潜在攻击方式进行的，从而使得可能能够洞察系统中可能存在的漏洞。</p></blockquote><blockquote><p>在深入测试过程中发现的另一个重要关注领域涉及跨站脚本（XSS）漏洞的存在。这些漏洞在许多情况下被发现，用户提供的数据在浏览器中呈现时没有进行充分的转义或验证。重要的是要强调这样的漏洞可能被攻击者利用，以在毫不知情的用户浏览器中执行恶意脚本，导致各种安全风险，如会话 cookie 被窃取以及获取其他类型的敏感信息。</p></blockquote><blockquote><p>关于减轻先前提到的SQL注入漏洞，建议实施强大的输入验证和净化机制。具体来说，建议使用预编译语句和参数化查询，以确保用户输入以安全和安全的方式处理。此外，定期进行代码审查和安全测试将有助于持续监控和解决随时间可能出现的任何新漏洞。</p></blockquote><ul><li>写一段关于你最喜欢的渗透测试工具的简短段落，侧重于清晰度，避免冗余。然后，修改它使之更加简洁。</li><li>编辑公开报告的一部分，使之更简洁，重点消除冗余的句子和词语</li></ul><p><strong>超越练习</strong></p><ul><li>研究英语语言中文本更简洁的方法</li><li>您能配置您用于撰写报告的任何工具，以帮助减少报告中的冗长吗？</li></ul><h1 id="7-时态"><a href="#7-时态" class="headerlink" title="7-时态"></a>7-时态</h1><p>写报告时所使用的时态是多年来我看到过很多争论的话题。在某种程度上，我可能已经被灌输了使用过去时写作的习惯，但我还没有看到令我信服另一种方式更好的论据。</p><p>让我们从一个重要问题开始：什么是渗透测试报告？</p><p> 这是我的定义：</p><blockquote><p>渗透测试报告是系统、服务或平台安全状况的一个时间点快照。报告包含了评估过程中发现的风险细分，以及客户可以采取的措施来解决或减轻这些发现。</p></blockquote><p>这里的关键点在于“时间点”方面。一旦报告交付给客户并且我们的测试停止，我们可能不知道最新的安全状况。好吧，安全状况可能不会一夜之间改变，但随着时间的推移，报告的准确性会降低。现在，这让我们回到了报告的时态。由于安全性的不断变化（以及我们刚刚测试的内容可能会发生变化），读者理解报告是特定时间点的反映至关重要。新的漏洞可能会被发现，可能会影响网络服务，可能会添加包含安全漏洞的 Web 应用程序的新功能，或者对平台进行的配置更改可能会打开以前不存在的攻击路径。这就是为什么重要的是以过去时的方式撰写报告，以便所发现的内容以过去时形式提及。</p><p>为了澄清这个概念，报告通常会包含关于研究结果瞬时准确性的免责声明，但从文体的角度来看，应该完全以过去时态来撰写。这种方法可能看起来不寻常，但它符合读者的视角，读者应该是“当团队评估我们的平台时，他们观察到”而不是“他们观察到”，因为他们的评估已经完成。</p><p>文档应该展示我们审查时安全状态的真实情况，而不是以一种暗示问题可能仍然存在的方式编写。想象一下，6 个月后参考这份文件，如果它读起来好像问题仍然存在：</p><blockquote><p>该网络应用程序的登录表单存在SQL注入漏洞。利用这个漏洞，攻击者可以从后端数据库中提取所有用户的个人信息。</p></blockquote><p>这句话在与客户通话时可能有意义，或者在报告交付后立即有意义，但一旦安全漏洞被修复，这就变得多余了。然而，写成这样会更好：</p><blockquote><p>Web 应用程序的登录表单存在 SQL 注入漏洞。利用这个漏洞，攻击者可以从后端数据库中提取所有用户的个人信息。</p></blockquote><p>这不仅在报告中有意义，当它写在“这是他们在进行评估时发现的”之后，而且在之后“测试人员在 6 个月前测试应用程序时发现了什么？”。</p><h2 id="异常情况"><a href="#异常情况" class="headerlink" title="异常情况"></a>异常情况</h2><p>报告中有几个区域可能以不使用过去时态的方式编写，这是有道理的。也有一些区域可能以稍微不同的风格编写，为了在客户阅读报告时产生更大的影响。</p><p> <strong>执行摘要</strong></p><p>为了更具影响力，这一部分可以用现在时态来写。说某事“是”不好，而不是“曾经是”，听起来可能更有影响力，即使这与我之前概述的观点不一致。尽管如此，这并不是我用于这一部分或推荐的风格。</p><p>然而，我已经以这种风格撰写了完全打算成为“现在看起来如何？”的文件，通常是一到两页的高层摘要，考虑了许多评估中的集体安全风险。这份文件的受众可能是高级主管或 C 级员工，他们需要了解重要的要点及其影响。为了更具影响力，我们使用现在时态来写作。</p><p> <strong>推荐</strong></p><p>建议，无论是报告上部的战略性建议还是调查结果中的建议，通常以将来时态撰写，因为它们建议在评估后采取行动。这是完全合理的，因为这是评估结束后必须发生的事情。</p><p> <strong>法律用语</strong></p><p>如果报告包含法律术语，则其时态可能与文档的其余部分不一致。为了将来保护评估团队的组织，可能需要进行调整。</p><p> <strong>附录</strong></p><p>与其他部分相比，本节可能在时态上不太正式，尽管这取决于附录特定子部分的目的。如果本节与评估本身有任何关联（评估团队、概念证明、范围信息等），则应使用过去时态。对于其他更像是您可能添加到报告中的静态内容的部分（关于公司、风险评级概述），可能应使用现在时态，这可能更为可接受。</p><h2 id="课程总结-7"><a href="#课程总结-7" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们讨论了报告应该以过去时态写作的理想方式，以及原因。我们还涵盖了典型报告中可能是这一规则例外的一些领域。也许你遵循的报告风格对这个话题更加放松，或者不同意我在这里提倡的观点。这没关系。只要记得确保你使用的风格在整个文件中保持一致即可。</p><h1 id="8-时态-练习"><a href="#8-时态-练习" class="headerlink" title="8-时态 - 练习"></a>8-时态 - 练习</h1><p>在上一课中，我解释了为什么报告应该用过去时态来写。如果你已经这样做了，也许你可以跳过这些练习。如果你不同意我的观点，可以随意继续。</p><p>如果你想练习用过去时态写作以及它的使用方式如何影响报告的解释，这里有一些练习。</p><p> <strong>反思练习</strong></p><p>反思你写过或可以访问的报告。使用了什么时态？你认为时态使用正确吗？解释你的理由。</p><p> <strong>一般练习</strong></p><ul><li>用过去时写一个虚构的渗透测试摘要，然后用现在时写。比较它们，并注意信息可能被感知的差异。客户在六个月后可能如何解释报告？</li><li>如果您的内部指南告诉您要用现在时写作（或者这只是一般惯例），请将几个部分改写为过去时并进行比较。您觉得客户在评估后不同时间阅读时可能会以不同方式解释结果吗？</li></ul><h1 id="9-语态"><a href="#9-语态" class="headerlink" title="9-语态"></a>9-语态</h1><p>我在整个行业中看到的另一个写作风格方面的差异是报告的“语态”，换句话说，报告是从哪个角度写的。</p><p>我不想在这个主题上花费太多时间，只是强调我认为更专业的阅读方式。</p><h2 id="第一人称"><a href="#第一人称" class="headerlink" title="第一人称"></a>第一人称</h2><p>这并不常见，但偶尔会出现。用第一人称写报告显得太随意和非正式，这并不符合我个人的喜好，尤其是对于一个应该是正式文件的情况。如果你是内部渗透测试团队的一员，可能可以更随意地写作，但即便如此，我仍会努力避免写作方式让报告听起来像是在给朋友写信。</p><p>好吧，也许这有点夸张，但让我们看一个例子。</p><blockquote><p>在评估卢克公司的主要网站时，我能够利用 SQL 注入漏洞。这使我能够 compromise 整个数据库，通过互联网将所有数据下载到我的计算机上。</p></blockquote><p>这可能是因为我在报告写作方面接受的训练，但对我来说，这更像是日记条目，而不是正式报告的内容。</p><h2 id="第三人称"><a href="#第三人称" class="headerlink" title="第三人称"></a>第三人称</h2><p>以第三人称写作，通常指公司名称，比以第一人称写作更专业。虽然这种写作风格更好，但可能会感觉有点笨拙，有其他方法可以避免一直使用这种写作风格。</p><p>这是一个可能看起来如何的示例：</p><blockquote><p>在对卢克公司主要网站进行评估期间，ogSec 能够利用 SQL 注入漏洞。这使得测试团队能够 compromise 整个数据库，将所有数据通过互联网下载到他们的计算机上。</p></blockquote><p>这种感觉更专业，因为提到了“测试团队”和“ogSec”组织，而不是从个人的角度写作。然而，以一种需要作者参考任何人的风格来写作是可以避免的，接下来我们会看到。</p><h2 id="无人称风格和被动语态"><a href="#无人称风格和被动语态" class="headerlink" title="无人称风格和被动语态"></a>无人称风格和被动语态</h2><p>以无人称风格和被动语态写作是我通常写报告的方式，也是写技术文件的首选标准。偶尔，我会在极少需要提到评估团队或我所在组织的情况下使用第三人称，但通过这种方法，通常可以避免这种情况。采用这种风格，文本的主题可以被抽离出来，使报告读起来更加专业，流畅。</p><p>这是以被动语态书写的前面示例的修改版本：</p><blockquote><p>在对卢克公司主要网站进行评估期间，利用了几个 SQL 注入漏洞。这导致整个数据库被入侵，所有数据都被下载到互联网上。</p></blockquote><p> 这里有一些定义：</p><ul><li>无人称风格 - 构建句子时，不指定执行动作的执行者。<ul><li>例如：”进行了一系列测试。” 而不是 “ogSec 进行了一系列测试。”</li></ul></li><li>被动语态 - 句子的主语受动词影响，通常不提及谁执行了动作。<ul><li>例如：”数据库被入侵了。” 而不是 “测试人员入侵了数据库。”</li></ul></li></ul><p>这些方法存在一些重叠，但结果是作者、组织和评估团队可以在大部分报告文本中被省略。这样可以编写更流畅的叙述，同时创造出更客观但也更中立的写作。</p><h2 id="课程总结-8"><a href="#课程总结-8" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们涵盖了报告可以用不同视角（或语态）撰写的方式，以及我对什么听起来最专业的看法。与报告的时态类似，你可能会采用一种不符合我在这里介绍的风格，或者使用我认为有点不够正式的东西。没关系 - 只需确保在整个报告中保持一致。</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-1 客户沟通</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-1%20%E5%AE%A2%E6%88%B7%E6%B2%9F%E9%80%9A/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-1%20%E5%AE%A2%E6%88%B7%E6%B2%9F%E9%80%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="0-章节（客户沟通）介绍"><a href="#0-章节（客户沟通）介绍" class="headerlink" title="0-章节（客户沟通）介绍"></a>0-章节（客户沟通）介绍</h1><p>客户沟通是我看到许多顾问多年来努力应对的问题。虽然大部分沟通涉及确认测试细节，比如传递 URL、凭据和其他测试资料，但我很少看到顾问将客户作为资源使用。这样做可以改善评估结果，极大地提升报告的质量。</p><p>众所周知，软技能如报告和客户沟通经常被忽视。网络安全顾问更喜欢发现酷炫的漏洞或在远程服务器上获取 SYSTEM shell。由于报告通常是成为渗透测试人员中最不喜欢的部分，大多数顾问会将其留到参与结束时再处理。</p><p>我记得当初我开始在一家网络安全咨询公司工作时，打电话给客户或安排电话会议并不是我喜欢做的事情。一个典型的道德黑客只想坐在键盘后面攻击他们被授权攻击的网站，或者勘察和扫描他们获得IP地址范围的外部基础设施。他们真正不想做的最后一件事就是和任何人交谈。然而，不管喜欢与否，工作要求你履行顾问的角色，而在这种情况下作为安全专业人员的一部分是能够与客户交流，以确保测试顺利进行并有效地传达你的发现。</p><p>我已经进行了许多评估，这些评估可以在最小程度的客户互动下完成，这并不总是一件坏事。客户通常很满意，而且当您不必为电话和类似事项安排时间时，工作通常会少得多。然而，作为测试人员，您可以并且应该花时间了解您的客户及其需求，以及他们对您正在测试的内容的了解，这在电话上比通过电子邮件更容易实现。这也可以通过即时通讯（例如 Microsoft Teams 或 Slack）完成，我最近看到了更多这样的情况，并且在许多项目中帮助了我的团队。</p><p>当你了解客户进行评估的动机并了解他们的业务运营时，这将积极影响你的互动和最终交付成果。通过在沟通和工作中反映这种理解，你将满足客户的期望，并获得对你努力的积极反馈。当你考虑客户的核心资产以及他们希望在讨论和报告中保护的领域时，这一点尤为明显。为了实现这一点，我们需要获取背景信息。有时，背景信息可以从公司的网站中获取。然而，这可能并不总是直截了当的，特别是如果组织结构复杂，而你的评估范围是审查其中的一个非常小的部分。在这种情况下，你需要拿起电话。</p><p>在这一章中，我们将通过在通话过程中与客户的需求保持一致来为成功的评估奠定基础。我们将了解他们的运作方式，他们最需要保护什么，以及如何为正确的受众准备报告。我们还将涵盖一些需要在评估过程中考虑的因素，以及在测试时如何最好地进行沟通。</p><p> 让我们开始吧。</p><h1 id="1-预评估任务"><a href="#1-预评估任务" class="headerlink" title="1-预评估任务"></a>1-预评估任务</h1><p>为了开始评估，需要审查和完成许多事项。</p><p>对于经验丰富的渗透测试人员，以下内容可能对您并不是非常有价值，但是值得一读，以防您的流程中存在任何漏洞，或者您可能向客户请求什么。</p><p>本节将介绍一份建议的任务清单和与客户的沟通，并解释为什么您应该执行这些任务的好处。</p><p>如果不清楚为什么我在这一部分讨论以下内容：如果目标是最大化报告质量，我们必须确保我们既覆盖客户期望我们覆盖的内容，又要确保我们尽可能多地花时间进行测试，而不受干扰或阻碍。为了做到这一点，我们必须掌握本节中概述的内容。</p><h2 id="审查工作声明和范围"><a href="#审查工作声明和范围" class="headerlink" title="审查工作声明和范围"></a>审查工作声明和范围</h2><p>如果您是测试人员，您的工作要求和范围可能来自他人。这可能来自销售团队、售前团队或内部工程团队。无论信息来源于何处，工作范围通常会在一份文件中正式规定（称为工作说明书（SOW）或提案），其中描述了测试的原因以及需要审查的内容。鉴于您是负责执行工作的人，您必须阅读并理解这份文件至关重要。注意任何看起来不合理的地方，或者您觉得自己没有足够信息来执行工作的地方。根据您不理解的内容，最好先在内部与销售团队联系，然后再与客户交谈 - 答案可能已知，没有比已经与您的团队分享信息并不得不重复的恼怒客户更糟糕的事情了。</p><p>您能够发现的问题类型可能取决于您作为测试人员的经验。我将尝试在下面给您一些示例。</p><p>让我们假设一份工作说明书具有以下文本：</p><blockquote><p>该评估将包括 example.com 网站应用程序的测试实例。解决方案使用 React JavaScript 框架在前端实现，并与单独的后端 API 进行通信。</p></blockquote><p>现在假设要发送的授权表格只指定 <a href="https://test.example.com/">https://test.example.com</a> 作为范围。如果讨论的后端 API 存在于一个独立的服务器上，这可能会成为一个问题。在这种情况下，我们应该与 SoW 的作者沟通并确认。如果他们不知道这是否存在，我们应该在给客户的电子邮件中包含这个问题。</p><p>这是另一个例子，我相信很多人都见过。想象一下，你被安排进行为期3天的外部基础设施评估。通常是一个相当轻松和直接的测试（取决于正在运行的内容）。然而，当你仔细审查工作说明书时，你会看到以下内容：</p><blockquote><p>以下 IP 地址范围在范围内: 196.XXX.0.0&#x2F;18</p></blockquote><p>对于那些不熟悉网络范围 CIDR 表示法的人，我建议在网上搜索一些阅读材料（我还推荐 Linux 命令行工具 ipcalc），但简短的答案是这超过了 16,000 个 IP 地址。要想很好地覆盖所有这些 IP 地址可能会有挑战，特别是如果范围内的许多主机在线并且暴露了服务。再次强调，最好与安排工作的团队联系，看看是否有解释，并在测试开始之前提前进行任何范围调整。</p><p>有时文档中可能包含有关 Web 应用程序、IP 地址范围或其他可能在评估中涵盖的“事物”的详细信息。如果您有权限提前测试访问是否有效，那么值得一试。您不希望的最后一件事是由于访问不起作用而延迟或严重影响测试 - 这将影响您能够为客户提供的价值。基本检查可能包括：</p><ul><li>您可以访问需要测试的服务</li><li>您可以使用提供的凭据进行身份验证</li><li>一旦经过身份验证，您可以查看预期的数据&#x2F;配置或具有正确的权限</li></ul><p>在工作说明书（SoW）文档中可能会出现许多问题，而在这里解决所有问题并不现实。我的建议是？仔细审查文档，并尽力预测评估可能涉及的内容以及可能出现的障碍。这可能基于提供的信息、评估类型或您手头的时间。这不是您可以一夜之间掌握或轻松准备的事情；相反，它是通过经验获得的。关键部分是在每次评估开始时利用您不断增长的经验来识别和解决任何潜在问题，甚至在评估开始之前。</p><h2 id="授权表格和保密协议（NDA）"><a href="#授权表格和保密协议（NDA）" class="headerlink" title="授权表格和保密协议（NDA）"></a>授权表格和保密协议（NDA）</h2><p>如果您正在对另一个组织进行评估，很可能您需要获得执行评估的许可。在许多国家，法律要求这样做，以确保所进行的测试被视为合法活动。详细讨论这份文件超出了本课程的范围，您应该自行研究，但我们确实需要确保在测试开始之前准确完成任何此类文件。请确保熟悉您所操作国家的法律。</p><p>将授权表与工作声明和概述范围进行比较，并检查是否存在任何差异。我过去多次看到的一个很好的例子是，授权表中提到的不同的 Web 应用程序 URL 与工作声明中的不同。这可能导致我们测试错误的 Web 应用程序或执行未经正确授权的评估。如果您在这份文件中发现了任何问题，请在与客户交谈之前，如果可能的话，值得与为工作进行范围界定的团队联系以澄清。</p><p>对于许多项目，您可能需要签署保密协议，因为客户可能希望在评估过程中需要访问的任何敏感信息得到法律保证，以确保不会外泄。这在代码审查评估、专有技术存在的评估或客户存储的数据极为敏感的评估中经常见到。如果在任何电子邮件链或服务协议中提到了这一点，而您找不到已签署的保密协议（您可能无法访问），请与销售团队再次确认是否已签署。如果这是一个要求，但尚未完成，请务必尽快提示客户，以便测试能够按时开始，最好将其包括在您的初始电子邮件中。</p><h2 id="以前的报告"><a href="#以前的报告" class="headerlink" title="以前的报告"></a>以前的报告</h2><p>您的组织可能已经测试过这个应用程序或“事物”，并且可能有以前的报告供您查看。这可能有几个原因是有用的，比如：</p><ul><li>理解你将要审查的内容是什么</li><li>确定之前发现的内容，并将其添加到本次评估中需要检查的事项列表中</li><li>查看上次审查过的人员，以便在有问题时联系他们</li></ul><p>报告可能会回答您的几个问题，并且可以节省您和您的客户一些时间。</p><p>如果以前有过测试，值得询问客户自那时以来可能发生了什么变化，以及在评估过程中是否应该重点关注任何新变化。</p><h2 id="构建先决条件清单并发送电子邮件给客户。"><a href="#构建先决条件清单并发送电子邮件给客户。" class="headerlink" title="构建先决条件清单并发送电子邮件给客户。"></a>构建先决条件清单并发送电子邮件给客户。</h2><p>一旦您消化了 SoW、授权表格和&#x2F;或 NDA，您应该编制一个测试前提条件列表。我不打算在这里详细介绍所有可能的评估类型，但我将展示如何请求额外信息，这将有助于评估既高效又成功。</p><p>从这里的一些问题中，您可能会注意到我建议获取的信息比测试范围可能需要的要多。这是有意的。使测试尽可能成功的一个重要部分是尽可能多地获取我们正在访问的内部工作原理的信息。在这方面的目标是通过减少我们可能针对某些事物执行的常规“常见”检查的数量，从而限制评估过程中的猜测工作量。例如，了解组件的实现或底层技术栈使我们能够进行更有针对性的检查。</p><p>因为评估是在有限的时间框架内进行的，我们应该确保我们花费时间和资源以一种可能产生良好结果的方式进行测试。其中一种方法是提前从客户那里获取更多关于我们正在审查的内容的信息。</p><h2 id="Web-应用程序评估示例"><a href="#Web-应用程序评估示例" class="headerlink" title="Web 应用程序评估示例"></a>Web 应用程序评估示例</h2><p>Web 应用程序的先决条件通常非常简单，但最好确保正确的访问设置以及在账户锁定情况下的额外访问。在下面的示例中，您还将看到我们正在请求一些额外信息和联系点，这可能超出了通常要求的范围。</p><p>下面是我准备进行应用程序评估时可能发送的内容：</p><blockquote><p> 你好 Peter，</p><p>我叫 Luke，我被指派执行对 example.com 测试环境实例的网络应用安全评估。</p><p>为了确保评估能够按计划于 1 月 14 日开始，并确保我们拥有所有必要的信息使评估尽可能成功，我已经编制了一份需要在评估开始前进行审查和完成的项目清单。</p><p><strong>联系方式和测试时间</strong></p><p>我将在英国工作时间（周一至周五上午 9 点至下午 5:30）的 1 月 14 日至 1 月 20 日进行评估。测试结束后的 10 天内，您将可以从我们的安全门户获得报告。在此期间，报告将经过我们内部的质量保证流程。</p><p>如果有紧急情况需要联系，我的电话号码是+4479XXXXXXXX。</p><p> <strong>URL 和访问</strong></p><ul><li>请确认测试范围内的 URL 是否为 <a href="https://test.example.com/">https://test.example.com/</a></li><li>请确认 test.example.com 的 HTTP（明文）端点是否在范围内？确认其是否可用以及作为评估的一部分是否存在任何配置错误将是很有帮助的。</li><li>是否还有其他应用程序端点应包含在此次参与范围内？我们认为可能正在使用一个 API，可能托管在 <a href="https://test.api.example.com。如果是这样，这是否应包含在此次评估范围内？">https://test.api.example.com。如果是这样，这是否应包含在此次评估范围内？</a></li><li>请确保我们的测试 IP 地址范围已添加到 Web 应用程序防火墙上的允许列表中。测试流量将起源于以下范围：<ul><li>197.x.x.1</li><li>197.x.x.2</li><li>197.x.x.3</li></ul></li></ul><p> <strong>账户</strong></p><ul><li>请问我们能否请求在应用程序上为我们创建至少 2 个组织账户。</li><li>如果应用程序中有多个用户级别，请您也为这两个组织账户的每个级别创建两个账户。<ul><li>如果在总体应用程序中有管理员角色（例如，您的团队唯一可以访问的角色），我们也希望能够访问此账户。</li></ul></li><li>另外，请将这些帐户预先配置为真实帐户，并预先填充必要的数据，以便应用程序能够正常运行（假设这些帐户在应用程序上已存在一段时间，并且已经存在数据）。</li></ul><p> <strong>文档</strong></p><ul><li>请您指向任何您可能与客户共享有关如何使用您的应用程序的文档，或通过我们的安全门户与我们共享这些文档。</li><li>正如之前提到的，前端应用程序似乎可能与 API 进行通信，如果是这种情况，请您分享：<ul><li>有关公开端点的任何文档</li><li>Postman&#x2F;ReadyAPI 项目或类似项目</li></ul></li><li>这些可以上传到我们的安全门户。</li></ul><p> <strong>联系点</strong></p><p>请您提供联系点，以协助我们在评估过程中。</p><ul><li>回答关于应用程序如何构建的技术问题（前端和后端）。</li><li>能够帮助我们诊断在正常使用应用程序时遇到的任何问题（也许是来自客户支持的人员），并帮助我们了解应用程序的工作原理。</li><li>如果您习惯通过即时通讯（MS Teams、Slack 或您内部使用的其他工具）进行沟通，我很乐意这样做，而不是通过电子邮件进行工作。</li></ul><p> <strong>凭证共享</strong></p><p>请将任何凭证上传到我们的安全门户。</p><p>理想情况下，如果您能在 1 月 7 日之前（评估开始前一周）分享这些内容，我们可以提前确认它们是否全部有效。</p><p> <strong>授权表格</strong></p><p>请您能在 1 月 7 日之前（评估开始前一周）审阅并签署附上的授权表格吗？没有这个，我们将无法进行测试。我们可以确保在评估开始之前这份文件是正确的。</p><p> <strong>启动电话会议</strong></p><p>除上述内容外，如果我们能安排一个启动电话会议，那将会很好，这样我就可以快速了解应用程序，并简要讨论以下主题：</p><ul><li>应用程序概述和关键用户流程</li><li>应用程序的用户和角色，包括任何管理员角色</li><li>应用程序与任何第三方系统交互的信息</li><li>前端和后端使用的代码框架的详细信息</li><li>托管应用程序的基础架构堆栈</li></ul><p>如果这些信息中的任何一部分都记录在文档中，并且您可以分享，那将非常受欢迎。这不需要是一个正式的会议，只需进行一个快速演示，然后进行一些讨论即可。</p><p>请让我知道以上内容如果有任何不清楚的地方。</p><p> 谢谢，</p><p> 卢克</p></blockquote><p>让我们逐一解释上述电子邮件中每个部分：</p><p><strong>联系方式和测试时间</strong></p><p>在这里，我们首先告诉客户我们将在什么时间进行测试，包括日期和时间。这将让他们提前知道何时可以预期您的测试流量将影响他们的系统，并且如果他们位于另一个国家或他们的团队的工作时间与您不同，这可能会有所帮助。</p><p>给他们一个大致的时间表，告诉他们他们可能何时收到报告是很好的，最好是最晚的日期。如果他们因为某种合规原因需要评估，或者如果测试结果是一个分阶段流程的一部分，在这种流程中，他们在收到积极报告之前无法继续进行生产部署，他们会感激得到评估包括报告交付的最晚可能结束日期。给出最晚日期意味着如果您可以更快地交付（假设报告通过 QA 流程迅速），您有机会在客户面前表现得更好。</p><p> <strong>URL 和访问权限</strong></p><p>在这一部分中，我们给客户确认我们获取的测试 URL（例如来自 SoW）是否正确的机会，如果不正确，他们可以纠正我们。这使我们能够提前解决任何潜在问题，在这些问题中，在工作范围的确定过程中，销售团队使用了不正确的 URL。是的，我知道客户审查 SoWs 以达成销售协议的目的。然而，如果这是真的，为什么我偶尔会看到这个问题发生？最好再次核对。</p><p>您还会看到我已经询问是否可以将HTTP端点纳入范围。目前，至少将应用程序暴露在端口80（HTTP）并重定向至443（HTTPS）是常见的，然而重要的是对HTTP端口进行检查，以确保它们要么被拒绝，要么迁移到安全连接。如果HTTP应用程序不在授权表单上，则对HTTP应用程序进行测试可能被视为违法。这可能需要根据客户的答复进行调整。</p><p>我还询问了是否还有任何应该包含在评估范围内的URL。如果应用程序的前端是<a href="https://test.example.com/%EF%BC%8C%E5%90%8E%E7%AB%AF%E6%98%AFhttps://test.api.example.com/%EF%BC%8C%E5%88%99%E5%BA%94%E7%A1%AE%E8%AE%A4%E5%90%8E%E8%80%85%E7%9A%84URL%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB%E5%9C%A8%E8%AF%84%E4%BC%B0%E8%8C%83%E5%9B%B4%E5%86%85%E3%80%82%E9%80%9A%E5%B8%B8%E5%9C%A8%E8%BF%9B%E8%A1%8CWeb%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%B5%8B%E8%AF%95%E6%97%B6%EF%BC%8C%E6%B5%8B%E8%AF%95%E8%8C%83%E5%9B%B4%E4%BC%9A%E5%8C%85%E6%8B%AC%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%A4%E4%BA%92%E4%BB%A5%E6%89%A7%E8%A1%8C%E5%90%84%E7%A7%8D%E6%A3%80%E6%9F%A5%EF%BC%88%E4%BE%8B%E5%A6%82SQL%E6%B3%A8%E5%85%A5%E3%80%81%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E7%9B%B4%E6%8E%A5%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E3%80%81%E5%AD%98%E5%82%A8%E5%9E%8B%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E7%AD%89%EF%BC%89%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%94%A8%E4%BA%8E%E6%94%AF%E6%8C%81%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%9F%9F%E8%A2%AB%E7%9C%81%E7%95%A5%E4%BA%86%EF%BC%8C%E5%BA%94%E8%AF%A5%E6%8C%87%E5%87%BA%E5%B9%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%8E%88%E6%9D%83%E8%A1%A8%E6%A0%BC%E4%B8%AD%E3%80%82">https://test.example.com/，后端是https://test.api.example.com/，则应确认后者的URL是否包含在评估范围内。通常在进行Web应用程序测试时，测试范围会包括与服务器端组件的交互以执行各种检查（例如SQL注入、不安全的直接对象引用、存储型跨站脚本等），如果用于支持应用程序的服务器端域被省略了，应该指出并添加到授权表格中。</a></p><p>最后，许多网络应用程序受到网络应用程序防火墙（WAFs）的保护，这可能会阻止我们的测试流量。对于已经部署这些系统的客户来说，这是一个良好的做法，因为它们会阻止常见的攻击。然而，这些可能会影响我们测试的效果。因此，在评估期间，我们应该要求允许我们的测试 IP 地址范围，以便我们的测试流量不被阻止。客户可能会反对这一点，在这种情况下，我们应该要求他们考虑到我们的测试是一项有时间限制的活动，让我们能够无阻碍地进行测试比让我们的请求被阻止更加高效。此外，虽然 WAFs 可以有效阻止常见攻击，但攻击者经常绕过它们。这意味着 WAF 可能会使安全漏洞更难利用，但并非不可能，只有通过移除 WAF，某些漏洞类别才能更有效地进行检查。</p><p> <strong>账户</strong></p><p>通常，我们在执行基于身份验证的评估时会获得账户。我们应确保我们有足够的账户来执行测试，以防账户被锁定，同时也要确保有足够的账户类型来进行特定检查。</p><p>我们应该能够访问多个角色（如果存在的话），以确保我们可以映射出它们的功能，然后查看我们是否可以让它们访问某些区域或执行它们本不应该能够执行的功能。例如，一个执行管理功能的基本角色。</p><p>另外，我们应该在第二个组织账户中请求账户（如果这对应用程序有意义的话），以检查我们是否可以访问其他组织的数据或在另一个组织的上下文中执行功能。这将帮助我们测试租户分离（两个组织如何以及是否相互分离）。例如，在另一个组织中添加用户。</p><p>这里的一个关键点是要求在访问帐户时已经填充了数据。理想情况下，我们希望限制我们花在数据输入上的时间，以使应用程序进入可用状态，这样我们就可以测试特定功能 - 如果这些数据已经存在于我们这里，这可能会节省我们大量时间，并使我们有更多时间测试应用程序。客户可能有可能无法帮助您完成这一点，但最好询问。许多组织的测试环境都充满了已生成的测试数据，很可能这些内部工具可以用来填充为您提供的任何测试实例。</p><p> <strong>文档</strong></p><p>尽管可能很无聊，但阅读即将评估的内容的文档可能是发现可能包含安全问题的关键数据流的好方法。文档甚至可能免费为您提供发现（弱默认配置设置是我见过的常见情况）。另一个例子可能是客户向您提供了链接到他们外部维基站的信息，其中包含许多流程的信息。您可能会注意到其中一些描述了一个非直观的过程，您可以在其中配置应用程序从任意来源下载数据并执行其中的内容。显然，这将是在威胁和潜在损害调查清单的首要位置，如果存在任何漏洞，可能会导致潜在损害。</p><p>我还顺便要求了 API 文档和任何 API 测试工具项目文件。如果你所测试的只是一个 API，这是一个有用的要求（在这种情况下，你还应该要求示例请求和响应，特别是对于认证流程），但在这里也很有帮助，因为它可能会给你一个 API 端点列表，这些端点似乎没有被前端应用程序使用，但仍然可以访问。</p><p>如果端点和请求体是最新的，拥有 Postman 或 ReadyAPI 项目可以节省大量时间，因为它们通常可以被导入到诸如 Burp Suite 之类的工具中。</p><p> <strong>联系点</strong></p><p>如果您正在与较大的组织合作，您可能会与您正在测试的应用程序背后的技术团队打交道。这可能是他们团队内的项目经理（PM），甚至是完全独立的安全业务部门内的项目经理（PM）。因此，明智的做法是要求一些可以联系的人员：</p><ul><li>解释应用程序的功能以及从用户角度看它是如何工作的</li><li>可以解释应用程序是如何构建和架构的技术联系点</li></ul><p>提前拥有这些联系点将节省一些时间，并为您提供（希望）对应用程序工作原理和构建方式有深入了解的优秀资源。这应该让您能够更准确地对应用程序进行威胁建模，执行更有针对性的枚举和攻击，希望能够发现可能被忽略的漏洞或配置错误。</p><p>一个很好的例子可能是了解应用程序的后端使用了特定的 Web 应用程序框架。利用这些知识，您可以查看框架文档，了解可以使用框架进行哪些安全加固，并检查可能被忽略的部分。</p><p>我们将在下一课的启动通话中更深入地讨论这类事情。</p><p>最后，提供自己随时通过他们使用的任何即时通讯解决方案进行聊天可能会有所帮助。在我遇到问题或困难的情况下，当你能更直接地接触到人们时，问题通常会更快得到解决。</p><p> <strong>凭证共享</strong></p><p>我们不希望等到评估开始时才获取和测试凭据。发现测试账户无法使用或配置不正确并不罕见。凭据未及时准备是导致启动延迟的常见原因，不幸的是，这可能严重影响我们作为测试人员在预定义的测试时间窗口内所能实现的目标。提前获取凭据将使我们能够确保它们在评估开始之前就能正常工作，同时还能确保它们提供适当级别的访问权限，并为评估正确配置。</p><p>至于如何获取测试凭据 - 这应该以安全的方式进行，不应通过电子邮件共享。如何安全地执行这项操作将取决于您的组织政策和流程。一些示例可能包括：</p><ul><li>您拥有一个安全门户，客户可以向其上传数据</li><li>您的客户有一个安全门户，您可以从中提取凭据</li><li>PGP 电子邮件通信</li><li>您可能会被邀请到客户的企业密码管理解决方案</li></ul><p> <strong>授权表格</strong></p><p>在这里，我们简单地要求客户审查授权表格，并将签署的副本退还给我们。明确指出，未获得签署，无法继续测试是很重要的。</p><p> <strong>启动电话</strong></p><p>在这里，我们询问是否可以安排与客户通话，以快速介绍应用程序并对应用程序的运作有一点了解。这是一些人很少做或不愿意做的事情。要么是因为他们害羞或缺乏信心，以前没有做过所以不知道该说什么或问什么，要么就是他们根本看不到价值。我大部分看到的启动通话都是由客户发起的，并不会涵盖我建议的许多话题。</p><p>讨论的主题将严重依赖于正在测试的内容，当您与客户交谈时，您列在这里的一些项目可能没有意义。没关系，我们不应该期望自己成为您以前从未遇到过的领域的专家。这就是为什么我们应该利用客户尽可能多地学习，所以不要担心在这里显得太愚蠢。</p><p>我们将在下一课中更深入地讨论启动通话。</p><h2 id="电子表格中的先决条件"><a href="#电子表格中的先决条件" class="headerlink" title="电子表格中的先决条件"></a>电子表格中的先决条件</h2><p>好吧，有时这种电子邮件格式可能会非常冗长。对于复杂的合作关系，在工作的许多阶段和许多先决条件的情况下，使用电子表格可能更适合您和客户。上述电子邮件中可能包含以下领域：</p><ul><li>进行测试的顾问列表，包括其电子邮件地址和联系电话</li><li>分配给顾问的阶段列表</li><li>所有工作阶段的细分范围及其各自的要求（例如，Web 应用程序审查 #1，Web API 测试 #1，Web API 测试 #2，外部基础设施扫描 #1）以及存储项目的位置：<ul><li>测试所需的关键项目（例如 URL、IP 地址等）</li><li>访问已验证为有效的地方</li><li>凭据的位置（假设它们不会存储在此表中）</li><li>已收到并测试通过的凭据有效的地方</li><li>必需文件</li><li>顾客的联系点</li></ul></li></ul><p>在复杂项目中一个好主意是要求顾客托管你编制的电子表格，并要求他们的团队实时完成它（而不是来回共享电子表格）。在这种情况下，你理想情况下应该有安全访问权限，并且可以在测试前检查进展情况，以及定期检查你正在测试的内容的访问权限，并在表格中进行验证。</p><h2 id="及时性"><a href="#及时性" class="headerlink" title="及时性"></a>及时性</h2><p>电子邮件中列出了相当数量的项目，但没有无缘无故地提及任何内容。内容考虑到了我们自己和客户的最佳利益 - 目标是通过确保我们尽可能获得更多信息并预防可能阻止我们按时开始的任何障碍，从而提高评估的质量（以及报告的质量）。</p><p>需要注意的是，所有这些信息都需要采取行动，因为那里有相当多的信息，所以我们应该在测试开始之前有足够的时间发送这封电子邮件。一旦您被分配并获得开始参与的许可（或者您有任何表明您应该准备好的流程），您就可以开始查看文件，建立先决条件清单并开始工作。</p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><p>为任何测试做好准备是至关重要的，没有这种准备，测试往往会被延迟，或者最终可能无法产生客户期望的价值。</p><p>确保您花时间提前仔细审查工作声明，并在评估开始之前发送一份介绍，概述您需要的内容。</p><p>如果您执行上述任务，评估的整体质量以及报告的质量将会更好，因为您已经将客户作为评估的有用知识来源，并确保在测试开始之前充分准备，以便尽可能多地专注于参与。</p><h1 id="评估期间的沟通"><a href="#评估期间的沟通" class="headerlink" title="评估期间的沟通"></a>评估期间的沟通</h1><p>确保我们与客户有效沟通，可以确保我们的评估工作高效进行。虽然有效沟通可能是显而易见的，让我们来看看一些常见的沟通场景，并讨论如何改进它们。</p><h2 id="过滤电话"><a href="#过滤电话" class="headerlink" title="过滤电话"></a>过滤电话</h2><p>虽然我已经讨论过为什么启动电话非常有价值，但也有一些电话并不那么重要，会占用评估时间。其中一种情况是客户认为每天测试结束时进行总结电话是有益的。我确实见过一些案例，早上第一时间、午餐后和工作日结束时都会通电话。</p><p>现在我想澄清一点，其中一些电话不仅对某些类型的项目非常重要，而且是必需的。然而，有些情况既不复杂也不琐碎到需要电话，可以简单地用电子邮件替代。</p><p>我要概述的内容需要一定的信心和对客户可能对这些要求作出反应的理解。根据我的经验，如果你表达清晰并展现一点灵活性，通常可以让客户与你合作，调整对什么构成良好每日更新的先入之见。</p><p>我更倾向于完全取消洗涤电话。如果客户建议我们每天更新，我会指出这可能会影响测试时间和覆盖范围。每天花一个小时，在一两周的时间里，实际上是花在电话上的相当大一部分时间。我建议我可以通过电子邮件提供这些信息，这对他们以及测试团队来说更加高效。</p><p> 电子邮件可能包含：</p><ul><li>一般状态更新</li><li>如果我们在任何测试上被阻塞，提出问题（在哪里以及为什么）</li><li>追踪任何未完成的先决条件</li><li>自上次更新以来发现的任何重要发现（在电子邮件沟通中应注意深入程度）</li></ul><p>尽管客户通常会在评估完成后的未来几天或几周内收到报告，但他们通常会希望提前进行任何补救措施 - 这实际上是件好事，很可能是一些客户希望进行每日总结电话的驱动因素。如果是这种情况，我们可以安全地与他们分享草稿问题写作，假设他们有足够的信息让客户能够复制我们的发现。然而，如果他们确实希望交谈讨论任何问题，我们仍应该对此持开放态度 - 灵活性是关键。虽然我们希望减少在无价值电话上的时间，但我们也希望能够提供帮助。</p><p>有时候无法避免电话，客户会坚持要进行总结电话。在团队测试的情况下，还有一些其他有用的想法：</p><ul><li>如果您有一个项目经理负责这项工作，他们应该能够与客户进行高层次讨论，审查议程（如上面电子邮件内容所述）并回顾当天的任何重要发现。这样可以让测试人员继续测试和报告。</li><li>如果项目经理不可用或者你没有项目经理，团队负责人可以承担这个角色，让团队其他成员继续他们的工作。</li></ul><p>这一切可能听起来都很明显，但我总是对我所谈过的许多测试人员抱怨他们被安排参加的所有总结电话感到惊讶，当我问他们“你是否与客户讨论过要么取消这些电话，用电子邮件替代它们，要么以某种方式限制它们的数量？”许多人对这个问题感到惊讶，或者说他们不想惹恼客户。</p><p>俗话说得好 - 不问就不知道。当您提出这些要求时，没有必要咄咄逼人或直截了当。如果您对客户讲理，他们更有可能回报。</p><p>释放我们的时间让我们能够进行更多的测试和报告。更多的测试让我们能够发现更多的错误并获得更好的覆盖范围。更多的报告撰写时间让我们能够花更多时间包含重要的背景和影响。因此，您可以考虑这样做是为了提高整体报告和评估质量。</p><h2 id="追求优秀的先决条件"><a href="#追求优秀的先决条件" class="headerlink" title="追求优秀的先决条件"></a>追求优秀的先决条件</h2><p>如果您已经开始了评估，但没有获得完成评估所需的一切，您应该督促客户提供未完成的项目。评估通常都有时间限制，我们应该提醒客户我们需要在规定时间内完成评估所需的先决条件。</p><p>我交付的大部分工作都是在无法改变的时间框架内完成的。因此，我通常每天跟进客户，并在明显缺少未完成的项目可能影响测试和覆盖范围时升级。</p><p>确保你知道向谁升级，无论是在你的内部，还是在客户端（如果适用）。</p><p>不要让未完成的事项堆积。如果你在测试过程中不追踪事项，客户可能会责怪你，因为他们可能会假设（无论对错）你拥有了你需要的一切来进行测试。</p><p>如果您无法完成评估，因为客户没有解决您的请求，比如解决访问问题，积极跟进并升级这些问题可能会导致更全面的评估，进而产生更全面的报告。</p><h2 id="开始和停止电子邮件"><a href="#开始和停止电子邮件" class="headerlink" title="开始和停止电子邮件"></a>开始和停止电子邮件</h2><p>有时候，客户可能会要求你在开始和停止测试时通知他们。这对于担心服务器负载的客户，或者你（或他们）正在进行错时工作，不清楚你何时会与他们一起工作的情况，通常最有用。</p><p>在默认情况下发送这些类型的电子邮件没有坏处，在您的介绍邮件中，您可以询问客户是否愿意接收这些邮件。我会说，在几乎所有情况下，他们可能会同意，所以如果您想避免多做一项任务，也许不要问。尽管如此，我会说像这样的电子邮件模板制作起来很简单，发送起来也很容易。</p><h2 id="寻找关键漏洞"><a href="#寻找关键漏洞" class="headerlink" title="寻找关键漏洞"></a>寻找关键漏洞</h2><p>如果您在评估过程中发现了重大安全问题，应尽快升级。请根据您的最佳判断确定何为重大问题，通常这些问题将是关键风险，或者根据客户情况可能是一些高风险项目。</p><p>可能需要升级的一些主题:</p><ul><li>您确定了过去或当前入侵的证据</li><li>您发现了一个容易被利用的问题，导致：<ul><li>服务器被入侵</li><li>用户数据的妥协</li></ul></li></ul><p>在升级之前确保你掌握所有的事实是很重要的，这样你就可以迅速提供技术细节，让客户能够重现问题并立即进行修复。在过去发生这种情况时，我通常会放下手头的工作，确保当天将问题解决方案发送给客户。</p><p>再次强调，在这里要慎重考虑，可能最好是打电话而不是让严重问题长时间滞留在某人的收件箱里。</p><p>在类似的情况下，如果您认为您在测试过程中做了某事可能导致您正在测试的问题，或者您已经完全将您正在查看的内容脱机，您应该遵循相同的流程。如果您有任何活动的证据，您在进行该活动时可能会受到感激。准备好可能需要谄媚 - 在这种情况下坦白承认比认为客户可能会忽略更好。</p><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><p>良好的沟通是使评估尽可能成功的关键。这意味着在必要时追踪客户的先决条件，及时更新他们的要求，或者在发现重大漏洞时立即通知他们。然而，也很重要的是知道何时调整沟通以使每个人受益 - 当你觉得时间可以更好地利用时，知道何时建议替代通话，无论是对你和你的团队还是对客户都是如此。</p><h1 id="12-评估过程中的沟通-练习"><a href="#12-评估过程中的沟通-练习" class="headerlink" title="12-评估过程中的沟通 - 练习"></a>12-评估过程中的沟通 - 练习</h1><p>在上一课中，我们涵盖了一些领域，展示了如何在评估过程中处理与客户的常见沟通主题。</p><p>这里有一些相关的练习。</p><p> <strong>反思练习</strong></p><ul><li>您是否曾遇到过与沟通相关的挑战，比如过多的会议或难以获取必要信息？您是如何解决这些挑战的，有什么可以做得不同的地方吗？</li><li>想想一个与客户沟通显著影响评估结果的情况，无论是积极的还是消极的。那时的情况是什么，你从有效沟通的重要性中学到了什么教训？</li></ul><p> <strong>一般练习</strong></p><ul><li>起草一封状态更新电子邮件的模板，您可以用它替代每日的总结电话。确保它涵盖了课程中建议的关键要点：一般状态、阻碍因素、未完成的先决条件和重要发现。<ul><li>为启动&#x2F;停止电子邮件做同样的事情。</li></ul></li><li>为发现关键漏洞的情景制定一个计划。该计划应包括立即采取的步骤、如何简明扼要地记录发现以及有效向客户沟通此问题的模板。</li></ul><h1 id="12-章节总结"><a href="#12-章节总结" class="headerlink" title="12-章节总结"></a>12-章节总结</h1><p>本章涵盖了几个方面，希望能帮助您：</p><ul><li>更好地为评估做准备</li><li>将您的客户作为信息和背景的来源</li><li>与他们进行有效和高效的沟通。</li></ul><p>我们的目标是最大限度地扩大覆盖范围，并全面了解客户对影响的洞察、背景和理解。</p><p>以下是各种课程的一些关键要点：</p><p> <strong>预评估任务</strong></p><ul><li>仔细审查工作说明书，以了解评估过程中需要涵盖的内容。<ul><li>列出一份问题清单，以便向客户询问您不确定的领域。</li></ul></li><li>确保您完全清楚范围 - 应该在哪里和什么应该被测试，以及什么不应该被测试。</li><li>确保工作声明中的范围与授权表中的范围相匹配（如果适用于您）</li><li>检查授权表是否已被客户签署并退回</li><li>是否需要签署保密协议？如果是，请确保客户已签署并退回</li><li>检查您的团队是否在此之前已经审查过这个产品&#x2F;服务&#x2F;客户，并查看是否可以获取适用的先前报告以供查阅</li><li>仔细阅读工作声明，并考虑您可能会有的任何问题，以建立客户测试前提条件的清单<ul><li>尽量预料您在审查过程中会需要的所有事物，以及您可能希望获取的额外信息，使您的评估尽可能成功</li><li>建议进行一个启动电话，以便更深入地了解并在测试过程中给您一个优势</li></ul></li><li>如果您正在准备进行一项复杂的参与活动，请考虑是否需要以更有助于客户理解和采取行动的方式分享先决条件，例如以电子表格的形式</li><li>尽可能及时地与客户沟通，确保给自己和客户足够的时间准备评估。</li></ul><p><strong>启动会议 - 标准启动</strong></p><ul><li>熟悉典型启动会议的常见议程项目</li><li>如果没有设定议程，并且不明确要讨论什么，自己设定或向客户请求</li><li>确保您与客户在评估的范围和目标上保持一致</li><li>查看先决条件，如果需要的话，以查看是否会有任何阻碍来实现它们</li><li>如果对评估中的任何事情感到困惑或不确定，一定要要求澄清 - 不要等到测试开始时才成为问题</li><li>尽力确保与客户的关系尽可能积极，友好，灵活，并在通话期间打开摄像头</li></ul><p><strong>启动会议 - 技术启动</strong></p><ul><li>利用您的客户来理解评估过程中所发现的影响-最糟糕的情况可能是什么，会导致什么？</li><li>旨在理解：</li><li>客户在做什么，或者具体来说，你正在看什么，</li><li>他们拥有的用户类型</li><li>处理和存储的数据是什么</li><li>他们运营的地区</li><li>询问客户关于他们的主要安全关注或担忧，以指导您的评估</li><li>请求演示你正在审查的内容，以节省时间，避免自己摸索如何使用某物</li><li>尝试获取洞察，如适用：<ul><li>解决方案的架构，组件及它们之间的通信方式，以及数据存储位置</li><li>解决方案的编码方式和关键代码库</li><li>解决方案部署的位置和方式</li><li>利用所有这些来消除测试中的猜测，并制定更有针对性的计划，以更好地处理你所关注的内容</li></ul></li><li>如果您对进一步信息或更深入的启动电话的请求遇到阻力，请解释为什么这对您有用，对客户有价值</li></ul><p> <strong>开局最佳实践</strong></p><ul><li>建议录制电话通话，这样您就可以回顾任何在启动电话期间给出的解释</li><li>在通话过程中做好笔记：<ul><li>确保你知道谁是谁</li><li>理解并记录任何解释中的关键信息（最好附带截图）</li><li>尽量记录足够的信息，以免必须听取通话录音 - 这将是一个时间浪费</li><li>如果可以的话，与另一位团队成员分担记录笔记和交谈角色</li></ul></li><li>电话结束后与客户跟进，记录：<ul><li>通话要点</li><li>约定范围的概述（特别是如果在通话中需要澄清）</li><li>强调尚未实现的先决条件</li><li>您的行动项目</li><li>顾客的行动项目</li></ul></li></ul><p><strong>客户报告消费</strong></p><p>考虑顾客如何消费您的报告，以及是否需要提供报告的特定导出，或者以不同方式撰写报告，使顾客更容易消化您的工作</p><p> <strong>报告受众</strong></p><p>考虑如果您对将成为报告主要读者的人有更多了解，是否需要调整您的写作风格（例如，是否可以更加技术性或非技术性？）</p><p><strong>评估期间的沟通</strong></p><ul><li>如果可以避免每日洗礼电话以便为评估提供更多时间，那么请与您的客户讨论</li><li>确保所有先决条件都得到满足并测试（凭据有效，URL 可访问等）及时完成</li><li>如果您发现关键错误，请迅速收集事实，并立即与客户分享</li><li>如果您因测试而导致中断或问题，将影响您的客户或您的测试，请做同样的事情</li></ul><p>与客户有效沟通可能会显著影响您的时间。然而，不仅可以通过正确的准备和模板化来解决这个问题，而且还可以显著地改善您评估的结果。</p><h1 id="2-预评估任务-练习"><a href="#2-预评估任务-练习" class="headerlink" title="2-预评估任务 - 练习"></a>2-预评估任务 - 练习</h1><p>在上一课中，我们涉及了许多不同领域。根据您的经验（以及可能的当前角色），值得研究任何您不熟悉的领域。</p><p>为此，这里有一些练习可以帮助您。</p><p> <strong>反思练习</strong></p><ul><li>想想你最近进行过的一些评估。根据上一课所涵盖的内容，你觉得在评估之前是否可以进行一些额外的准备工作？如果可以，是什么？</li><li>考虑一下你过去进行过的任何评估，是否没有按时开始或者没有按计划进行。在评估开始之前是否可以做些什么来避免延迟或其他评估问题？</li></ul><p> <strong>一般练习</strong></p><ul><li>如果您对工作说明书不熟悉，请研究应在此类文档中包含什么内容，以进行网络安全评估。</li><li>如果有用，创建您自己的工作说明书模板，可用于未来的网络安全评估。</li><li>创建一个电子表格模板，可用于组织和跟踪不同评估类型的先决条件。</li><li>制定自己的介绍性电子邮件模板，概述评估的先决条件。</li></ul><p><strong>超越练习</strong></p><ul><li>探讨在网络安全评估中保密协议的重要性。确定哪些类型的评估可能需要这样的协议。</li><li>研究您所在司法管辖区或您进行测试的司法管辖区中构成授权表单的内容。注意此类表单的典型内容。</li><li>编制一个全面的先决条件清单，通常在进行评估之前向客户沟通。考虑包括额外的请求，这些请求可以更好地为评估做准备，或者帮助避免阻碍和延迟。</li></ul><h1 id="3-启动会议-标准启动"><a href="#3-启动会议-标准启动" class="headerlink" title="3-启动会议 - 标准启动"></a>3-启动会议 - 标准启动</h1><p>正如前一课所提到的，与客户在测试之前或测试开始前通话是非常有用的。我提到了有几个主题可以涵盖，以获得更多关于你将要测试的内容的见解，这样可以为你提供更好的背景，也可以在寻找安全问题时给你一个优势。但首先，让我们看看一个更常见的启动通话会是什么样子。</p><p>在我职业生涯的开始阶段，尽管像 WebEx 或 Microsoft Lync 这样的工具存在，电话会议似乎并不像现在这样流行（现在是我写这篇文章的 2024 年）。再加上我们的大部分工作是从销售团队转交给一组黑客团队，这意味着在启动项目时并不需要进行启动电话。在早期，我会使用一个包含一系列先决条件的电子邮件模板，根据具体项目进行调整，并尽快发送出去 - 完成工作。然而，虽然 30-60 分钟的电话听起来可能不是时间的有效利用，但这种互动可以改善您与客户的关系，并使他们更愿意接受您可能提出的任何建议，或者在评估不顺利时更加理性。</p><p>这难道不能是面对面的会议吗？当然可以。下面解释的大部分内容也同样适用于那种情况。然而，根据我的经验，如今电话会议更有可能发生，尤其是在进行任何前期评估对齐时。因此，我将从电话会议的角度解释启动会议。</p><p>让我们来看看典型的渗透测试启动电话可能涵盖的内容。</p><h3 id="议程项目"><a href="#议程项目" class="headerlink" title="议程项目"></a>议程项目</h3><p>在我们开始通话之前，简单提一下。如果客户发送了一个没有议程项目的电话邀请，我的建议是询问通话将涵盖什么内容（我建议您对任何模糊的电话都这样做）。</p><p>这将使您能够：</p><ul><li>准备您可能需要在通话中谈论的任何相关信息（或在通话结束后立即准备好发送）。</li><li>查看议程，看看是否有遗漏的内容（当然，您可以在电子邮件中发送您的议程项目给组织者）。</li><li>审查议程，看看你的一方在与会人员名单上是否有所有正确的人员。</li></ul><p>显而易见，我是一个非常预见性的人；我总是预料最糟糕的情况。以这种方式运作，我节省了大量时间。在两小时电话会议之前知道需要讨论的内容，然后在15分钟内迅速解决问题，为每个人节省时间，这种感觉无与伦比。相反，毫无准备地参加电话会议，不知道该说什么，或者只能说“我们会回复您”，这种情况最糟糕。毫无准备通常会给你带来更大的困扰，因为你更有可能不得不花额外的时间找到意外问题的答案。</p><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>正如标题所示，首要任务是介绍所有与会者，确保每个人都熟悉彼此，假设正确的人在电话会议上，而不是每个人都曾见过面。当轮到你自己时，我建议你尽可能简洁地介绍自己。这里有一个“读房间”的要素 - 如果电话会议中有一些参与方在介绍他们的角色和经验时多加背景信息，你也应该这样做。如果这是你第一次与客户面对面会面，可以简要介绍一下你是谁，你做什么，并用一些表达能力和专业性的安慰话语。这可以帮助客户放心，如果他们对测试的潜在结果有些紧张，或者担心你会把你所看到的内容带到线下。</p><p>在议程繁忙、时间紧迫且与会人员众多的电话会议中，介绍越简短越好。最好一次性介绍整个团队。尽快进入关键议程事项，效果会更好。我曾在有与会人员想要分享整个就业历史的电话会议上浪费了15分钟。这可能很有见地，但对于实现会议目标并不十分有帮助。</p><p>当人们互相介绍时，值得注意谁是谁以及他们的角色是什么。就我个人而言，我很难同时注意力集中并做到这一点，所以如果您团队中有多名成员参加电话会议，请让某人在您讲话时做笔记，反之亦然。</p><p>介绍还可能涉及一些议程事项，这些事项可能是以下内容，以及任何特定评估的内容（这里我无法详细说明）：</p><ul><li>介绍</li><li>范围概述</li><li>评估先决条件</li><li>问题</li></ul><h3 id="目标和范围"><a href="#目标和范围" class="headerlink" title="目标和范围"></a>目标和范围</h3><p>现在谈话可能会转向评估本身以及您将要关注的内容。在这一点上，值得问一下问题“评估的目标应该是什么？除了测试 X 之外，我们还应该考虑什么？”这可能会带出一些客户想要的额外信息，并在执行评估和编制报告时做好记录。</p><p>这是一个很好的例子，您可以问一个简单的问题（尽管可能会得到复杂的答案），并获得有用的信息和背景，以便为客户提供更多价值。例如，他们可能特别关注他们应用程序的关键领域 - 您可以确保仔细审查这些领域，并甚至在报告的某一部分单独提出它们。</p><p>一旦目标达成一致（如果需要），对实现目标所需查看的内容进行一次详细的审查是个好主意。在许多情况下，目标可能很简单，比如“我们想了解我们的网络应用程序可能有多安全”，这意味着范围是测试网络应用程序。然而，由特定要求驱动的目标，或者客户希望得到特定问题的答案的情况下，可能需要略微调整范围以实现目标。例如，尽管网络应用程序在范围内，但客户可能会表明“我们希望确保客户提交的数据的端到端流程是安全的”。当我们考虑“端到端”可能是什么时，它可能是数据从客户端浏览器离开并到达后端数据库。我们无法审查他们的网络应用程序与内部数据库之间的连接 - 这是我们应该提出并讨论的问题。范围可能需要调整，或者我们以不同的方式进行参与，以获得这些答案并在报告中提供反馈。</p><p>如果我们觉得讨论中出现的任何额外内容需要更多的时间和资源，我们应该说我们将在内部讨论是否我们能够在这次评估中涵盖这一点，和&#x2F;或者我们是否需要调整工作声明&#x2F;范围来执行它。在没有理解对评估完成能力的影响或者在没有与销售工作的客户经理讨论的情况下，在电话中不要承诺进行重大范围更改（如果适用于您）。</p><h3 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h3><p>您可能已经在电子邮件中概述了您的先决条件，但值得检查一下它们，看看是否会出现任何问题。可能有一些只是问题（例如，“您是否有可以分享用于此 Web API 的 Postman 项目？”），并且在电话中快速获得一些答案可以迅速解决这些情况或提出更多问题，这些问题可以在电话中快速处理。</p><h3 id="额外问题"><a href="#额外问题" class="headerlink" title="额外问题"></a>额外问题</h3><p>在电话中，我不会是唯一一个感到不确定或可能误解的人，并且自信问题会在适当的时候解决，但最终并没有。我学会了，即使你觉得这可能让你在电话中显得无知或不确定，及时解决任何模糊不清的问题是更好的。</p><p>如果你有问题或想确认某事，请在你使用的任何会议软件中举起虚拟手（或者如果你在会议室里，则举起实际手）并提问。如果这是你觉得应该知道或从这次会议中理解的内容，请以“所以只是为了确认…”或“只是为了核实我的理解是否正确…”开始。</p><p>最好在会议结束时完全明确地离开，而不是感觉不确定自己需要做什么或者是否存在疑虑。同样，如果你能提前了解并完全理解对你的期望，这应该会转化为更好的自我评估和客户评估，以及更符合评估期望目标的高质量报告。</p><h3 id="与客户建立融洽关系"><a href="#与客户建立融洽关系" class="headerlink" title="与客户建立融洽关系"></a>与客户建立融洽关系</h3><p>进行启动电话的一个很好的理由是与你正在进行测试的团队建立关系。评估通常是短暂的，也许你觉得在专业层面上与人建立关系并没有价值，因为也许你再也不会与他们交谈。然而，他们和你一样都是人类，以一种不是通过电子邮件文字交流的方式与他们互动，会让你更有可能得到他们的帮助。</p><p>提高与他们关系的一种方法是让他们看到，你不只是键盘另一端的机器人，而是一个友好的人类。客户多次建议我打开摄像头，我可以说，这确实改善了我与他们团队的关系，特别是在与许多利益相关者和员工合作的长期项目中。此外，由于你是可见的，你在通话中更不容易分心，因为如果你不专心听电话、查看手机或电子邮件，或者做其他事情，那将更加明显。这显然意味着你会比以前更多地从通话中获益。让你的客户把一个面孔和名字联系起来！</p><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们讨论了与客户进行初次电话（或会议）的重要性，以为成功的评估奠定基础。这些对于明确测试范围、建立沟通渠道和与客户建立融洽关系非常重要。准备清晰的议程、讨论目标和范围、审查先决条件以及澄清任何问题是这些会议的基本组成部分。如果有效地完成了这些内容，它们将简化评估的开始，并确保与客户的沟通得到适当建立。</p><h1 id="4-启动会议-技术启动"><a href="#4-启动会议-技术启动" class="headerlink" title="4-启动会议 - 技术启动"></a>4-启动会议 - 技术启动</h1><p>作为测试人员，您将在一年的时间内执行许多评估，并且在每个评估中只有有限的时间来弄清楚事物的功能并进行测试。对于一些评估来说，这可能没问题——例如简单的构建审查。对于任何定制或更复杂的事物，您可能无法在一到两周的时间内学会其工作原理。也许您会在评估的最后阶段弄清楚，但在那时是否已经太迟，无法将所学到的知识应用到实践中，发现只有在您完全理解后才能发现的错误或问题？也许。您经常听说人们在测试的最后几个小时发现了重大问题，也许这就是一个例子，也可能不是。</p><p>近年来我观察到的是，利用客户对自己产品&#x2F;环境等的了解是非常宝贵的，如果他们愿意分享，你应该能够通过提出正确的问题来增加你的报告内容和质量。基本上，我们试图在评估之前或评估开始时尽可能多地获得理解，而不是在评估过程中慢慢学习。因此，为了获取这些信息，我们可以与客户组织更深入的通话（或者如果有意义的话，延长标准通话时间）。</p><p>除了对我们正在审查的内容如何运作的一般理解之外，我们还希望了解更多的背景信息，这将帮助我们理解发现的任何问题的影响。如果我们利用这一发现并利用我们获得的访问权限进行进一步攻击，可能会发生最糟糕的情况是什么？</p><p>本节内容将对以下事项最有用：</p><ul><li>代码审查评估</li><li>Web 应用程序评估</li><li>Web API 评估</li><li>基础设施评估</li><li>对生存在更广泛生态系统中的特定组件或服务的审查</li></ul><p>在并购工作期间，我们会为下一节中概述的内容安排单独的专门电话。这主要是因为我们会深入研究这些领域。对于更“标准”的工作可能不需要这样做，所以我不会在这里详细介绍。我要说的是，对这些领域有基本的了解将有助于更全面地了解应用程序，但更重要的是，能够描述您在评估过程中遇到的漏洞的影响。</p><h2 id="通话之前"><a href="#通话之前" class="headerlink" title="通话之前"></a>通话之前</h2><p>如果可能的话，在这种启动电话之前进行一些研究是值得的。这可能是对您已经拥有的任何资产或公开可用信息的审查。您可以利用这些信息编制一个问题清单，在这次通话中可能会问客户的问题。</p><p>在开始参与之前进行研究的关键原因是：</p><ul><li>确保在开始测试之前您对应用程序有基本的了解 - 这将有助于将客户提供的任何额外解释牢固地记在脑海中。</li><li>允许您在启动期间提出更明智的问题，因为您不需要问基本问题（您应该对您将要查看的内容有基本的了解）</li></ul><p>下面提到的内容仅供参考，可能并不适用于所有情况。在进行任何测试之前，您可能还有其他事项需要研究，这些只是我作为测试人员时注意到的常见事项。此外，您可能无法访问以下内容中的大部分或任何内容，除了客户网站 - 没关系，您可能可以在通话期间获取这些额外信息。</p><p> <strong>客户网站</strong></p><p>查看公司网站，了解业务内容。</p><p>他们提供哪些产品 - 你正在审查其中的哪些产品？</p><ul><li>他们做什么？</li><li>你能弄清楚他们可能处理的数据类型或使用它的用户类型吗？</li></ul><p><strong>可用文档网站</strong></p><p>组织是否有任何公开可用的客户文档？</p><ul><li>安装指南</li><li>安全加固指南</li><li>教程</li><li>维基</li></ul><p> <strong>目标网络应用程序</strong></p><p>如果您正在进行网络应用程序评估，请查看您正在评估的内容，并查看您是否可以了解应用程序的功能。是否有任何有趣的流程，您可能想进一步提出问题？</p><p> <strong>代码资产</strong></p><p>如果您可以访问代码，请检查您所获得的内容 - 是否有任何遗漏的部分您想要询问？（例如，缺少内部依赖项或 DevOps 代码）。</p><p>查看正在使用的语言，并检查依赖项，以查看可能使用的主要代码框架。</p><h2 id="通话之前-议程"><a href="#通话之前-议程" class="headerlink" title="通话之前 - 议程"></a>通话之前 - 议程</h2><p>在通话之前，值得先制定一个更详细的议程。这应该涵盖你可能发现的任何有趣的事情，你想谈论的内容，以及下一部分的一些问题和话题。</p><p>我们应该帮助我们的客户帮助我们，提前给他们提供我们想在通话中获取的所有信息，以便让他们有时间准备，并使启动通话尽可能有价值。</p><h2 id="上下文，上下文，上下文"><a href="#上下文，上下文，上下文" class="headerlink" title="上下文，上下文，上下文"></a>上下文，上下文，上下文</h2><p>本课程中最重要的话题之一是上下文。多年来我看过的许多渗透测试报告在这方面严重不足。当提出安全发现时，它们通常没有解释安全发现的更广泛影响和背景。对许多组织来说，这是至关重要的，因为这将帮助他们充分了解您发现的风险，同时帮助他们制定解决方案的计划。如果他们不了解安全发现的真正后果，那么很可能无法正确地将其列入任务列表或风险登记。</p><p>为了了解安全发现的更广泛影响，我们需要了解我们正在审查的内容不仅是如何工作的，还有：</p><ul><li>您正在审查什么以及它的作用是什么？</li><li>解决方案处理或访问哪些类型的数据？</li><li>解决方案部署在哪里？（例如：本地&#x2F;云供应商和地区）</li><li>解决方案由哪些组件组成？（服务、软件、其他）</li><li>有多少以及什么类型的用户使用该平台？</li><li>如果您正在审查更广泛系统的一个小组件，请问这些问题。</li></ul><p>我们将在接下来的部分中涵盖这些领域，但了解这些信息可以让我们在查找描述和可能的后果时更加详细。</p><p>考虑到我们在保存患者医疗数据的 Web 应用程序中发现了 SQL 注入。一些描述可能会是：</p><blockquote><p>预约搜索功能存在 SQL 注入漏洞。因此，可能会访问底层数据库，并访问整个应用程序存储的所有患者数据。</p></blockquote><p>作为问题描述，这个故事还有更多内容，我们可能会包含更多内容来突出漏洞的更广泛影响。例如：</p><blockquote><p>预约搜索功能存在SQL注入漏洞。由于这个漏洞，可能会访问底层数据库并获取整个应用程序中存储的所有患者数据，包括医疗历史和哈希用户密码。如果利用并公开此问题，很可能导致HIPAA合规性失败和重大声誉损失。此外，由于哈希密码已被发现，攻击者很可能会尝试恢复明文密码，并将其用于针对客户使用的其他面向互联网服务的密码猜测攻击。考虑到该应用程序为超过10万名客户存储数据，这个漏洞不仅在受影响患者数量方面具有重要意义，而且对该产品以外的用户产生广泛影响。</p></blockquote><p>在上面更新的示例中，我们扩展了最坏情况下可能发生的可能性。您会看到，我们包含了额外的背景信息，比如潜在的 HIPAA 合规性失败和风险数据的范围。此外，我们概述了一个可行的攻击场景，以展示恶意行为者可能如何使用他们获取的数据。这里还有更多可以解释的内容，但我们希望避免过度。这是一个示例，展示了在最坏情况下可能发生的情况，我们鼓励客户在审阅我们的报告时考虑这一点。</p><p>值得注意的是，其中一些影响可能已记录在报告的其他地方。我们将在下一课中讨论为什么您应该在问题中包含这些额外的背景信息。</p><h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>如果您正在评估具有前端的某些内容，最好获得演示。这在当今主要适用于 Web 应用程序，但也适用于其他 GUI 类型的评估（例如，厚客户端或桌面应用程序评估）。其他任何演示仍然可以起作用，但它们可能更具技术性（“这是您如何使用此 API”或“这是此自定义驱动程序如何与此服务通信以执行此操作”）。我将在这里坚持使用 Web 应用程序示例，但其中的大部分内容仍将以某种方式适用于大多数解决方案和服务。</p><p>请求对您正在评估的内容以及其功能进行基本概述。要求客户展示解决方案的关键用途以及将使用解决方案的用户是谁。对于财务记账应用程序，这可能包括提交账户数据，运行月末或年末报告或上传费用报告。用户可能是财务团队。</p><p>这个练习应该帮助您熟悉您正在测试的内容，并在第一次独自查看时消除潜在的猜测工作。理想情况下，您还应该了解在评估过程中需要审查哪些复杂和关键流程。</p><h2 id="关键问题"><a href="#关键问题" class="headerlink" title="关键问题"></a>关键问题</h2><p>一些可能影响解决方案的最可怕的事情可能已经在客户的脑海中，我们在进入下一个话题之前可以问几个问题：</p><ul><li>您解决方案&#x2F;环境的“皇冠珠宝”是什么？您不希望攻击者获得访问权限或窃取什么？</li><li>你的解决方案中有什么让你担心到夜里睡不着觉的吗？你对某些已知或可能存在的事情有什么顾虑吗？</li><li>你认为你的应用程序中保存的最敏感的数据是什么？</li></ul><p>这些问题可以在通话开始或结束时提出。我经常用这类问题结束通话。选择权在你手中。</p><p>这些问题的答案可能有助于引导您了解有趣的功能、新的未经测试的功能，或者为您提供有用的洞察力，了解客户关注的重点问题。这些问题很好记录在报告中，并对其进行描述。这样可以为客户提供有用的反馈，让他们了解他们明显关注的领域，使报告更有价值。</p><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p>一旦我们对应用程序有了基本了解，就可以询问一些关于构成整体解决方案的组件的问题。</p><p>如果我们正在评估一个网络应用程序，通常它会有几个组件：</p><ul><li>Web 服务器 - 询问他们使用的 Web 服务器可能有助于缩小可能存在的特定漏洞或枚举范围，例如</li><li>数据库 - 知道正在使用的数据库可能会在测试 SQL 注入类型漏洞时节省猜测的工作，例如</li></ul><p>你应该询问他们是否有任何其他重要组件，以及他们是否托管这些组件，以及对他们的工作有一点了解。</p><p>如果客户有图表可以展示，这通常非常有用，尽管可能包含比我们在这个练习中想要的更多信息。如果解决方案中有一些移动部件，了解什么与什么通信是很重要的，图表通常是展示这一点的最佳方式。</p><p>根据评估情况，通过询问与组件之间的连接可能会有很好的机会获得一些简单的发现：</p><ul><li>连接是否加密？如果是，您能在通话后分享协议、密码和证书配置吗？</li><li>连接到此服务是否经过身份验证？使用了什么类型的身份验证？</li><li>此数据库中的数据是否在静止状态下加密？如果是，是在硬盘级别、数据库内的透明加密还是由应用程序本身加密？</li></ul><p>另一个有用的问题是租户。如果您正在测试一个将客户彼此分开的解决方案，您可以询问它们是如何分开的，然后尝试测试该分离。常见答案可能是：</p><ul><li>所有客户数据都在同一个数据库中，通过一个 client_id 字段进行分隔</li><li>每个客户的数据都在数据库中独立存储在他们自己的表中</li><li>所有客户在同一数据库服务器上拥有自己的数据库</li><li>所有客户拥有自己的数据库服务器</li><li>所有客户都有自己的 AWS 账户设置，并彼此隔离</li></ul><p>在电话中并不要求回答所有这些问题的答案，允许客户稍后跟进任何他们无法回答的具体问题。请务必记录下您请求的内容，这样您就知道在电话结束后需要追踪什么（如果需要的话）。还要记得记录那些面向互联网的组件。</p><p>显然，这只是一个典型的网络应用程序的例子，有多个用户在上面。然而，相同的思考和质疑可以应用于任何环境或应用程序：</p><ul><li>什么组件构成了解决方案？</li><li>他们如何彼此沟通（以及这如何确保安全）</li><li>系统中流经的数据是什么，它是如何存储的？（以及它是否安全存储）</li><li>谁在使用这个系统？（这可能是实际客户，甚至是服务器上的内部用户）</li></ul><h2 id="实施"><a href="#实施" class="headerlink" title="实施"></a>实施</h2><p>如果您正在审查的解决方案是由客户构建的，或者是由其他人为他们构建的，但他们可以对此进行解释，您可以提出一些聪明的问题，这些问题的答案将帮助您专注于评估。这并不适用于所有评估，因此请根据自己的判断力来判断是否适用。</p><p>这里有一些您可以问客户的问题：</p><ul><li>你用什么代码框架构建了你的解决方案？</li><li>你知道你正在运行的框架版本吗？（或主要版本）</li><li>除了这个框架，你是否在解决方案的任何部分使用了其他重要的第三方库？</li></ul><p>在 Web 应用程序审查上下文中，这些问题将适用于解决方案的后端和前端。</p><p>询问这些问题应该让您能够通过以下方式集中您的评估：</p><ul><li>查找正在使用的代码框架以检查：<ul><li>最常见的安全问题是什么</li><li>框架存在哪些加固指南，并查看是否已遵循</li><li>哪些常见漏洞影响了框架</li></ul></li><li>检查他们是否正在运行过时版本的框架，并查看是否：<ul><li>包含可以被利用的任何安全问题</li><li>框架的新版本是否包含安全增强功能</li></ul></li><li>检查额外的第三方库，看看是否：<ul><li>它们是否也有可以审查的加固指南</li><li>是否存在针对这些服务的常见漏洞利用</li></ul></li></ul><p>你显然可以深入研究这里。如果你正在进行代码审查评估或对解决方案进行深入审查，你需要这样做。然而，在这里的目标是帮助测试你被指定要做的事情，而不要偏离范围太远。在上面的例子中，我们正在讨论一个 Web 应用程序。因此，我们正在提出一些问题，这些问题可以帮助我们集中精力进行评估，并为我们提供一些更有可能产生结果的检查项目。然而，这种方法可以用于客户自己编写的任何内容，并且不需要适用于 Web 应用程序。</p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>通常值得知道解决方案部署在哪里。这有几个原因是有用的。</p><p>首先，如果解决方案部署到云环境中，可能存在一些特定于云的漏洞，如果您能够识别应用程序中的某个发现，这些漏洞可能会被利用。与 AWS EC2 元数据服务结合使用的服务器端请求伪造就是一个很好的例子（我会让您审查这些问题的危险组合）。</p><p>其次，如果应用程序与其他产品、服务或系统一起部署，您可能可以谈论重大违规事件的潜在影响范围。例如，如果一个组织将他们的 Web 应用程序部署在与他们的数据备份网络范围相同的网络上，如果攻击者进入内部，他们可能会对备份执行一些恶意操作 - 勒索软件、窃取或删除数据，或者可能是这三者的组合。</p><p>最后，解决方案部署到的地区或国家可能值得注意。数据隐私是当今的热门话题，某些国家规定其公民数据应存储在何处。例如，值得知道的是，如果您发现欧盟客户数据存储在美国服务器上，但它们似乎不符合 GDPR 标准。</p><h2 id="通话录音"><a href="#通话录音" class="headerlink" title="通话录音"></a>通话录音</h2><p>如果这些通话进行得像你希望的那样顺利，将会讨论和分享很多信息。如果可以并且允许的话，你应该在开始之前询问是否可以录制这个会话。这样可以让你在以后参考任何内容。</p><h2 id="记笔记"><a href="#记笔记" class="headerlink" title="记笔记"></a>记笔记</h2><p>如果您无法记录通话，则需要在通话过程中做笔记。我建议您无论通话是否录音，都应该尝试做笔记，尽管这可能会影响您在做笔记时的倾听和理解能力。除非必须，否则您真的不想不得不回去听录音，因为这可能会耗费大量时间。</p><p>在过去我发现成功的做法是，当我们团队中有多人参与工作时，我们会分工为发言人和记录员。这样可以让每个人都完全专注于手头的任务。另一个好主意是要么手边有议程的副本，要么有一个您将在通话中运行的脚本。发言人可以在提问时查看这个内容，而记录员可以有一个单独的副本，他们在其中创建笔记。通过使用 Office 365 或 Google Workspace 等共享平台，使双方能够同时访问文档，这可以进一步增强发言人和记录员在通话过程中无缝切换角色的能力。</p><p>如果客户展示任何幻灯片、图表或文档，请始终截图并保存在您的笔记中。此外，如果您认为可能需要它们，请在通话期间和通话结束后（通过电子邮件）请求副本。</p><h2 id="反驳"><a href="#反驳" class="headerlink" title="反驳"></a>反驳</h2><p>我看到客户对这样的通话或通话内容的某些部分提出了反驳：</p><ul><li>我们实在没有时间来适应这样的电话，你不能在没有这些信息的情况下继续测试吗？</li><li>你是一个黑客，难道你不能自己找出这些信息吗？</li><li>我们不想与你分享这些信息。</li><li>这不在范围内。</li><li>等等。</li></ul><p>除了解释你想谈论这些内容的原因是为了确保：，你无法做太多事情。</p><ul><li>测试尽可能高效</li><li>我们了解应用程序的工作原理以及关键数据流</li><li>我们就关键安全问题以及应用程序持有的数据达成一致</li><li>我们了解一些关于架构、实现和部署的知识，以便将我们的测试定制到您的特定应用程序&#x2F;解决方案</li></ul><p>如果他们愿意，您可以要求他们通过电子邮件提供有关上述信息，但在这些情况下，有时您必须知道何时帮助客户的努力没有取得成效，最好不要惹恼他们，以至于他们变得不再乐意提供帮助。</p><p>在某些评估中，这些信息对于项目的成功至关重要，如果遇到阻力，您应该在内部升级，以查看如何获取这些信息。</p><h2 id="通话结束后"><a href="#通话结束后" class="headerlink" title="通话结束后"></a>通话结束后</h2><p>一旦启动通话结束，值得浏览您的笔记并立即给与会者发送电子邮件：</p><ul><li>显然，感谢他们在通话中的时间和贡献</li><li>温习一下范围的理解以及你将要关注的内容，以及客户的关键关注点<ul><li>这让他们有机会纠正任何你误解的地方</li></ul></li><li>为你突出行动项目并设定截止日期</li><li>从中突出行动项目并在其上设置截止日期<ul><li>这些可能是对未完成先决条件的访问（我们在本课程中早些时候提到的内容）</li><li>回答未解答的问题，确保列出这些问题</li><li>文件或其他有用信息的交付</li></ul></li></ul><p>发送此电子邮件是为了保护我们，如果电话中达成的协议未得到履行。如果客户没有跟进，我们有书面记录。如果他们不争议或更正，我们就不会有错。很遗憾需要这样的策略，但它们确实有助于保护我们，如果我们的测试受到上述任何未完成的事项的影响，而这不是我们的错。</p><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><p>在这节课中，我们讨论了利用客户来增强安全评估效果的重要性。考虑到每次评估的时间有限，了解系统或应用程序尽早至关重要。技术启动会议允许深入了解客户对其产品或环境的了解，显著提高安全报告的质量和内容。在会议之前，进行初步研究准备详细议程以便进行知情讨论是很重要的。议题应包括架构、部署和关键安全问题。这种积极主动的方法有助于避免仅在评估期末才完全了解复杂系统的常见问题，从而更有效地识别漏洞，并为客户提供更清晰的安全发现理解，以便优先进行修复。</p><h1 id="5-启动会议-练习"><a href="#5-启动会议-练习" class="headerlink" title="5-启动会议 - 练习"></a>5-启动会议 - 练习</h1><p>在上一课中，我们讨论了一次典型的评估启动电话，但也讨论了另一种旨在收集更多信息和背景的版本，以便了解我们正在评估的内容。</p><p> <strong>反思练习</strong></p><p>想想过去进行的评估以及结果报告。您认为在开始时要求更多信息会对您有所裨益吗？如果是，为什么？</p><p> <strong>一般练习</strong></p><p>对于您可能执行的每种类型的评估（Web 应用程序评估、基础设施评估、构建审查等），编写一个关键领域的议程模板（可能是上一课中的标题），以及您想要提出的任何问题。</p><p>如果您计划进行更具技术性的启动电话，请使用上一课程来补充这些问题。</p><p><strong>超越练习</strong></p><p>选择三个随机组织，并假装您即将测试其中一个产品或服务。使用免费提供的和合法获取的在线数据来获取背景信息（显然不要在这里开始攻击它们，我们谈论的是浏览它们的网站），创建涵盖以下内容的笔记：</p><ul><li>用户使用平台的内容</li><li>平台持有的数据</li><li>可能影响平台的任何监管合规性</li><li>平台是否与第三方通信</li><li>可能会让您更深入了解应用程序的工作方式以及创建方式的问题。</li><li>旨在根据您所学到的内容确认您对平台理解的问题。</li></ul><h1 id="客户报告消耗"><a href="#客户报告消耗" class="headerlink" title="客户报告消耗"></a>客户报告消耗</h1><p>正如之前提到的，过去几年我参与的项目总共发现了数万个问题。我们的一个大客户需要调整他们的工作方式，以便更容易地在一个大团队中看到问题，以便有效地进行分类。这意味着我们会将发现的问题独立上传到一个不同的平台，各个团队可以在那里协作分类和提出解决问题的方案。完整的报告也会在稍后分享。</p><p>我们发现，当我们转向这种运作方式时，可能会在执行摘要中涵盖的更广泛影响的信息（以及战略建议中的预防性建议），在发现文本中缺失。这意味着与客户一起审查发现的分流电话有时会很痛苦。因为我们经常被问到诸如“如果攻击者利用这个，他们能做什么？”这样的问题，这使得我们清楚地意识到，我们的发现并未包含足够的信息供我们的客户理解。此外，这些电话通常会在评估结束后的一段时间进行，测试人员会难以记住发现的具体情况。这使得我们难以提供关于安全发现的全面影响的信息，超出了利用的直接效果。由于所有这些原因，我们经常发现我们必须离开并找出分流电话中的任何问题的答案，这极其随机，并影响了我们随后正在进行的项目。</p><p>这是我推动我们更详细地撰写发现结果的主要原因之一 - 确保发现结果中有更多的上下文和影响，但也有更完整的建议。这确保了可以单独处理发现结果，并且分级所需的所有信息都在。</p><p>一旦发现结果被更彻底地写出并考虑到了给定漏洞的更广泛影响，就不再需要分级调用。这表明接收方理解了发现结果，并且它们包含了分级和修复发现结果所需的一切。</p><p>在后面的章节中，我们将提供更多关于在这种情况下需要包含哪些具体信息的信息，但你可能会问：“为什么要提这个？这不是我们的操作方式”。我提出这个问题是因为我看到了这种行为的增加，即将发现的问题转移到票务系统中，无论我们是否知道。一个例子是当我被分配去执行我们在网络应用评估中发现的问题的补救验证。客户没有标记上一个报告，而是给了我们他们的 JIRA 实例的访问权限，以在那里更新&#x2F;关闭发现的问题。我相信这些并非孤立的案例。</p><p>因此，理解你的客户如何消化你的报告和发现可能会有所帮助。这样，如果他们要作为单独的项目来补救，你可以在你的发现中包含更多的信息。</p><p>你可能想要在你的发现报告中更具描述性的其他原因。在较大的报告中，如果你只在执行摘要中总结影响（因为这将是许多发现的全部总结），特定漏洞的影响可能会丢失。报告的战略建议部分可能会出现的任何预防性建议也是如此。许多发现将有细微的修复指导，如果只存在这些的总结，它可能会遗漏出最好与它们提出的发现保持一致的重要细节。</p><p>你可能在想，客户没有阅读完整报告，只是单独审查发现并不理想。我同意，我们应该敦促客户阅读完整报告，并解释其中包含的其他详细信息。但是当我记得我们的使命是帮助我们的客户时，我们应该考虑在可行的情况下调整我们自己的工作流程以匹配他们的工作流程。</p><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><p>那么这里的要点是什么呢？理解您的客户如何消费并行动您的评估结果是很重要的。如果他们的团队很小，他们可能只是阅读报告并开始修复发现的问题，也许他们可能会做一些我上面描述的事情，或者他们可能会做一些完全不同的事情。无论他们在做什么，您可能有办法调整您的交付成果，使您的客户更容易处理您的评估结果，所以请主动联系他们，询问您是否可以这样做。</p><p>从这些课程中应该反思的关键要点是，我的客户如何回应我们增强的发现报告。这向我们展示了，通过增加更多信息来改进我们的报告，不仅增加了价值，而且使它们更易于用于创建补救计划。因此，我认为，将这些额外信息添加到发现报告中，不应仅限于这个特定的案例，而应扩展到所有的客户和报告。在即将到来的课程中，我们将探讨如何有效地在我们的发现中包含详细的描述和建议，以包含这些额外的信息。</p><h1 id="7-客户报告消耗-练习"><a href="#7-客户报告消耗-练习" class="headerlink" title="7-客户报告消耗 - 练习"></a>7-客户报告消耗 - 练习</h1><p>根据我的经验，编写更详尽的问题明显优于依赖于高级别影响的描述或者战略建议。</p><p>另外，与客户交谈以了解他们将如何使用你的评估结果，以及你可能能够做出哪些改变以使客户的生活更轻松，这可能很重要。</p><p>这里有一些相关的练习。</p><p> <strong>反思练习</strong></p><ul><li>反思你最近写的或可以接触到的一份报告。考虑一下，如果没有额外的解释，对于不熟悉这个项目的人来说，这些发现是否足够详细，以便他们理解其含义和需要采取的行动。</li><li>你是否在评估中遇到过客户不理解你提出的发现，他们如果被利用可能会发生什么？这是因为你在问题中遗漏了上下文或影响，还是因为他们没有阅读报告的其他部分？</li><li>对于任何值得记忆的案例（并且适用于这个问题），你能否重新写出问题，以覆盖客户的问题？反思如何通过添加背景和影响可能改变客户的理解和反应。</li></ul><p> <strong>一般练习</strong></p><ul><li>审查你已经写过或可以访问的报告。找出一个发现，并尝试通过添加更多的背景和潜在影响来扩展它。比较原始版本和修订版本，以评估清晰度和实用性的改进。</li><li>你有没有遇到过可以调整你的报告格式或内容以帮助客户的情况？你本可以做什么？请用一个具体的例子来说明你如何能够调整你的报告方式以更好地满足客户的需求。</li></ul><p><strong>超越练习</strong></p><p>您见过客户将您的发现应用到哪些系统中？反思这些经验，并考虑您可能需要如何调整您的发现或报告风格，以适应未来的这些系统。</p><h1 id="8-报告受众"><a href="#8-报告受众" class="headerlink" title="8-报告受众"></a>8-报告受众</h1><p>报告的受众通常被分为以下利益相关者：</p><ul><li>执行摘要部分 - 应该能被非技术性的利益相关者阅读和理解，这些人可能负责已评估内容的战略方向，或者负责产品的安全</li><li>报告中的发现 - 对于管理层来说，应该既能理解上下文和影响，也应该包含足够的信息，使开发人员或工程师能有效地修复发现的问题。</li></ul><p>关于具体在哪里放什么，这个课程并没有涉及，但我想提的是，你可能需要考虑在执行总结中放入多少技术信息。在大多数情况下，你应该避免这样做，然而，如果你与利益相关者紧密合作，他们要么技术水平很高，要么更多地参与到已经评估的内容的实施中，描述某些漏洞的影响可能会更容易，也会对那些能理解技术细节的人产生更大的影响力。</p><p>在这个领域，我有很多经验，报告的上部分通常比通常的技术性更强。这是因为评估的要求与深入理解解决方案的技术层面有关。这需要进行总结，结果是报告开始的总结会比渗透测试报告的正常情况更深入一些。此外，报告的消费者通常是开发者本身，他们会理解并欣赏这些技术信息。</p><p>同样值得思考的是相反的情况。如果你在与客户交谈时，他们在阅读你报告的部分内容后提出了很多问题，这是否意味着你的报告过于技术化？如果你从非技术性的利益相关者那里收到像“什么是双向 TLS 认证？”或“什么是透明数据库加密”这样的问题，而这些问题在执行摘要中被提及，也许你需要减少技术信息的数量。</p><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><p>下次你在与常客进行评估时，问问自己是否可以并且应该改变你的报告风格，使交付物更具吸引力。如果你的做事方式有效，那么你不太可能需要改变你的做事方式。然而，如果有迹象表明客户可能需要在执行摘要中深入了解技术，那么考虑调整你的写作以满足他们的需求。</p><h1 id="9-报告受众-练习"><a href="#9-报告受众-练习" class="headerlink" title="9-报告受众 - 练习"></a>9-报告受众 - 练习</h1><p>在上一课中，我们讨论了报告的利益相关者，以及我们如何调整报告的撰写方式以适应更多（或更少）的技术客户。</p><p> 这里有一些练习。</p><p> <strong>反思练习</strong></p><ul><li>反思你写过的或可以获取的一份报告。考虑它的目标受众。执行摘要中的技术细节是否适合他们的理解水平？它是否可以为目标受众写得不同？如何做到？</li><li>想想有没有一次，客户的反馈显示他们对报告内容的理解不足。报告是否可以进行调整以更好地满足他们的需求？应该改变什么？</li></ul><p> <strong>一般练习</strong></p><ul><li>研究一种知名的，高调的，漏洞。为非技术人员和技术人员各写一份执行摘要。比较你在每一份中如何呈现技术细节和影响。</li><li>审查一份你可以获取的技术报告。找出使用技术语言的部分，并重写它们，使其对非技术人员易于理解，同时不失去研究结果的本质。</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>报告编写的艺术-0 简介</title>
    <link href="/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-0%20%E7%AE%80%E4%BB%8B/"/>
    <url>/2024/05/09/%E6%8A%A5%E5%91%8A%E7%BC%96%E5%86%99%E7%9A%84%E8%89%BA%E6%9C%AF-0%20%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="0-whoami"><a href="#0-whoami" class="headerlink" title="0-whoami"></a>0-whoami</h1><p>你好！感谢您购买这门课程；我真诚地希望您会觉得它很有用，并且学到很多。我的名字是卢克，我是一名来自英国的网络安全顾问。</p><p>我认为给大家简要介绍一下我过去十年左右的工作经历会很有益，这样可以为我创建这门课程提供一些背景（也许还有一些可信度）。</p><p>我于 2013 年 12 月正式开始我的职业生涯，当时刚刚完成 Offensive Security 的 PWB 课程（Pentesting with Backtrack，现在是 PWK&#x2F;PEN-200，Pentesting with Kali）并通过了 OSCP 考试（Offensive Security Certified Professional）。我很快被指派参与一项并购交易。这些工作通常非常独特和具有挑战性——我们的任务目标是代表买家对一个组织&#x2F;产品&#x2F;服务进行全面的安全审查，并告知他们潜在即将收购的安全风险。</p><p>审查结果可能会以多种方式影响收购：</p><ul><li>如果发现了灾难性的事情（例如，过去或现在的安全漏洞证据），这可能会阻止交易进行。</li><li>如果解决方案存在系统性安全漏洞，修复它们的成本可能会使交易变得不可行。</li><li>报告结果将被纳入商业协议中，以确定在交易完成之前需要进行补救的领域。</li></ul><p>在典型的合作中，顾问进行评估，将发现整理成报告，并直接传递给客户。客户可以详细审查报告，并与内部知识进行交叉检查，以对其进行情境化和识别不准确之处，然后可以与顾问讨论，顾问随后制作最终修订报告。</p><p>在并购中，这并不总是可能的。 报告被传递给买方，他们可能并不总是能够理解安全发现的全部后果，除非报告清楚地标识它们； 买方在组织背景下可能无法获得与顾问在审查期间拥有的系统、员工或内部信息相同级别的访问权限（尤其是对于最深入的技术尽职调查评估）。此外，作为网络安全顾问，我们被视为专家，有责任向那些不太可能有背景深入探究报告之外内容的关键决策者清晰传达技术发现。</p><p>出于这些原因，我们有责任超越可能被视为“标准”报告实践，确保任何发现都以足够的背景和分析表达，以向无法提供信息的读者传达安全风险和影响。</p><p>那么我为什么要告诉你所有这些呢？</p><p>在我之前的雇主工作的最后五年里，我是一些最复杂（可能也是最冗长）的网络安全工作的技术负责人… 我的主要职责之一是审查团队生成的每一份报告和发现（数量实际上达到了成千上万），确保客户收到高质量的交付成果，为评估和收购的网络安全方面提供信心。随着时间的推移，我观察到报告撰写质量对这类项目的重要性有多么关键，与“标准”的渗透测试工作相比，这些文档对最终客户来说更有价值。在这个角色中，我经常看到我们正在审查的组织的第三方报告，这些报告很少谈到漏洞利用的全部后果，除了“显而易见”的（对于安全专业人员来说）。</p><p>在我制定并购评估报告的质量标准时，我意识到相同的细节、背景和分析水平对所有评估都是有价值的；当我与客户一起处理我们在报告中发现的各种问题时，这一点变得更加明显。客户经常就报告中的发现询问更多细节：</p><ul><li>如果利用这个漏洞会有什么后果？还有什么可能会受到威胁，攻击者可能会寻求造成什么进一步的损害？</li><li>这个漏洞可以访问哪些具体数据？</li><li>哪些用户会受到攻击的影响？</li></ul><p>这些问题本可以通过在报告中包含额外的背景信息来避免，确保清晰地传达安全发现的后果，不仅对客户有帮助，而且对客户内部提出问题与关键利益相关者进行沟通也是有益的。能够将报告传递给客户，然后客户可以轻松地以这种方式传达安全发现的后果，这样更有价值。</p><p>在这门课程中，我将努力分享我在与客户合作并了解他们需求时所学到的知识，并分享所有可能提高报告质量和增加交付价值给客户的地方。</p><h1 id="1-课程简介"><a href="#1-课程简介" class="headerlink" title="1-课程简介"></a>1-课程简介</h1><p>如前所述，该课程的目标是提高您的报告质量和彻底性。这应该会为您和您的组织带来许多好处：</p><ul><li>客户（或如果您是内部测试人员，则是内部利益相关者）从您的报告中获得更多价值。</li><li>随着您的报告提供更多背景信息，需要跟进电话或电子邮件的需求显著减少，帮助客户理解安全发现的更广泛影响。</li><li>负责执行测试以检查问题是否已得到解决（解决验证&#x2F;重新测试）的同事将感谢报告包含他们所需的一切，确保在测试过程中没有任何歧义。</li><li>您的报告读者将会印象深刻，并努力学习您出色的报告撰写能力！</li></ul><p>本课程已被分解为以下章节：</p><ul><li>客户沟通 - 我们如何利用客户的测试要求和知识来改进我们的评估和报告交付物？</li><li>写作风格 - 我们的文本应该如何阅读，我们可以做些什么来确保我们所写的内容易于理解且没有常见的写作问题？</li><li>报告内容 - 报告的典型结构是什么，每个部分应包含什么内容？</li><li>发现撰写 - 我们如何撰写安全发现，以便客户充分了解如果利用该发现会涉及哪些风险？我们如何确保客户有效地整改发现？</li><li>报告交付 - 我们如何安全地处理报告？</li><li>质量保证流程 - 什么是质量保证流程？我们如何准备以确保在整个流程中高效？</li><li>后评估反馈 - 我们如何向客户提供高水平的工作报告？我们如何处理我们的问题和报告中的负面或具有挑战性的反馈？</li><li>整改验证 - 这是什么，如何有效地进行？</li><li>报告生产力 - 当我们写报告时，我们可以做些什么来帮助我们更高效、更有生产力？</li><li>实践作业 - 一些实践性的“端到端”任务，用于查找写作和报告撰写。</li><li>人工智能 - 人工智能在报告撰写中的地位是什么？</li><li>超越课程 - 你接下来可以做什么，以及如何将你学到的知识应用到实践中？</li></ul><p>毕竟，这是一门课程，因此你会发现上面概述的大多数章节都包括让你回答的问题或让你完成的练习。<strong>报告写作既是一门艺术，也是一种技能，只有通过实践才能不断提高</strong>。我曾见过刚从大学毕业的学生加入我的项目，对报告写作几乎没有经验，但最终却以能与行业老手媲美的能力离开。这种转变并非一夜之间发生；它是在我们的审查过程中获得了大量反馈以及他们致力于改进的结果。通过努力工作，他们的报告质量得到了显著提高。我希望本课程提供的指导和实践机会能够紧密复现这一过程，从而加速你的报告写作技能的发展。</p><h1 id="2-课程注意事项"><a href="#2-课程注意事项" class="headerlink" title="2-课程注意事项"></a>2-课程注意事项</h1><p>这门课程将涵盖大量的报告和问题撰写要素，从基础内容、写作风格，一直到我在“whoami”部分提到的上下文改进。如果你是网络安全顾问或安全工程师，你的标准、流程和报告结构可能会以某种方式与我在这门课程中涵盖的内容有所不同 - 这是完全可以预料的。有许多不同的方式可以向客户呈现我们的评估结果，事实上，我们将在这门课程中讨论这些方式。我鼓励你抓住这个机会，看看在你的报告中哪些地方可以做出改进，甚至可以采纳这门课程的建议来改进你的组织报告。</p><p>我的背景来自一家渗透测试安全咨询公司，课程的大部分内容将以这种方式撰写，我将谈论与“客户”或“顾客”合作的经验。这对于作为内部安全团队一部分工作的人可能听起来似乎不适用。然而，我发现这种团队在审核内部应用程序或服务后生成报告资料是很常见的，因此这门课程也与您相关。您的“客户”只是您为其进行评估的业务领域。</p><p>如果您完全是信息安全方面的新手，您可能会发现一些主题或概念陌生。我会尽量保持低知识门槛，并在必要时提供清晰的解释。然而，由于这是一门自学课程，您可能需要进行一些研究才能充分理解特定的网络安全漏洞或概念。互联网是您的朋友！</p><p>课程的很大一部分是基于我对什么样的报告是好报告的看法。这些看法是通过与客户进行广泛互动而形成的。</p><ul><li>高级管理层客户，</li><li>内部安全团队，</li><li>寻求解决问题的开发&#x2F;工程团队。</li></ul><p>我的经验可能与我的许多行业同行不同，有可能有些人会对本课程中提出的某些概念或想法持不同意见。这没关系。我希望通过清晰地阐明我所教授的内容为何如此重要，你会被鼓励去考虑你自己的做法，并确定它们是否最适合你和你的组织。</p><p>请注意，本课程中所有漏洞和示例组织均为虚构，与真实组织的任何相似之处均属巧合。课程中提到了一些知名的第三方软件和服务提供商，但这仅是为了为示例增加背景，而非意在负面描绘这些组织。</p><p>还需要注意的是，本课程不是关于英语语言技能的深入教程。虽然我们将涵盖基础知识并包括特别与报告撰写相关的方面，但主要重点是报告的内容和结构。对于母语不是英语的人，将提供一些有用的技巧，但全面的英语语言培训超出了本课程的范围。</p><p>最后，我不对本课程中提供的建议可能带来的任何负面反馈负责。请记住，遵循我的建议完全是自愿的。重要的是，您自己决定应用什么，基于您认为对您、您的组织和您的客户最有效的内容。虽然我会解释为什么我认为某些方法是有效的，但您可能会发现您并不总是同意我的观点。</p><h1 id="3-报告介绍和课程学习方法"><a href="#3-报告介绍和课程学习方法" class="headerlink" title="3-报告介绍和课程学习方法"></a>3-报告介绍和课程学习方法</h1><p>在我们开始课程之前，我想介绍一下报告的基本内容以及在评估中的作用。我还会分享一些友好的指导，帮助您为即将到来的内容做好准备。</p><h2 id="报告简介"><a href="#报告简介" class="headerlink" title="报告简介"></a>报告简介</h2><h3 id="什么是渗透测试报告？"><a href="#什么是渗透测试报告？" class="headerlink" title="什么是渗透测试报告？"></a>什么是渗透测试报告？</h3><p>渗透测试报告是客户在渗透测试评估结束时收到的文件。通常包含发现的风险信息，以执行摘要和详细的发现列表的形式呈现。除了突出风险外，报告还向客户提供了一份建议清单，以纠正发现的问题并降低风险，以及战略建议，帮助加强整体安全性。</p><p>报告的结构、格式、语调和内容因供应商而异。本课程将重点关注大多数典型渗透测试报告中的所有关键内容。</p><h3 id="渗透测试评估的生命周期"><a href="#渗透测试评估的生命周期" class="headerlink" title="渗透测试评估的生命周期"></a>渗透测试评估的生命周期</h3><p>渗透测试，或称为 pentest，是针对产品、服务、网络或环境的模拟网络攻击，以检查可利用的漏洞。该过程涉及一系列关键步骤的正确执行，以确保进行彻底评估并生成高质量报告。</p><p>以下是渗透测试评估典型生命周期的高级概述，从初始接触到评估后的活动：</p><ol><li>初始联系：客户请求渗透测试供应商评估其组织的某个领域。</li><li>范围界定：供应商与客户合作，在明确评估细节后，制定工作声明（SoW）或提案。</li><li>承诺：一旦客户同意工作声明，测试团队便与客户接洽（假设他们不是同一批规划工作的人）。</li><li>团队介绍：测试团队与客户沟通，介绍自己并确认测试信息。</li><li>评估执行：进行评估，发现结果并撰写报告。</li><li>质量保证：报告通常在提交给客户之前会经过内部质量保证流程。</li><li>报告交付：客户收到报告。</li><li>反馈会议：可能会有一次后评估电话，用于讨论评估结果。</li><li>客户整改：客户解决报告中的一个或多个发现。</li><li>验证：客户要求供应商确认他们纠正的任何问题都已正确修复。</li></ol><p>本课程将涵盖评估生命周期高层视图中步骤 3 到 10，模拟刚收到工作声明并获准与客户互动的测试人员的角色。</p><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="如何对待本课程"><a href="#如何对待本课程" class="headerlink" title="如何对待本课程"></a>如何对待本课程</h3><p>在这些年里我上过的所有课程中，对我影响最深刻的课程内容是那些我花了相当长时间来学习的课程。这些年来，我确实做过很多关于特定编程语言或框架的教程，但我总是匆忙地学完后几天就忘得一干二净。每天复习和练习才能帮助你保持对课程知识的记忆。因此，我建议将课程时间安排在几周内，而不是在一个周末内完成，每天花一两个小时学习是很好的。</p><p>一定要做好自己的笔记，并考虑制作单词卡，尽量避免简单地复制粘贴课程材料。根据你学到的知识做笔记会让你记得更牢固。做笔记真的是个人喜好的事情，但就我个人而言，我用 Obsidian 做笔记，用 Anki 制作单词卡。Anki 对于确保你想要学习的信息得以保留非常有用，如果你之前没有使用过，我建议你试试。如果你想了解更多关于 Anki 的信息，你可以在这里阅读更多关于它是什么以及如何使用的内容 <a href="https://docs.ankiweb.net/background.html%E3%80%82">https://docs.ankiweb.net/background.html。</a></p><h3 id="练习格式"><a href="#练习格式" class="headerlink" title="练习格式"></a>练习格式</h3><p>在整个课程中，每节课后都会有练习。通常会有一种或多种类别的练习，具体取决于课程内容：</p><ul><li>反思性练习，要求您反思您可能之前完成的工作</li><li>要求您执行适用于上一课的任务的一般练习（尽管少数与您可能已经执行过的先前工作有关）</li><li>超越练习将涉及更深入的任务或目标，有时会涉及到报告写作课程范围之外的主题 - 您需要自学并在这些领域学习</li></ul><p>对于反思练习，请对自己诚实，并花费足够的时间进行工作。通过执行这些练习，您将学到最多。如果您可以收集您最近创建或参与的一些报告 - 这些报告将需要用于课程中的某些练习。</p><h3 id="示例报告"><a href="#示例报告" class="headerlink" title="示例报告"></a>示例报告</h3><p>如果您想了解渗透测试报告是什么样子，GitHub 上有一个存储库，收集了公开提供的报告。如果您对报告撰写还很陌生，并且没有太多经验，浏览其中一些报告可以让您深入了解如何呈现报告发现的多种方式。</p><p>这是链接: <a href="https://github.com/juliocesarfort/public-pentesting-reports/">https://github.com/juliocesarfort/public-pentesting-reports/</a></p><p>如果您没有访问您编制的任何先前报告的权限，您可以选择其中一些进行反思练习。即使您没有编写它们，分析他人的工作也是有价值的练习。通过推荐这一点，我并不是贬低任何供应商的工作；相反，我建议一个有用的材料来源，用于练习自我批评和学习审查他人的工作。</p><h3 id="人工智能的使用"><a href="#人工智能的使用" class="headerlink" title="人工智能的使用"></a>人工智能的使用</h3><p>有些人可能会尝试使用人工智能来为本课程中的练习生成内容。我会在课程的后期讨论人工智能及其在这一过程中的位置，但我在这里的首要建议是 - 如果您希望正确学习这门手艺，请避免在完成本课程期间使用人工智能。</p><hr><p>说了这么多，让我们开始工作吧！</p>]]></content>
    
    
    
    <tags>
      
      <tag>报告编写的艺术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>my-first-blog</title>
    <link href="/2024/05/08/my-first-blog/"/>
    <url>/2024/05/08/my-first-blog/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/05/08/hello-world/"/>
    <url>/2024/05/08/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
