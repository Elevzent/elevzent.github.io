---
title: 报告编写的艺术-6 报告交付  
date: 2024-05-09 01:11:10  
tags: 报告编写的艺术  
---
  
# 0-章节（报告交付）介绍

完成评估后，下一步是将报告发送给客户。如果您已经是一名测试人员，那么您可能已经拥有向客户交付报告的明确方法，并且可能知道这个关键过程的注意事项。如果是这种情况，本章可能只是您的复习。

让我们开始吧。

# 1-安全存储，安全交付

一旦报告完成，它就是一份高度敏感的文件。其中包含影响客户软件、系统或组织的漏洞列表。因此，无论存放在何处，都必须保护其内容。

除此之外，您还应该确保文档不能轻易修改，并且能够发现它是否被修改。这是为了确保您创建的内容保持预期，保持评估结果准确且不变。

让我们来看看保护这些文档的机密性和完整性的基本方法。

# 文档完整性

## 文档格式

报告应以不易编辑的格式呈现。这几乎不可能完全避免，但可以采取措施使其更难，并在确实发生时使其可检测到。

最常用的报告文档格式是 PDF 文件。虽然 PDF 可以修改，但使用付费软件（或不可信的免费在线工具）可能会降低编辑文档的吸引力。它们具有高度的可移植性，使其成为共享报告文档的好方法。我见过使用的其他格式，从Microsoft Word的DOCX格式到简单的文本文件。但是，很明显，PDF文件是业内最受欢迎的。

## 校验

在交付文档之前，生成校验和可能很有用。校验和是一种数学算法，应用于文件或其他数据以产生唯一的哈希值（与密码哈希的工作方式相同）。在将报告发送给客户之前生成报告的校验和（然后与客户共享这些报告）可确保所有各方都有办法检查文档是否已被修改。

下面是使用某些 Linux 命令行实用程序执行报告文档的 SHA-256 和 SHA-512 校验和的示例（在撰写本文时，这些选项中的任何一个对于文件校验和都是安全的）：

```
$ sha256sum report.pdf > report.sha256
$ sha512sum report.pdf > report.sha512
```

以下是每个文件中的内容：

```
$ cat report.sha256
93883c7fb1cdb2fdeaa87962a5bc46d631d2e58e5767a8ee72a2c4d5dee81e09  report.pdf

$ cat report.sha512
dd2c4942e21f7bdef2b01097ef6392cfe34306a40f11a36a3d9ccb4aac3433c874d57fa9eb89015595e5f9844c0840d30d518b8711aacf84f606e52c8d89e8c1  report.pdf
```

report.sha256 和 report.sha512 文件（或文件中的哈希值）可用于验证文件是否已更改。您可以使用与以前相同的工具，将创建的文件用作参数来验证文件的校验和（假设它们位于当前工作目录中）：

```
$ sha512sum -c report.sha512
report.pdf: OK


$ sha256sum -c report.sha256
report.pdf: OK
```

如果我修改报告文件并重新运行校验和，它将失败：

```
$ head /dev/urandom > report.pdf                                                                        
$ sha256sum -c report.sha256   
report.pdf: FAILED
sha256sum: WARNING: 1 computed checksum did NOT match


$ sha512sum -c report.sha512   
report.pdf: FAILED
sha512sum: WARNING: 1 computed checksum did NOT match
```

## 数字签名

另一种选择可能是对报告文档进行数字签名。我个人没有这方面的经验，但以加密方式签署 PDF 文件似乎是可能的。这将涵盖完整性，并向客户提供报告的真实性。

我将留给读者来调查这个过程的可能性，以及它是否对他们来说可行。我自己的想法是，除非报告系统可以在报告文档创建期间嵌入此签名，否则对于大型团队来说，这可能不能很好地扩展。

## 文档加密

现在，许多文档格式都可以使用密码轻松加密，从而提供了额外的安全层。如果发生未经授权的访问，入侵者将需要密码才能打开文档。但是，为了增强安全性，建议避免对文档使用共享密码;相反，每个报告都应具有唯一的密码。密码必须很强，因为通过破解工具恢复密码是可行的。此外，必须使用安全方法进行密码传递。为确保密码不被泄露，不应通过电子邮件发送密码，而应通过带外方法（如短信）发送密码，但应注意，短信并非完全安全且容易受到某些攻击。如果客户端正在使用 Signal，则可以将其用作发送密码的安全方法。

与数字签名一样，在大型团队中扩展这种方法可能会带来挑战，尤其是在文档存储方面。

# 文档安全

文档安全方面的主要目标是保护文档不被破坏系统的攻击者访问，并限制他们在破坏特定测试仪时可能获得的访问爆炸半径。

鉴于存储和交付可能发生的多种方式，我只能与某些特定领域交谈。你很可能会有一个过程，其中包含我将要经历的一个或多个领域。

## 存储

生成报告后，您可能希望在评估后将其存储一段时间。这样，如果客户端请求它，它可以再次分发，或者它可以与修正验证或未来的工作结合使用。

在存储方面，以下是您在保护文档时可能需要考虑的一些事项：

- 将文档存储在控制访问的内部系统上
  - 只有测试团队中的员工才能访问
  - 对文件的访问应在一段时间后受到限制，并且只有在有人需要进一步访问时才解锁
  - 在评估小组之外或在文件被锁定后访问文件必须出于特定原因提出请求，并且必须得到适当的经理或指定机构的授权
  - 所有访问，包括解锁请求（成功和失败），都应跟踪并存储在中央系统中
- 如果创建了文档的任何校验和，则这些校验和应与报告一起存储
- 确保底层存储系统已启用加密
  - 磁盘和文件系统级别
- 可以考虑加密存储的文件，尽管如前所述，以安全的方式在大型团队中扩展它可能存在问题

这种类型的方法提供了一个强大的解决方案，该解决方案：

- 限制有权访问文档的人数
- 仅在有限的时间内提供对报告文档的访问权限
- 对其他人的额外访问权限或在锁定后需要签字
- 生成可用于检测可疑活动的日志

请注意，这些只是建议，上述任何一项的实施都取决于您进行测试和适当的安全。

值得注意的是，在现阶段，除报告外产生的任何测试抵押品也应保留。这不应包括客户的知识产权（例如源代码、内部文档等），而是来自工具的详细输出，如果客户发生争议，这些工具可以作为证据，或帮助补救验证。

一些例子是：

- 来自漏洞扫描程序的完整报告
- 端口扫描仪的完整输出
- 云扫描工具的完整输出或报告
- 来自代码审查工具的静态分析结果（假设批量代码未缓存在结果中）
- Burp Suite（或您用于代理流量的任何工具）日志

这些内容通常被压缩并与报告一起上传。

## 交付

一旦文件最终确定，就需要考虑如何安全地到达客户手中。客户可以规定他们希望如何获取或接收文件，如果这不安全，我们必须引导他们朝着正确的方向前进并解释原因。

报告不应通过电子邮件发送。如果用户的帐户（或基础邮件服务器）遭到入侵，攻击者将有权访问该文档。任何敏感文档都是如此，因此，我们不应该允许电子邮件服务器成为存储系统。

这里的替代方案是使用 PGP（Pretty Good Privacy）/ GPG（GNU Privacy Guard）或在报告文档上设置强密码并将密码带外发送给客户端（通过非电子邮件、Signal 或短信（如果不可用）的媒介发送）。但是，PGP/GPG 似乎并不常被大多数客户使用，并且有比通过电子邮件发送密码加密报告更安全的共享文档的方法。

更好的做法是使用一个系统，在该系统中，客户端已获得一组特定于评估的凭据，其中包含报告，并且可通过加密连接下载。

与报表存储一样，有一些注意事项：

- 理想情况下，只邀请需要访问的客户端人员
- 评估小组也是如此
- 如果客户端本身受到威胁，使用密码加密报告文档可以增加深度防御
- 只有团队中的指定人员才能添加用户
- 审核此系统中的所有操作：
  - 文档上传、下载、删除
  - 登录尝试（成功和不成功）
  - 访问控制的任何更改
- 如果可能，请使用多重身份验证 （MFA）
- 对特定于评估的文件的访问应有时间限制

同样，这种方法有一些关键的好处

- 限制有权访问文档的人数
- 仅在有限的时间内提供对报告文档的访问权限
- 只有您具有访问控制权限
- 生成可用于检测可疑活动的日志

同样，这些都是建议，上述任何一项的实施都取决于您，以确保其适当安全。

## 评估后清理

如上所述，在评估结束时清除不再需要的任何客户数据非常重要。一般来说，这仅限于为了完成评估而可能与您共享的知识产权，例如源代码或内部文档。

值得注意的是，如果您预见到将进行修正验证，从而有利于使用原始源代码或文档进行比较，则可以获得客户端的保留许可。如果他们不希望您这样做，您可以指示客户代表您保留这些文件和文档。

在评估期间可能需要清理的其他事项包括从客户端系统中删除已创建的文件、帐户或其他数据。

## 课程总结

在这里，我们介绍了在我们自己的系统上保护报告文档的重要性，以及确保客户有安全方式获取其文档的原因。安全处理报告文档是测试生命周期的关键部分，我们有责任通过保护详细说明其漏洞的文档来保护客户的系统。

# 2-安全存储，安全交付 - 练习

在上一课中，我们讨论了如何防止和实施防止文档修改的保护措施，以及如何安全地存储文档并将其传输给客户。正如本课中提到的，您可能在这里有自己的流程，但希望其中一些流程很有趣，或者提供了更安全地执行文档存储或交付的想法。

这里有几个练习。

**反思练习**

反思您当前在报告处理方面的做法。在文档安全性和完整性方面，是否有任何可以改进的地方？

**一般练习**

- 如果您以前没有这样做过，请在 Linux 中测试 sha256 或 sha512 校验和工具。还有哪些其他选择？您可以将这些作为报告交付过程的一部分吗？
- 探索对报告文档进行数字签名的选项。你能利用这一点吗，对你更广泛的团队来说是否可行？
  - 为此要警惕第三方工具！不要将您的报告上传到一些随机的第三方让他们签名！

# 3-查找电子表格

在本课程中，我已经提到过几次，但对客户来说，以电子表格样式格式获得报告结果的副本会非常有帮助。

将问题放入电子表格中可以更轻松地对问题进行排序、过滤和跟踪。除此之外，它们还可以以允许它们导入其他系统的方式进一步导出。我见过很多系统会以 CSV 或 XLSX 格式（例如 JIRA）摄取数据。

这让人想起我先前的讨论，即需要确保问题的可移植性，并且每个问题都可以孤立地理解，与报告的其他部分分开。如前所述，这是通过在问题中放置足够的上下文描述、影响和建议来实现的。

让我们快速浏览一下要在文档中捕获的关键数据。

# 电子表格字段

理想情况下，你希望捕获给定问题中的所有信息，并可能在电子表格中包含一些评估元数据。下面是如果对本课程中解释的发现使用类似结构（以及明显的描述）时可能拥有的列列表：

- **查找 ID** - 评估查找结果的唯一代码或编号。
- **风险评级** - 对调查结果的评级。例如，严重、高、中或低。
- **标题** - 结果的标题。
- **描述** - 对发现的描述，其中应包括有关错误是什么、为什么不好及其潜在影响的所有信息。还应包括可利用性和存在的任何缓解措施。
  - **影响** - 如果在结果的单独部分中跟踪影响，您可能希望将其导出为单独的列。
- **建议** - 有关如何修复结果以及在何处搜索其他实例的信息。还应提出预防性建议。
- **位置或区域** - 有关发现结果的位置的信息。
- **参考文献** - 与调查结果或建议相关的 URL 或其他阅读材料的任何引用。
- **其他问题元数据** - 如果您有一个报告系统来跟踪结果的不同类型的元数据，则导出中应存在这些元数据。这些可以是不同类型发现的自定义类别、用于描述高级别影响或可利用性的陈述，或者可能是 CVSS 评分信息。
- **评估元数据** - 使用特定列通过其自己的唯一标识符或名称来表示评估可能会有所帮助。如果客户端将多个评估导入到单独的系统中，或者正在跟踪主数据表中的所有测试，这将很有帮助。

电子表格的目标实际上是将所有查找信息捕获到一张工作表中。但是，您可能还希望将评估中的其他数据导出或创建到单独的工作表（例如执行摘要和评估建议）中，或者创建图表和图形以补充结果。

# 生成、审查和交付

当您从典型文档中获取信息并尝试将其放入电子表格的单元格中时，很可能会丢失一些格式和图像。无论您是能够自动生成电子表格还是必须手动生成电子表格，最好在插入后整理文本。请记住，这是给客户的可交付成果。这意味着它应该以与你的报告可交付成果相同的专业水平和审查来对待。这意味着格式应正确，从主要报告文件导出的文本的任何重新措辞都应经过审查，然后进行同行评审，并且应安全地存储和交付文件。请记住，鉴于其内容，与主报告文档的安全性和存储规则相同。

# 课程总结

这是一个关于调查结果的关键信息的简单教训，应该提取这些信息并将其放入查找电子表格中，以便在需要时交付给客户。我们还讨论了审查任何创建或生成的电子表格的重要性，以确保它们与我们的主要报告具有同等的审查水平，并确保它们被安全地存储和交付给客户。

# 4-查找电子表格 - 练习

上一课是查找电子表格的快速概述，这是许多客户要求的。

以下是一些涵盖此主题的练习。

**反思练习**

查看您过去为客户创建的电子表格，其中包含安全检测结果列表。

- 导出了哪些字段，电子表格的格式如何？你觉得缺少任何信息吗？如果是这样，什么？
- 审查调查结果和文本 - 没有报告，这些问题有意义吗？如果没有，还缺少什么？

**一般练习**

使用前几章中编写的问题，根据上一课中提到的字段创建电子表格。确保捕获问题中存在的所有关键信息。

**超越练习**

如果您没有适当的工具，请探索可以使用哪些工具或脚本来自动从报告文档生成电子表格。如果可以，请尝试创建一个基本脚本，用于从报表模板中提取数据并填充电子表格。

# 5-本章小结

这是一个非常简短的章节，介绍了安全处理报告的方法，并简要提到了查找电子表格。

以下是一些关键要点：

- 应采取措施确保报告文件不能轻易修改。这可以通过使用防止琐碎编辑和最终文档校验和的文件类型来完成。
  - 还可以在此处采取其他可能有帮助的步骤，例如签署文档或加密文档。
- 报告文件应安全存储，并且只能由直接测试团队访问文件，并且只能在评估后的设定时间内访问。应将适当的审核和日志记录应用于存储文档的系统。还应执行静态加密。
- 查找电子表格通常是从客户那里请求的，可用于轻松排序、过滤和操作查找数据。
  - 它们还可用于更轻松地将数据导入其他系统。
- 查找电子表格在质量方面应与报告对应物进行相同级别的审查，并在存储和交付过程中安全处理。

始终确保对为客户生成的文档进行格外小心的处理。此外，任何辅助文档（例如查找电子表格）都应以相同的安全级别对待，并以与主要报告文档相同的审查级别进行审查。